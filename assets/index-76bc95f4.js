(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function GI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var k2={exports:{}},Dc={},M2={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tu=Symbol.for("react.element"),KI=Symbol.for("react.portal"),XI=Symbol.for("react.fragment"),qI=Symbol.for("react.strict_mode"),YI=Symbol.for("react.profiler"),QI=Symbol.for("react.provider"),ZI=Symbol.for("react.context"),JI=Symbol.for("react.forward_ref"),eT=Symbol.for("react.suspense"),tT=Symbol.for("react.memo"),rT=Symbol.for("react.lazy"),Vg=Symbol.iterator;function nT(t){return t===null||typeof t!="object"?null:(t=Vg&&t[Vg]||t["@@iterator"],typeof t=="function"?t:null)}var L2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F2=Object.assign,B2={};function ds(t,e,r){this.props=t,this.context=e,this.refs=B2,this.updater=r||L2}ds.prototype.isReactComponent={};ds.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ds.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V2(){}V2.prototype=ds.prototype;function D0(t,e,r){this.props=t,this.context=e,this.refs=B2,this.updater=r||L2}var k0=D0.prototype=new V2;k0.constructor=D0;F2(k0,ds.prototype);k0.isPureReactComponent=!0;var Ug=Array.isArray,U2=Object.prototype.hasOwnProperty,M0={current:null},j2={key:!0,ref:!0,__self:!0,__source:!0};function z2(t,e,r){var n,i={},o=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)U2.call(e,n)&&!j2.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:tu,type:t,key:o,ref:s,props:i,_owner:M0.current}}function iT(t,e){return{$$typeof:tu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function L0(t){return typeof t=="object"&&t!==null&&t.$$typeof===tu}function oT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var jg=/\/+/g;function Xf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?oT(""+t.key):e.toString(36)}function dl(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case tu:case KI:s=!0}}if(s)return s=t,i=i(s),t=n===""?"."+Xf(s,0):n,Ug(i)?(r="",t!=null&&(r=t.replace(jg,"$&/")+"/"),dl(i,e,r,"",function(l){return l})):i!=null&&(L0(i)&&(i=iT(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(jg,"$&/")+"/")+t)),e.push(i)),1;if(s=0,n=n===""?".":n+":",Ug(t))for(var a=0;a<t.length;a++){o=t[a];var u=n+Xf(o,a);s+=dl(o,e,r,u,i)}else if(u=nT(t),typeof u=="function")for(t=u.call(t),a=0;!(o=t.next()).done;)o=o.value,u=n+Xf(o,a++),s+=dl(o,e,r,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Fu(t,e,r){if(t==null)return t;var n=[],i=0;return dl(t,n,"","",function(o){return e.call(r,o,i++)}),n}function sT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var er={current:null},pl={transition:null},aT={ReactCurrentDispatcher:er,ReactCurrentBatchConfig:pl,ReactCurrentOwner:M0};function $2(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Fu,forEach:function(t,e,r){Fu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Fu(t,function(){e++}),e},toArray:function(t){return Fu(t,function(e){return e})||[]},only:function(t){if(!L0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=ds;pe.Fragment=XI;pe.Profiler=YI;pe.PureComponent=D0;pe.StrictMode=qI;pe.Suspense=eT;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aT;pe.act=$2;pe.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=F2({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=M0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)U2.call(e,u)&&!j2.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];n.children=a}return{$$typeof:tu,type:t.type,key:i,ref:o,props:n,_owner:s}};pe.createContext=function(t){return t={$$typeof:ZI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QI,_context:t},t.Consumer=t};pe.createElement=z2;pe.createFactory=function(t){var e=z2.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:JI,render:t}};pe.isValidElement=L0;pe.lazy=function(t){return{$$typeof:rT,_payload:{_status:-1,_result:t},_init:sT}};pe.memo=function(t,e){return{$$typeof:tT,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=pl.transition;pl.transition={};try{t()}finally{pl.transition=e}};pe.unstable_act=$2;pe.useCallback=function(t,e){return er.current.useCallback(t,e)};pe.useContext=function(t){return er.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return er.current.useDeferredValue(t)};pe.useEffect=function(t,e){return er.current.useEffect(t,e)};pe.useId=function(){return er.current.useId()};pe.useImperativeHandle=function(t,e,r){return er.current.useImperativeHandle(t,e,r)};pe.useInsertionEffect=function(t,e){return er.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return er.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return er.current.useMemo(t,e)};pe.useReducer=function(t,e,r){return er.current.useReducer(t,e,r)};pe.useRef=function(t){return er.current.useRef(t)};pe.useState=function(t){return er.current.useState(t)};pe.useSyncExternalStore=function(t,e,r){return er.current.useSyncExternalStore(t,e,r)};pe.useTransition=function(){return er.current.useTransition()};pe.version="18.3.1";M2.exports=pe;var Z=M2.exports;const uT=GI(Z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT=Z,cT=Symbol.for("react.element"),fT=Symbol.for("react.fragment"),hT=Object.prototype.hasOwnProperty,dT=lT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pT={key:!0,ref:!0,__self:!0,__source:!0};function H2(t,e,r){var n,i={},o=null,s=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)hT.call(e,n)&&!pT.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:cT,type:t,key:o,ref:s,props:i,_owner:dT.current}}Dc.Fragment=fT;Dc.jsx=H2;Dc.jsxs=H2;k2.exports=Dc;var L=k2.exports,Xh={},W2={exports:{}},yr={},G2={exports:{}},K2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Q){var se=z.length;z.push(Q);e:for(;0<se;){var ce=se-1>>>1,me=z[ce];if(0<i(me,Q))z[ce]=Q,z[se]=me,se=ce;else break e}}function r(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var Q=z[0],se=z.pop();if(se!==Q){z[0]=se;e:for(var ce=0,me=z.length,De=me>>>1;ce<De;){var wr=2*(ce+1)-1,xr=z[wr],pn=wr+1,Kr=z[pn];if(0>i(xr,se))pn<me&&0>i(Kr,xr)?(z[ce]=Kr,z[pn]=se,ce=pn):(z[ce]=xr,z[wr]=se,ce=wr);else if(pn<me&&0>i(Kr,se))z[ce]=Kr,z[pn]=se,ce=pn;else break e}}return Q}function i(z,Q){var se=z.sortIndex-Q.sortIndex;return se!==0?se:z.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var u=[],l=[],c=1,h=null,d=3,p=!1,v=!1,w=!1,I=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var Q=r(l);Q!==null;){if(Q.callback===null)n(l);else if(Q.startTime<=z)n(l),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=r(l)}}function S(z){if(w=!1,x(z),!v)if(r(u)!==null)v=!0,oe(P);else{var Q=r(l);Q!==null&&we(S,Q.startTime-z)}}function P(z,Q){v=!1,w&&(w=!1,_(E),E=-1),p=!0;var se=d;try{for(x(Q),h=r(u);h!==null&&(!(h.expirationTime>Q)||z&&!N());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,d=h.priorityLevel;var me=ce(h.expirationTime<=Q);Q=t.unstable_now(),typeof me=="function"?h.callback=me:h===r(u)&&n(u),x(Q)}else n(u);h=r(u)}if(h!==null)var De=!0;else{var wr=r(l);wr!==null&&we(S,wr.startTime-Q),De=!1}return De}finally{h=null,d=se,p=!1}}var k=!1,A=null,E=-1,T=5,R=-1;function N(){return!(t.unstable_now()-R<T)}function D(){if(A!==null){var z=t.unstable_now();R=z;var Q=!0;try{Q=A(!0,z)}finally{Q?O():(k=!1,A=null)}}else k=!1}var O;if(typeof m=="function")O=function(){m(D)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ee=q.port2;q.port1.onmessage=D,O=function(){ee.postMessage(null)}}else O=function(){I(D,0)};function oe(z){A=z,k||(k=!0,O())}function we(z,Q){E=I(function(){z(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,oe(P))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(z){switch(d){case 1:case 2:case 3:var Q=3;break;default:Q=d}var se=d;d=Q;try{return z()}finally{d=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var se=d;d=z;try{return Q()}finally{d=se}},t.unstable_scheduleCallback=function(z,Q,se){var ce=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ce+se:ce):se=ce,z){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=se+me,z={id:c++,callback:Q,priorityLevel:z,startTime:se,expirationTime:me,sortIndex:-1},se>ce?(z.sortIndex=se,e(l,z),r(u)===null&&z===r(l)&&(w?(_(E),E=-1):w=!0,we(S,se-ce))):(z.sortIndex=me,e(u,z),v||p||(v=!0,oe(P))),z},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(z){var Q=d;return function(){var se=d;d=Q;try{return z.apply(this,arguments)}finally{d=se}}}})(K2);G2.exports=K2;var gT=G2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT=Z,mr=gT;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X2=new Set,Ca={};function ao(t,e){Qo(t,e),Qo(t+"Capture",e)}function Qo(t,e){for(Ca[t]=e,t=0;t<e.length;t++)X2.add(e[t])}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qh=Object.prototype.hasOwnProperty,mT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zg={},$g={};function yT(t){return qh.call($g,t)?!0:qh.call(zg,t)?!1:mT.test(t)?$g[t]=!0:(zg[t]=!0,!1)}function _T(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wT(t,e,r,n){if(e===null||typeof e>"u"||_T(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tr(t,e,r,n,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new tr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new tr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new tr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new tr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new tr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new tr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new tr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new tr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new tr(t,5,!1,t.toLowerCase(),null,!1,!1)});var F0=/[\-:]([a-z])/g;function B0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(F0,B0);Rt[e]=new tr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(F0,B0);Rt[e]=new tr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(F0,B0);Rt[e]=new tr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new tr(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new tr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new tr(t,1,!1,t.toLowerCase(),null,!0,!0)});function V0(t,e,r,n){var i=Rt.hasOwnProperty(e)?Rt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wT(e,r,i,n)&&(r=null),n||i===null?yT(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Fn=vT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bu=Symbol.for("react.element"),Co=Symbol.for("react.portal"),So=Symbol.for("react.fragment"),U0=Symbol.for("react.strict_mode"),Yh=Symbol.for("react.profiler"),q2=Symbol.for("react.provider"),Y2=Symbol.for("react.context"),j0=Symbol.for("react.forward_ref"),Qh=Symbol.for("react.suspense"),Zh=Symbol.for("react.suspense_list"),z0=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),Q2=Symbol.for("react.offscreen"),Hg=Symbol.iterator;function Us(t){return t===null||typeof t!="object"?null:(t=Hg&&t[Hg]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,qf;function Zs(t){if(qf===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);qf=e&&e[1]||""}return`
`+qf+t}var Yf=!1;function Qf(t,e){if(!t||Yf)return"";Yf=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=n.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=a);break}}}finally{Yf=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Zs(t):""}function xT(t){switch(t.tag){case 5:return Zs(t.type);case 16:return Zs("Lazy");case 13:return Zs("Suspense");case 19:return Zs("SuspenseList");case 0:case 2:case 15:return t=Qf(t.type,!1),t;case 11:return t=Qf(t.type.render,!1),t;case 1:return t=Qf(t.type,!0),t;default:return""}}function Jh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case So:return"Fragment";case Co:return"Portal";case Yh:return"Profiler";case U0:return"StrictMode";case Qh:return"Suspense";case Zh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Y2:return(t.displayName||"Context")+".Consumer";case q2:return(t._context.displayName||"Context")+".Provider";case j0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case z0:return e=t.displayName||null,e!==null?e:Jh(t.type)||"Memo";case Wn:e=t._payload,t=t._init;try{return Jh(t(e))}catch{}}return null}function ET(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jh(e);case 8:return e===U0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Z2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AT(t){var e=Z2(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vu(t){t._valueTracker||(t._valueTracker=AT(t))}function J2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Z2(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Bl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ed(t,e){var r=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Wg(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=vi(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function e_(t,e){e=e.checked,e!=null&&V0(t,"checked",e,!1)}function td(t,e){e_(t,e);var r=vi(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rd(t,e.type,r):e.hasOwnProperty("defaultValue")&&rd(t,e.type,vi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gg(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function rd(t,e,r){(e!=="number"||Bl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Js=Array.isArray;function jo(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+vi(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function nd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kg(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error($(92));if(Js(r)){if(1<r.length)throw Error($(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:vi(r)}}function t_(t,e){var r=vi(e.value),n=vi(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Xg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function r_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function id(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?r_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uu,n_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uu=Uu||document.createElement("div"),Uu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Sa(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ca={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IT=["Webkit","ms","Moz","O"];Object.keys(ca).forEach(function(t){IT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ca[e]=ca[t]})});function i_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ca.hasOwnProperty(t)&&ca[t]?(""+e).trim():e+"px"}function o_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=i_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var TT=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(t,e){if(e){if(TT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function sd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ad=null;function $0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ud=null,zo=null,$o=null;function qg(t){if(t=iu(t)){if(typeof ud!="function")throw Error($(280));var e=t.stateNode;e&&(e=Bc(e),ud(t.stateNode,t.type,e))}}function s_(t){zo?$o?$o.push(t):$o=[t]:zo=t}function a_(){if(zo){var t=zo,e=$o;if($o=zo=null,qg(t),e)for(t=0;t<e.length;t++)qg(e[t])}}function u_(t,e){return t(e)}function l_(){}var Zf=!1;function c_(t,e,r){if(Zf)return t(e,r);Zf=!0;try{return u_(t,e,r)}finally{Zf=!1,(zo!==null||$o!==null)&&(l_(),a_())}}function Ra(t,e){var r=t.stateNode;if(r===null)return null;var n=Bc(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error($(231,e,typeof r));return r}var ld=!1;if(Sn)try{var js={};Object.defineProperty(js,"passive",{get:function(){ld=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{ld=!1}function CT(t,e,r,n,i,o,s,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(c){this.onError(c)}}var fa=!1,Vl=null,Ul=!1,cd=null,ST={onError:function(t){fa=!0,Vl=t}};function RT(t,e,r,n,i,o,s,a,u){fa=!1,Vl=null,CT.apply(ST,arguments)}function bT(t,e,r,n,i,o,s,a,u){if(RT.apply(this,arguments),fa){if(fa){var l=Vl;fa=!1,Vl=null}else throw Error($(198));Ul||(Ul=!0,cd=l)}}function uo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function f_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yg(t){if(uo(t)!==t)throw Error($(188))}function OT(t){var e=t.alternate;if(!e){if(e=uo(t),e===null)throw Error($(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return Yg(i),t;if(o===n)return Yg(i),e;o=o.sibling}throw Error($(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,a=i.child;a;){if(a===r){s=!0,r=i,n=o;break}if(a===n){s=!0,n=i,r=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===r){s=!0,r=o,n=i;break}if(a===n){s=!0,n=o,r=i;break}a=a.sibling}if(!s)throw Error($(189))}}if(r.alternate!==n)throw Error($(190))}if(r.tag!==3)throw Error($(188));return r.stateNode.current===r?t:e}function h_(t){return t=OT(t),t!==null?d_(t):null}function d_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=d_(t);if(e!==null)return e;t=t.sibling}return null}var p_=mr.unstable_scheduleCallback,Qg=mr.unstable_cancelCallback,NT=mr.unstable_shouldYield,PT=mr.unstable_requestPaint,Ze=mr.unstable_now,DT=mr.unstable_getCurrentPriorityLevel,H0=mr.unstable_ImmediatePriority,g_=mr.unstable_UserBlockingPriority,jl=mr.unstable_NormalPriority,kT=mr.unstable_LowPriority,v_=mr.unstable_IdlePriority,kc=null,tn=null;function MT(t){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(kc,t,void 0,(t.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:BT,LT=Math.log,FT=Math.LN2;function BT(t){return t>>>=0,t===0?32:31-(LT(t)/FT|0)|0}var ju=64,zu=4194304;function ea(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zl(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,s=r&268435455;if(s!==0){var a=s&~i;a!==0?n=ea(a):(o&=s,o!==0&&(n=ea(o)))}else s=r&~i,s!==0?n=ea(s):o!==0&&(n=ea(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-zr(e),i=1<<r,n|=t[r],e&=~i;return n}function VT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UT(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-zr(o),a=1<<s,u=i[s];u===-1?(!(a&r)||a&n)&&(i[s]=VT(a,e)):u<=e&&(t.expiredLanes|=a),o&=~a}}function fd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function m_(){var t=ju;return ju<<=1,!(ju&4194240)&&(ju=64),t}function Jf(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ru(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zr(e),t[e]=r}function jT(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-zr(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}function W0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-zr(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Ne=0;function y_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var __,G0,w_,x_,E_,hd=!1,$u=[],ni=null,ii=null,oi=null,ba=new Map,Oa=new Map,Xn=[],zT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zg(t,e){switch(t){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ii=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oa.delete(e.pointerId)}}function zs(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=iu(e),e!==null&&G0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function $T(t,e,r,n,i){switch(e){case"focusin":return ni=zs(ni,t,e,r,n,i),!0;case"dragenter":return ii=zs(ii,t,e,r,n,i),!0;case"mouseover":return oi=zs(oi,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return ba.set(o,zs(ba.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Oa.set(o,zs(Oa.get(o)||null,t,e,r,n,i)),!0}return!1}function A_(t){var e=Vi(t.target);if(e!==null){var r=uo(e);if(r!==null){if(e=r.tag,e===13){if(e=f_(r),e!==null){t.blockedOn=e,E_(t.priority,function(){w_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=dd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);ad=n,r.target.dispatchEvent(n),ad=null}else return e=iu(r),e!==null&&G0(e),t.blockedOn=r,!1;e.shift()}return!0}function Jg(t,e,r){gl(t)&&r.delete(e)}function HT(){hd=!1,ni!==null&&gl(ni)&&(ni=null),ii!==null&&gl(ii)&&(ii=null),oi!==null&&gl(oi)&&(oi=null),ba.forEach(Jg),Oa.forEach(Jg)}function $s(t,e){t.blockedOn===e&&(t.blockedOn=null,hd||(hd=!0,mr.unstable_scheduleCallback(mr.unstable_NormalPriority,HT)))}function Na(t){function e(i){return $s(i,t)}if(0<$u.length){$s($u[0],t);for(var r=1;r<$u.length;r++){var n=$u[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ni!==null&&$s(ni,t),ii!==null&&$s(ii,t),oi!==null&&$s(oi,t),ba.forEach(e),Oa.forEach(e),r=0;r<Xn.length;r++)n=Xn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Xn.length&&(r=Xn[0],r.blockedOn===null);)A_(r),r.blockedOn===null&&Xn.shift()}var Ho=Fn.ReactCurrentBatchConfig,$l=!0;function WT(t,e,r,n){var i=Ne,o=Ho.transition;Ho.transition=null;try{Ne=1,K0(t,e,r,n)}finally{Ne=i,Ho.transition=o}}function GT(t,e,r,n){var i=Ne,o=Ho.transition;Ho.transition=null;try{Ne=4,K0(t,e,r,n)}finally{Ne=i,Ho.transition=o}}function K0(t,e,r,n){if($l){var i=dd(t,e,r,n);if(i===null)lh(t,e,n,Hl,r),Zg(t,n);else if($T(i,t,e,r,n))n.stopPropagation();else if(Zg(t,n),e&4&&-1<zT.indexOf(t)){for(;i!==null;){var o=iu(i);if(o!==null&&__(o),o=dd(t,e,r,n),o===null&&lh(t,e,n,Hl,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else lh(t,e,n,null,r)}}var Hl=null;function dd(t,e,r,n){if(Hl=null,t=$0(n),t=Vi(t),t!==null)if(e=uo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=f_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hl=t,null}function I_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DT()){case H0:return 1;case g_:return 4;case jl:case kT:return 16;case v_:return 536870912;default:return 16}default:return 16}}var ei=null,X0=null,vl=null;function T_(){if(vl)return vl;var t,e=X0,r=e.length,n,i="value"in ei?ei.value:ei.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[o-n];n++);return vl=i.slice(t,1<n?1-n:void 0)}function ml(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hu(){return!0}function ev(){return!1}function _r(t){function e(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Hu:ev,this.isPropagationStopped=ev,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Hu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Hu)},persist:function(){},isPersistent:Hu}),e}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},q0=_r(ps),nu=Ke({},ps,{view:0,detail:0}),KT=_r(nu),eh,th,Hs,Mc=Ke({},nu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Y0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hs&&(Hs&&t.type==="mousemove"?(eh=t.screenX-Hs.screenX,th=t.screenY-Hs.screenY):th=eh=0,Hs=t),eh)},movementY:function(t){return"movementY"in t?t.movementY:th}}),tv=_r(Mc),XT=Ke({},Mc,{dataTransfer:0}),qT=_r(XT),YT=Ke({},nu,{relatedTarget:0}),rh=_r(YT),QT=Ke({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),ZT=_r(QT),JT=Ke({},ps,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),eC=_r(JT),tC=Ke({},ps,{data:0}),rv=_r(tC),rC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=iC[t])?!!e[t]:!1}function Y0(){return oC}var sC=Ke({},nu,{key:function(t){if(t.key){var e=rC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ml(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Y0,charCode:function(t){return t.type==="keypress"?ml(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ml(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),aC=_r(sC),uC=Ke({},Mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nv=_r(uC),lC=Ke({},nu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Y0}),cC=_r(lC),fC=Ke({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),hC=_r(fC),dC=Ke({},Mc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pC=_r(dC),gC=[9,13,27,32],Q0=Sn&&"CompositionEvent"in window,ha=null;Sn&&"documentMode"in document&&(ha=document.documentMode);var vC=Sn&&"TextEvent"in window&&!ha,C_=Sn&&(!Q0||ha&&8<ha&&11>=ha),iv=String.fromCharCode(32),ov=!1;function S_(t,e){switch(t){case"keyup":return gC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ro=!1;function mC(t,e){switch(t){case"compositionend":return R_(e);case"keypress":return e.which!==32?null:(ov=!0,iv);case"textInput":return t=e.data,t===iv&&ov?null:t;default:return null}}function yC(t,e){if(Ro)return t==="compositionend"||!Q0&&S_(t,e)?(t=T_(),vl=X0=ei=null,Ro=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return C_&&e.locale!=="ko"?null:e.data;default:return null}}var _C={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_C[t.type]:e==="textarea"}function b_(t,e,r,n){s_(n),e=Wl(e,"onChange"),0<e.length&&(r=new q0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var da=null,Pa=null;function wC(t){U_(t,0)}function Lc(t){var e=No(t);if(J2(e))return t}function xC(t,e){if(t==="change")return e}var O_=!1;if(Sn){var nh;if(Sn){var ih="oninput"in document;if(!ih){var av=document.createElement("div");av.setAttribute("oninput","return;"),ih=typeof av.oninput=="function"}nh=ih}else nh=!1;O_=nh&&(!document.documentMode||9<document.documentMode)}function uv(){da&&(da.detachEvent("onpropertychange",N_),Pa=da=null)}function N_(t){if(t.propertyName==="value"&&Lc(Pa)){var e=[];b_(e,Pa,t,$0(t)),c_(wC,e)}}function EC(t,e,r){t==="focusin"?(uv(),da=e,Pa=r,da.attachEvent("onpropertychange",N_)):t==="focusout"&&uv()}function AC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lc(Pa)}function IC(t,e){if(t==="click")return Lc(e)}function TC(t,e){if(t==="input"||t==="change")return Lc(e)}function CC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hr=typeof Object.is=="function"?Object.is:CC;function Da(t,e){if(Hr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!qh.call(e,i)||!Hr(t[i],e[i]))return!1}return!0}function lv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cv(t,e){var r=lv(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lv(r)}}function P_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?P_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function D_(){for(var t=window,e=Bl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Bl(t.document)}return e}function Z0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function SC(t){var e=D_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&P_(r.ownerDocument.documentElement,r)){if(n!==null&&Z0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=cv(r,o);var s=cv(r,n);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var RC=Sn&&"documentMode"in document&&11>=document.documentMode,bo=null,pd=null,pa=null,gd=!1;function fv(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;gd||bo==null||bo!==Bl(n)||(n=bo,"selectionStart"in n&&Z0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),pa&&Da(pa,n)||(pa=n,n=Wl(pd,"onSelect"),0<n.length&&(e=new q0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=bo)))}function Wu(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Oo={animationend:Wu("Animation","AnimationEnd"),animationiteration:Wu("Animation","AnimationIteration"),animationstart:Wu("Animation","AnimationStart"),transitionend:Wu("Transition","TransitionEnd")},oh={},k_={};Sn&&(k_=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function Fc(t){if(oh[t])return oh[t];if(!Oo[t])return t;var e=Oo[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in k_)return oh[t]=e[r];return t}var M_=Fc("animationend"),L_=Fc("animationiteration"),F_=Fc("animationstart"),B_=Fc("transitionend"),V_=new Map,hv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(t,e){V_.set(t,e),ao(e,[t])}for(var sh=0;sh<hv.length;sh++){var ah=hv[sh],bC=ah.toLowerCase(),OC=ah[0].toUpperCase()+ah.slice(1);Ii(bC,"on"+OC)}Ii(M_,"onAnimationEnd");Ii(L_,"onAnimationIteration");Ii(F_,"onAnimationStart");Ii("dblclick","onDoubleClick");Ii("focusin","onFocus");Ii("focusout","onBlur");Ii(B_,"onTransitionEnd");Qo("onMouseEnter",["mouseout","mouseover"]);Qo("onMouseLeave",["mouseout","mouseover"]);Qo("onPointerEnter",["pointerout","pointerover"]);Qo("onPointerLeave",["pointerout","pointerover"]);ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NC=new Set("cancel close invalid load scroll toggle".split(" ").concat(ta));function dv(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,bT(n,e,void 0,t),t.currentTarget=null}function U_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==o&&i.isPropagationStopped())break e;dv(i,a,l),o=u}else for(s=0;s<n.length;s++){if(a=n[s],u=a.instance,l=a.currentTarget,a=a.listener,u!==o&&i.isPropagationStopped())break e;dv(i,a,l),o=u}}}if(Ul)throw t=cd,Ul=!1,cd=null,t}function Be(t,e){var r=e[wd];r===void 0&&(r=e[wd]=new Set);var n=t+"__bubble";r.has(n)||(j_(e,t,2,!1),r.add(n))}function uh(t,e,r){var n=0;e&&(n|=4),j_(r,t,n,e)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function ka(t){if(!t[Gu]){t[Gu]=!0,X2.forEach(function(r){r!=="selectionchange"&&(NC.has(r)||uh(r,!1,t),uh(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gu]||(e[Gu]=!0,uh("selectionchange",!1,e))}}function j_(t,e,r,n){switch(I_(e)){case 1:var i=WT;break;case 4:i=GT;break;default:i=K0}r=i.bind(null,e,r,t),i=void 0,!ld||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function lh(t,e,r,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Vi(a),s===null)return;if(u=s.tag,u===5||u===6){n=o=s;continue e}a=a.parentNode}}n=n.return}c_(function(){var l=o,c=$0(r),h=[];e:{var d=V_.get(t);if(d!==void 0){var p=q0,v=t;switch(t){case"keypress":if(ml(r)===0)break e;case"keydown":case"keyup":p=aC;break;case"focusin":v="focus",p=rh;break;case"focusout":v="blur",p=rh;break;case"beforeblur":case"afterblur":p=rh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=tv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=qT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=cC;break;case M_:case L_:case F_:p=ZT;break;case B_:p=hC;break;case"scroll":p=KT;break;case"wheel":p=pC;break;case"copy":case"cut":case"paste":p=eC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=nv}var w=(e&4)!==0,I=!w&&t==="scroll",_=w?d!==null?d+"Capture":null:d;w=[];for(var m=l,x;m!==null;){x=m;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,_!==null&&(S=Ra(m,_),S!=null&&w.push(Ma(m,S,x)))),I)break;m=m.return}0<w.length&&(d=new p(d,v,null,r,c),h.push({event:d,listeners:w}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&r!==ad&&(v=r.relatedTarget||r.fromElement)&&(Vi(v)||v[Rn]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=l,v=v?Vi(v):null,v!==null&&(I=uo(v),v!==I||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=l),p!==v)){if(w=tv,S="onMouseLeave",_="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(w=nv,S="onPointerLeave",_="onPointerEnter",m="pointer"),I=p==null?d:No(p),x=v==null?d:No(v),d=new w(S,m+"leave",p,r,c),d.target=I,d.relatedTarget=x,S=null,Vi(c)===l&&(w=new w(_,m+"enter",v,r,c),w.target=x,w.relatedTarget=I,S=w),I=S,p&&v)t:{for(w=p,_=v,m=0,x=w;x;x=mo(x))m++;for(x=0,S=_;S;S=mo(S))x++;for(;0<m-x;)w=mo(w),m--;for(;0<x-m;)_=mo(_),x--;for(;m--;){if(w===_||_!==null&&w===_.alternate)break t;w=mo(w),_=mo(_)}w=null}else w=null;p!==null&&pv(h,d,p,w,!1),v!==null&&I!==null&&pv(h,I,v,w,!0)}}e:{if(d=l?No(l):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var P=xC;else if(sv(d))if(O_)P=TC;else{P=AC;var k=EC}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(P=IC);if(P&&(P=P(t,l))){b_(h,P,r,c);break e}k&&k(t,d,l),t==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&rd(d,"number",d.value)}switch(k=l?No(l):window,t){case"focusin":(sv(k)||k.contentEditable==="true")&&(bo=k,pd=l,pa=null);break;case"focusout":pa=pd=bo=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,fv(h,r,c);break;case"selectionchange":if(RC)break;case"keydown":case"keyup":fv(h,r,c)}var A;if(Q0)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ro?S_(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(C_&&r.locale!=="ko"&&(Ro||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ro&&(A=T_()):(ei=c,X0="value"in ei?ei.value:ei.textContent,Ro=!0)),k=Wl(l,E),0<k.length&&(E=new rv(E,t,null,r,c),h.push({event:E,listeners:k}),A?E.data=A:(A=R_(r),A!==null&&(E.data=A)))),(A=vC?mC(t,r):yC(t,r))&&(l=Wl(l,"onBeforeInput"),0<l.length&&(c=new rv("onBeforeInput","beforeinput",null,r,c),h.push({event:c,listeners:l}),c.data=A))}U_(h,e)})}function Ma(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Wl(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ra(t,r),o!=null&&n.unshift(Ma(t,o,i)),o=Ra(t,e),o!=null&&n.push(Ma(t,o,i))),t=t.return}return n}function mo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pv(t,e,r,n,i){for(var o=e._reactName,s=[];r!==null&&r!==n;){var a=r,u=a.alternate,l=a.stateNode;if(u!==null&&u===n)break;a.tag===5&&l!==null&&(a=l,i?(u=Ra(r,o),u!=null&&s.unshift(Ma(r,u,a))):i||(u=Ra(r,o),u!=null&&s.push(Ma(r,u,a)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var PC=/\r\n?/g,DC=/\u0000|\uFFFD/g;function gv(t){return(typeof t=="string"?t:""+t).replace(PC,`
`).replace(DC,"")}function Ku(t,e,r){if(e=gv(e),gv(t)!==e&&r)throw Error($(425))}function Gl(){}var vd=null,md=null;function yd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _d=typeof setTimeout=="function"?setTimeout:void 0,kC=typeof clearTimeout=="function"?clearTimeout:void 0,vv=typeof Promise=="function"?Promise:void 0,MC=typeof queueMicrotask=="function"?queueMicrotask:typeof vv<"u"?function(t){return vv.resolve(null).then(t).catch(LC)}:_d;function LC(t){setTimeout(function(){throw t})}function ch(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Na(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Na(e)}function si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var gs=Math.random().toString(36).slice(2),Qr="__reactFiber$"+gs,La="__reactProps$"+gs,Rn="__reactContainer$"+gs,wd="__reactEvents$"+gs,FC="__reactListeners$"+gs,BC="__reactHandles$"+gs;function Vi(t){var e=t[Qr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Rn]||r[Qr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=mv(t);t!==null;){if(r=t[Qr])return r;t=mv(t)}return e}t=r,r=t.parentNode}return null}function iu(t){return t=t[Qr]||t[Rn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function No(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Bc(t){return t[La]||null}var xd=[],Po=-1;function Ti(t){return{current:t}}function ze(t){0>Po||(t.current=xd[Po],xd[Po]=null,Po--)}function Me(t,e){Po++,xd[Po]=t.current,t.current=e}var mi={},Ut=Ti(mi),ur=Ti(!1),Yi=mi;function Zo(t,e){var r=t.type.contextTypes;if(!r)return mi;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function lr(t){return t=t.childContextTypes,t!=null}function Kl(){ze(ur),ze(Ut)}function yv(t,e,r){if(Ut.current!==mi)throw Error($(168));Me(Ut,e),Me(ur,r)}function z_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error($(108,ET(t)||"Unknown",i));return Ke({},r,n)}function Xl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mi,Yi=Ut.current,Me(Ut,t),Me(ur,ur.current),!0}function _v(t,e,r){var n=t.stateNode;if(!n)throw Error($(169));r?(t=z_(t,e,Yi),n.__reactInternalMemoizedMergedChildContext=t,ze(ur),ze(Ut),Me(Ut,t)):ze(ur),Me(ur,r)}var _n=null,Vc=!1,fh=!1;function $_(t){_n===null?_n=[t]:_n.push(t)}function VC(t){Vc=!0,$_(t)}function Ci(){if(!fh&&_n!==null){fh=!0;var t=0,e=Ne;try{var r=_n;for(Ne=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}_n=null,Vc=!1}catch(i){throw _n!==null&&(_n=_n.slice(t+1)),p_(H0,Ci),i}finally{Ne=e,fh=!1}}return null}var Do=[],ko=0,ql=null,Yl=0,Ar=[],Ir=0,Qi=null,wn=1,xn="";function Mi(t,e){Do[ko++]=Yl,Do[ko++]=ql,ql=t,Yl=e}function H_(t,e,r){Ar[Ir++]=wn,Ar[Ir++]=xn,Ar[Ir++]=Qi,Qi=t;var n=wn;t=xn;var i=32-zr(n)-1;n&=~(1<<i),r+=1;var o=32-zr(e)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,wn=1<<32-zr(e)+i|r<<i|n,xn=o+t}else wn=1<<o|r<<i|n,xn=t}function J0(t){t.return!==null&&(Mi(t,1),H_(t,1,0))}function e1(t){for(;t===ql;)ql=Do[--ko],Do[ko]=null,Yl=Do[--ko],Do[ko]=null;for(;t===Qi;)Qi=Ar[--Ir],Ar[Ir]=null,xn=Ar[--Ir],Ar[Ir]=null,wn=Ar[--Ir],Ar[Ir]=null}var vr=null,pr=null,$e=!1,Br=null;function W_(t,e){var r=Tr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function wv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vr=t,pr=si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vr=t,pr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Qi!==null?{id:wn,overflow:xn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Tr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,vr=t,pr=null,!0):!1;default:return!1}}function Ed(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ad(t){if($e){var e=pr;if(e){var r=e;if(!wv(t,e)){if(Ed(t))throw Error($(418));e=si(r.nextSibling);var n=vr;e&&wv(t,e)?W_(n,r):(t.flags=t.flags&-4097|2,$e=!1,vr=t)}}else{if(Ed(t))throw Error($(418));t.flags=t.flags&-4097|2,$e=!1,vr=t}}}function xv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vr=t}function Xu(t){if(t!==vr)return!1;if(!$e)return xv(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yd(t.type,t.memoizedProps)),e&&(e=pr)){if(Ed(t))throw G_(),Error($(418));for(;e;)W_(t,e),e=si(e.nextSibling)}if(xv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){pr=si(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}pr=null}}else pr=vr?si(t.stateNode.nextSibling):null;return!0}function G_(){for(var t=pr;t;)t=si(t.nextSibling)}function Jo(){pr=vr=null,$e=!1}function t1(t){Br===null?Br=[t]:Br.push(t)}var UC=Fn.ReactCurrentBatchConfig;function Ws(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error($(309));var n=r.stateNode}if(!n)throw Error($(147,t));var i=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error($(284));if(!r._owner)throw Error($(290,t))}return t}function qu(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ev(t){var e=t._init;return e(t._payload)}function K_(t){function e(_,m){if(t){var x=_.deletions;x===null?(_.deletions=[m],_.flags|=16):x.push(m)}}function r(_,m){if(!t)return null;for(;m!==null;)e(_,m),m=m.sibling;return null}function n(_,m){for(_=new Map;m!==null;)m.key!==null?_.set(m.key,m):_.set(m.index,m),m=m.sibling;return _}function i(_,m){return _=ci(_,m),_.index=0,_.sibling=null,_}function o(_,m,x){return _.index=x,t?(x=_.alternate,x!==null?(x=x.index,x<m?(_.flags|=2,m):x):(_.flags|=2,m)):(_.flags|=1048576,m)}function s(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,m,x,S){return m===null||m.tag!==6?(m=yh(x,_.mode,S),m.return=_,m):(m=i(m,x),m.return=_,m)}function u(_,m,x,S){var P=x.type;return P===So?c(_,m,x.props.children,S,x.key):m!==null&&(m.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Wn&&Ev(P)===m.type)?(S=i(m,x.props),S.ref=Ws(_,m,x),S.return=_,S):(S=Il(x.type,x.key,x.props,null,_.mode,S),S.ref=Ws(_,m,x),S.return=_,S)}function l(_,m,x,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==x.containerInfo||m.stateNode.implementation!==x.implementation?(m=_h(x,_.mode,S),m.return=_,m):(m=i(m,x.children||[]),m.return=_,m)}function c(_,m,x,S,P){return m===null||m.tag!==7?(m=Gi(x,_.mode,S,P),m.return=_,m):(m=i(m,x),m.return=_,m)}function h(_,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return m=yh(""+m,_.mode,x),m.return=_,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Bu:return x=Il(m.type,m.key,m.props,null,_.mode,x),x.ref=Ws(_,null,m),x.return=_,x;case Co:return m=_h(m,_.mode,x),m.return=_,m;case Wn:var S=m._init;return h(_,S(m._payload),x)}if(Js(m)||Us(m))return m=Gi(m,_.mode,x,null),m.return=_,m;qu(_,m)}return null}function d(_,m,x,S){var P=m!==null?m.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return P!==null?null:a(_,m,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Bu:return x.key===P?u(_,m,x,S):null;case Co:return x.key===P?l(_,m,x,S):null;case Wn:return P=x._init,d(_,m,P(x._payload),S)}if(Js(x)||Us(x))return P!==null?null:c(_,m,x,S,null);qu(_,x)}return null}function p(_,m,x,S,P){if(typeof S=="string"&&S!==""||typeof S=="number")return _=_.get(x)||null,a(m,_,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Bu:return _=_.get(S.key===null?x:S.key)||null,u(m,_,S,P);case Co:return _=_.get(S.key===null?x:S.key)||null,l(m,_,S,P);case Wn:var k=S._init;return p(_,m,x,k(S._payload),P)}if(Js(S)||Us(S))return _=_.get(x)||null,c(m,_,S,P,null);qu(m,S)}return null}function v(_,m,x,S){for(var P=null,k=null,A=m,E=m=0,T=null;A!==null&&E<x.length;E++){A.index>E?(T=A,A=null):T=A.sibling;var R=d(_,A,x[E],S);if(R===null){A===null&&(A=T);break}t&&A&&R.alternate===null&&e(_,A),m=o(R,m,E),k===null?P=R:k.sibling=R,k=R,A=T}if(E===x.length)return r(_,A),$e&&Mi(_,E),P;if(A===null){for(;E<x.length;E++)A=h(_,x[E],S),A!==null&&(m=o(A,m,E),k===null?P=A:k.sibling=A,k=A);return $e&&Mi(_,E),P}for(A=n(_,A);E<x.length;E++)T=p(A,_,E,x[E],S),T!==null&&(t&&T.alternate!==null&&A.delete(T.key===null?E:T.key),m=o(T,m,E),k===null?P=T:k.sibling=T,k=T);return t&&A.forEach(function(N){return e(_,N)}),$e&&Mi(_,E),P}function w(_,m,x,S){var P=Us(x);if(typeof P!="function")throw Error($(150));if(x=P.call(x),x==null)throw Error($(151));for(var k=P=null,A=m,E=m=0,T=null,R=x.next();A!==null&&!R.done;E++,R=x.next()){A.index>E?(T=A,A=null):T=A.sibling;var N=d(_,A,R.value,S);if(N===null){A===null&&(A=T);break}t&&A&&N.alternate===null&&e(_,A),m=o(N,m,E),k===null?P=N:k.sibling=N,k=N,A=T}if(R.done)return r(_,A),$e&&Mi(_,E),P;if(A===null){for(;!R.done;E++,R=x.next())R=h(_,R.value,S),R!==null&&(m=o(R,m,E),k===null?P=R:k.sibling=R,k=R);return $e&&Mi(_,E),P}for(A=n(_,A);!R.done;E++,R=x.next())R=p(A,_,E,R.value,S),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?E:R.key),m=o(R,m,E),k===null?P=R:k.sibling=R,k=R);return t&&A.forEach(function(D){return e(_,D)}),$e&&Mi(_,E),P}function I(_,m,x,S){if(typeof x=="object"&&x!==null&&x.type===So&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Bu:e:{for(var P=x.key,k=m;k!==null;){if(k.key===P){if(P=x.type,P===So){if(k.tag===7){r(_,k.sibling),m=i(k,x.props.children),m.return=_,_=m;break e}}else if(k.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Wn&&Ev(P)===k.type){r(_,k.sibling),m=i(k,x.props),m.ref=Ws(_,k,x),m.return=_,_=m;break e}r(_,k);break}else e(_,k);k=k.sibling}x.type===So?(m=Gi(x.props.children,_.mode,S,x.key),m.return=_,_=m):(S=Il(x.type,x.key,x.props,null,_.mode,S),S.ref=Ws(_,m,x),S.return=_,_=S)}return s(_);case Co:e:{for(k=x.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===x.containerInfo&&m.stateNode.implementation===x.implementation){r(_,m.sibling),m=i(m,x.children||[]),m.return=_,_=m;break e}else{r(_,m);break}else e(_,m);m=m.sibling}m=_h(x,_.mode,S),m.return=_,_=m}return s(_);case Wn:return k=x._init,I(_,m,k(x._payload),S)}if(Js(x))return v(_,m,x,S);if(Us(x))return w(_,m,x,S);qu(_,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,m!==null&&m.tag===6?(r(_,m.sibling),m=i(m,x),m.return=_,_=m):(r(_,m),m=yh(x,_.mode,S),m.return=_,_=m),s(_)):r(_,m)}return I}var es=K_(!0),X_=K_(!1),Ql=Ti(null),Zl=null,Mo=null,r1=null;function n1(){r1=Mo=Zl=null}function i1(t){var e=Ql.current;ze(Ql),t._currentValue=e}function Id(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Wo(t,e){Zl=t,r1=Mo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ar=!0),t.firstContext=null)}function Or(t){var e=t._currentValue;if(r1!==t)if(t={context:t,memoizedValue:e,next:null},Mo===null){if(Zl===null)throw Error($(308));Mo=t,Zl.dependencies={lanes:0,firstContext:t}}else Mo=Mo.next=t;return e}var Ui=null;function o1(t){Ui===null?Ui=[t]:Ui.push(t)}function q_(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,o1(e)):(r.next=i.next,i.next=r),e.interleaved=r,bn(t,n)}function bn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Gn=!1;function s1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Y_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function In(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ai(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ee&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,bn(t,r)}return i=n.interleaved,i===null?(e.next=e,o1(n)):(e.next=i.next,i.next=e),n.interleaved=e,bn(t,r)}function yl(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,W0(t,r)}}function Av(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Jl(t,e,r,n){var i=t.updateQueue;Gn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,s===null?o=l:s.next=l,s=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(o!==null){var h=i.baseState;s=0,c=l=u=null,a=o;do{var d=a.lane,p=a.eventTime;if((n&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(d=e,p=r,w.tag){case 1:if(v=w.payload,typeof v=="function"){h=v.call(p,h,d);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,d=typeof v=="function"?v.call(p,h,d):v,d==null)break e;h=Ke({},h,d);break e;case 2:Gn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=p,u=h):c=c.next=p,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ji|=s,t.lanes=s,t.memoizedState=h}}function Iv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error($(191,i));i.call(n)}}}var ou={},rn=Ti(ou),Fa=Ti(ou),Ba=Ti(ou);function ji(t){if(t===ou)throw Error($(174));return t}function a1(t,e){switch(Me(Ba,e),Me(Fa,t),Me(rn,ou),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:id(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=id(e,t)}ze(rn),Me(rn,e)}function ts(){ze(rn),ze(Fa),ze(Ba)}function Q_(t){ji(Ba.current);var e=ji(rn.current),r=id(e,t.type);e!==r&&(Me(Fa,t),Me(rn,r))}function u1(t){Fa.current===t&&(ze(rn),ze(Fa))}var We=Ti(0);function ec(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hh=[];function l1(){for(var t=0;t<hh.length;t++)hh[t]._workInProgressVersionPrimary=null;hh.length=0}var _l=Fn.ReactCurrentDispatcher,dh=Fn.ReactCurrentBatchConfig,Zi=0,Ge=null,it=null,gt=null,tc=!1,ga=!1,Va=0,jC=0;function Dt(){throw Error($(321))}function c1(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Hr(t[r],e[r]))return!1;return!0}function f1(t,e,r,n,i,o){if(Zi=o,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_l.current=t===null||t.memoizedState===null?WC:GC,t=r(n,i),ga){o=0;do{if(ga=!1,Va=0,25<=o)throw Error($(301));o+=1,gt=it=null,e.updateQueue=null,_l.current=KC,t=r(n,i)}while(ga)}if(_l.current=rc,e=it!==null&&it.next!==null,Zi=0,gt=it=Ge=null,tc=!1,e)throw Error($(300));return t}function h1(){var t=Va!==0;return Va=0,t}function qr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Ge.memoizedState=gt=t:gt=gt.next=t,gt}function Nr(){if(it===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=gt===null?Ge.memoizedState:gt.next;if(e!==null)gt=e,it=t;else{if(t===null)throw Error($(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},gt===null?Ge.memoizedState=gt=t:gt=gt.next=t}return gt}function Ua(t,e){return typeof e=="function"?e(t):e}function ph(t){var e=Nr(),r=e.queue;if(r===null)throw Error($(311));r.lastRenderedReducer=t;var n=it,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var a=s=null,u=null,l=o;do{var c=l.lane;if((Zi&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var h={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=h,s=n):u=u.next=h,Ge.lanes|=c,Ji|=c}l=l.next}while(l!==null&&l!==o);u===null?s=n:u.next=a,Hr(n,e.memoizedState)||(ar=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do o=i.lane,Ge.lanes|=o,Ji|=o,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function gh(t){var e=Nr(),r=e.queue;if(r===null)throw Error($(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Hr(o,e.memoizedState)||(ar=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function Z_(){}function J_(t,e){var r=Ge,n=Nr(),i=e(),o=!Hr(n.memoizedState,i);if(o&&(n.memoizedState=i,ar=!0),n=n.queue,d1(rw.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||gt!==null&&gt.memoizedState.tag&1){if(r.flags|=2048,ja(9,tw.bind(null,r,n,i,e),void 0,null),yt===null)throw Error($(349));Zi&30||ew(r,e,i)}return i}function ew(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function tw(t,e,r,n){e.value=r,e.getSnapshot=n,nw(e)&&iw(t)}function rw(t,e,r){return r(function(){nw(e)&&iw(t)})}function nw(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Hr(t,r)}catch{return!0}}function iw(t){var e=bn(t,1);e!==null&&$r(e,t,1,-1)}function Tv(t){var e=qr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:t},e.queue=t,t=t.dispatch=HC.bind(null,Ge,t),[e.memoizedState,t]}function ja(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function ow(){return Nr().memoizedState}function wl(t,e,r,n){var i=qr();Ge.flags|=t,i.memoizedState=ja(1|e,r,void 0,n===void 0?null:n)}function Uc(t,e,r,n){var i=Nr();n=n===void 0?null:n;var o=void 0;if(it!==null){var s=it.memoizedState;if(o=s.destroy,n!==null&&c1(n,s.deps)){i.memoizedState=ja(e,r,o,n);return}}Ge.flags|=t,i.memoizedState=ja(1|e,r,o,n)}function Cv(t,e){return wl(8390656,8,t,e)}function d1(t,e){return Uc(2048,8,t,e)}function sw(t,e){return Uc(4,2,t,e)}function aw(t,e){return Uc(4,4,t,e)}function uw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lw(t,e,r){return r=r!=null?r.concat([t]):null,Uc(4,4,uw.bind(null,e,t),r)}function p1(){}function cw(t,e){var r=Nr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&c1(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function fw(t,e){var r=Nr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&c1(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function hw(t,e,r){return Zi&21?(Hr(r,e)||(r=m_(),Ge.lanes|=r,Ji|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ar=!0),t.memoizedState=r)}function zC(t,e){var r=Ne;Ne=r!==0&&4>r?r:4,t(!0);var n=dh.transition;dh.transition={};try{t(!1),e()}finally{Ne=r,dh.transition=n}}function dw(){return Nr().memoizedState}function $C(t,e,r){var n=li(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},pw(t))gw(e,r);else if(r=q_(t,e,r,n),r!==null){var i=Qt();$r(r,t,n,i),vw(r,e,n)}}function HC(t,e,r){var n=li(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(pw(t))gw(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,r);if(i.hasEagerState=!0,i.eagerState=a,Hr(a,s)){var u=e.interleaved;u===null?(i.next=i,o1(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}r=q_(t,e,i,n),r!==null&&(i=Qt(),$r(r,t,n,i),vw(r,e,n))}}function pw(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function gw(t,e){ga=tc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function vw(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,W0(t,r)}}var rc={readContext:Or,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},WC={readContext:Or,useCallback:function(t,e){return qr().memoizedState=[t,e===void 0?null:e],t},useContext:Or,useEffect:Cv,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,wl(4194308,4,uw.bind(null,e,t),r)},useLayoutEffect:function(t,e){return wl(4194308,4,t,e)},useInsertionEffect:function(t,e){return wl(4,2,t,e)},useMemo:function(t,e){var r=qr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=qr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=$C.bind(null,Ge,t),[n.memoizedState,t]},useRef:function(t){var e=qr();return t={current:t},e.memoizedState=t},useState:Tv,useDebugValue:p1,useDeferredValue:function(t){return qr().memoizedState=t},useTransition:function(){var t=Tv(!1),e=t[0];return t=zC.bind(null,t[1]),qr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ge,i=qr();if($e){if(r===void 0)throw Error($(407));r=r()}else{if(r=e(),yt===null)throw Error($(349));Zi&30||ew(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,Cv(rw.bind(null,n,o,t),[t]),n.flags|=2048,ja(9,tw.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=qr(),e=yt.identifierPrefix;if($e){var r=xn,n=wn;r=(n&~(1<<32-zr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Va++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=jC++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},GC={readContext:Or,useCallback:cw,useContext:Or,useEffect:d1,useImperativeHandle:lw,useInsertionEffect:sw,useLayoutEffect:aw,useMemo:fw,useReducer:ph,useRef:ow,useState:function(){return ph(Ua)},useDebugValue:p1,useDeferredValue:function(t){var e=Nr();return hw(e,it.memoizedState,t)},useTransition:function(){var t=ph(Ua)[0],e=Nr().memoizedState;return[t,e]},useMutableSource:Z_,useSyncExternalStore:J_,useId:dw,unstable_isNewReconciler:!1},KC={readContext:Or,useCallback:cw,useContext:Or,useEffect:d1,useImperativeHandle:lw,useInsertionEffect:sw,useLayoutEffect:aw,useMemo:fw,useReducer:gh,useRef:ow,useState:function(){return gh(Ua)},useDebugValue:p1,useDeferredValue:function(t){var e=Nr();return it===null?e.memoizedState=t:hw(e,it.memoizedState,t)},useTransition:function(){var t=gh(Ua)[0],e=Nr().memoizedState;return[t,e]},useMutableSource:Z_,useSyncExternalStore:J_,useId:dw,unstable_isNewReconciler:!1};function Lr(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Td(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ke({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var jc={isMounted:function(t){return(t=t._reactInternals)?uo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Qt(),i=li(t),o=In(n,i);o.payload=e,r!=null&&(o.callback=r),e=ai(t,o,i),e!==null&&($r(e,t,i,n),yl(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Qt(),i=li(t),o=In(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=ai(t,o,i),e!==null&&($r(e,t,i,n),yl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Qt(),n=li(t),i=In(r,n);i.tag=2,e!=null&&(i.callback=e),e=ai(t,i,n),e!==null&&($r(e,t,n,r),yl(e,t,n))}};function Sv(t,e,r,n,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,s):e.prototype&&e.prototype.isPureReactComponent?!Da(r,n)||!Da(i,o):!0}function mw(t,e,r){var n=!1,i=mi,o=e.contextType;return typeof o=="object"&&o!==null?o=Or(o):(i=lr(e)?Yi:Ut.current,n=e.contextTypes,o=(n=n!=null)?Zo(t,i):mi),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jc,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Rv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&jc.enqueueReplaceState(e,e.state,null)}function Cd(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},s1(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Or(o):(o=lr(e)?Yi:Ut.current,i.context=Zo(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Td(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&jc.enqueueReplaceState(i,i.state,null),Jl(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function rs(t,e){try{var r="",n=e;do r+=xT(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function vh(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Sd(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var XC=typeof WeakMap=="function"?WeakMap:Map;function yw(t,e,r){r=In(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){ic||(ic=!0,Fd=n),Sd(t,e)},r}function _w(t,e,r){r=In(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Sd(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Sd(t,e),typeof n!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function bv(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new XC;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=uS.bind(null,t,e,r),e.then(t,t))}function Ov(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Nv(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=In(-1,1),e.tag=2,ai(r,e,1))),r.lanes|=1),t)}var qC=Fn.ReactCurrentOwner,ar=!1;function Yt(t,e,r,n){e.child=t===null?X_(e,null,r,n):es(e,t.child,r,n)}function Pv(t,e,r,n,i){r=r.render;var o=e.ref;return Wo(e,i),n=f1(t,e,r,n,o,i),r=h1(),t!==null&&!ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,On(t,e,i)):($e&&r&&J0(e),e.flags|=1,Yt(t,e,n,i),e.child)}function Dv(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!E1(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,ww(t,e,o,n,i)):(t=Il(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(r=r.compare,r=r!==null?r:Da,r(s,n)&&t.ref===e.ref)return On(t,e,i)}return e.flags|=1,t=ci(o,n),t.ref=e.ref,t.return=e,e.child=t}function ww(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(Da(o,n)&&t.ref===e.ref)if(ar=!1,e.pendingProps=n=o,(t.lanes&i)!==0)t.flags&131072&&(ar=!0);else return e.lanes=t.lanes,On(t,e,i)}return Rd(t,e,r,n,i)}function xw(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Fo,dr),dr|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(Fo,dr),dr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Me(Fo,dr),dr|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,Me(Fo,dr),dr|=n;return Yt(t,e,i,r),e.child}function Ew(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Rd(t,e,r,n,i){var o=lr(r)?Yi:Ut.current;return o=Zo(e,o),Wo(e,i),r=f1(t,e,r,n,o,i),n=h1(),t!==null&&!ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,On(t,e,i)):($e&&n&&J0(e),e.flags|=1,Yt(t,e,r,i),e.child)}function kv(t,e,r,n,i){if(lr(r)){var o=!0;Xl(e)}else o=!1;if(Wo(e,i),e.stateNode===null)xl(t,e),mw(e,r,n),Cd(e,r,n,i),n=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,l=r.contextType;typeof l=="object"&&l!==null?l=Or(l):(l=lr(r)?Yi:Ut.current,l=Zo(e,l));var c=r.getDerivedStateFromProps,h=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||u!==l)&&Rv(e,s,n,l),Gn=!1;var d=e.memoizedState;s.state=d,Jl(e,n,s,i),u=e.memoizedState,a!==n||d!==u||ur.current||Gn?(typeof c=="function"&&(Td(e,r,c,n),u=e.memoizedState),(a=Gn||Sv(e,r,a,n,d,u,l))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),s.props=n,s.state=u,s.context=l,n=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,Y_(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Lr(e.type,a),s.props=l,h=e.pendingProps,d=s.context,u=r.contextType,typeof u=="object"&&u!==null?u=Or(u):(u=lr(r)?Yi:Ut.current,u=Zo(e,u));var p=r.getDerivedStateFromProps;(c=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||d!==u)&&Rv(e,s,n,u),Gn=!1,d=e.memoizedState,s.state=d,Jl(e,n,s,i);var v=e.memoizedState;a!==h||d!==v||ur.current||Gn?(typeof p=="function"&&(Td(e,r,p,n),v=e.memoizedState),(l=Gn||Sv(e,r,l,n,d,v,u)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,v,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,v,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),s.props=n,s.state=v,s.context=u,n=l):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return bd(t,e,r,n,o,i)}function bd(t,e,r,n,i,o){Ew(t,e);var s=(e.flags&128)!==0;if(!n&&!s)return i&&_v(e,r,!1),On(t,e,o);n=e.stateNode,qC.current=e;var a=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&s?(e.child=es(e,t.child,null,o),e.child=es(e,null,a,o)):Yt(t,e,a,o),e.memoizedState=n.state,i&&_v(e,r,!0),e.child}function Aw(t){var e=t.stateNode;e.pendingContext?yv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yv(t,e.context,!1),a1(t,e.containerInfo)}function Mv(t,e,r,n,i){return Jo(),t1(i),e.flags|=256,Yt(t,e,r,n),e.child}var Od={dehydrated:null,treeContext:null,retryLane:0};function Nd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Iw(t,e,r){var n=e.pendingProps,i=We.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Me(We,i&1),t===null)return Ad(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,t=n.fallback,o?(n=e.mode,o=e.child,s={mode:"hidden",children:s},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Hc(s,n,0,null),t=Gi(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Nd(r),e.memoizedState=Od,t):g1(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return YC(t,e,s,n,a,i,r);if(o){o=n.fallback,s=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:n.children};return!(s&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=ci(i,u),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=ci(a,o):(o=Gi(o,s,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,s=t.child.memoizedState,s=s===null?Nd(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~r,e.memoizedState=Od,n}return o=t.child,t=o.sibling,n=ci(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function g1(t,e){return e=Hc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yu(t,e,r,n){return n!==null&&t1(n),es(e,t.child,null,r),t=g1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function YC(t,e,r,n,i,o,s){if(r)return e.flags&256?(e.flags&=-257,n=vh(Error($(422))),Yu(t,e,s,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=Hc({mode:"visible",children:n.children},i,0,null),o=Gi(o,i,s,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&es(e,t.child,null,s),e.child.memoizedState=Nd(s),e.memoizedState=Od,o);if(!(e.mode&1))return Yu(t,e,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error($(419)),n=vh(o,n,void 0),Yu(t,e,s,n)}if(a=(s&t.childLanes)!==0,ar||a){if(n=yt,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,bn(t,i),$r(n,t,i,-1))}return x1(),n=vh(Error($(421))),Yu(t,e,s,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=lS.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,pr=si(i.nextSibling),vr=e,$e=!0,Br=null,t!==null&&(Ar[Ir++]=wn,Ar[Ir++]=xn,Ar[Ir++]=Qi,wn=t.id,xn=t.overflow,Qi=e),e=g1(e,n.children),e.flags|=4096,e)}function Lv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Id(t.return,e,r)}function mh(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function Tw(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(Yt(t,e,n.children,r),n=We.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lv(t,r,e);else if(t.tag===19)Lv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Me(We,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&ec(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),mh(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ec(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}mh(e,!0,r,null,o);break;case"together":mh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function On(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ji|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,r=ci(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ci(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function QC(t,e,r){switch(e.tag){case 3:Aw(e),Jo();break;case 5:Q_(e);break;case 1:lr(e.type)&&Xl(e);break;case 4:a1(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Me(Ql,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Me(We,We.current&1),e.flags|=128,null):r&e.child.childLanes?Iw(t,e,r):(Me(We,We.current&1),t=On(t,e,r),t!==null?t.sibling:null);Me(We,We.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Tw(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Me(We,We.current),n)break;return null;case 22:case 23:return e.lanes=0,xw(t,e,r)}return On(t,e,r)}var Cw,Pd,Sw,Rw;Cw=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Pd=function(){};Sw=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,ji(rn.current);var o=null;switch(r){case"input":i=ed(t,i),n=ed(t,n),o=[];break;case"select":i=Ke({},i,{value:void 0}),n=Ke({},n,{value:void 0}),o=[];break;case"textarea":i=nd(t,i),n=nd(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Gl)}od(r,n);var s;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ca.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in n){var u=n[l];if(a=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(s in a)!a.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in u)u.hasOwnProperty(s)&&a[s]!==u[s]&&(r||(r={}),r[s]=u[s])}else r||(o||(o=[]),o.push(l,r)),r=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Ca.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Be("scroll",t),o||a===u||(o=[])):(o=o||[]).push(l,u))}r&&(o=o||[]).push("style",r);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};Rw=function(t,e,r,n){r!==n&&(e.flags|=4)};function Gs(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function ZC(t,e,r){var n=e.pendingProps;switch(e1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return lr(e.type)&&Kl(),kt(e),null;case 3:return n=e.stateNode,ts(),ze(ur),ze(Ut),l1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Xu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Br!==null&&(Ud(Br),Br=null))),Pd(t,e),kt(e),null;case 5:u1(e);var i=ji(Ba.current);if(r=e.type,t!==null&&e.stateNode!=null)Sw(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error($(166));return kt(e),null}if(t=ji(rn.current),Xu(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Qr]=e,n[La]=o,t=(e.mode&1)!==0,r){case"dialog":Be("cancel",n),Be("close",n);break;case"iframe":case"object":case"embed":Be("load",n);break;case"video":case"audio":for(i=0;i<ta.length;i++)Be(ta[i],n);break;case"source":Be("error",n);break;case"img":case"image":case"link":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"input":Wg(n,o),Be("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Be("invalid",n);break;case"textarea":Kg(n,o),Be("invalid",n)}od(r,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&Ku(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Ku(n.textContent,a,t),i=["children",""+a]):Ca.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Be("scroll",n)}switch(r){case"input":Vu(n),Gg(n,o,!0);break;case"textarea":Vu(n),Xg(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Gl)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=r_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(r,{is:n.is}):(t=s.createElement(r),r==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,r),t[Qr]=e,t[La]=n,Cw(t,e,!1,!1),e.stateNode=t;e:{switch(s=sd(r,n),r){case"dialog":Be("cancel",t),Be("close",t),i=n;break;case"iframe":case"object":case"embed":Be("load",t),i=n;break;case"video":case"audio":for(i=0;i<ta.length;i++)Be(ta[i],t);i=n;break;case"source":Be("error",t),i=n;break;case"img":case"image":case"link":Be("error",t),Be("load",t),i=n;break;case"details":Be("toggle",t),i=n;break;case"input":Wg(t,n),i=ed(t,n),Be("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Ke({},n,{value:void 0}),Be("invalid",t);break;case"textarea":Kg(t,n),i=nd(t,n),Be("invalid",t);break;default:i=n}od(r,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?o_(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&n_(t,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Sa(t,u):typeof u=="number"&&Sa(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ca.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Be("scroll",t):u!=null&&V0(t,o,u,s))}switch(r){case"input":Vu(t),Gg(t,n,!1);break;case"textarea":Vu(t),Xg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+vi(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?jo(t,!!n.multiple,o,!1):n.defaultValue!=null&&jo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Gl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)Rw(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error($(166));if(r=ji(Ba.current),ji(rn.current),Xu(e)){if(n=e.stateNode,r=e.memoizedProps,n[Qr]=e,(o=n.nodeValue!==r)&&(t=vr,t!==null))switch(t.tag){case 3:Ku(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ku(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Qr]=e,e.stateNode=n}return kt(e),null;case 13:if(ze(We),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&pr!==null&&e.mode&1&&!(e.flags&128))G_(),Jo(),e.flags|=98560,o=!1;else if(o=Xu(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error($(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($(317));o[Qr]=e}else Jo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),o=!1}else Br!==null&&(Ud(Br),Br=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?ut===0&&(ut=3):x1())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return ts(),Pd(t,e),t===null&&ka(e.stateNode.containerInfo),kt(e),null;case 10:return i1(e.type._context),kt(e),null;case 17:return lr(e.type)&&Kl(),kt(e),null;case 19:if(ze(We),o=e.memoizedState,o===null)return kt(e),null;if(n=(e.flags&128)!==0,s=o.rendering,s===null)if(n)Gs(o,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=ec(t),s!==null){for(e.flags|=128,Gs(o,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Me(We,We.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ze()>ns&&(e.flags|=128,n=!0,Gs(o,!1),e.lanes=4194304)}else{if(!n)if(t=ec(s),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Gs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!$e)return kt(e),null}else 2*Ze()-o.renderingStartTime>ns&&r!==1073741824&&(e.flags|=128,n=!0,Gs(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(r=o.last,r!==null?r.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ze(),e.sibling=null,r=We.current,Me(We,n?r&1|2:r&1),e):(kt(e),null);case 22:case 23:return w1(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?dr&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function JC(t,e){switch(e1(e),e.tag){case 1:return lr(e.type)&&Kl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ts(),ze(ur),ze(Ut),l1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return u1(e),null;case 13:if(ze(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Jo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze(We),null;case 4:return ts(),null;case 10:return i1(e.type._context),null;case 22:case 23:return w1(),null;case 24:return null;default:return null}}var Qu=!1,Bt=!1,eS=typeof WeakSet=="function"?WeakSet:Set,K=null;function Lo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ye(t,e,n)}else r.current=null}function Dd(t,e,r){try{r()}catch(n){Ye(t,e,n)}}var Fv=!1;function tS(t,e){if(vd=$l,t=D_(),Z0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var s=0,a=-1,u=-1,l=0,c=0,h=t,d=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(a=s+i),h!==o||n!==0&&h.nodeType!==3||(u=s+n),h.nodeType===3&&(s+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===t)break t;if(d===r&&++l===i&&(a=s),d===o&&++c===n&&(u=s),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}r=a===-1||u===-1?null:{start:a,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(md={focusedElem:t,selectionRange:r},$l=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,I=v.memoizedState,_=e.stateNode,m=_.getSnapshotBeforeUpdate(e.elementType===e.type?w:Lr(e.type,w),I);_.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(S){Ye(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return v=Fv,Fv=!1,v}function va(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Dd(e,r,o)}i=i.next}while(i!==n)}}function zc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function kd(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function bw(t){var e=t.alternate;e!==null&&(t.alternate=null,bw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qr],delete e[La],delete e[wd],delete e[FC],delete e[BC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ow(t){return t.tag===5||t.tag===3||t.tag===4}function Bv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ow(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Md(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Gl));else if(n!==4&&(t=t.child,t!==null))for(Md(t,e,r),t=t.sibling;t!==null;)Md(t,e,r),t=t.sibling}function Ld(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Ld(t,e,r),t=t.sibling;t!==null;)Ld(t,e,r),t=t.sibling}var At=null,Fr=!1;function jn(t,e,r){for(r=r.child;r!==null;)Nw(t,e,r),r=r.sibling}function Nw(t,e,r){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(kc,r)}catch{}switch(r.tag){case 5:Bt||Lo(r,e);case 6:var n=At,i=Fr;At=null,jn(t,e,r),At=n,Fr=i,At!==null&&(Fr?(t=At,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):At.removeChild(r.stateNode));break;case 18:At!==null&&(Fr?(t=At,r=r.stateNode,t.nodeType===8?ch(t.parentNode,r):t.nodeType===1&&ch(t,r),Na(t)):ch(At,r.stateNode));break;case 4:n=At,i=Fr,At=r.stateNode.containerInfo,Fr=!0,jn(t,e,r),At=n,Fr=i;break;case 0:case 11:case 14:case 15:if(!Bt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Dd(r,e,s),i=i.next}while(i!==n)}jn(t,e,r);break;case 1:if(!Bt&&(Lo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Ye(r,e,a)}jn(t,e,r);break;case 21:jn(t,e,r);break;case 22:r.mode&1?(Bt=(n=Bt)||r.memoizedState!==null,jn(t,e,r),Bt=n):jn(t,e,r);break;default:jn(t,e,r)}}function Vv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new eS),e.forEach(function(n){var i=cS.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Dr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:At=a.stateNode,Fr=!1;break e;case 3:At=a.stateNode.containerInfo,Fr=!0;break e;case 4:At=a.stateNode.containerInfo,Fr=!0;break e}a=a.return}if(At===null)throw Error($(160));Nw(o,s,i),At=null,Fr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Ye(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Pw(e,t),e=e.sibling}function Pw(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dr(e,t),Xr(t),n&4){try{va(3,t,t.return),zc(3,t)}catch(w){Ye(t,t.return,w)}try{va(5,t,t.return)}catch(w){Ye(t,t.return,w)}}break;case 1:Dr(e,t),Xr(t),n&512&&r!==null&&Lo(r,r.return);break;case 5:if(Dr(e,t),Xr(t),n&512&&r!==null&&Lo(r,r.return),t.flags&32){var i=t.stateNode;try{Sa(i,"")}catch(w){Ye(t,t.return,w)}}if(n&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=r!==null?r.memoizedProps:o,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&e_(i,o),sd(a,s);var l=sd(a,o);for(s=0;s<u.length;s+=2){var c=u[s],h=u[s+1];c==="style"?o_(i,h):c==="dangerouslySetInnerHTML"?n_(i,h):c==="children"?Sa(i,h):V0(i,c,h,l)}switch(a){case"input":td(i,o);break;case"textarea":t_(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?jo(i,!!o.multiple,p,!1):d!==!!o.multiple&&(o.defaultValue!=null?jo(i,!!o.multiple,o.defaultValue,!0):jo(i,!!o.multiple,o.multiple?[]:"",!1))}i[La]=o}catch(w){Ye(t,t.return,w)}}break;case 6:if(Dr(e,t),Xr(t),n&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(w){Ye(t,t.return,w)}}break;case 3:if(Dr(e,t),Xr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Na(e.containerInfo)}catch(w){Ye(t,t.return,w)}break;case 4:Dr(e,t),Xr(t);break;case 13:Dr(e,t),Xr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(y1=Ze())),n&4&&Vv(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(Bt=(l=Bt)||c,Dr(e,t),Bt=l):Dr(e,t),Xr(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(K=t,c=t.child;c!==null;){for(h=K=c;K!==null;){switch(d=K,p=d.child,d.tag){case 0:case 11:case 14:case 15:va(4,d,d.return);break;case 1:Lo(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){Ye(n,r,w)}}break;case 5:Lo(d,d.return);break;case 22:if(d.memoizedState!==null){jv(h);continue}}p!==null?(p.return=d,K=p):jv(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=h.stateNode,u=h.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=i_("display",s))}catch(w){Ye(t,t.return,w)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(w){Ye(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dr(e,t),Xr(t),n&4&&Vv(t);break;case 21:break;default:Dr(e,t),Xr(t)}}function Xr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Ow(r)){var n=r;break e}r=r.return}throw Error($(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Sa(i,""),n.flags&=-33);var o=Bv(t);Ld(t,o,i);break;case 3:case 4:var s=n.stateNode.containerInfo,a=Bv(t);Md(t,a,s);break;default:throw Error($(161))}}catch(u){Ye(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rS(t,e,r){K=t,Dw(t)}function Dw(t,e,r){for(var n=(t.mode&1)!==0;K!==null;){var i=K,o=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Qu;if(!s){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Bt;a=Qu;var l=Bt;if(Qu=s,(Bt=u)&&!l)for(K=i;K!==null;)s=K,u=s.child,s.tag===22&&s.memoizedState!==null?zv(i):u!==null?(u.return=s,K=u):zv(i);for(;o!==null;)K=o,Dw(o),o=o.sibling;K=i,Qu=a,Bt=l}Uv(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,K=o):Uv(t)}}function Uv(t){for(;K!==null;){var e=K;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bt||zc(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Bt)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Lr(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Iv(e,o,n);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Iv(e,s,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Na(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Bt||e.flags&512&&kd(e)}catch(d){Ye(e,e.return,d)}}if(e===t){K=null;break}if(r=e.sibling,r!==null){r.return=e.return,K=r;break}K=e.return}}function jv(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var r=e.sibling;if(r!==null){r.return=e.return,K=r;break}K=e.return}}function zv(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{zc(4,e)}catch(u){Ye(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(u){Ye(e,i,u)}}var o=e.return;try{kd(e)}catch(u){Ye(e,o,u)}break;case 5:var s=e.return;try{kd(e)}catch(u){Ye(e,s,u)}}}catch(u){Ye(e,e.return,u)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var nS=Math.ceil,nc=Fn.ReactCurrentDispatcher,v1=Fn.ReactCurrentOwner,Sr=Fn.ReactCurrentBatchConfig,Ee=0,yt=null,et=null,St=0,dr=0,Fo=Ti(0),ut=0,za=null,Ji=0,$c=0,m1=0,ma=null,ir=null,y1=0,ns=1/0,mn=null,ic=!1,Fd=null,ui=null,Zu=!1,ti=null,oc=0,ya=0,Bd=null,El=-1,Al=0;function Qt(){return Ee&6?Ze():El!==-1?El:El=Ze()}function li(t){return t.mode&1?Ee&2&&St!==0?St&-St:UC.transition!==null?(Al===0&&(Al=m_()),Al):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:I_(t.type)),t):1}function $r(t,e,r,n){if(50<ya)throw ya=0,Bd=null,Error($(185));ru(t,r,n),(!(Ee&2)||t!==yt)&&(t===yt&&(!(Ee&2)&&($c|=r),ut===4&&qn(t,St)),cr(t,n),r===1&&Ee===0&&!(e.mode&1)&&(ns=Ze()+500,Vc&&Ci()))}function cr(t,e){var r=t.callbackNode;UT(t,e);var n=zl(t,t===yt?St:0);if(n===0)r!==null&&Qg(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Qg(r),e===1)t.tag===0?VC($v.bind(null,t)):$_($v.bind(null,t)),MC(function(){!(Ee&6)&&Ci()}),r=null;else{switch(y_(n)){case 1:r=H0;break;case 4:r=g_;break;case 16:r=jl;break;case 536870912:r=v_;break;default:r=jl}r=jw(r,kw.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function kw(t,e){if(El=-1,Al=0,Ee&6)throw Error($(327));var r=t.callbackNode;if(Go()&&t.callbackNode!==r)return null;var n=zl(t,t===yt?St:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=sc(t,n);else{e=n;var i=Ee;Ee|=2;var o=Lw();(yt!==t||St!==e)&&(mn=null,ns=Ze()+500,Wi(t,e));do try{sS();break}catch(a){Mw(t,a)}while(1);n1(),nc.current=o,Ee=i,et!==null?e=0:(yt=null,St=0,e=ut)}if(e!==0){if(e===2&&(i=fd(t),i!==0&&(n=i,e=Vd(t,i))),e===1)throw r=za,Wi(t,0),qn(t,n),cr(t,Ze()),r;if(e===6)qn(t,n);else{if(i=t.current.alternate,!(n&30)&&!iS(i)&&(e=sc(t,n),e===2&&(o=fd(t),o!==0&&(n=o,e=Vd(t,o))),e===1))throw r=za,Wi(t,0),qn(t,n),cr(t,Ze()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error($(345));case 2:Li(t,ir,mn);break;case 3:if(qn(t,n),(n&130023424)===n&&(e=y1+500-Ze(),10<e)){if(zl(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Qt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_d(Li.bind(null,t,ir,mn),e);break}Li(t,ir,mn);break;case 4:if(qn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var s=31-zr(n);o=1<<s,s=e[s],s>i&&(i=s),n&=~o}if(n=i,n=Ze()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*nS(n/1960))-n,10<n){t.timeoutHandle=_d(Li.bind(null,t,ir,mn),n);break}Li(t,ir,mn);break;case 5:Li(t,ir,mn);break;default:throw Error($(329))}}}return cr(t,Ze()),t.callbackNode===r?kw.bind(null,t):null}function Vd(t,e){var r=ma;return t.current.memoizedState.isDehydrated&&(Wi(t,e).flags|=256),t=sc(t,e),t!==2&&(e=ir,ir=r,e!==null&&Ud(e)),t}function Ud(t){ir===null?ir=t:ir.push.apply(ir,t)}function iS(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Hr(o(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qn(t,e){for(e&=~m1,e&=~$c,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-zr(e),n=1<<r;t[r]=-1,e&=~n}}function $v(t){if(Ee&6)throw Error($(327));Go();var e=zl(t,0);if(!(e&1))return cr(t,Ze()),null;var r=sc(t,e);if(t.tag!==0&&r===2){var n=fd(t);n!==0&&(e=n,r=Vd(t,n))}if(r===1)throw r=za,Wi(t,0),qn(t,e),cr(t,Ze()),r;if(r===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Li(t,ir,mn),cr(t,Ze()),null}function _1(t,e){var r=Ee;Ee|=1;try{return t(e)}finally{Ee=r,Ee===0&&(ns=Ze()+500,Vc&&Ci())}}function eo(t){ti!==null&&ti.tag===0&&!(Ee&6)&&Go();var e=Ee;Ee|=1;var r=Sr.transition,n=Ne;try{if(Sr.transition=null,Ne=1,t)return t()}finally{Ne=n,Sr.transition=r,Ee=e,!(Ee&6)&&Ci()}}function w1(){dr=Fo.current,ze(Fo)}function Wi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,kC(r)),et!==null)for(r=et.return;r!==null;){var n=r;switch(e1(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Kl();break;case 3:ts(),ze(ur),ze(Ut),l1();break;case 5:u1(n);break;case 4:ts();break;case 13:ze(We);break;case 19:ze(We);break;case 10:i1(n.type._context);break;case 22:case 23:w1()}r=r.return}if(yt=t,et=t=ci(t.current,null),St=dr=e,ut=0,za=null,m1=$c=Ji=0,ir=ma=null,Ui!==null){for(e=0;e<Ui.length;e++)if(r=Ui[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var s=o.next;o.next=i,n.next=s}r.pending=n}Ui=null}return t}function Mw(t,e){do{var r=et;try{if(n1(),_l.current=rc,tc){for(var n=Ge.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}tc=!1}if(Zi=0,gt=it=Ge=null,ga=!1,Va=0,v1.current=null,r===null||r.return===null){ut=1,za=e,et=null;break}e:{var o=t,s=r.return,a=r,u=e;if(e=St,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Ov(s);if(p!==null){p.flags&=-257,Nv(p,s,a,o,e),p.mode&1&&bv(o,l,e),e=p,u=l;var v=e.updateQueue;if(v===null){var w=new Set;w.add(u),e.updateQueue=w}else v.add(u);break e}else{if(!(e&1)){bv(o,l,e),x1();break e}u=Error($(426))}}else if($e&&a.mode&1){var I=Ov(s);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Nv(I,s,a,o,e),t1(rs(u,a));break e}}o=u=rs(u,a),ut!==4&&(ut=2),ma===null?ma=[o]:ma.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=yw(o,u,e);Av(o,_);break e;case 1:a=u;var m=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ui===null||!ui.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=_w(o,a,e);Av(o,S);break e}}o=o.return}while(o!==null)}Bw(r)}catch(P){e=P,et===r&&r!==null&&(et=r=r.return);continue}break}while(1)}function Lw(){var t=nc.current;return nc.current=rc,t===null?rc:t}function x1(){(ut===0||ut===3||ut===2)&&(ut=4),yt===null||!(Ji&268435455)&&!($c&268435455)||qn(yt,St)}function sc(t,e){var r=Ee;Ee|=2;var n=Lw();(yt!==t||St!==e)&&(mn=null,Wi(t,e));do try{oS();break}catch(i){Mw(t,i)}while(1);if(n1(),Ee=r,nc.current=n,et!==null)throw Error($(261));return yt=null,St=0,ut}function oS(){for(;et!==null;)Fw(et)}function sS(){for(;et!==null&&!NT();)Fw(et)}function Fw(t){var e=Uw(t.alternate,t,dr);t.memoizedProps=t.pendingProps,e===null?Bw(t):et=e,v1.current=null}function Bw(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=JC(r,e),r!==null){r.flags&=32767,et=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,et=null;return}}else if(r=ZC(r,e,dr),r!==null){et=r;return}if(e=e.sibling,e!==null){et=e;return}et=e=t}while(e!==null);ut===0&&(ut=5)}function Li(t,e,r){var n=Ne,i=Sr.transition;try{Sr.transition=null,Ne=1,aS(t,e,r,n)}finally{Sr.transition=i,Ne=n}return null}function aS(t,e,r,n){do Go();while(ti!==null);if(Ee&6)throw Error($(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(jT(t,o),t===yt&&(et=yt=null,St=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zu||(Zu=!0,jw(jl,function(){return Go(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Sr.transition,Sr.transition=null;var s=Ne;Ne=1;var a=Ee;Ee|=4,v1.current=null,tS(t,r),Pw(r,t),SC(md),$l=!!vd,md=vd=null,t.current=r,rS(r),PT(),Ee=a,Ne=s,Sr.transition=o}else t.current=r;if(Zu&&(Zu=!1,ti=t,oc=i),o=t.pendingLanes,o===0&&(ui=null),MT(r.stateNode),cr(t,Ze()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(ic)throw ic=!1,t=Fd,Fd=null,t;return oc&1&&t.tag!==0&&Go(),o=t.pendingLanes,o&1?t===Bd?ya++:(ya=0,Bd=t):ya=0,Ci(),null}function Go(){if(ti!==null){var t=y_(oc),e=Sr.transition,r=Ne;try{if(Sr.transition=null,Ne=16>t?16:t,ti===null)var n=!1;else{if(t=ti,ti=null,oc=0,Ee&6)throw Error($(331));var i=Ee;for(Ee|=4,K=t.current;K!==null;){var o=K,s=o.child;if(K.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(K=l;K!==null;){var c=K;switch(c.tag){case 0:case 11:case 15:va(8,c,o)}var h=c.child;if(h!==null)h.return=c,K=h;else for(;K!==null;){c=K;var d=c.sibling,p=c.return;if(bw(c),c===l){K=null;break}if(d!==null){d.return=p,K=d;break}K=p}}}var v=o.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var I=w.sibling;w.sibling=null,w=I}while(w!==null)}}K=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,K=s;else e:for(;K!==null;){if(o=K,o.flags&2048)switch(o.tag){case 0:case 11:case 15:va(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,K=_;break e}K=o.return}}var m=t.current;for(K=m;K!==null;){s=K;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,K=x;else e:for(s=m;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zc(9,a)}}catch(P){Ye(a,a.return,P)}if(a===s){K=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,K=S;break e}K=a.return}}if(Ee=i,Ci(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(kc,t)}catch{}n=!0}return n}finally{Ne=r,Sr.transition=e}}return!1}function Hv(t,e,r){e=rs(r,e),e=yw(t,e,1),t=ai(t,e,1),e=Qt(),t!==null&&(ru(t,1,e),cr(t,e))}function Ye(t,e,r){if(t.tag===3)Hv(t,t,r);else for(;e!==null;){if(e.tag===3){Hv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ui===null||!ui.has(n))){t=rs(r,t),t=_w(e,t,1),e=ai(e,t,1),t=Qt(),e!==null&&(ru(e,1,t),cr(e,t));break}}e=e.return}}function uS(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&r,yt===t&&(St&r)===r&&(ut===4||ut===3&&(St&130023424)===St&&500>Ze()-y1?Wi(t,0):m1|=r),cr(t,e)}function Vw(t,e){e===0&&(t.mode&1?(e=zu,zu<<=1,!(zu&130023424)&&(zu=4194304)):e=1);var r=Qt();t=bn(t,e),t!==null&&(ru(t,e,r),cr(t,r))}function lS(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Vw(t,r)}function cS(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error($(314))}n!==null&&n.delete(e),Vw(t,r)}var Uw;Uw=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ur.current)ar=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return ar=!1,QC(t,e,r);ar=!!(t.flags&131072)}else ar=!1,$e&&e.flags&1048576&&H_(e,Yl,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;xl(t,e),t=e.pendingProps;var i=Zo(e,Ut.current);Wo(e,r),i=f1(null,e,n,t,i,r);var o=h1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lr(n)?(o=!0,Xl(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,s1(e),i.updater=jc,e.stateNode=i,i._reactInternals=e,Cd(e,n,t,r),e=bd(null,e,n,!0,o,r)):(e.tag=0,$e&&o&&J0(e),Yt(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(xl(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=hS(n),t=Lr(n,t),i){case 0:e=Rd(null,e,n,t,r);break e;case 1:e=kv(null,e,n,t,r);break e;case 11:e=Pv(null,e,n,t,r);break e;case 14:e=Dv(null,e,n,Lr(n.type,t),r);break e}throw Error($(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Lr(n,i),Rd(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Lr(n,i),kv(t,e,n,i,r);case 3:e:{if(Aw(e),t===null)throw Error($(387));n=e.pendingProps,o=e.memoizedState,i=o.element,Y_(t,e),Jl(e,n,null,r);var s=e.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=rs(Error($(423)),e),e=Mv(t,e,n,r,i);break e}else if(n!==i){i=rs(Error($(424)),e),e=Mv(t,e,n,r,i);break e}else for(pr=si(e.stateNode.containerInfo.firstChild),vr=e,$e=!0,Br=null,r=X_(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Jo(),n===i){e=On(t,e,r);break e}Yt(t,e,n,r)}e=e.child}return e;case 5:return Q_(e),t===null&&Ad(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,yd(n,i)?s=null:o!==null&&yd(n,o)&&(e.flags|=32),Ew(t,e),Yt(t,e,s,r),e.child;case 6:return t===null&&Ad(e),null;case 13:return Iw(t,e,r);case 4:return a1(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=es(e,null,n,r):Yt(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Lr(n,i),Pv(t,e,n,i,r);case 7:return Yt(t,e,e.pendingProps,r),e.child;case 8:return Yt(t,e,e.pendingProps.children,r),e.child;case 12:return Yt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Me(Ql,n._currentValue),n._currentValue=s,o!==null)if(Hr(o.value,s)){if(o.children===i.children&&!ur.current){e=On(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var u=a.firstContext;u!==null;){if(u.context===n){if(o.tag===1){u=In(-1,r&-r),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),Id(o.return,r,e),a.lanes|=r;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error($(341));s.lanes|=r,a=s.alternate,a!==null&&(a.lanes|=r),Id(s,r,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Yt(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Wo(e,r),i=Or(i),n=n(i),e.flags|=1,Yt(t,e,n,r),e.child;case 14:return n=e.type,i=Lr(n,e.pendingProps),i=Lr(n.type,i),Dv(t,e,n,i,r);case 15:return ww(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Lr(n,i),xl(t,e),e.tag=1,lr(n)?(t=!0,Xl(e)):t=!1,Wo(e,r),mw(e,n,i),Cd(e,n,i,r),bd(null,e,n,!0,t,r);case 19:return Tw(t,e,r);case 22:return xw(t,e,r)}throw Error($(156,e.tag))};function jw(t,e){return p_(t,e)}function fS(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(t,e,r,n){return new fS(t,e,r,n)}function E1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hS(t){if(typeof t=="function")return E1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===j0)return 11;if(t===z0)return 14}return 2}function ci(t,e){var r=t.alternate;return r===null?(r=Tr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Il(t,e,r,n,i,o){var s=2;if(n=t,typeof t=="function")E1(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case So:return Gi(r.children,i,o,e);case U0:s=8,i|=8;break;case Yh:return t=Tr(12,r,e,i|2),t.elementType=Yh,t.lanes=o,t;case Qh:return t=Tr(13,r,e,i),t.elementType=Qh,t.lanes=o,t;case Zh:return t=Tr(19,r,e,i),t.elementType=Zh,t.lanes=o,t;case Q2:return Hc(r,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q2:s=10;break e;case Y2:s=9;break e;case j0:s=11;break e;case z0:s=14;break e;case Wn:s=16,n=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Tr(s,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function Gi(t,e,r,n){return t=Tr(7,t,n,e),t.lanes=r,t}function Hc(t,e,r,n){return t=Tr(22,t,n,e),t.elementType=Q2,t.lanes=r,t.stateNode={isHidden:!1},t}function yh(t,e,r){return t=Tr(6,t,null,e),t.lanes=r,t}function _h(t,e,r){return e=Tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dS(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jf(0),this.expirationTimes=Jf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jf(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function A1(t,e,r,n,i,o,s,a,u){return t=new dS(t,e,r,a,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Tr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},s1(o),t}function pS(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Co,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function zw(t){if(!t)return mi;t=t._reactInternals;e:{if(uo(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var r=t.type;if(lr(r))return z_(t,r,e)}return e}function $w(t,e,r,n,i,o,s,a,u){return t=A1(r,n,!0,t,i,o,s,a,u),t.context=zw(null),r=t.current,n=Qt(),i=li(r),o=In(n,i),o.callback=e??null,ai(r,o,i),t.current.lanes=i,ru(t,i,n),cr(t,n),t}function Wc(t,e,r,n){var i=e.current,o=Qt(),s=li(i);return r=zw(r),e.context===null?e.context=r:e.pendingContext=r,e=In(o,s),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ai(i,e,s),t!==null&&($r(t,i,s,o),yl(t,i,s)),s}function ac(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function I1(t,e){Wv(t,e),(t=t.alternate)&&Wv(t,e)}function gS(){return null}var Hw=typeof reportError=="function"?reportError:function(t){console.error(t)};function T1(t){this._internalRoot=t}Gc.prototype.render=T1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Wc(t,e,null,null)};Gc.prototype.unmount=T1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;eo(function(){Wc(null,t,null,null)}),e[Rn]=null}};function Gc(t){this._internalRoot=t}Gc.prototype.unstable_scheduleHydration=function(t){if(t){var e=x_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Xn.length&&e!==0&&e<Xn[r].priority;r++);Xn.splice(r,0,t),r===0&&A_(t)}};function C1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gv(){}function vS(t,e,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var l=ac(s);o.call(l)}}var s=$w(e,n,t,0,null,!1,!1,"",Gv);return t._reactRootContainer=s,t[Rn]=s.current,ka(t.nodeType===8?t.parentNode:t),eo(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var l=ac(u);a.call(l)}}var u=A1(t,0,!1,null,null,!1,!1,"",Gv);return t._reactRootContainer=u,t[Rn]=u.current,ka(t.nodeType===8?t.parentNode:t),eo(function(){Wc(e,u,r,n)}),u}function Xc(t,e,r,n,i){var o=r._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var u=ac(s);a.call(u)}}Wc(e,s,t,i)}else s=vS(r,e,t,i,n);return ac(s)}__=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ea(e.pendingLanes);r!==0&&(W0(e,r|1),cr(e,Ze()),!(Ee&6)&&(ns=Ze()+500,Ci()))}break;case 13:eo(function(){var n=bn(t,1);if(n!==null){var i=Qt();$r(n,t,1,i)}}),I1(t,1)}};G0=function(t){if(t.tag===13){var e=bn(t,134217728);if(e!==null){var r=Qt();$r(e,t,134217728,r)}I1(t,134217728)}};w_=function(t){if(t.tag===13){var e=li(t),r=bn(t,e);if(r!==null){var n=Qt();$r(r,t,e,n)}I1(t,e)}};x_=function(){return Ne};E_=function(t,e){var r=Ne;try{return Ne=t,e()}finally{Ne=r}};ud=function(t,e,r){switch(e){case"input":if(td(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Bc(n);if(!i)throw Error($(90));J2(n),td(n,i)}}}break;case"textarea":t_(t,r);break;case"select":e=r.value,e!=null&&jo(t,!!r.multiple,e,!1)}};u_=_1;l_=eo;var mS={usingClientEntryPoint:!1,Events:[iu,No,Bc,s_,a_,_1]},Ks={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yS={bundleType:Ks.bundleType,version:Ks.version,rendererPackageName:Ks.rendererPackageName,rendererConfig:Ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=h_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ks.findFiberByHostInstance||gS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{kc=Ju.inject(yS),tn=Ju}catch{}}yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mS;yr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C1(e))throw Error($(200));return pS(t,e,null,r)};yr.createRoot=function(t,e){if(!C1(t))throw Error($(299));var r=!1,n="",i=Hw;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=A1(t,1,!1,null,null,r,!1,n,i),t[Rn]=e.current,ka(t.nodeType===8?t.parentNode:t),new T1(e)};yr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=h_(e),t=t===null?null:t.stateNode,t};yr.flushSync=function(t){return eo(t)};yr.hydrate=function(t,e,r){if(!Kc(e))throw Error($(200));return Xc(null,t,e,!0,r)};yr.hydrateRoot=function(t,e,r){if(!C1(t))throw Error($(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",s=Hw;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=$w(e,null,t,1,r??null,i,!1,o,s),t[Rn]=e.current,ka(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Gc(e)};yr.render=function(t,e,r){if(!Kc(e))throw Error($(200));return Xc(null,t,e,!1,r)};yr.unmountComponentAtNode=function(t){if(!Kc(t))throw Error($(40));return t._reactRootContainer?(eo(function(){Xc(null,null,t,!1,function(){t._reactRootContainer=null,t[Rn]=null})}),!0):!1};yr.unstable_batchedUpdates=_1;yr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Kc(r))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Xc(t,e,r,!1,n)};yr.version="18.3.1-next-f1338f8080-20240426";function Ww(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ww)}catch(t){console.error(t)}}Ww(),W2.exports=yr;var _S=W2.exports,Kv=_S;Xh.createRoot=Kv.createRoot,Xh.hydrateRoot=Kv.hydrateRoot;var wS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const xS=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ES=(t,e)=>{const r=Z.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,children:a,...u},l)=>Z.createElement("svg",{ref:l,...wS,width:i,height:i,stroke:n,strokeWidth:s?Number(o)*24/Number(i):o,className:`lucide lucide-${xS(t)}`,...u},[...e.map(([c,h])=>Z.createElement(c,h)),...(Array.isArray(a)?a:[a])||[]]));return r.displayName=`${t}`,r};var hn=ES;const AS=hn("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),IS=hn("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Xv=hn("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),TS=hn("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),CS=hn("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),qv=hn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),SS=hn("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),RS=hn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),bS=hn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Gw=hn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function OS(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function NS(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var PS=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DS=function(t){PS(e,t);function e(r,n){var i=this.constructor,o=t.call(this,r,n)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),OS(o,i.prototype),NS(o),o}return e}(Error),kS=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fr=function(t){kS(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(DS),MS=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mr=function(t){MS(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(fr),LS=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),re=function(t){LS(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(fr),FS=function(){function t(e){if(this.binarizer=e,e===null)throw new re("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,i){var o=this.binarizer.getLuminanceSource().crop(e,r,n,i);return new t(this.binarizer.createBinarizer(o))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),BS=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vt=function(t){BS(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(fr),VS=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Le=function(){function t(){}return t.arraycopy=function(e,r,n,i,o){for(;o--;)n[i++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),US=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S1=function(t){US(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(fr),jS=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yv=function(t){jS(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var i=t.call(this,n)||this;return i.index=r,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e}(S1),zS=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},at=function(){function t(){}return t.fill=function(e,r){for(var n=0,i=e.length;n<i;n++)e[n]=r},t.fillWithin=function(e,r,n,i){t.rangeCheck(e.length,r,n);for(var o=r;o<n;o++)e[o]=i},t.rangeCheck=function(e,r,n){if(r>n)throw new re("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new Yv(r);if(n>e)throw new Yv(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var i=1;try{for(var o=zS(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=31*i+a}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var i=n-r,o=new Int32Array(i);return Le.arraycopy(e,r,o,0,i),o},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,a=n(r,e[s]);if(a>0)i=s+1;else if(a<0)o=s-1;else return s}return-i-1},t.numberComparator=function(e,r){return e-r},t}(),de=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),mt=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Le.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),o=n[i];o&=~((1<<(e&31))-1);for(var s=n.length;o===0;){if(++i===s)return r;o=n[i]}var a=i*32+de.numberOfTrailingZeros(o);return a>r?r:a},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),o=~n[i];o&=~((1<<(e&31))-1);for(var s=n.length;o===0;){if(++i===s)return r;o=~n[i]}var a=i*32+de.numberOfTrailingZeros(o);return a>r?r:a},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new re;if(r!==e){r--;for(var n=Math.floor(e/32),i=Math.floor(r/32),o=this.bits,s=n;s<=i;s++){var a=s>n?0:e&31,u=s<i?31:r&31,l=(2<<u)-(1<<a);o[s]|=l}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new re;if(r===e)return!0;r--;for(var i=Math.floor(e/32),o=Math.floor(r/32),s=this.bits,a=i;a<=o;a++){var u=a>i?0:e&31,l=a<o?31:r&31,c=(2<<l)-(1<<u)&4294967295;if((s[a]&c)!==(n?c:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new re("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new re("Sizes don't match");for(var r=this.bits,n=0,i=r.length;n<i;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,i){for(var o=0;o<i;o++){for(var s=0,a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;r[n+o]=s}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,i=this.bits,o=0;o<n;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[r-o]=s}if(this.size!==n*32){for(var a=n*32-this.size,u=e[0]>>>a,o=1;o<n;o++){var l=e[o];u|=l<<32-a,e[o-1]=u,u=l>>>a}e[n-1]=u}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&at.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+at.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),jd;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(jd||(jd={}));const He=jd;var $S=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H=function(t){$S(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(fr),HS=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},be;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(be||(be={}));var st=function(){function t(e,r,n){for(var i,o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=s,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var u=this.values,l=0,c=u.length;l!==c;l++){var h=u[l];t.VALUES_TO_ECI.set(h,this)}try{for(var d=HS(s),p=d.next();!p.done;p=d.next()){var v=p.value;t.NAME_TO_ECI.set(v,this)}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new H("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new H("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new H("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(be.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(be.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(be.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(be.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(be.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(be.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(be.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(be.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(be.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(be.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(be.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(be.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(be.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(be.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(be.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(be.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(be.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(be.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(be.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(be.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(be.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(be.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(be.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(be.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(be.Big5,28,"Big5"),t.GB18030=new t(be.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(be.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),WS=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tl=function(t){WS(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(fr),Rr=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof st?e:st.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var i="",o=0,s=e.length;o<s;o++){var a=e[o].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(n.equals(st.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Tl("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(st.UTF8)||e.equals(st.ISO8859_1)||e.equals(st.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),i=[],o=0;o<n.length;o++)i.push(n[o].charCodeAt(0));return new Uint8Array(i)},t}(),_e=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return Rr.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(He.CHARACTER_SET)!==void 0)return r.get(He.CHARACTER_SET).toString();for(var n=e.length,i=!0,o=!0,s=!0,a=0,u=0,l=0,c=0,h=0,d=0,p=0,v=0,w=0,I=0,_=0,m=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,x=0;x<n&&(i||o||s);x++){var S=e[x]&255;s&&(a>0?S&128?a--:s=!1:S&128&&(S&64?(a++,S&32?(a++,S&16?(a++,S&8?s=!1:c++):l++):u++):s=!1)),i&&(S>127&&S<160?i=!1:S>159&&(S<192||S===215||S===247)&&_++),o&&(h>0?S<64||S===127||S>252?o=!1:h--:S===128||S===160||S>239?o=!1:S>160&&S<224?(d++,v=0,p++,p>w&&(w=p)):S>127?(h++,p=0,v++,v>I&&(I=v)):(p=0,v=0))}return s&&a>0&&(s=!1),o&&h>0&&(o=!1),s&&(m||u+l+c>0)?t.UTF8:o&&(t.ASSUME_SHIFT_JIS||w>=3||I>=3)?t.SHIFT_JIS:i&&o?w===2&&d===2||_*10>=n?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:o?t.SHIFT_JIS:s?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=-1;function o(a,u,l,c,h,d){if(a==="%%")return"%";if(r[++i]!==void 0){a=c?parseInt(c.substr(1)):void 0;var p=h?parseInt(h.substr(1)):void 0,v;switch(d){case"s":v=r[i];break;case"c":v=r[i][0];break;case"f":v=parseFloat(r[i]).toFixed(a);break;case"p":v=parseFloat(r[i]).toPrecision(a);break;case"e":v=parseFloat(r[i]).toExponential(a);break;case"x":v=parseInt(r[i]).toString(p||16);break;case"d":v=parseFloat(parseInt(r[i],p||10).toPrecision(a)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(p);for(var w=parseInt(l),I=l&&l[0]+""=="0"?"0":" ";v.length<w;)v=u!==void 0?v+I:I+v;return v}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},t.getBytes=function(e,r){return Rr.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=st.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=st.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=st.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),fe=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=_e.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var i=r;r<r+n;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),ln=function(){function t(e,r,n,i){if(this.width=e,this.height=r,this.rowSize=n,this.bits=i,r==null&&(r=e),this.height=r,e<1||r<1)throw new re("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,i=new t(n,r),o=0;o<r;o++)for(var s=e[o],a=0;a<n;a++)s[a]&&i.set(a,o);return i},t.parseFromString=function(e,r,n){if(e===null)throw new re("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,a=-1,u=0,l=0;l<e.length;)if(e.charAt(l)===`
`||e.charAt(l)==="\r"){if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new re("row lengths do not match");s=o,u++}l++}else if(e.substring(l,l+r.length)===r)l+=r.length,i[o]=!0,o++;else if(e.substring(l,l+n.length)===n)l+=n.length,i[o]=!1,o++;else throw new re("illegal character encountered: "+e.substring(l));if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new re("row lengths do not match");u++}for(var c=new t(a,u),h=0;h<o;h++)i[h]&&c.set(Math.floor(h%a),Math.floor(h/a));return c},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new re("input matrix dimensions do not match");for(var r=new mt(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var a=o*n,u=e.getRow(o,r).getBitArray(),l=0;l<n;l++)i[a+l]^=u[l]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,i){if(r<0||e<0)throw new re("Left and top must be nonnegative");if(i<1||n<1)throw new re("Height and width must be at least 1");var o=e+n,s=r+i;if(s>this.height||o>this.width)throw new re("The region must fit inside the matrix");for(var a=this.rowSize,u=this.bits,l=r;l<s;l++)for(var c=l*a,h=e;h<o;h++)u[c+Math.floor(h/32)]|=1<<(h&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new mt(this.width):r.clear();for(var n=this.rowSize,i=this.bits,o=e*n,s=0;s<n;s++)r.setBulk(s*32,i[o+s]);return r},t.prototype.setRow=function(e,r){Le.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new mt(e),i=new mt(e),o=0,s=Math.floor((r+1)/2);o<s;o++)n=this.getRow(o,n),i=this.getRow(r-1-o,i),n.reverse(),i.reverse(),this.setRow(o,i),this.setRow(r-1-o,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,i=this.bits,o=e,s=r,a=-1,u=-1,l=0;l<r;l++)for(var c=0;c<n;c++){var h=i[l*n+c];if(h!==0){if(l<s&&(s=l),l>u&&(u=l),c*32<o){for(var d=0;!(h<<31-d&4294967295);)d++;c*32+d<o&&(o=c*32+d)}if(c*32+31>a){for(var d=31;!(h>>>d);)d--;c*32+d>a&&(a=c*32+d)}}}return a<o||u<s?null:Int32Array.from([o,s,a-o+1,u-s+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var i=n/e,o=n%e*32,s=r[n],a=0;!(s<<31-a&4294967295);)a++;return o+=a,Int32Array.from([o,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),o=Math.floor(n%e)*32,s=r[n],a=31;!(s>>>a);)a--;return o+=a,Int32Array.from([o,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&at.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+at.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var i=new fe,o=0,s=this.height;o<s;o++){for(var a=0,u=this.width;a<u;a++)i.append(this.get(a,o)?e:r);i.append(n)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),GS=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V=function(t){GS(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(fr),KS=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XS=function(t){KS(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var i=this.getLuminanceSource(),o=i.getWidth();n==null||n.getSize()<o?n=new mt(o):n.clear(),this.initArrays(o);for(var s=i.getRow(r,this.luminances),a=this.buckets,u=0;u<o;u++)a[(s[u]&255)>>e.LUMINANCE_SHIFT]++;var l=e.estimateBlackPoint(a);if(o<3)for(var u=0;u<o;u++)(s[u]&255)<l&&n.set(u);else for(var c=s[0]&255,h=s[1]&255,u=1;u<o-1;u++){var d=s[u+1]&255;(h*4-c-d)/2<l&&n.set(u),c=h,h=d}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight(),o=new ln(n,i);this.initArrays(n);for(var s=this.buckets,a=1;a<5;a++)for(var u=Math.floor(i*a/5),l=r.getRow(u,this.luminances),c=Math.floor(n*4/5),h=Math.floor(n/5);h<c;h++){var d=l[h]&255;s[d>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(s),v=r.getMatrix(),a=0;a<i;a++)for(var w=a*n,h=0;h<n;h++){var d=v[w+h]&255;d<p&&o.set(h,a)}return o},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(r){for(var n=r.length,i=0,o=0,s=0,a=0;a<n;a++)r[a]>s&&(o=a,s=r[a]),r[a]>i&&(i=r[a]);for(var u=0,l=0,a=0;a<n;a++){var c=a-o,h=r[a]*c*c;h>l&&(u=a,l=h)}if(o>u){var d=o;o=u,u=d}if(u-o<=n/16)throw new V;for(var p=u-1,v=-1,a=u-1;a>o;a--){var w=a-o,h=w*w*(u-a)*(i-r[a]);h>v&&(p=a,v=h)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(VS),qS=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),YS=function(t){qS(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=r.getMatrix(),s=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&s++;var a=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&a++;var u=e.calculateBlackPoints(o,s,a,n,i),l=new ln(n,i);e.calculateThresholdForBlock(o,s,a,n,i,u,l),this.matrix=l}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,i,o,s,a,u){for(var l=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,h=0;h<i;h++){var d=h<<e.BLOCK_SIZE_POWER;d>l&&(d=l);for(var p=e.cap(h,2,i-3),v=0;v<n;v++){var w=v<<e.BLOCK_SIZE_POWER;w>c&&(w=c);for(var I=e.cap(v,2,n-3),_=0,m=-2;m<=2;m++){var x=a[p+m];_+=x[I-2]+x[I-1]+x[I]+x[I+1]+x[I+2]}var S=_/25;e.thresholdBlock(r,w,d,S,o,u)}}},e.cap=function(r,n,i){return r<n?n:r>i?i:r},e.thresholdBlock=function(r,n,i,o,s,a){for(var u=0,l=i*s+n;u<e.BLOCK_SIZE;u++,l+=s)for(var c=0;c<e.BLOCK_SIZE;c++)(r[l+c]&255)<=o&&a.set(n+c,i+u)},e.calculateBlackPoints=function(r,n,i,o,s){for(var a=s-e.BLOCK_SIZE,u=o-e.BLOCK_SIZE,l=new Array(i),c=0;c<i;c++){l[c]=new Int32Array(n);var h=c<<e.BLOCK_SIZE_POWER;h>a&&(h=a);for(var d=0;d<n;d++){var p=d<<e.BLOCK_SIZE_POWER;p>u&&(p=u);for(var v=0,w=255,I=0,_=0,m=h*o+p;_<e.BLOCK_SIZE;_++,m+=o){for(var x=0;x<e.BLOCK_SIZE;x++){var S=r[m+x]&255;v+=S,S<w&&(w=S),S>I&&(I=S)}if(I-w>e.MIN_DYNAMIC_RANGE)for(_++,m+=o;_<e.BLOCK_SIZE;_++,m+=o)for(var x=0;x<e.BLOCK_SIZE;x++)v+=r[m+x]&255}var P=v>>e.BLOCK_SIZE_POWER*2;if(I-w<=e.MIN_DYNAMIC_RANGE&&(P=w/2,c>0&&d>0)){var k=(l[c-1][d]+2*l[c][d-1]+l[c-1][d-1])/4;w<k&&(P=k)}l[c][d]=P}}return l},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(XS),qc=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,i){throw new Tl("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new Tl("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new Tl("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new fe,n=0;n<this.height;n++){for(var i=this.getRow(n,e),o=0;o<this.width;o++){var s=i[o]&255,a=void 0;s<64?a="#":s<128?a="+":s<192?a=".":a=" ",r.append(a)}r.append(`
`)}return r.toString()},t}(),QS=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R1=function(t){QS(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var i=this.delegate.getRow(r,n),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),o=0;o<n;o++)i[o]=255-(r[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,i,o){return new e(this.delegate.crop(r,n,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(qc),ZS=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JS=function(t){ZS(e,t);function e(r,n){n===void 0&&(n=!1);var i=t.call(this,r.width,r.height)||this;return i.canvas=r,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(r,n),i}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var i=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(i.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,i,o){o===void 0&&(o=!1);var s=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var a=0,u=0,l=r.length;a<l;a+=4,u++){var c=void 0,h=r[a+3];if(h===0)c=255;else{var d=r[a],p=r[a+1],v=r[a+2];c=306*d+601*p+117*v+512>>10}s[u]=c}else for(var a=0,u=0,w=r.length;a<w;a+=4,u++){var c=void 0,h=r[a+3];if(h===0)c=255;else{var d=r[a],p=r[a+1],v=r[a+2];c=306*d+601*p+117*v+512>>10}s[u]=255-c}return s},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new re("Requested row is outside the image: "+r);var i=this.getWidth(),o=r*i;return n===null?n=this.buffer.slice(o,o+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(o,o+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,o){return t.prototype.crop.call(this,r,n,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),i=n.getContext("2d"),o=r*e.DEGREE_TO_RADIANS,s=this.canvas.width,a=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*a),l=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*a);return n.width=u,n.height=l,i.translate(u/2,l/2),i.rotate(o),i.drawImage(this.canvas,s/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new R1(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(qc),e3=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Kt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(c){try{l(n.next(c))}catch(h){s(h)}}function u(c){try{l(n.throw(c))}catch(h){s(h)}}function l(c){c.done?o(c.value):i(c.value).then(a,u)}l((n=n.apply(t,e||[])).next())})},Xt=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(c){l=[6,c],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},t3=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vs=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Kt(this,void 0,void 0,function(){var e,r,n,i,o,s,a,u,l,c,h,d;return Xt(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=t3(e),i=n.next();!i.done;i=n.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,u=o.label||"Video device "+(r.length+1),l=o.groupId,c={deviceId:a,label:u,kind:s,groupId:l},r.push(c))}catch(v){h={error:v}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(h)throw h.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Kt(this,void 0,void 0,function(){var e;return Xt(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new e3(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Kt(this,void 0,void 0,function(){var r;return Xt(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Kt(this,void 0,void 0,function(){return Xt(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Kt(this,void 0,void 0,function(){var n,i;return Xt(this,function(o){switch(o.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,o.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Kt(this,void 0,void 0,function(){var n;return Xt(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Kt(this,void 0,void 0,function(){var n,i;return Xt(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=o.sent(),[4,this.decodeOnce(n)];case 2:return i=o.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Kt(this,void 0,void 0,function(){return Xt(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Kt(this,void 0,void 0,function(){var i,o;return Xt(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,r,n)];case 1:return[2,s.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Kt(this,void 0,void 0,function(){var i;return Xt(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,r,n)];case 2:return[2,o.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Kt(this,void 0,void 0,function(){var i;return Xt(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,o.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Kt(this,void 0,void 0,function(){var n;return Xt(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,i){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Kt(this,void 0,void 0,function(){return Xt(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Mr("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Mr("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Mr("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Mr("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Mr("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Mr("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Mr("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Mr("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Mr("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Mr("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,r);return n.src=e,i},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,i){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Kt(this,void 0,void 0,function(){return Xt(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Kt(this,void 0,void 0,function(){return Xt(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var i=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var o=function(s,a){if(i._stopAsyncDecode){a(new V("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var u=i.decode(e);s(u)}catch(d){var l=r&&d instanceof V,c=d instanceof vt||d instanceof H,h=c&&n;if(l||h)return setTimeout(o,i._timeBetweenDecodingAttempts,s,a);a(d)}};return new Promise(function(s,a){return o(s,a)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var o=n.decode(e);r(o,null),setTimeout(i,n.timeBetweenScansMillis)}catch(u){r(null,u);var s=u instanceof vt||u instanceof H,a=u instanceof V;(s||a)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new JS(n,r),o=new YS(i);return new FS(o)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=i+"px",r.width=n,r.height=i,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),$t=function(){function t(e,r,n,i,o,s){n===void 0&&(n=r==null?0:8*r.length),s===void 0&&(s=Le.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=Le.currentTimeMillis():this.timestamp=s}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Le.arraycopy(r,0,n,0,r.length),Le.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),zd;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(zd||(zd={}));const te=zd;var $d;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})($d||($d={}));const Ct=$d;var Yc=function(){function t(e,r,n,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),ra=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new re;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),fi=function(){function t(e,r){if(r.length===0)throw new re;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),Le.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var i=0,o=r.length;i!==o;i++){var s=r[i];n=ra.addOrSubtract(n,s)}return n}n=r[0];for(var a=r.length,u=this.field,i=1;i<a;i++)n=ra.addOrSubtract(u.multiply(e,n),r[i]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new re("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var o=new Int32Array(n.length),s=n.length-r.length;Le.arraycopy(n,0,o,0,s);for(var a=s;a<n.length;a++)o[a]=ra.addOrSubtract(r[a-s],n[a]);return new t(this.field,o)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new re("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,i=e.coefficients,o=i.length,s=new Int32Array(n+o-1),a=this.field,u=0;u<n;u++)for(var l=r[u],c=0;c<o;c++)s[u+c]=ra.addOrSubtract(s[u+c],a.multiply(l,i[c]));return new t(a,s)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,i=new Int32Array(r),o=this.coefficients,s=0;s<r;s++)i[s]=n.multiply(o[s],e);return new t(n,i)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new re;if(r===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,o=new Int32Array(i+e),s=this.field,a=0;a<i;a++)o[a]=s.multiply(n[a],r);return new t(s,o)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new re("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new re("Divide by 0");for(var r=this.field,n=r.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=r.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),u=r.multiply(i.getCoefficient(i.getDegree()),s),l=e.multiplyByMonomial(a,u),c=r.buildMonomial(a,u);n=n.addOrSubtract(c),i=i.addOrSubtract(l)}return[n,i]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),r3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kw=function(t){r3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(fr),n3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),or=function(t){n3(e,t);function e(r,n,i){var o=t.call(this)||this;o.primitive=r,o.size=n,o.generatorBase=i;for(var s=new Int32Array(n),a=1,u=0;u<n;u++)s[u]=a,a*=2,a>=n&&(a^=r,a&=n-1);o.expTable=s;for(var l=new Int32Array(n),u=0;u<n-1;u++)l[s[u]]=u;return o.logTable=l,o.zero=new fi(o,Int32Array.from([0])),o.one=new fi(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new re;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new fi(this,i)},e.prototype.inverse=function(r){if(r===0)throw new Kw;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+de.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(ra),i3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),el=function(t){i3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(fr),o3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),su=function(t){o3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(fr),Qc=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,i=new fi(n,e),o=new Int32Array(r),s=!0,a=0;a<r;a++){var u=i.evaluateAt(n.exp(a+n.getGeneratorBase()));o[o.length-1-a]=u,u!==0&&(s=!1)}if(!s)for(var l=new fi(n,o),c=this.runEuclideanAlgorithm(n.buildMonomial(r,1),l,r),h=c[0],d=c[1],p=this.findErrorLocations(h),v=this.findErrorMagnitudes(d,p),a=0;a<p.length;a++){var w=e.length-1-n.log(p[a]);if(w<0)throw new el("Bad error location");e[w]=or.addOrSubtract(e[w],v[a])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var o=this.field,s=e,a=r,u=o.getZero(),l=o.getOne();a.getDegree()>=(n/2|0);){var c=s,h=u;if(s=a,u=l,s.isZero())throw new el("r_{i-1} was zero");a=c;for(var d=o.getZero(),p=s.getCoefficient(s.getDegree()),v=o.inverse(p);a.getDegree()>=s.getDegree()&&!a.isZero();){var w=a.getDegree()-s.getDegree(),I=o.multiply(a.getCoefficient(a.getDegree()),v);d=d.addOrSubtract(o.buildMonomial(w,I)),a=a.addOrSubtract(s.multiplyByMonomial(w,I))}if(l=d.multiply(u).addOrSubtract(h),a.getDegree()>=s.getDegree())throw new su("Division algorithm failed to reduce polynomial?")}var _=l.getCoefficient(0);if(_===0)throw new el("sigmaTilde(0) was zero");var m=o.inverse(_),x=l.multiplyScalar(m),S=a.multiplyScalar(m);return[x,S]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),i=0,o=this.field,s=1;s<o.getSize()&&i<r;s++)e.evaluateAt(s)===0&&(n[i]=o.inverse(s),i++);if(i!==r)throw new el("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,i=new Int32Array(n),o=this.field,s=0;s<n;s++){for(var a=o.inverse(r[s]),u=1,l=0;l<n;l++)if(s!==l){var c=o.multiply(r[l],a),h=c&1?c&-2:c|1;u=o.multiply(u,h)}i[s]=o.multiply(e.evaluateAt(a),o.inverse(u)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],a))}return i},t}(),xt;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(xt||(xt={}));var Qv=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),i=this.correctBits(n),o=t.convertBoolArrayToByteArray(i),s=t.getEncodedData(i),a=new Yc(o,s,null,null);return a.setNumBits(i.length),a},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=xt.UPPER,i=xt.UPPER,o="",s=0;s<r;)if(i===xt.BINARY){if(r-s<5)break;var a=t.readCode(e,s,5);if(s+=5,a===0){if(r-s<11)break;a=t.readCode(e,s,11)+31,s+=11}for(var u=0;u<a;u++){if(r-s<8){s=r;break}var l=t.readCode(e,s,8);o+=_e.castAsNonUtf8Char(l),s+=8}i=n}else{var c=i===xt.DIGIT?4:5;if(r-s<c)break;var l=t.readCode(e,s,c);s+=c;var h=t.getCharacter(i,l);h.startsWith("CTRL_")?(n=i,i=t.getTable(h.charAt(5)),h.charAt(6)==="L"&&(n=i)):(o+=h,i=n)}return o},t.getTable=function(e){switch(e){case"L":return xt.LOWER;case"P":return xt.PUNCT;case"M":return xt.MIXED;case"D":return xt.DIGIT;case"B":return xt.BINARY;case"U":default:return xt.UPPER}},t.getCharacter=function(e,r){switch(e){case xt.UPPER:return t.UPPER_TABLE[r];case xt.LOWER:return t.LOWER_TABLE[r];case xt.MIXED:return t.MIXED_TABLE[r];case xt.PUNCT:return t.PUNCT_TABLE[r];case xt.DIGIT:return t.DIGIT_TABLE[r];default:throw new su("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=or.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=or.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=or.AZTEC_DATA_10):(n=12,r=or.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/n;if(o<i)throw new H;for(var s=e.length%n,a=new Int32Array(o),u=0;u<o;u++,s+=n)a[u]=t.readCode(e,s,n);try{var l=new Qc(r);l.decode(a,o-i)}catch(I){throw new H(I)}for(var c=(1<<n)-1,h=0,u=0;u<i;u++){var d=a[u];if(d===0||d===c)throw new H;(d===1||d===c-1)&&h++}for(var p=new Array(i*n-h),v=0,u=0;u<i;u++){var d=a[u];if(d===1||d===c-1)p.fill(d>1,v,v+n-1),v+=n-1;else for(var w=n-1;w>=0;--w)p[v++]=(d&1<<w)!==0}return p},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(r?11:14)+n*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(n,r));if(r)for(var a=0;a<o.length;a++)o[a]=a;else for(var u=i+1+2*de.truncDivision(de.truncDivision(i,2)-1,15),l=i/2,c=de.truncDivision(u,2),a=0;a<l;a++){var h=a+de.truncDivision(a,15);o[l-a-1]=c-h-1,o[l+a]=c+h+1}for(var a=0,d=0;a<n;a++){for(var p=(n-a)*4+(r?9:12),v=a*2,w=i-1-v,I=0;I<p;I++)for(var _=I*2,m=0;m<2;m++)s[d+_+m]=e.get(o[v+m],o[v+I]),s[d+2*p+_+m]=e.get(o[v+I],o[w-m]),s[d+4*p+_+m]=e.get(o[w-m],o[w-I]),s[d+6*p+_+m]=e.get(o[w-I],o[v+m]);d+=p*8}return s},t.readCode=function(e,r,n){for(var i=0,o=r;o<r+n;o++)i<<=1,e[o]&&(i|=1);return i},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),Ie=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,i){var o=e-n,s=r-i;return Math.sqrt(o*o+s*s)},t.sum=function(e){for(var r=0,n=0,i=e.length;n!==i;n++){var o=e[n];r+=o}return r},t}(),Hd=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Y=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*Hd.floatToIntBits(this.x)+Hd.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,a;if(n>=r&&n>=i?(s=e[0],o=e[1],a=e[2]):i>=n&&i>=r?(s=e[1],o=e[0],a=e[2]):(s=e[2],o=e[0],a=e[1]),this.crossProductZ(o,s,a)<0){var u=o;o=a,a=u}e[0]=o,e[1]=s,e[2]=a},t.distance=function(e,r){return Ie.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var i=r.x,o=r.y;return(n.x-i)*(e.y-o)-(n.y-o)*(e.x-i)},t}(),b1=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),s3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),a3=function(t){s3(e,t);function e(r,n,i,o,s){var a=t.call(this,r,n)||this;return a.compact=i,a.nbDatablocks=o,a.nbLayers=s,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(b1),Wd=function(){function t(e,r,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=r/2|0;if(this.leftInit=n-o,this.rightInit=n+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,i=this.downInit,o=!1,s=!0,a=!1,u=!1,l=!1,c=!1,h=!1,d=this.width,p=this.height;s;){s=!1;for(var v=!0;(v||!u)&&r<d;)v=this.containsBlackPoint(n,i,r,!1),v?(r++,s=!0,u=!0):u||r++;if(r>=d){o=!0;break}for(var w=!0;(w||!l)&&i<p;)w=this.containsBlackPoint(e,r,i,!0),w?(i++,s=!0,l=!0):l||i++;if(i>=p){o=!0;break}for(var I=!0;(I||!c)&&e>=0;)I=this.containsBlackPoint(n,i,e,!1),I?(e--,s=!0,c=!0):c||e--;if(e<0){o=!0;break}for(var _=!0;(_||!h)&&n>=0;)_=this.containsBlackPoint(e,r,n,!0),_?(n--,s=!0,h=!0):h||n--;if(n<0){o=!0;break}s&&(a=!0)}if(!o&&a){for(var m=r-e,x=null,S=1;x===null&&S<m;S++)x=this.getBlackPointOnSegment(e,i-S,e+S,i);if(x==null)throw new V;for(var P=null,S=1;P===null&&S<m;S++)P=this.getBlackPointOnSegment(e,n+S,e+S,n);if(P==null)throw new V;for(var k=null,S=1;k===null&&S<m;S++)k=this.getBlackPointOnSegment(r,n+S,r-S,n);if(k==null)throw new V;for(var A=null,S=1;A===null&&S<m;S++)A=this.getBlackPointOnSegment(r,i-S,r-S,i);if(A==null)throw new V;return this.centerEdges(A,x,k,P)}else throw new V},t.prototype.getBlackPointOnSegment=function(e,r,n,i){for(var o=Ie.round(Ie.distance(e,r,n,i)),s=(n-e)/o,a=(i-r)/o,u=this.image,l=0;l<o;l++){var c=Ie.round(e+l*s),h=Ie.round(r+l*a);if(u.get(c,h))return new Y(c,h)}return null},t.prototype.centerEdges=function(e,r,n,i){var o=e.getX(),s=e.getY(),a=r.getX(),u=r.getY(),l=n.getX(),c=n.getY(),h=i.getX(),d=i.getY(),p=t.CORR;return o<this.width/2?[new Y(h-p,d+p),new Y(a+p,u+p),new Y(l-p,c-p),new Y(o+p,s-p)]:[new Y(h+p,d+p),new Y(a+p,u-p),new Y(l-p,c+p),new Y(o-p,s-p)]},t.prototype.containsBlackPoint=function(e,r,n,i){var o=this.image;if(i){for(var s=e;s<=r;s++)if(o.get(s,n))return!0}else for(var a=e;a<=r;a++)if(o.get(n,a))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),Zv=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<r.length&&o;s+=2){var a=Math.floor(r[s]),u=Math.floor(r[s+1]);if(a<-1||a>n||u<-1||u>i)throw new V;o=!1,a===-1?(r[s]=0,o=!0):a===n&&(r[s]=n-1,o=!0),u===-1?(r[s+1]=0,o=!0):u===i&&(r[s+1]=i-1,o=!0)}o=!0;for(var s=r.length-2;s>=0&&o;s-=2){var a=Math.floor(r[s]),u=Math.floor(r[s+1]);if(a<-1||a>n||u<-1||u>i)throw new V;o=!1,a===-1?(r[s]=0,o=!0):a===n&&(r[s]=n-1,o=!0),u===-1?(r[s+1]=0,o=!0):u===i&&(r[s+1]=i-1,o=!0)}},t}(),Xw=function(){function t(e,r,n,i,o,s,a,u,l){this.a11=e,this.a21=r,this.a31=n,this.a12=i,this.a22=o,this.a32=s,this.a13=a,this.a23=u,this.a33=l}return t.quadrilateralToQuadrilateral=function(e,r,n,i,o,s,a,u,l,c,h,d,p,v,w,I){var _=t.quadrilateralToSquare(e,r,n,i,o,s,a,u),m=t.squareToQuadrilateral(l,c,h,d,p,v,w,I);return m.times(_)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,u=this.a23,l=this.a31,c=this.a32,h=this.a33,d=0;d<r;d+=2){var p=e[d],v=e[d+1],w=o*p+u*v+h;e[d]=(n*p+s*v+l)/w,e[d+1]=(i*p+a*v+c)/w}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,u=this.a23,l=this.a31,c=this.a32,h=this.a33,d=e.length,p=0;p<d;p++){var v=e[p],w=r[p],I=o*v+u*w+h;e[p]=(n*v+s*w+l)/I,r[p]=(i*v+a*w+c)/I}},t.squareToQuadrilateral=function(e,r,n,i,o,s,a,u){var l=e-n+o-a,c=r-i+s-u;if(l===0&&c===0)return new t(n-e,o-n,e,i-r,s-i,r,0,0,1);var h=n-o,d=a-o,p=i-s,v=u-s,w=h*v-d*p,I=(l*v-d*c)/w,_=(h*c-l*p)/w;return new t(n-e+I*n,a-e+_*a,e,i-r+I*i,u-r+_*u,r,I,_,1)},t.quadrilateralToSquare=function(e,r,n,i,o,s,a,u){return t.squareToQuadrilateral(e,r,n,i,o,s,a,u).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),u3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),l3=function(t){u3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,i,o,s,a,u,l,c,h,d,p,v,w,I,_,m,x,S){var P=Xw.quadrilateralToQuadrilateral(o,s,a,u,l,c,h,d,p,v,w,I,_,m,x,S);return this.sampleGridWithTransform(r,n,i,P)},e.prototype.sampleGridWithTransform=function(r,n,i,o){if(n<=0||i<=0)throw new V;for(var s=new ln(n,i),a=new Float32Array(2*n),u=0;u<i;u++){for(var l=a.length,c=u+.5,h=0;h<l;h+=2)a[h]=h/2+.5,a[h+1]=c;o.transformPoints(a),Zv.checkAndNudgePoints(r,a);try{for(var h=0;h<l;h+=2)r.get(Math.floor(a[h]),Math.floor(a[h+1]))&&s.set(h/2,u)}catch{throw new V}}return s},e}(Zv),O1=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new l3,t}(),rr=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Y(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),c3=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var o=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),s=this.getMatrixCornerPoints(n);return new a3(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new V;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var i=0,o=0;o<4;o++){var s=n[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(o,s,a){var u=(o>>r-2<<1)+(o&1);n=(n<<3)+u}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(de.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new V},t.prototype.getCorrectedParameterData=function(e,r){var n,i;r?(n=7,i=2):(n=10,i=4);for(var o=n-i,s=new Int32Array(n),a=n-1;a>=0;--a)s[a]=e&15,e>>=4;try{var u=new Qc(or.AZTEC_PARAM);u.decode(s,o)}catch{throw new V}for(var l=0,a=0;a<i;a++)l=(l<<4)+s[a];return l},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(r,s,1,-1),u=this.getFirstDifferent(n,s,1,1),l=this.getFirstDifferent(i,s,-1,1),c=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var h=this.distancePoint(c,a)*this.nbCenterLayers/(this.distancePoint(o,r)*(this.nbCenterLayers+2));if(h<.75||h>1.25||!this.isWhiteOrBlackRectangle(a,u,l,c))break}r=a,n=u,i=l,o=c,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;var d=new Y(r.getX()+.5,r.getY()-.5),p=new Y(n.getX()+.5,n.getY()+.5),v=new Y(i.getX()-.5,i.getY()+.5),w=new Y(o.getX()-.5,o.getY()-.5);return this.expandSquare([d,p,v,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,i;try{var o=new Wd(this.image).detect();e=o[0],r=o[1],n=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new rr(s+7,a-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new rr(s+7,a+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new rr(s-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new rr(s-7,a-7),!1,-1,-1).toResultPoint()}var u=Ie.round((e.getX()+i.getX()+r.getX()+n.getX())/4),l=Ie.round((e.getY()+i.getY()+r.getY()+n.getY())/4);try{var o=new Wd(this.image,15,u,l).detect();e=o[0],r=o[1],n=o[2],i=o[3]}catch{e=this.getFirstDifferent(new rr(u+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new rr(u+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new rr(u-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new rr(u-7,l-7),!1,-1,-1).toResultPoint()}return u=Ie.round((e.getX()+i.getX()+r.getX()+n.getX())/4),l=Ie.round((e.getY()+i.getY()+r.getY()+n.getY())/4),new rr(u,l)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,i,o){var s=O1.getInstance(),a=this.getDimension(),u=a/2-this.nbCenterLayers,l=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,u,u,l,u,l,l,u,l,r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY(),o.getX(),o.getY())},t.prototype.sampleLine=function(e,r,n){for(var i=0,o=this.distanceResultPoint(e,r),s=o/n,a=e.getX(),u=e.getY(),l=s*(r.getX()-e.getX())/o,c=s*(r.getY()-e.getY())/o,h=0;h<n;h++)this.image.get(Ie.round(a+h*l),Ie.round(u+h*c))&&(i|=1<<n-h-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,i){var o=3;e=new rr(e.getX()-o,e.getY()+o),r=new rr(r.getX()-o,r.getY()-o),n=new rr(n.getX()+o,n.getY()-o),i=new rr(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var a=this.getColor(e,r);return a!==s||(a=this.getColor(r,n),a!==s)?!1:(a=this.getColor(n,i),a===s)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),i=(r.getX()-e.getX())/n,o=(r.getY()-e.getY())/n,s=0,a=e.getX(),u=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(n),h=0;h<c;h++)a+=i,u+=o,this.image.get(Ie.round(a),Ie.round(u))!==l&&s++;var d=s/n;return d>.1&&d<.9?0:d<=.1===l?1:-1},t.prototype.getFirstDifferent=function(e,r,n,i){for(var o=e.getX()+n,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===r;)o+=n,s+=i;for(o-=n,s-=i;this.isValid(o,s)&&this.image.get(o,s)===r;)o+=n;for(o-=n;this.isValid(o,s)&&this.image.get(o,s)===r;)s+=i;return s-=i,new rr(o,s)},t.prototype.expandSquare=function(e,r,n){var i=n/(2*r),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,l=new Y(a+i*o,u+i*s),c=new Y(a-i*o,u-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;var h=new Y(a+i*o,u+i*s),d=new Y(a-i*o,u-i*s),p=[l,h,c,d];return p},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=Ie.round(e.getX()),n=Ie.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return Ie.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return Ie.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(de.truncDivision(this.nbLayers-4,8)+1)+15},t}(),Gd=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,i=new c3(e.getBlackMatrix()),o=null,s=null;try{var a=i.detectMirror(!1);o=a.getPoints(),this.reportFoundResultPoints(r,o),s=new Qv().decode(a)}catch(h){n=h}if(s==null)try{var a=i.detectMirror(!0);o=a.getPoints(),this.reportFoundResultPoints(r,o),s=new Qv().decode(a)}catch(h){throw n??h}var u=new $t(s.getText(),s.getRawBytes(),s.getNumBits(),o,te.AZTEC,Le.currentTimeMillis()),l=s.getByteSegments();l!=null&&u.putMetadata(Ct.BYTE_SEGMENTS,l);var c=s.getECLevel();return c!=null&&u.putMetadata(Ct.ERROR_CORRECTION_LEVEL,c),u},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(He.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(i,o,s){n.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),f3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){f3(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Gd,r)||this}return e})(vs);var lt=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(He.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,r),s=o.getResultMetadata(),a=270;s!==null&&s.get(Ct.ORIENTATION)===!0&&(a=a+s.get(Ct.ORIENTATION)%360),o.putMetadata(Ct.ORIENTATION,a);var u=o.getResultPoints();if(u!==null)for(var l=i.getHeight(),c=0;c<u.length;c++)u[c]=new Y(l-u[c].getY()-1,u[c].getX());return o}else throw new V}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),i=e.getHeight(),o=new mt(n),s=r&&r.get(He.TRY_HARDER)===!0,a=Math.max(1,i>>(s?8:5)),u;s?u=i:u=15;for(var l=Math.trunc(i/2),c=0;c<u;c++){var h=Math.trunc((c+1)/2),d=(c&1)===0,p=l+a*(d?h:-h);if(p<0||p>=i)break;try{o=e.getBlackRow(p,o)}catch{continue}for(var v=function(m){if(m===1&&(o.reverse(),r&&r.get(He.NEED_RESULT_POINT_CALLBACK)===!0)){var x=new Map;r.forEach(function(k,A){return x.set(A,k)}),x.delete(He.NEED_RESULT_POINT_CALLBACK),r=x}try{var S=w.decodeRow(p,o,r);if(m===1){S.putMetadata(Ct.ORIENTATION,180);var P=S.getResultPoints();P!==null&&(P[0]=new Y(n-P[0].getX()-1,P[0].getY()),P[1]=new Y(n-P[1].getX()-1,P[1].getY()))}return{value:S}}catch{}},w=this,I=0;I<2;I++){var _=v(I);if(typeof _=="object")return _.value}}throw new V},t.recordPattern=function(e,r,n){for(var i=n.length,o=0;o<i;o++)n[o]=0;var s=e.getSize();if(r>=s)throw new V;for(var a=!e.get(r),u=0,l=r;l<s;){if(e.get(l)!==a)n[u]++;else{if(++u===i)break;n[u]=1,a=!a}l++}if(!(u===i||u===i-1&&l===s))throw new V},t.recordPatternInReverse=function(e,r,n){for(var i=n.length,o=e.get(r);r>0&&i>=0;)e.get(--r)!==o&&(i--,o=!o);if(i>=0)throw new V;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=r[a];if(o<s)return Number.POSITIVE_INFINITY;var u=o/s;n*=u;for(var l=0,c=0;c<i;c++){var h=e[c],d=r[c]*u,p=h>d?h-d:d-h;if(p>n)return Number.POSITIVE_INFINITY;l+=p}return l/o},t}(),h3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jv=function(t){h3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),i=r.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),a=i,u=!1,l=6,c=i;c<n;c++)if(r.get(c)!==u)s[o]++;else{if(o===l-1){for(var h=e.MAX_AVG_VARIANCE,d=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var v=lt.patternMatchVariance(s,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);v<h&&(h=v,d=p)}if(d>=0&&r.isRange(Math.max(0,a-(c-a)/2),a,!1))return Int32Array.from([a,c,d]);a+=s[0]+s[1],s=s.slice(2,s.length),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,u=!u}throw new V},e.decodeCode=function(r,n,i){lt.recordPattern(r,i,n);for(var o=e.MAX_AVG_VARIANCE,s=-1,a=0;a<e.CODE_PATTERNS.length;a++){var u=e.CODE_PATTERNS[a],l=this.patternMatchVariance(n,u,e.MAX_INDIVIDUAL_VARIANCE);l<o&&(o=l,s=a)}if(s>=0)return s;throw new V},e.prototype.decodeRow=function(r,n,i){var o=i&&i.get(He.ASSUME_GS1)===!0,s=e.findStartPattern(n),a=s[2],u=0,l=new Uint8Array(20);l[u++]=a;var c;switch(a){case e.CODE_START_A:c=e.CODE_CODE_A;break;case e.CODE_START_B:c=e.CODE_CODE_B;break;case e.CODE_START_C:c=e.CODE_CODE_C;break;default:throw new H}for(var h=!1,d=!1,p="",v=s[0],w=s[1],I=Int32Array.from([0,0,0,0,0,0]),_=0,m=0,x=a,S=0,P=!0,k=!1,A=!1;!h;){var E=d;switch(d=!1,_=m,m=e.decodeCode(n,I,w),l[u++]=m,m!==e.CODE_STOP&&(P=!0),m!==e.CODE_STOP&&(S++,x+=S*m),v=w,w+=I.reduce(function(we,z){return we+z},0),m){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new H}switch(c){case e.CODE_CODE_A:if(m<64)A===k?p+=String.fromCharCode(" ".charCodeAt(0)+m):p+=String.fromCharCode(" ".charCodeAt(0)+m+128),A=!1;else if(m<96)A===k?p+=String.fromCharCode(m-64):p+=String.fromCharCode(m+64),A=!1;else switch(m!==e.CODE_STOP&&(P=!1),m){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+=String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!k&&A?(k=!0,A=!1):k&&A?(k=!1,A=!1):A=!0;break;case e.CODE_SHIFT:d=!0,c=e.CODE_CODE_B;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_B:if(m<96)A===k?p+=String.fromCharCode(" ".charCodeAt(0)+m):p+=String.fromCharCode(" ".charCodeAt(0)+m+128),A=!1;else switch(m!==e.CODE_STOP&&(P=!1),m){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+=String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!k&&A?(k=!0,A=!1):k&&A?(k=!1,A=!1):A=!0;break;case e.CODE_SHIFT:d=!0,c=e.CODE_CODE_A;break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_C:if(m<100)m<10&&(p+="0"),p+=m;else switch(m!==e.CODE_STOP&&(P=!1),m){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+=String.fromCharCode(29));break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_STOP:h=!0;break}break}E&&(c=c===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var T=w-v;if(w=n.getNextUnset(w),!n.isRange(w,Math.min(n.getSize(),w+(w-v)/2),!1))throw new V;if(x-=S*_,x%103!==_)throw new vt;var R=p.length;if(R===0)throw new V;R>0&&P&&(c===e.CODE_CODE_C?p=p.substring(0,R-2):p=p.substring(0,R-1));for(var N=(s[1]+s[0])/2,D=v+T/2,O=l.length,q=new Uint8Array(O),ee=0;ee<O;ee++)q[ee]=l[ee];var oe=[new Y(N,r),new Y(D,r)];return new $t(p,q,0,oe,te.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(lt),d3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wh=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},em=function(t){d3(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var i=t.call(this)||this;return i.usingCheckDigit=r,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(r,n,i){var o,s,a,u,l=this.counters;l.fill(0),this.decodeRowResult="";var c=e.findAsteriskPattern(n,l),h=n.getNextSet(c[1]),d=n.getSize(),p,v;do{e.recordPattern(n,h,l);var w=e.toNarrowWidePattern(l);if(w<0)throw new V;p=e.patternToChar(w),this.decodeRowResult+=p,v=h;try{for(var I=(o=void 0,wh(l)),_=I.next();!_.done;_=I.next()){var m=_.value;h+=m}}catch(O){o={error:O}}finally{try{_&&!_.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}h=n.getNextSet(h)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var x=0;try{for(var S=wh(l),P=S.next();!P.done;P=S.next()){var m=P.value;x+=m}}catch(O){a={error:O}}finally{try{P&&!P.done&&(u=S.return)&&u.call(S)}finally{if(a)throw a.error}}var k=h-v-x;if(h!==d&&k*2<x)throw new V;if(this.usingCheckDigit){for(var A=this.decodeRowResult.length-1,E=0,T=0;T<A;T++)E+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(T));if(this.decodeRowResult.charAt(A)!==e.ALPHABET_STRING.charAt(E%43))throw new vt;this.decodeRowResult=this.decodeRowResult.substring(0,A)}if(this.decodeRowResult.length===0)throw new V;var R;this.extendedMode?R=e.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;var N=(c[1]+c[0])/2,D=v+x/2;return new $t(R,null,0,[new Y(N,r),new Y(D,r)],te.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var i=r.getSize(),o=r.getNextSet(0),s=0,a=o,u=!1,l=n.length,c=o;c<i;c++)if(r.get(c)!==u)n[s]++;else{if(s===l-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,a-Math.floor((c-a)/2)),a,!1))return[a,c];a+=n[0]+n[1],n.copyWithin(0,2,2+s-1),n[s-1]=0,n[s]=0,s--}else s++;n[s]=1,u=!u}throw new V},e.toNarrowWidePattern=function(r){var n,i,o=r.length,s=0,a;do{var u=2147483647;try{for(var l=(n=void 0,wh(r)),c=l.next();!c.done;c=l.next()){var h=c.value;h<u&&h>s&&(u=h)}}catch(w){n={error:w}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}s=u,a=0;for(var d=0,p=0,v=0;v<o;v++){var h=r[v];h>s&&(p|=1<<o-1-v,a++,d+=h)}if(a===3){for(var v=0;v<o&&a>0;v++){var h=r[v];if(h>s&&(a--,h*2>=d))return-1}return p}}while(a>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new V},e.decodeExtended=function(r){for(var n=r.length,i="",o=0;o<n;o++){var s=r.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var a=r.charAt(o+1),u="\0";switch(s){case"+":if(a>="A"&&a<="Z")u=String.fromCharCode(a.charCodeAt(0)+32);else throw new H;break;case"$":if(a>="A"&&a<="Z")u=String.fromCharCode(a.charCodeAt(0)-64);else throw new H;break;case"%":if(a>="A"&&a<="E")u=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")u=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")u=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")u=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")u="\0";else if(a==="V")u="@";else if(a==="W")u="`";else if(a==="X"||a==="Y"||a==="Z")u="";else throw new H;break;case"/":if(a>="A"&&a<="O")u=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")u=":";else throw new H;break}i+=u,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(lt),p3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xh=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tm=function(t){p3(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,i){var o,s,a,u,l=this.findAsteriskPattern(n),c=n.getNextSet(l[1]),h=n.getSize(),d=this.counters;d.fill(0),this.decodeRowResult="";var p,v;do{e.recordPattern(n,c,d);var w=this.toPattern(d);if(w<0)throw new V;p=this.patternToChar(w),this.decodeRowResult+=p,v=c;try{for(var I=(o=void 0,xh(d)),_=I.next();!_.done;_=I.next()){var m=_.value;c+=m}}catch(T){o={error:T}}finally{try{_&&!_.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}c=n.getNextSet(c)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var x=0;try{for(var S=xh(d),P=S.next();!P.done;P=S.next()){var m=P.value;x+=m}}catch(T){a={error:T}}finally{try{P&&!P.done&&(u=S.return)&&u.call(S)}finally{if(a)throw a.error}}if(c===h||!n.get(c))throw new V;if(this.decodeRowResult.length<2)throw new V;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var k=this.decodeExtended(this.decodeRowResult),A=(l[1]+l[0])/2,E=v+x/2;return new $t(k,null,0,[new Y(A,r),new Y(E,r)],te.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),i=r.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,a=!1,u=o.length,l=0,c=i;c<n;c++)if(r.get(c)!==a)o[l]++;else{if(l===u-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,c]);s+=o[0]+o[1],o.copyWithin(0,2,2+l-1),o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,a=!a}throw new V},e.prototype.toPattern=function(r){var n,i,o=0;try{for(var s=xh(r),a=s.next();!a.done;a=s.next()){var u=a.value;o+=u}}catch(v){n={error:v}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}for(var l=0,c=r.length,h=0;h<c;h++){var d=Math.round(r[h]*9/o);if(d<1||d>4)return-1;if(h&1)l<<=d;else for(var p=0;p<d;p++)l=l<<1|1}return l},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new V},e.prototype.decodeExtended=function(r){for(var n=r.length,i="",o=0;o<n;o++){var s=r.charAt(o);if(s>="a"&&s<="d"){if(o>=n-1)throw new H;var a=r.charAt(o+1),u="\0";switch(s){case"d":if(a>="A"&&a<="Z")u=String.fromCharCode(a.charCodeAt(0)+32);else throw new H;break;case"a":if(a>="A"&&a<="Z")u=String.fromCharCode(a.charCodeAt(0)-64);else throw new H;break;case"b":if(a>="A"&&a<="E")u=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")u=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")u=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")u=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")u="\0";else if(a==="V")u="@";else if(a==="W")u="`";else if(a>="X"&&a<="Z")u=String.fromCharCode(127);else throw new H;break;case"c":if(a>="A"&&a<="O")u=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")u=":";else throw new H;break}i+=u,o++}else i+=s}return i},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,i){for(var o=1,s=0,a=n-1;a>=0;a--)s+=o*e.ALPHABET_STRING.indexOf(r.charAt(a)),++o>i&&(o=1);if(r.charAt(n)!==e.ALPHABET_STRING[s%47])throw new vt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(lt),g3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v3=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rm=function(t){g3(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,i){var o,s,a=this.decodeStart(n),u=this.decodeEnd(n),l=new fe;e.decodeMiddle(n,a[1],u[0],l);var c=l.toString(),h=null;i!=null&&(h=i.get(He.ALLOWED_LENGTHS)),h==null&&(h=e.DEFAULT_ALLOWED_LENGTHS);var d=c.length,p=!1,v=0;try{for(var w=v3(h),I=w.next();!I.done;I=w.next()){var _=I.value;if(d===_){p=!0;break}_>v&&(v=_)}}catch(S){o={error:S}}finally{try{I&&!I.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}if(!p&&d>v&&(p=!0),!p)throw new H;var m=[new Y(a[1],r),new Y(u[0],r)],x=new $t(c,null,0,m,te.ITF,new Date().getTime());return x},e.decodeMiddle=function(r,n,i,o){var s=new Int32Array(10),a=new Int32Array(5),u=new Int32Array(5);for(s.fill(0),a.fill(0),u.fill(0);n<i;){lt.recordPattern(r,n,s);for(var l=0;l<5;l++){var c=2*l;a[l]=s[c],u[l]=s[c+1]}var h=e.decodeDigit(a);o.append(h.toString()),h=this.decodeDigit(u),o.append(h.toString()),s.forEach(function(d){n+=d})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),i=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(r,i[0]),i},e.prototype.validateQuietZone=function(r,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var o=n-1;i>0&&o>=0&&!r.get(o);o--)i--;if(i!==0)throw new V},e.skipWhiteSpace=function(r){var n=r.getSize(),i=r.getNextSet(0);if(i===n)throw new V;return i},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),i=void 0;try{i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof V&&(i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,i[0]);var o=i[0];return i[0]=r.getSize()-i[1],i[1]=r.getSize()-o,i}finally{r.reverse()}},e.findGuardPattern=function(r,n,i){var o=i.length,s=new Int32Array(o),a=r.getSize(),u=!1,l=0,c=n;s.fill(0);for(var h=n;h<a;h++)if(r.get(h)!==u)s[l]++;else{if(l===o-1){if(lt.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[c,h];c+=s[0]+s[1],Le.arraycopy(s,2,s,0,l-1),s[l-1]=0,s[l]=0,l--}else l++;s[l]=1,u=!u}throw new V},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var a=e.PATTERNS[s],u=lt.patternMatchVariance(r,a,e.MAX_INDIVIDUAL_VARIANCE);u<n?(n=u,i=s):u===n&&(i=-1)}if(i>=0)return i%10;throw new V},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(lt),m3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),is=function(t){m3(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,i,o=0,s=Int32Array.from([0,0,0]);!n;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(r,o,!1,this.START_END_PATTERN,s);var a=i[0];o=i[1];var u=a-(o-a);u>=0&&(n=r.isRange(u,a,!1))}return i},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,o=n-1;o>=0;o-=2){var s=r.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(s<0||s>9)throw new H;i+=s}i*=3;for(var o=n-2;o>=0;o-=2){var s=r.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(s<0||s>9)throw new H;i+=s}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,i,o){return this.findGuardPattern(r,n,i,o,new Int32Array(o.length))},e.findGuardPattern=function(r,n,i,o,s){var a=r.getSize();n=i?r.getNextUnset(n):r.getNextSet(n);for(var u=0,l=n,c=o.length,h=i,d=n;d<a;d++)if(r.get(d)!==h)s[u]++;else{if(u===c-1){if(lt.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([l,d]);l+=s[0]+s[1];for(var p=s.slice(2,s.length),v=0;v<u-1;v++)s[v]=p[v];s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,h=!h}throw new V},e.decodeDigit=function(r,n,i,o){this.recordPattern(r,i,n);for(var s=this.MAX_AVG_VARIANCE,a=-1,u=o.length,l=0;l<u;l++){var c=o[l],h=lt.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);h<s&&(s=h,a=l)}if(a>=0)return a;throw new V},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(lt),y3=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_3=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(r,n,i),s=i.toString(),a=t.parseExtensionString(s),u=[new Y((n[0]+n[1])/2,e),new Y(o,e)],l=new $t(s,null,0,u,te.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&l.putAllMetadata(a),l},t.prototype.decodeMiddle=function(e,r,n){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),u=r[1],l=0,c=0;c<5&&u<a;c++){var h=is.decodeDigit(e,s,u,is.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+h%10);try{for(var d=(i=void 0,y3(s)),p=d.next();!p.done;p=d.next()){var v=p.value;u+=v}}catch(I){i={error:I}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}h>=10&&(l|=1<<4-c),c!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(n.length!==5)throw new V;var w=this.determineCheckDigit(l);if(t.extensionChecksum(n.toString())!==w)throw new V;return u},t.extensionChecksum=function(e){for(var r=e.length,n=0,i=r-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(var i=r-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new V},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Ct.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="£";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),o=n%100,s=o<10?"0"+o:o.toString();return r+i+"."+s},t}(),w3=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x3=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(r,n,i),s=i.toString(),a=t.parseExtensionString(s),u=[new Y((n[0]+n[1])/2,e),new Y(o,e)],l=new $t(s,null,0,u,te.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&l.putAllMetadata(a),l},t.prototype.decodeMiddle=function(e,r,n){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),u=r[1],l=0,c=0;c<2&&u<a;c++){var h=is.decodeDigit(e,s,u,is.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+h%10);try{for(var d=(i=void 0,w3(s)),p=d.next();!p.done;p=d.next()){var v=p.value;u+=v}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}h>=10&&(l|=1<<1-c),c!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(n.length!==2)throw new V;if(parseInt(n.toString())%4!==l)throw new V;return u},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Ct.ISSUE_NUMBER,parseInt(e)]])},t}(),E3=function(){function t(){}return t.decodeRow=function(e,r,n){var i=is.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new _3;return o.decodeRow(e,r,i)}catch{var s=new x3;return s.decodeRow(e,r,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),A3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ot=function(t){A3(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[n]=o}return r}return e.prototype.decodeRow=function(r,n,i){var o=e.findStartGuardPattern(n),s=i==null?null:i.get(He.NEED_RESULT_POINT_CALLBACK);if(s!=null){var a=new Y((o[0]+o[1])/2,r);s.foundPossibleResultPoint(a)}var u=this.decodeMiddle(n,o,this.decodeRowStringBuffer),l=u.rowOffset,c=u.resultString;if(s!=null){var h=new Y(l,r);s.foundPossibleResultPoint(h)}var d=e.decodeEnd(n,l);if(s!=null){var p=new Y((d[0]+d[1])/2,r);s.foundPossibleResultPoint(p)}var v=d[1],w=v+(v-d[0]);if(w>=n.getSize()||!n.isRange(v,w,!1))throw new V;var I=c.toString();if(I.length<8)throw new H;if(!e.checkChecksum(I))throw new vt;var _=(o[1]+o[0])/2,m=(d[1]+d[0])/2,x=this.getBarcodeFormat(),S=[new Y(_,r),new Y(m,r)],P=new $t(I,null,0,S,x,new Date().getTime()),k=0;try{var A=E3.decodeRow(r,n,d[1]);P.putMetadata(Ct.UPC_EAN_EXTENSION,A.getText()),P.putAllMetadata(A.getResultMetadata()),P.addResultPoints(A.getResultPoints()),k=A.getText().length}catch{}var E=i==null?null:i.get(He.ALLOWED_EAN_EXTENSIONS);if(E!=null){var T=!1;for(var R in E)if(k.toString()===R){T=!0;break}if(!T)throw new V}return x===te.EAN_13||te.UPC_A,P},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,o=n-1;o>=0;o-=2){var s=r.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(s<0||s>9)throw new H;i+=s}i*=3;for(var o=n-2;o>=0;o-=2){var s=r.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(s<0||s>9)throw new H;i+=s}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(is),I3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nm=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kd=function(t){I3(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var o,s,a,u,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),h=n[1],d=0,p=0;p<6&&h<c;p++){var v=ot.decodeDigit(r,l,h,ot.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+v%10);try{for(var w=(o=void 0,nm(l)),I=w.next();!I.done;I=w.next()){var _=I.value;h+=_}}catch(P){o={error:P}}finally{try{I&&!I.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}v>=10&&(d|=1<<5-p)}i=e.determineFirstDigit(i,d);var m=ot.findGuardPattern(r,h,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0));h=m[1];for(var p=0;p<6&&h<c;p++){var v=ot.decodeDigit(r,l,h,ot.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+v);try{for(var x=(a=void 0,nm(l)),S=x.next();!S.done;S=x.next()){var _=S.value;h+=_}}catch(A){a={error:A}}finally{try{S&&!S.done&&(u=x.return)&&u.call(x)}finally{if(a)throw a.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return te.EAN_13},e.determineFirstDigit=function(r,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return r=String.fromCharCode("0".charCodeAt(0)+i)+r,r;throw new V},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(ot),T3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),im=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},om=function(t){T3(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var o,s,a,u,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),h=n[1],d=0;d<4&&h<c;d++){var p=ot.decodeDigit(r,l,h,ot.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+p);try{for(var v=(o=void 0,im(l)),w=v.next();!w.done;w=v.next()){var I=w.value;h+=I}}catch(S){o={error:S}}finally{try{w&&!w.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}}var _=ot.findGuardPattern(r,h,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0));h=_[1];for(var d=0;d<4&&h<c;d++){var p=ot.decodeDigit(r,l,h,ot.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+p);try{for(var m=(a=void 0,im(l)),x=m.next();!x.done;x=m.next()){var I=x.value;h+=I}}catch(k){a={error:k}}finally{try{x&&!x.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return te.EAN_8},e}(ot),C3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sm=function(t){C3(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new Kd,r}return e.prototype.getBarcodeFormat=function(){return te.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,i))},e.prototype.decodeMiddle=function(r,n,i){return this.ean13Reader.decodeMiddle(r,n,i)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var i=new $t(n.substring(1),null,null,r.getResultPoints(),te.UPC_A);return r.getResultMetadata()!=null&&i.putAllMetadata(r.getResultMetadata()),i}else throw new V},e.prototype.reset=function(){this.ean13Reader.reset()},e}(ot),S3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R3=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},am=function(t){S3(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,i){var o,s,a=this.decodeMiddleCounters.map(function(I){return I});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var u=r.getSize(),l=n[1],c=0,h=0;h<6&&l<u;h++){var d=e.decodeDigit(r,a,l,e.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var p=(o=void 0,R3(a)),v=p.next();!v.done;v=p.next()){var w=v.value;l+=w}}catch(I){o={error:I}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}d>=10&&(c|=1<<5-h)}return e.determineNumSysAndCheckDigit(new fe(i),c),l},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return ot.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){r.insert(0,"0"+i),r.append("0"+o);return}throw V.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return te.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new fe;i.append(r.charAt(0));var o=n[5];switch(o){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(o),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(o);break}return r.length>=8&&i.append(r.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(ot),b3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),um=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Eh=function(t){b3(e,t);function e(r){var n=t.call(this)||this,i=r==null?null:r.get(He.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(te.EAN_13)>-1&&o.push(new Kd),i.indexOf(te.UPC_A)>-1&&o.push(new sm),i.indexOf(te.EAN_8)>-1&&o.push(new om),i.indexOf(te.UPC_E)>-1&&o.push(new am)),o.length===0&&(o.push(new Kd),o.push(new sm),o.push(new om),o.push(new am)),n.readers=o,n}return e.prototype.decodeRow=function(r,n,i){var o,s;try{for(var a=um(this.readers),u=a.next();!u.done;u=a.next()){var l=u.value;try{var c=l.decodeRow(r,n,i),h=c.getBarcodeFormat()===te.EAN_13&&c.getText().charAt(0)==="0",d=i==null?null:i.get(He.POSSIBLE_FORMATS),p=d==null||d.includes(te.UPC_A);if(h&&p){var v=c.getRawBytes(),w=new $t(c.getText().substring(1),v,v?v.length:null,c.getResultPoints(),te.UPC_A);return w.putAllMetadata(c.getResultMetadata()),w}return c}catch{}}}catch(I){o={error:I}}finally{try{u&&!u.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}throw new V},e.prototype.reset=function(){var r,n;try{for(var i=um(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e}(lt),O3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),N3=function(t){O3(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,i){var o=this.getValidRowData(n);if(!o)throw new V;var s=this.codaBarDecodeRow(o.row);if(!s)throw new V;return new $t(s,null,0,[new Y(o.left,r),new Y(o.right,r)],te.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),i=n.indexOf(!0);if(i===-1)return null;var o=n.lastIndexOf(!0);if(o<=i)return null;n=n.slice(i,o+1);for(var s=[],a=n[0],u=1,l=1;l<n.length;l++)n[l]===a?u++:(a=n[l],s.push(u),u=1);return s.push(u),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],i=Math.ceil(r.reduce(function(u,l){return(u+l)/2},0));r.length>0;){var o=r.splice(0,8).splice(0,7),s=o.map(function(u){return u<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[s])}var a=n.join("");return this.validCodaBarString(a)?a:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(lt),P3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D3=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fi=function(t){P3(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var i=0;i<n.length;i++)if(lt.patternMatchVariance(r,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new V},e.count=function(r){return Ie.sum(new Int32Array(r))},e.increment=function(r,n){for(var i=0,o=n[0],s=1;s<r.length;s++)n[s]>o&&(o=n[s],i=s);r[i]++},e.decrement=function(r,n){for(var i=0,o=n[0],s=1;s<r.length;s++)n[s]<o&&(o=n[s],i=s);r[i]--},e.isFinderPattern=function(r){var n,i,o=r[0]+r[1],s=o+r[2]+r[3],a=o/s;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var u=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;try{for(var c=D3(r),h=c.next();!h.done;h=c.next()){var d=h.value;d>l&&(l=d),d<u&&(u=d)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return l<10*u}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(lt),uc=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),qw=function(){function t(e,r,n,i,o){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Y(n,o)),this.resultPoints.push(new Y(i,o))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),k3=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bo=function(){function t(){}return t.getRSSvalue=function(e,r,n){var i,o,s=0;try{for(var a=k3(e),u=a.next();!u.done;u=a.next()){var l=u.value;s+=l}}catch(m){i={error:m}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}for(var c=0,h=0,d=e.length,p=0;p<d-1;p++){var v=void 0;for(v=1,h|=1<<p;v<e[p];v++,h&=~(1<<p)){var w=t.combins(s-v-1,d-p-2);if(n&&h===0&&s-v-(d-p-1)>=d-p-1&&(w-=t.combins(s-v-(d-p),d-p-2)),d-p-1>1){for(var I=0,_=s-v-(d-p-2);_>r;_--)I+=t.combins(s-v-_-1,d-p-3);w-=I*(d-1-p)}else s-v>r&&w--;c+=w}s-=v}return c},t.combins=function(e,r){var n,i;e-r>r?(i=r,n=e-r):(i=e-r,n=r);for(var o=1,s=1,a=e;a>n;a--)o*=a,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},t}(),M3=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,i=new mt(n),o=0,s=e[0],a=s.getRightChar().getValue(),u=11;u>=0;--u)a&1<<u&&i.set(o),o++;for(var u=1;u<e.length;++u){for(var l=e[u],c=l.getLeftChar().getValue(),h=11;h>=0;--h)c&1<<h&&i.set(o),o++;if(l.getRightChar()!==null)for(var d=l.getRightChar().getValue(),h=11;h>=0;--h)d&1<<h&&i.set(o),o++}return i},t}(),Di=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),N1=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),L3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kr=function(t){L3(e,t);function e(r,n){var i=t.call(this,r)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(N1),F3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ki=function(t){F3(e,t);function e(r,n,i){var o=t.call(this,r)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=n,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(N1),B3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yo=function(t){B3(e,t);function e(r,n,i){var o=t.call(this,r)||this;if(n<0||n>10||i<0||i>10)throw new H;return o.firstDigit=n,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(N1),tl=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},V3=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,i,o,s,a,u,l;if(!e)return null;if(e.length<2)throw new V;var c=e.substring(0,2);try{for(var h=tl(t.TWO_DIGIT_DATA_LENGTH),d=h.next();!d.done;d=h.next()){var p=d.value;if(p[0]===c)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,p[2],e):t.processFixedAI(2,p[1],e)}}catch(k){r={error:k}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}if(e.length<3)throw new V;var v=e.substring(0,3);try{for(var w=tl(t.THREE_DIGIT_DATA_LENGTH),I=w.next();!I.done;I=w.next()){var p=I.value;if(p[0]===v)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,p[2],e):t.processFixedAI(3,p[1],e)}}catch(k){i={error:k}}finally{try{I&&!I.done&&(o=w.return)&&o.call(w)}finally{if(i)throw i.error}}try{for(var _=tl(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),m=_.next();!m.done;m=_.next()){var p=m.value;if(p[0]===v)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(k){s={error:k}}finally{try{m&&!m.done&&(a=_.return)&&a.call(_)}finally{if(s)throw s.error}}if(e.length<4)throw new V;var x=e.substring(0,4);try{for(var S=tl(t.FOUR_DIGIT_DATA_LENGTH),P=S.next();!P.done;P=S.next()){var p=P.value;if(p[0]===x)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(k){u={error:k}}finally{try{P&&!P.done&&(l=S.return)&&l.call(S)}finally{if(u)throw u.error}}throw new V},t.processFixedAI=function(e,r,n){if(n.length<e)throw new V;var i=n.substring(0,e);if(n.length<e+r)throw new V;var o=n.substring(e,e+r),s=n.substring(e+r),a="("+i+")"+o,u=t.parseFieldsInGeneralPurpose(s);return u==null?a:a+u},t.processVariableAI=function(e,r,n){var i=n.substring(0,e),o;n.length<e+r?o=n.length:o=e+r;var s=n.substring(e,o),a=n.substring(o),u="("+i+")"+s,l=t.parseFieldsInGeneralPurpose(a);return l==null?u:u+l},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),Cl=function(){function t(e){this.buffer=new fe,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,i=null;do{var o=this.decodeGeneralPurposeField(n,i),s=V3.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,n===o.getNewPosition())break;n=o.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new yo(this.information.getSize(),yo.FNC1,yo.FNC1):new yo(this.information.getSize(),r-1,yo.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,o=(n-8)%11;return new yo(e+7,i,o)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var i=0,o=0;o<n;++o)e.get(r+o)&&(i|=1<<n-o-1);return i},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new ki(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new ki(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new ki(this.current.getPosition(),this.buffer.toString()):r=new ki(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Di(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new ki(this.current.getPosition(),this.buffer.toString());return new Di(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Di(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new ki(this.current.getPosition(),this.buffer.toString());return new Di(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Di(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new ki(this.current.getPosition(),this.buffer.toString());return new Di(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Di(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new kr(e+5,kr.FNC1);if(r>=5&&r<15)return new kr(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new kr(e+7,""+(n+1));if(n>=90&&n<116)return new kr(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new H}return new kr(e+8,o)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new kr(e+5,kr.FNC1);if(r>=5&&r<15)return new kr(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new kr(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new su("Decoding invalid alphanumeric value: "+n)}return new kr(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),Yw=function(){function t(e){this.information=e,this.generalDecoder=new Cl(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),U3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vr=function(t){U3(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var i=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*o,10);s/100===0&&r.append("0"),s/10===0&&r.append("0"),r.append(s)}e.appendCheckDigit(r,i)},e.appendCheckDigit=function(r,n){for(var i=0,o=0;o<13;o++){var s=r.charAt(o+n).charCodeAt(0)-"0".charCodeAt(0);i+=o&1?s:3*s}i=10-i%10,i===10&&(i=0),r.append(i)},e.GTIN_SIZE=40,e}(Yw),j3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z3=function(t){j3(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new fe;r.append("(01)");var n=r.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(i),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=1+1+2,e}(Vr),$3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H3=function(t){$3(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new fe;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=2+1+2,e}(Yw),W3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sl=function(t){W3(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(r,o);for(var s=this.checkWeight(o),a=1e5,u=0;u<5;++u)s/a===0&&r.append("0"),a/=10;r.append(s)},e}(Vr),G3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qw=function(t){G3(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Sl.GTIN_SIZE+e.WEIGHT_SIZE)throw new V;var r=new fe;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+Sl.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=4+1,e.WEIGHT_SIZE=15,e}(Sl),K3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X3=function(t){K3(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(Qw),q3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y3=function(t){q3(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(Qw),Q3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Z3=function(t){Q3(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Vr.GTIN_SIZE)throw new V;var r=new fe;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Vr.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Vr.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=5+1+2,e.LAST_DIGIT_SIZE=2,e}(Vr),J3=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),e4=function(t){J3(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Vr.GTIN_SIZE)throw new V;var r=new fe;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Vr.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Vr.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Vr.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(o.getNewString()),r.toString()},e.HEADER_SIZE=5+1+2,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Vr),t4=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zn=function(t){t4(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.dateCode=i,o.firstAIdigits=n,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new V;var r=new fe;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){r.append("("),r.append(this.dateCode),r.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var a=i;a/10===0&&r.append("0"),r.append(a),s/10===0&&r.append("0"),r.append(s),o/10===0&&r.append("0"),r.append(o)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=7+1,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Sl);function r4(t){try{if(t.get(1))return new z3(t);if(!t.get(2))return new H3(t);var e=Cl.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new X3(t);case 5:return new Y3(t)}var r=Cl.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new Z3(t);case 13:return new e4(t)}var n=Cl.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new zn(t,"310","11");case 57:return new zn(t,"320","11");case 58:return new zn(t,"310","13");case 59:return new zn(t,"320","13");case 60:return new zn(t,"310","15");case 61:return new zn(t,"320","15");case 62:return new zn(t,"310","17");case 63:return new zn(t,"320","17")}}catch(i){throw console.log(i),new su("unknown decoder: "+t)}}var lm=function(){function t(e,r,n,i){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),n4=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(i,o){r.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),i4=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$n=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o4=function(t){i4(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(a){if(a instanceof V){if(!this.pairs.length)throw new V;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(r,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new V},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var i,o,s=n;s<this.rows.length;s++){var a=this.rows[s];this.pairs.length=0;try{for(var u=(i=void 0,$n(r)),l=u.next();!l.done;l=u.next()){var c=l.value;this.pairs.push(c.getPairs())}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var h=new Array(r);h.push(a);try{return this.checkRows(h,s+1)}catch(d){console.log(d)}}}throw new V},e.isValidSequence=function(r){var n,i;try{for(var o=$n(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var a=s.value;if(!(r.length>a.length)){for(var u=!0,l=0;l<r.length;l++)if(r[l].getFinderPattern().getValue()!==a[l]){u=!1;break}if(u)return!0}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var i=0,o=!1,s=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>r){s=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new n4(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var i,o,s,a,u,l;try{for(var c=$n(n),h=c.next();!h.done;h=c.next()){var d=h.value;if(d.getPairs().length!==r.length){var p=!0;try{for(var v=(s=void 0,$n(d.getPairs())),w=v.next();!w.done;w=v.next()){var I=w.value,_=!1;try{for(var m=(u=void 0,$n(r)),x=m.next();!x.done;x=m.next()){var S=x.value;if(lm.equals(I,S)){_=!0;break}}}catch(P){u={error:P}}finally{try{x&&!x.done&&(l=m.return)&&l.call(m)}finally{if(u)throw u.error}}_||(p=!1)}}catch(P){s={error:P}}finally{try{w&&!w.done&&(a=v.return)&&a.call(v)}finally{if(s)throw s.error}}}}}catch(P){i={error:P}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}},e.isPartialRow=function(r,n){var i,o,s,a,u,l;try{for(var c=$n(n),h=c.next();!h.done;h=c.next()){var d=h.value,p=!0;try{for(var v=(s=void 0,$n(r)),w=v.next();!w.done;w=v.next()){var I=w.value,_=!1;try{for(var m=(u=void 0,$n(d.getPairs())),x=m.next();!x.done;x=m.next()){var S=x.value;if(I.equals(S)){_=!0;break}}}catch(P){u={error:P}}finally{try{x&&!x.done&&(l=m.return)&&l.call(m)}finally{if(u)throw u.error}}if(!_){p=!1;break}}}catch(P){s={error:P}}finally{try{w&&!w.done&&(a=v.return)&&a.call(v)}finally{if(s)throw s.error}}if(p)return!0}}catch(P){i={error:P}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=M3.buildBitArray(r),i=r4(n),o=i.parseInformation(),s=r[0].getFinderPattern().getResultPoints(),a=r[r.length-1].getFinderPattern().getResultPoints(),u=[s[0],s[1],a[0],a[1]];return new $t(o,null,null,u,te.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),i=r.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,a=1;a<this.pairs.size();++a){var u=this.pairs.get(a);o+=u.getLeftChar().getChecksumPortion(),s++;var l=u.getRightChar();l!=null&&(o+=l.getChecksumPortion(),s++)}o%=211;var c=211*(s-4)+o;return c===n.getValue()},e.getNextSecondBar=function(r,n){var i;return r.get(n)?(i=r.getNextUnset(n),i=r.getNextSet(i)):(i=r.getNextSet(n),i=r.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(r,n,i){var o=n.length%2===0;this.startFromEven&&(o=!o);var s,a=!0,u=-1;do this.findNextPair(r,n,u),s=this.parseFoundFinderPattern(r,i,o),s===null?u=e.getNextSecondBar(r,this.startEnd[0]):a=!1;while(a);var l=this.decodeDataCharacter(r,s,o,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new V;var c;try{c=this.decodeDataCharacter(r,s,o,!1)}catch(h){c=null,console.log(h)}return new lm(l,c,s,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=r.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(n))a=0;else{var u=n[n.length-1];a=u.getFinderPattern().getStartEnd()[1]}var l=n.length%2!==0;this.startFromEven&&(l=!l);for(var c=!1;a<s&&(c=!r.get(a),!!c);)a++;for(var h=0,d=a,p=a;p<s;p++)if(r.get(p)!==c)o[h]++;else{if(h===3){if(l&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=d,this.startEnd[1]=p;return}l&&e.reverseCounters(o),d+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,h--}else h++;o[h]=1,c=!c}throw new V},e.reverseCounters=function(r){for(var n=r.length,i=0;i<n/2;++i){var o=r[i];r[i]=r[n-i-1],r[n-i-1]=o}},e.prototype.parseFoundFinderPattern=function(r,n,i){var o,s,a;if(i){for(var u=this.startEnd[0]-1;u>=0&&!r.get(u);)u--;u++,o=this.startEnd[0]-u,s=u,a=this.startEnd[1]}else s=this.startEnd[0],a=r.getNextUnset(this.startEnd[1]+1),o=a-this.startEnd[1];var l=this.getDecodeFinderCounters();Le.arraycopy(l,0,l,1,l.length-1),l[0]=o;var c;try{c=this.parseFinderValue(l,e.FINDER_PATTERNS)}catch{return null}return new qw(c,[s,a],s,a,n)},e.prototype.decodeDataCharacter=function(r,n,i,o){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(o)e.recordPatternInReverse(r,n.getStartEnd()[0],s);else{e.recordPattern(r,n.getStartEnd()[1],s);for(var u=0,l=s.length-1;u<l;u++,l--){var c=s[u];s[u]=s[l],s[l]=c}}var h=17,d=Ie.sum(new Int32Array(s))/h,p=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(d-p)/p>.3)throw new V;for(var v=this.getOddCounts(),w=this.getEvenCounts(),I=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),u=0;u<s.length;u++){var m=1*s[u]/d,x=m+.5;if(x<1){if(m<.3)throw new V;x=1}else if(x>8){if(m>8.7)throw new V;x=8}var S=u/2;u&1?(w[S]=x,_[S]=m-x):(v[S]=x,I[S]=m-x)}this.adjustOddEvenCounts(h);for(var P=4*n.getValue()+(i?0:2)+(o?0:1)-1,k=0,A=0,u=v.length-1;u>=0;u--){if(e.isNotA1left(n,i,o)){var E=e.WEIGHTS[P][2*u];A+=v[u]*E}k+=v[u]}for(var T=0,u=w.length-1;u>=0;u--)if(e.isNotA1left(n,i,o)){var E=e.WEIGHTS[P][2*u+1];T+=w[u]*E}var R=A+T;if(k&1||k>13||k<4)throw new V;var N=(13-k)/2,D=e.SYMBOL_WIDEST[N],O=9-D,q=Bo.getRSSvalue(v,D,!0),ee=Bo.getRSSvalue(w,O,!1),oe=e.EVEN_TOTAL_SUBSET[N],we=e.GSUM[N],z=q*oe+ee+we;return new uc(z,R)},e.isNotA1left=function(r,n,i){return!(r.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(r){var n=Ie.sum(new Int32Array(this.getOddCounts())),i=Ie.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;n>13?s=!0:n<4&&(o=!0);var a=!1,u=!1;i>13?u=!0:i<4&&(a=!0);var l=n+i-r,c=(n&1)===1,h=(i&1)===0;if(l===1)if(c){if(h)throw new V;s=!0}else{if(!h)throw new V;u=!0}else if(l===-1)if(c){if(h)throw new V;o=!0}else{if(!h)throw new V;a=!0}else if(l===0){if(c){if(!h)throw new V;n<i?(o=!0,u=!0):(s=!0,a=!0)}else if(h)throw new V}else throw new V;if(o){if(s)throw new V;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(u)throw new V;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Fi),s4=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),a4=function(t){s4(e,t);function e(r,n,i){var o=t.call(this,r,n)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(uc),u4=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ah=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cm=function(t){u4(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,i){var o,s,a,u,l=this.decodePair(n,!1,r,i);e.addOrTally(this.possibleLeftPairs,l),n.reverse();var c=this.decodePair(n,!0,r,i);e.addOrTally(this.possibleRightPairs,c),n.reverse();try{for(var h=Ah(this.possibleLeftPairs),d=h.next();!d.done;d=h.next()){var p=d.value;if(p.getCount()>1)try{for(var v=(a=void 0,Ah(this.possibleRightPairs)),w=v.next();!w.done;w=v.next()){var I=w.value;if(I.getCount()>1&&e.checkChecksum(p,I))return e.constructResult(p,I)}}catch(_){a={error:_}}finally{try{w&&!w.done&&(u=v.return)&&u.call(v)}finally{if(a)throw a.error}}}}catch(_){o={error:_}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}throw new V},e.addOrTally=function(r,n){var i,o;if(n!=null){var s=!1;try{for(var a=Ah(r),u=a.next();!u.done;u=a.next()){var l=u.value;if(l.getValue()===n.getValue()){l.incrementCount(),s=!0;break}}}catch(c){i={error:c}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}s||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var i=4537077*r.getValue()+n.getValue(),o=new String(i).toString(),s=new fe,a=13-o.length;a>0;a--)s.append("0");s.append(o);for(var u=0,a=0;a<13;a++){var l=s.charAt(a).charCodeAt(0)-"0".charCodeAt(0);u+=a&1?l:3*l}u=10-u%10,u===10&&(u=0),s.append(u.toString());var c=r.getFinderPattern().getResultPoints(),h=n.getFinderPattern().getResultPoints();return new $t(s.toString(),null,0,[c[0],c[1],h[0],h[1]],te.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var i=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,o=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(r,n,i,o){try{var s=this.findFinderPattern(r,n),a=this.parseFoundFinderPattern(r,i,n,s),u=o==null?null:o.get(He.NEED_RESULT_POINT_CALLBACK);if(u!=null){var l=(s[0]+s[1])/2;n&&(l=r.getSize()-1-l),u.foundPossibleResultPoint(new Y(l,i))}var c=this.decodeDataCharacter(r,a,!0),h=this.decodeDataCharacter(r,a,!1);return new a4(1597*c.getValue()+h.getValue(),c.getChecksumPortion()+4*h.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)lt.recordPatternInReverse(r,n.getStartEnd()[0],o);else{lt.recordPattern(r,n.getStartEnd()[1]+1,o);for(var a=0,u=o.length-1;a<u;a++,u--){var l=o[a];o[a]=o[u],o[u]=l}}for(var c=i?16:15,h=Ie.sum(new Int32Array(o))/c,d=this.getOddCounts(),p=this.getEvenCounts(),v=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors(),a=0;a<o.length;a++){var I=o[a]/h,_=Math.floor(I+.5);_<1?_=1:_>8&&(_=8);var m=Math.floor(a/2);a&1?(p[m]=_,w[m]=I-_):(d[m]=_,v[m]=I-_)}this.adjustOddEvenCounts(i,c);for(var x=0,S=0,a=d.length-1;a>=0;a--)S*=9,S+=d[a],x+=d[a];for(var P=0,k=0,a=p.length-1;a>=0;a--)P*=9,P+=p[a],k+=p[a];var A=S+3*P;if(i){if(x&1||x>12||x<4)throw new V;var E=(12-x)/2,T=e.OUTSIDE_ODD_WIDEST[E],R=9-T,N=Bo.getRSSvalue(d,T,!1),D=Bo.getRSSvalue(p,R,!0),O=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],q=e.OUTSIDE_GSUM[E];return new uc(N*O+D+q,A)}else{if(k&1||k>10||k<4)throw new V;var E=(10-k)/2,T=e.INSIDE_ODD_WIDEST[E],R=9-T,N=Bo.getRSSvalue(d,T,!0),D=Bo.getRSSvalue(p,R,!1),ee=e.INSIDE_ODD_TOTAL_SUBSET[E],q=e.INSIDE_GSUM[E];return new uc(D*ee+N+q,A)}},e.prototype.findFinderPattern=function(r,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=r.getSize(),s=!1,a=0;a<o&&(s=!r.get(a),n!==s);)a++;for(var u=0,l=a,c=a;c<o;c++)if(r.get(c)!==s)i[u]++;else{if(u===3){if(Fi.isFinderPattern(i))return[l,c];l+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,u--}else u++;i[u]=1,s=!s}throw new V},e.prototype.parseFoundFinderPattern=function(r,n,i,o){for(var s=r.get(o[0]),a=o[0]-1;a>=0&&s!==r.get(a);)a--;a++;var u=o[0]-a,l=this.getDecodeFinderCounters(),c=new Int32Array(l.length);Le.arraycopy(l,0,c,1,l.length-1),c[0]=u;var h=this.parseFinderValue(c,e.FINDER_PATTERNS),d=a,p=o[1];return i&&(d=r.getSize()-1-d,p=r.getSize()-1-p),new qw(h,[a,o[1]],d,p,n)},e.prototype.adjustOddEvenCounts=function(r,n){var i=Ie.sum(new Int32Array(this.getOddCounts())),o=Ie.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1,u=!1,l=!1;r?(i>12?a=!0:i<4&&(s=!0),o>12?l=!0:o<4&&(u=!0)):(i>11?a=!0:i<5&&(s=!0),o>10?l=!0:o<4&&(u=!0));var c=i+o-n,h=(i&1)===(r?1:0),d=(o&1)===1;if(c===1)if(h){if(d)throw new V;a=!0}else{if(!d)throw new V;l=!0}else if(c===-1)if(h){if(d)throw new V;s=!0}else{if(!d)throw new V;u=!0}else if(c===0){if(h){if(!d)throw new V;i<o?(s=!0,l=!0):(a=!0,u=!0)}else if(d)throw new V}else throw new V;if(s){if(a)throw new V;Fi.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Fi.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(l)throw new V;Fi.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&Fi.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Fi),l4=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),na=function(t){l4(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var i=r?r.get(He.POSSIBLE_FORMATS):null,o=r&&r.get(He.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=r&&r.get(He.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(te.EAN_13)||i.includes(te.UPC_A)||i.includes(te.EAN_8)||i.includes(te.UPC_E))&&n.readers.push(new Eh(r)),i.includes(te.CODE_39)&&n.readers.push(new em(o,s)),i.includes(te.CODE_93)&&n.readers.push(new tm),i.includes(te.CODE_128)&&n.readers.push(new Jv),i.includes(te.ITF)&&n.readers.push(new rm),i.includes(te.CODABAR)&&n.readers.push(new N3),i.includes(te.RSS_14)&&n.readers.push(new cm),i.includes(te.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new o4))),n.readers.length===0&&(n.readers.push(new Eh(r)),n.readers.push(new em),n.readers.push(new tm),n.readers.push(new Eh(r)),n.readers.push(new Jv),n.readers.push(new rm),n.readers.push(new cm)),n}return e.prototype.decodeRow=function(r,n,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(r,n,i)}catch{}throw new V},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(lt),c4=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){c4(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new na(n),r,n)||this}return e})(vs);var fm=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Se=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Te=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),f4=function(){function t(e,r,n,i,o,s){var a,u;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var l=0,c=s.getECCodewords(),h=s.getECBlocks();try{for(var d=fm(h),p=d.next();!p.done;p=d.next()){var v=p.value;l+=v.getCount()*(v.getDataCodewords()+c)}}catch(w){a={error:w}}finally{try{p&&!p.done&&(u=d.return)&&u.call(d)}finally{if(a)throw a.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,i;if(e&1||r&1)throw new H;try{for(var o=fm(t.VERSIONS),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===r)return a}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}throw new H},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new Se(5,new Te(1,3))),new t(2,12,12,10,10,new Se(7,new Te(1,5))),new t(3,14,14,12,12,new Se(10,new Te(1,8))),new t(4,16,16,14,14,new Se(12,new Te(1,12))),new t(5,18,18,16,16,new Se(14,new Te(1,18))),new t(6,20,20,18,18,new Se(18,new Te(1,22))),new t(7,22,22,20,20,new Se(20,new Te(1,30))),new t(8,24,24,22,22,new Se(24,new Te(1,36))),new t(9,26,26,24,24,new Se(28,new Te(1,44))),new t(10,32,32,14,14,new Se(36,new Te(1,62))),new t(11,36,36,16,16,new Se(42,new Te(1,86))),new t(12,40,40,18,18,new Se(48,new Te(1,114))),new t(13,44,44,20,20,new Se(56,new Te(1,144))),new t(14,48,48,22,22,new Se(68,new Te(1,174))),new t(15,52,52,24,24,new Se(42,new Te(2,102))),new t(16,64,64,14,14,new Se(56,new Te(2,140))),new t(17,72,72,16,16,new Se(36,new Te(4,92))),new t(18,80,80,18,18,new Se(48,new Te(4,114))),new t(19,88,88,20,20,new Se(56,new Te(4,144))),new t(20,96,96,22,22,new Se(68,new Te(4,174))),new t(21,104,104,24,24,new Se(56,new Te(6,136))),new t(22,120,120,18,18,new Se(68,new Te(6,175))),new t(23,132,132,20,20,new Se(62,new Te(8,163))),new t(24,144,144,22,22,new Se(62,new Te(8,156),new Te(2,155))),new t(25,8,18,6,16,new Se(7,new Te(1,5))),new t(26,8,32,6,14,new Se(11,new Te(1,10))),new t(27,12,26,10,24,new Se(14,new Te(1,16))),new t(28,12,36,10,16,new Se(18,new Te(1,22))),new t(29,16,36,14,16,new Se(24,new Te(1,32))),new t(30,16,48,14,22,new Se(28,new Te(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),h4=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new H;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ln(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return f4.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),a=!1,u=!1,l=!1,c=!1;do if(n===o&&i===0&&!a)e[r++]=this.readCorner1(o,s)&255,n-=2,i+=2,a=!0;else if(n===o-2&&i===0&&s&3&&!u)e[r++]=this.readCorner2(o,s)&255,n-=2,i+=2,u=!0;else if(n===o+4&&i===2&&!(s&7)&&!l)e[r++]=this.readCorner3(o,s)&255,n-=2,i+=2,l=!0;else if(n===o-2&&i===0&&(s&7)===4&&!c)e[r++]=this.readCorner4(o,s)&255,n-=2,i+=2,c=!0;else{do n<o&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,o,s)&255),n-=2,i+=2;while(n>=0&&i<s);n+=1,i+=3;do n>=0&&i<s&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,o,s)&255),n+=2,i-=2;while(n<o&&i>=0);n+=3,i+=1}while(n<o||i<s);if(r!==this.version.getTotalCodewords())throw new H;return e},t.prototype.readModule=function(e,r,n,i){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,i){var o=0;return this.readModule(e-2,r-2,n,i)&&(o|=1),o<<=1,this.readModule(e-2,r-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,r-2,n,i)&&(o|=1),o<<=1,this.readModule(e-1,r-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,r,n,i)&&(o|=1),o<<=1,this.readModule(e,r-2,n,i)&&(o|=1),o<<=1,this.readModule(e,r-1,n,i)&&(o|=1),o<<=1,this.readModule(e,r,n,i)&&(o|=1),o},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new re("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=r/i|0,a=n/o|0,u=s*i,l=a*o,c=new ln(l,u),h=0;h<s;++h)for(var d=h*i,p=0;p<a;++p)for(var v=p*o,w=0;w<i;++w)for(var I=h*(i+2)+1+w,_=d+w,m=0;m<o;++m){var x=p*(o+2)+1+m;if(e.get(x,I)){var S=v+m;c.set(S,_)}}return c},t}(),hm=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d4=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,i,o,s,a=r.getECBlocks(),u=0,l=a.getECBlocks();try{for(var c=hm(l),h=c.next();!h.done;h=c.next()){var d=h.value;u+=d.getCount()}}catch(q){n={error:q}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}var p=new Array(u),v=0;try{for(var w=hm(l),I=w.next();!I.done;I=w.next())for(var d=I.value,_=0;_<d.getCount();_++){var m=d.getDataCodewords(),x=a.getECCodewords()+m;p[v++]=new t(m,new Uint8Array(x))}}catch(q){o={error:q}}finally{try{I&&!I.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}for(var S=p[0].codewords.length,P=S-a.getECCodewords(),k=P-1,A=0,_=0;_<k;_++)for(var E=0;E<v;E++)p[E].codewords[_]=e[A++];for(var T=r.getVersionNumber()===24,R=T?8:v,E=0;E<R;E++)p[E].codewords[P-1]=e[A++];for(var N=p[0].codewords.length,_=P;_<N;_++)for(var E=0;E<v;E++){var D=T?(E+8)%v:E,O=T&&D>7?_-1:_;p[D].codewords[O]=e[A++]}if(A!==e.length)throw new re;return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Zw=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new re(""+e);var r=0,n=this.bitOffset,i=this.byteOffset,o=this.bytes;if(n>0){var s=8-n,a=e<s?e:s,u=s-a,l=255>>8-a<<u;r=(o[i]&l)>>u,e-=a,n+=a,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)r=r<<8|o[i]&255,i++,e-=8;if(e>0){var u=8-e,l=255>>u<<u;r=r<<e|(o[i]&l)>>u,n+=e}}return this.bitOffset=n,this.byteOffset=i,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),rt;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(rt||(rt={}));var p4=function(){function t(){}return t.decode=function(e){var r=new Zw(e),n=new fe,i=new fe,o=new Array,s=rt.ASCII_ENCODE;do if(s===rt.ASCII_ENCODE)s=this.decodeAsciiSegment(r,n,i);else{switch(s){case rt.C40_ENCODE:this.decodeC40Segment(r,n);break;case rt.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case rt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case rt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case rt.BASE256_ENCODE:this.decodeBase256Segment(r,n,o);break;default:throw new H}s=rt.ASCII_ENCODE}while(s!==rt.PAD_ENCODE&&r.available()>0);return i.length()>0&&n.append(i.toString()),new Yc(e,n.toString(),o.length===0?null:o,null)},t.decodeAsciiSegment=function(e,r,n){var i=!1;do{var o=e.readBits(8);if(o===0)throw new H;if(o<=128)return i&&(o+=128),r.append(String.fromCharCode(o-1)),rt.ASCII_ENCODE;if(o===129)return rt.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&r.append("0"),r.append(""+s)}else switch(o){case 230:return rt.C40_ENCODE;case 231:return rt.BASE256_ENCODE;case 232:r.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:i=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return rt.ANSIX12_ENCODE;case 239:return rt.TEXT_ENCODE;case 240:return rt.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new H;break}}while(e.available()>0);return rt.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var u=i[a];switch(o){case 0:if(u<3)o=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){var l=this.C40_BASIC_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l)}else throw new H;break;case 1:n?(r.append(String.fromCharCode(u+128)),n=!1):r.append(String.fromCharCode(u)),o=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){var l=this.C40_SHIFT2_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l)}else switch(u){case 27:r.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new H}o=0;break;case 3:n?(r.append(String.fromCharCode(u+224)),n=!1):r.append(String.fromCharCode(u+96)),o=0;break;default:throw new H}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var u=i[a];switch(o){case 0:if(u<3)o=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){var l=this.TEXT_BASIC_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l)}else throw new H;break;case 1:n?(r.append(String.fromCharCode(u+128)),n=!1):r.append(String.fromCharCode(u)),o=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){var l=this.TEXT_SHIFT2_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l)}else switch(u){case 27:r.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new H}o=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){var l=this.TEXT_SHIFT3_SET_CHARS[u];n?(r.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):r.append(l),o=0}else throw new H;break;default:throw new H}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var o=0;o<3;o++){var s=n[o];switch(s){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(s<14)r.append(String.fromCharCode(s+44));else if(s<40)r.append(String.fromCharCode(s+51));else throw new H;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var i=(e<<8)+r-1,o=Math.floor(i/1600);n[0]=o,i-=o*1600,o=Math.floor(i/40),n[1]=o,n[2]=i-o*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}i&32||(i|=64),r.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new H;for(var a=new Uint8Array(s),u=0;u<s;u++){if(e.available()<8)throw new H;a[u]=this.unrandomize255State(e.readBits(8),i++)}n.push(a);try{r.append(Rr.decode(a,_e.ISO88591))}catch(l){throw new su("Platform does not support required encoding: "+l.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,i=e-n;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],t}(),g4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v4=function(){function t(){this.rsDecoder=new Qc(or.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,i=new h4(e),o=i.getVersion(),s=i.readCodewords(),a=d4.getDataBlocks(s,o),u=0;try{for(var l=g4(a),c=l.next();!c.done;c=l.next()){var h=c.value;u+=h.getNumDataCodewords()}}catch(x){r={error:x}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var d=new Uint8Array(u),p=a.length,v=0;v<p;v++){var w=a[v],I=w.getCodewords(),_=w.getNumDataCodewords();this.correctErrors(I,_);for(var m=0;m<_;m++)d[m*p+v]=I[m]}return p4.decode(d)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new vt}for(var i=0;i<r;i++)e[i]=n[i]},t}(),m4=function(){function t(e){this.image=e,this.rectangleDetector=new Wd(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new V;r=this.shiftToModuleCenter(r);var n=r[0],i=r[1],o=r[2],s=r[3],a=this.transitionsBetween(n,s)+1,u=this.transitionsBetween(o,s)+1;(a&1)===1&&(a+=1),(u&1)===1&&(u+=1),4*a<7*u&&4*u<7*a&&(a=u=Math.max(a,u));var l=t.sampleGrid(this.image,n,i,o,s,a,u);return new b1(l,[n,i,o,s])},t.shiftPoint=function(e,r,n){var i=(r.getX()-e.getX())/(n+1),o=(r.getY()-e.getY())/(n+1);return new Y(e.getX()+i,e.getY()+o)},t.moveAway=function(e,r,n){var i=e.getX(),o=e.getY();return i<r?i-=1:i+=1,o<n?o-=1:o+=1,new Y(i,o)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],i=e[3],o=e[2],s=this.transitionsBetween(r,n),a=this.transitionsBetween(n,i),u=this.transitionsBetween(i,o),l=this.transitionsBetween(o,r),c=s,h=[o,r,n,i];return c>a&&(c=a,h[0]=r,h[1]=n,h[2]=i,h[3]=o),c>u&&(c=u,h[0]=n,h[1]=i,h[2]=o,h[3]=r),c>l&&(h[0]=i,h[1]=o,h[2]=r,h[3]=n),h},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],i=e[2],o=e[3],s=this.transitionsBetween(r,o),a=t.shiftPoint(n,i,(s+1)*4),u=t.shiftPoint(i,n,(s+1)*4),l=this.transitionsBetween(a,r),c=this.transitionsBetween(u,o);return l<c?(e[0]=r,e[1]=n,e[2]=i,e[3]=o):(e[0]=n,e[1]=i,e[2]=o,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],i=e[2],o=e[3],s=this.transitionsBetween(r,o),a=this.transitionsBetween(n,o),u=t.shiftPoint(r,n,(a+1)*4),l=t.shiftPoint(i,n,(s+1)*4);s=this.transitionsBetween(u,o),a=this.transitionsBetween(l,o);var c=new Y(o.getX()+(i.getX()-n.getX())/(s+1),o.getY()+(i.getY()-n.getY())/(s+1)),h=new Y(o.getX()+(r.getX()-n.getX())/(a+1),o.getY()+(r.getY()-n.getY())/(a+1));if(!this.isValid(c))return this.isValid(h)?h:null;if(!this.isValid(h))return c;var d=this.transitionsBetween(u,c)+this.transitionsBetween(l,c),p=this.transitionsBetween(u,h)+this.transitionsBetween(l,h);return d>p?c:h},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],i=e[2],o=e[3],s=this.transitionsBetween(r,o)+1,a=this.transitionsBetween(i,o)+1,u=t.shiftPoint(r,n,a*4),l=t.shiftPoint(i,n,s*4);s=this.transitionsBetween(u,o)+1,a=this.transitionsBetween(l,o)+1,(s&1)===1&&(s+=1),(a&1)===1&&(a+=1);var c=(r.getX()+n.getX()+i.getX()+o.getX())/4,h=(r.getY()+n.getY()+i.getY()+o.getY())/4;r=t.moveAway(r,c,h),n=t.moveAway(n,c,h),i=t.moveAway(i,c,h),o=t.moveAway(o,c,h);var d,p;return u=t.shiftPoint(r,n,a*4),u=t.shiftPoint(u,o,s*4),d=t.shiftPoint(n,r,a*4),d=t.shiftPoint(d,i,s*4),l=t.shiftPoint(i,o,a*4),l=t.shiftPoint(l,n,s*4),p=t.shiftPoint(o,i,a*4),p=t.shiftPoint(p,r,s*4),[u,d,l,p]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,i,o,s,a){var u=O1.getInstance();return u.sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,r.getX(),r.getY(),o.getX(),o.getY(),i.getX(),i.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(r.getX()),s=Math.trunc(r.getY()),a=Math.abs(s-i)>Math.abs(o-n);if(a){var u=n;n=i,i=u,u=o,o=s,s=u}for(var l=Math.abs(o-n),c=Math.abs(s-i),h=-l/2,d=i<s?1:-1,p=n<o?1:-1,v=0,w=this.image.get(a?i:n,a?n:i),I=n,_=i;I!==o;I+=p){var m=this.image.get(a?_:I,a?I:_);if(m!==w&&(v++,w=m),h+=c,h>0){if(_===s)break;_+=d,h-=l}}return v},t}(),Xd=function(){function t(){this.decoder=new v4}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,i;if(r!=null&&r.has(He.PURE_BARCODE)){var o=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(o),i=t.NO_POINTS}else{var s=new m4(e.getBlackMatrix()).detect();n=this.decoder.decode(s.getBits()),i=s.getPoints()}var a=n.getRawBytes(),u=new $t(n.getText(),a,8*a.length,i,te.DATA_MATRIX,Le.currentTimeMillis()),l=n.getByteSegments();l!=null&&u.putMetadata(Ct.BYTE_SEGMENTS,l);var c=n.getECLevel();return c!=null&&u.putMetadata(Ct.ERROR_CORRECTION_LEVEL,c),u},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new V;var i=this.moduleSize(r,e),o=r[1],s=n[1],a=r[0],u=n[0],l=(u-a+1)/i,c=(s-o+1)/i;if(l<=0||c<=0)throw new V;var h=i/2;o+=h,a+=h;for(var d=new ln(l,c),p=0;p<c;p++)for(var v=o+p*i,w=0;w<l;w++)e.get(a+w*i,v)&&d.set(w,p);return d},t.moduleSize=function(e,r){for(var n=r.getWidth(),i=e[0],o=e[1];i<n&&r.get(i,o);)i++;if(i===n)throw new V;var s=i-e[0];if(s===0)throw new V;return s},t.NO_POINTS=[],t}(),y4=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){y4(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Xd,r)||this}return e})(vs);var Vo;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Vo||(Vo={}));var _4=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Mr(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new re;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Vo.L,"L",1),t.M=new t(Vo.M,"M",0),t.Q=new t(Vo.Q,"Q",3),t.H=new t(Vo.H,"H",2),t}(),w4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jw=function(){function t(e){this.errorCorrectionLevel=_4.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return de.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var a=w4(t.FORMAT_INFO_DECODE_LOOKUP),u=a.next();!u.done;u=a.next()){var l=u.value,c=l[0];if(c===e||c===r)return new t(l[1]);var h=t.numBitsDiffering(e,c);h<o&&(s=l[1],o=h),e!==r&&(h=t.numBitsDiffering(r,c),h<o&&(s=l[1],o=h))}}catch(d){n={error:d}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o<=3?new t(s):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),x4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,i=this.ecBlocks;try{for(var o=x4(i),s=o.next();!s.done;s=o.next()){var a=s.value;n+=a.getCount()}}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),b=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),E4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ki=function(){function t(e,r){for(var n,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=o;var a=0,u=o[0].getECCodewordsPerBlock(),l=o[0].getECBlocks();try{for(var c=E4(l),h=c.next();!h.done;h=c.next()){var d=h.value;a+=d.getCount()*(d.getDataCodewords()+u)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}this.totalCodewords=a}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new H;try{return this.getVersionForNumber((e-17)/4)}catch{throw new H}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new re;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var o=t.VERSION_DECODE_INFO[i];if(o===e)return t.getVersionForNumber(i+7);var s=Jw.numBitsDiffering(e,o);s<r&&(n=i+7,r=s)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new ln(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<n;s++)i===0&&(s===0||s===n-1)||i===n-1&&s===0||r.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new F(7,new b(1,19)),new F(10,new b(1,16)),new F(13,new b(1,13)),new F(17,new b(1,9))),new t(2,Int32Array.from([6,18]),new F(10,new b(1,34)),new F(16,new b(1,28)),new F(22,new b(1,22)),new F(28,new b(1,16))),new t(3,Int32Array.from([6,22]),new F(15,new b(1,55)),new F(26,new b(1,44)),new F(18,new b(2,17)),new F(22,new b(2,13))),new t(4,Int32Array.from([6,26]),new F(20,new b(1,80)),new F(18,new b(2,32)),new F(26,new b(2,24)),new F(16,new b(4,9))),new t(5,Int32Array.from([6,30]),new F(26,new b(1,108)),new F(24,new b(2,43)),new F(18,new b(2,15),new b(2,16)),new F(22,new b(2,11),new b(2,12))),new t(6,Int32Array.from([6,34]),new F(18,new b(2,68)),new F(16,new b(4,27)),new F(24,new b(4,19)),new F(28,new b(4,15))),new t(7,Int32Array.from([6,22,38]),new F(20,new b(2,78)),new F(18,new b(4,31)),new F(18,new b(2,14),new b(4,15)),new F(26,new b(4,13),new b(1,14))),new t(8,Int32Array.from([6,24,42]),new F(24,new b(2,97)),new F(22,new b(2,38),new b(2,39)),new F(22,new b(4,18),new b(2,19)),new F(26,new b(4,14),new b(2,15))),new t(9,Int32Array.from([6,26,46]),new F(30,new b(2,116)),new F(22,new b(3,36),new b(2,37)),new F(20,new b(4,16),new b(4,17)),new F(24,new b(4,12),new b(4,13))),new t(10,Int32Array.from([6,28,50]),new F(18,new b(2,68),new b(2,69)),new F(26,new b(4,43),new b(1,44)),new F(24,new b(6,19),new b(2,20)),new F(28,new b(6,15),new b(2,16))),new t(11,Int32Array.from([6,30,54]),new F(20,new b(4,81)),new F(30,new b(1,50),new b(4,51)),new F(28,new b(4,22),new b(4,23)),new F(24,new b(3,12),new b(8,13))),new t(12,Int32Array.from([6,32,58]),new F(24,new b(2,92),new b(2,93)),new F(22,new b(6,36),new b(2,37)),new F(26,new b(4,20),new b(6,21)),new F(28,new b(7,14),new b(4,15))),new t(13,Int32Array.from([6,34,62]),new F(26,new b(4,107)),new F(22,new b(8,37),new b(1,38)),new F(24,new b(8,20),new b(4,21)),new F(22,new b(12,11),new b(4,12))),new t(14,Int32Array.from([6,26,46,66]),new F(30,new b(3,115),new b(1,116)),new F(24,new b(4,40),new b(5,41)),new F(20,new b(11,16),new b(5,17)),new F(24,new b(11,12),new b(5,13))),new t(15,Int32Array.from([6,26,48,70]),new F(22,new b(5,87),new b(1,88)),new F(24,new b(5,41),new b(5,42)),new F(30,new b(5,24),new b(7,25)),new F(24,new b(11,12),new b(7,13))),new t(16,Int32Array.from([6,26,50,74]),new F(24,new b(5,98),new b(1,99)),new F(28,new b(7,45),new b(3,46)),new F(24,new b(15,19),new b(2,20)),new F(30,new b(3,15),new b(13,16))),new t(17,Int32Array.from([6,30,54,78]),new F(28,new b(1,107),new b(5,108)),new F(28,new b(10,46),new b(1,47)),new F(28,new b(1,22),new b(15,23)),new F(28,new b(2,14),new b(17,15))),new t(18,Int32Array.from([6,30,56,82]),new F(30,new b(5,120),new b(1,121)),new F(26,new b(9,43),new b(4,44)),new F(28,new b(17,22),new b(1,23)),new F(28,new b(2,14),new b(19,15))),new t(19,Int32Array.from([6,30,58,86]),new F(28,new b(3,113),new b(4,114)),new F(26,new b(3,44),new b(11,45)),new F(26,new b(17,21),new b(4,22)),new F(26,new b(9,13),new b(16,14))),new t(20,Int32Array.from([6,34,62,90]),new F(28,new b(3,107),new b(5,108)),new F(26,new b(3,41),new b(13,42)),new F(30,new b(15,24),new b(5,25)),new F(28,new b(15,15),new b(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new F(28,new b(4,116),new b(4,117)),new F(26,new b(17,42)),new F(28,new b(17,22),new b(6,23)),new F(30,new b(19,16),new b(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new F(28,new b(2,111),new b(7,112)),new F(28,new b(17,46)),new F(30,new b(7,24),new b(16,25)),new F(24,new b(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new F(30,new b(4,121),new b(5,122)),new F(28,new b(4,47),new b(14,48)),new F(30,new b(11,24),new b(14,25)),new F(30,new b(16,15),new b(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new F(30,new b(6,117),new b(4,118)),new F(28,new b(6,45),new b(14,46)),new F(30,new b(11,24),new b(16,25)),new F(30,new b(30,16),new b(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new F(26,new b(8,106),new b(4,107)),new F(28,new b(8,47),new b(13,48)),new F(30,new b(7,24),new b(22,25)),new F(30,new b(22,15),new b(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new F(28,new b(10,114),new b(2,115)),new F(28,new b(19,46),new b(4,47)),new F(28,new b(28,22),new b(6,23)),new F(30,new b(33,16),new b(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new F(30,new b(8,122),new b(4,123)),new F(28,new b(22,45),new b(3,46)),new F(30,new b(8,23),new b(26,24)),new F(30,new b(12,15),new b(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new b(3,117),new b(10,118)),new F(28,new b(3,45),new b(23,46)),new F(30,new b(4,24),new b(31,25)),new F(30,new b(11,15),new b(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new b(7,116),new b(7,117)),new F(28,new b(21,45),new b(7,46)),new F(30,new b(1,23),new b(37,24)),new F(30,new b(19,15),new b(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new b(5,115),new b(10,116)),new F(28,new b(19,47),new b(10,48)),new F(30,new b(15,24),new b(25,25)),new F(30,new b(23,15),new b(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new b(13,115),new b(3,116)),new F(28,new b(2,46),new b(29,47)),new F(30,new b(42,24),new b(1,25)),new F(30,new b(23,15),new b(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new b(17,115)),new F(28,new b(10,46),new b(23,47)),new F(30,new b(10,24),new b(35,25)),new F(30,new b(19,15),new b(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new b(17,115),new b(1,116)),new F(28,new b(14,46),new b(21,47)),new F(30,new b(29,24),new b(19,25)),new F(30,new b(11,15),new b(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new b(13,115),new b(6,116)),new F(28,new b(14,46),new b(23,47)),new F(30,new b(44,24),new b(7,25)),new F(30,new b(59,16),new b(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new b(12,121),new b(7,122)),new F(28,new b(12,47),new b(26,48)),new F(30,new b(39,24),new b(14,25)),new F(30,new b(22,15),new b(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new b(6,121),new b(14,122)),new F(28,new b(6,47),new b(34,48)),new F(30,new b(46,24),new b(10,25)),new F(30,new b(2,15),new b(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new b(17,122),new b(4,123)),new F(28,new b(29,46),new b(14,47)),new F(30,new b(49,24),new b(10,25)),new F(30,new b(24,15),new b(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new b(4,122),new b(18,123)),new F(28,new b(13,46),new b(32,47)),new F(30,new b(48,24),new b(14,25)),new F(30,new b(42,15),new b(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new b(20,117),new b(4,118)),new F(28,new b(40,47),new b(7,48)),new F(30,new b(43,24),new b(22,25)),new F(30,new b(10,15),new b(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new b(19,118),new b(6,119)),new F(28,new b(18,47),new b(31,48)),new F(30,new b(34,24),new b(34,25)),new F(30,new b(20,15),new b(61,16)))],t}(),ht;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(ht||(ht={}));var dm=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var i=0;i<r;i++)this.isMasked(n,i)&&e.flip(i,n)},t.values=new Map([[ht.DATA_MASK_000,new t(ht.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[ht.DATA_MASK_001,new t(ht.DATA_MASK_001,function(e,r){return(e&1)===0})],[ht.DATA_MASK_010,new t(ht.DATA_MASK_010,function(e,r){return r%3===0})],[ht.DATA_MASK_011,new t(ht.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[ht.DATA_MASK_100,new t(ht.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[ht.DATA_MASK_101,new t(ht.DATA_MASK_101,function(e,r){return e*r%6===0})],[ht.DATA_MASK_110,new t(ht.DATA_MASK_110,function(e,r){return e*r%6<3})],[ht.DATA_MASK_111,new t(ht.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),A4=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new H;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,n=i-1;n>=s;n--)o=this.copyBit(8,n,o);for(var r=i-8;r<i;r++)o=this.copyBit(r,8,o);if(this.parsedFormatInfo=Jw.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new H},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Ki.getVersionForNumber(r);for(var n=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)n=this.copyBit(s,o,n);var a=Ki.decodeVersionInformation(n);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;n=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)n=this.copyBit(s,o,n);if(a=Ki.decodeVersionInformation(n),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new H},t.prototype.copyBit=function(e,r,n){var i=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return i?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=dm.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var o=r.buildFunctionPattern(),s=!0,a=new Uint8Array(r.getTotalCodewords()),u=0,l=0,c=0,h=i-1;h>0;h-=2){h===6&&h--;for(var d=0;d<i;d++)for(var p=s?i-1-d:d,v=0;v<2;v++)o.get(h-v,p)||(c++,l<<=1,this.bitMatrix.get(h-v,p)&&(l|=1),c===8&&(a[u++]=l,c=0,l=0));s=!s}if(u!==r.getTotalCodewords())throw new H;return a},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=dm.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var i=r+1,o=e.getHeight();i<o;i++)e.get(r,i)!==e.get(i,r)&&(e.flip(i,r),e.flip(r,i))},t}(),pm=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I4=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var i,o,s,a;if(e.length!==r.getTotalCodewords())throw new re;var u=r.getECBlocksForLevel(n),l=0,c=u.getECBlocks();try{for(var h=pm(c),d=h.next();!d.done;d=h.next()){var p=d.value;l+=p.getCount()}}catch(O){i={error:O}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}var v=new Array(l),w=0;try{for(var I=pm(c),_=I.next();!_.done;_=I.next())for(var p=_.value,m=0;m<p.getCount();m++){var x=p.getDataCodewords(),S=u.getECCodewordsPerBlock()+x;v[w++]=new t(x,new Uint8Array(S))}}catch(O){s={error:O}}finally{try{_&&!_.done&&(a=I.return)&&a.call(I)}finally{if(s)throw s.error}}for(var P=v[0].codewords.length,k=v.length-1;k>=0;){var A=v[k].codewords.length;if(A===P)break;k--}k++;for(var E=P-u.getECCodewordsPerBlock(),T=0,m=0;m<E;m++)for(var R=0;R<w;R++)v[R].codewords[m]=e[T++];for(var R=k;R<w;R++)v[R].codewords[E]=e[T++];for(var N=v[0].codewords.length,m=E;m<N;m++)for(var R=0;R<w;R++){var D=R<k?m:m+1;v[R].codewords[D]=e[T++]}return v},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Er;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Er||(Er={}));var Ue=function(){function t(e,r,n,i){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new re;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Er.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Er.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Er.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Er.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Er.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Er.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Er.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Er.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Er.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Er.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),T4=function(){function t(){}return t.decode=function(e,r,n,i){var o=new Zw(e),s=new fe,a=new Array,u=-1,l=-1;try{var c=null,h=!1,d=void 0;do{if(o.available()<4)d=Ue.TERMINATOR;else{var p=o.readBits(4);d=Ue.forBits(p)}switch(d){case Ue.TERMINATOR:break;case Ue.FNC1_FIRST_POSITION:case Ue.FNC1_SECOND_POSITION:h=!0;break;case Ue.STRUCTURED_APPEND:if(o.available()<16)throw new H;u=o.readBits(8),l=o.readBits(8);break;case Ue.ECI:var v=t.parseECIValue(o);if(c=st.getCharacterSetECIByValue(v),c===null)throw new H;break;case Ue.HANZI:var w=o.readBits(4),I=o.readBits(d.getCharacterCountBits(r));w===t.GB2312_SUBSET&&t.decodeHanziSegment(o,s,I);break;default:var _=o.readBits(d.getCharacterCountBits(r));switch(d){case Ue.NUMERIC:t.decodeNumericSegment(o,s,_);break;case Ue.ALPHANUMERIC:t.decodeAlphanumericSegment(o,s,_,h);break;case Ue.BYTE:t.decodeByteSegment(o,s,_,c,a,i);break;case Ue.KANJI:t.decodeKanjiSegment(o,s,_);break;default:throw new H}break}}while(d!==Ue.TERMINATOR)}catch{throw new H}return new Yc(e,s.toString(),a.length===0?null:a,n===null?null:n.toString(),u,l)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new H;for(var i=new Uint8Array(2*n),o=0;n>0;){var s=e.readBits(13),a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,i[o]=a>>8&255,i[o+1]=a&255,o+=2,n--}try{r.append(Rr.decode(i,_e.GB2312))}catch(u){throw new H(u)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new H;for(var i=new Uint8Array(2*n),o=0;n>0;){var s=e.readBits(13),a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,i[o]=a>>8,i[o+1]=a,o+=2,n--}try{r.append(Rr.decode(i,_e.SHIFT_JIS))}catch(u){throw new H(u)}},t.decodeByteSegment=function(e,r,n,i,o,s){if(8*n>e.available())throw new H;for(var a=new Uint8Array(n),u=0;u<n;u++)a[u]=e.readBits(8);var l;i===null?l=_e.guessEncoding(a,s):l=i.getName();try{r.append(Rr.decode(a,l))}catch(c){throw new H(c)}o.push(a)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new H;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,i){for(var o=r.length();n>1;){if(e.available()<11)throw new H;var s=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(s/45))),r.append(t.toAlphaNumericChar(s%45)),n-=2}if(n===1){if(e.available()<6)throw new H;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=o;a<r.length();a++)r.charAt(a)==="%"&&(a<r.length()-1&&r.charAt(a+1)==="%"?r.deleteCharAt(a+1):r.setCharAt(a,String.fromCharCode(29)))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new H;var i=e.readBits(10);if(i>=1e3)throw new H;r.append(t.toAlphaNumericChar(Math.floor(i/100))),r.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),r.append(t.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new H;var o=e.readBits(7);if(o>=100)throw new H;r.append(t.toAlphaNumericChar(Math.floor(o/10))),r.append(t.toAlphaNumericChar(o%10))}else if(n===1){if(e.available()<4)throw new H;var s=e.readBits(4);if(s>=10)throw new H;r.append(t.toAlphaNumericChar(s))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var i=e.readBits(16);return(r&31)<<16&4294967295|i}throw new H},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),ex=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),gm=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C4=function(){function t(){this.rsDecoder=new Qc(or.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(ln.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new A4(e),i=null;try{return this.decodeBitMatrixParser(n,r)}catch(s){i=s}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var o=this.decodeBitMatrixParser(n,r);return o.setOther(new ex(!0)),o}catch(s){throw i!==null?i:s}},t.prototype.decodeBitMatrixParser=function(e,r){var n,i,o,s,a=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),l=e.readCodewords(),c=I4.getDataBlocks(l,a,u),h=0;try{for(var d=gm(c),p=d.next();!p.done;p=d.next()){var v=p.value;h+=v.getNumDataCodewords()}}catch(k){n={error:k}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var w=new Uint8Array(h),I=0;try{for(var _=gm(c),m=_.next();!m.done;m=_.next()){var v=m.value,x=v.getCodewords(),S=v.getNumDataCodewords();this.correctErrors(x,S);for(var P=0;P<S;P++)w[I++]=x[P]}}catch(k){o={error:k}}finally{try{m&&!m.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}return T4.decode(w,a,u,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new vt}for(var i=0;i<r;i++)e[i]=n[i]},t}(),S4=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R4=function(t){S4(e,t);function e(r,n,i){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var o=Math.abs(r-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var o=(this.getX()+n)/2,s=(this.getY()+r)/2,a=(this.estimatedModuleSize+i)/2;return new e(o,s,a)},e}(Y),b4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O4=function(){function t(e,r,n,i,o,s,a){this.image=e,this.startX=r,this.startY=n,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,i=e+n,o=this.startY+r/2,s=new Int32Array(3),a=this.image,u=0;u<r;u++){var l=o+(u&1?-Math.floor((u+1)/2):Math.floor((u+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var c=e;c<i&&!a.get(c,l);)c++;for(var h=0;c<i;){if(a.get(c,l))if(h===1)s[1]++;else if(h===2){if(this.foundPatternCross(s)){var d=this.handlePossibleCenter(s,l,c);if(d!==null)return d}s[0]=s[2],s[1]=1,s[2]=0,h=1}else s[++h]++;else h===1&&h++,s[h]++;c++}if(this.foundPatternCross(s)){var d=this.handlePossibleCenter(s,l,i);if(d!==null)return d}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,i=0;i<3;i++)if(Math.abs(r-e[i])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,i){var o=this.image,s=o.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var u=e;u>=0&&o.get(r,u)&&a[1]<=n;)a[1]++,u--;if(u<0||a[1]>n)return NaN;for(;u>=0&&!o.get(r,u)&&a[0]<=n;)a[0]++,u--;if(a[0]>n)return NaN;for(u=e+1;u<s&&o.get(r,u)&&a[1]<=n;)a[1]++,u++;if(u===s||a[1]>n)return NaN;for(;u<s&&!o.get(r,u)&&a[2]<=n;)a[2]++,u++;if(a[2]>n)return NaN;var l=a[0]+a[1]+a[2];return 5*Math.abs(l-i)>=2*i?NaN:this.foundPatternCross(a)?t.centerFromEnd(a,u):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var i,o,s=e[0]+e[1]+e[2],a=t.centerFromEnd(e,n),u=this.crossCheckVertical(r,a,2*e[1],s);if(!isNaN(u)){var l=(e[0]+e[1]+e[2])/3;try{for(var c=b4(this.possibleCenters),h=c.next();!h.done;h=c.next()){var d=h.value;if(d.aboutEquals(l,u,a))return d.combineEstimate(u,a,l)}}catch(v){i={error:v}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}var p=new R4(a,u,l);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},t}(),N4=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P4=function(t){N4(e,t);function e(r,n,i,o){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var o=Math.abs(r-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var o=this.count+1,s=(this.count*this.getX()+n)/o,a=(this.count*this.getY()+r)/o,u=(this.count*this.estimatedModuleSize+i)/o;return new e(s,a,u,o)},e}(Y),D4=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),Xs=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k4=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(He.TRY_HARDER)!==void 0,n=e!=null&&e.get(He.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),a=Math.floor(3*o/(4*t.MAX_MODULES));(a<t.MIN_SKIP||r)&&(a=t.MIN_SKIP);for(var u=!1,l=new Int32Array(5),c=a-1;c<o&&!u;c+=a){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;for(var h=0,d=0;d<s;d++)if(i.get(d,c))(h&1)===1&&h++,l[h]++;else if(h&1)l[h]++;else if(h===4)if(t.foundPatternCross(l)){var p=this.handlePossibleCenter(l,c,d,n);if(p===!0)if(a=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>l[2]&&(c+=v-l[2]-a,d=s-1)}else{l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,h=3;continue}h=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,h=3;else l[++h]++;if(t.foundPatternCross(l)){var p=this.handlePossibleCenter(l,c,s,n);p===!0&&(a=l[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var w=this.selectBestPatterns();return Y.orderBestPatterns(w),new D4(w)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;r+=i}if(r<7)return!1;var o=r/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,i){for(var o=this.getCrossCheckStateCount(),s=0,a=this.image;e>=s&&r>=s&&a.get(r-s,e-s);)o[2]++,s++;if(e<s||r<s)return!1;for(;e>=s&&r>=s&&!a.get(r-s,e-s)&&o[1]<=n;)o[1]++,s++;if(e<s||r<s||o[1]>n)return!1;for(;e>=s&&r>=s&&a.get(r-s,e-s)&&o[0]<=n;)o[0]++,s++;if(o[0]>n)return!1;var u=a.getHeight(),l=a.getWidth();for(s=1;e+s<u&&r+s<l&&a.get(r+s,e+s);)o[2]++,s++;if(e+s>=u||r+s>=l)return!1;for(;e+s<u&&r+s<l&&!a.get(r+s,e+s)&&o[3]<n;)o[3]++,s++;if(e+s>=u||r+s>=l||o[3]>=n)return!1;for(;e+s<u&&r+s<l&&a.get(r+s,e+s)&&o[4]<n;)o[4]++,s++;if(o[4]>=n)return!1;var c=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(c-i)<2*i&&t.foundPatternCross(o)},t.prototype.crossCheckVertical=function(e,r,n,i){for(var o=this.image,s=o.getHeight(),a=this.getCrossCheckStateCount(),u=e;u>=0&&o.get(r,u);)a[2]++,u--;if(u<0)return NaN;for(;u>=0&&!o.get(r,u)&&a[1]<=n;)a[1]++,u--;if(u<0||a[1]>n)return NaN;for(;u>=0&&o.get(r,u)&&a[0]<=n;)a[0]++,u--;if(a[0]>n)return NaN;for(u=e+1;u<s&&o.get(r,u);)a[2]++,u++;if(u===s)return NaN;for(;u<s&&!o.get(r,u)&&a[3]<n;)a[3]++,u++;if(u===s||a[3]>=n)return NaN;for(;u<s&&o.get(r,u)&&a[4]<n;)a[4]++,u++;if(a[4]>=n)return NaN;var l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-i)>=2*i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,u):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,i){for(var o=this.image,s=o.getWidth(),a=this.getCrossCheckStateCount(),u=e;u>=0&&o.get(u,r);)a[2]++,u--;if(u<0)return NaN;for(;u>=0&&!o.get(u,r)&&a[1]<=n;)a[1]++,u--;if(u<0||a[1]>n)return NaN;for(;u>=0&&o.get(u,r)&&a[0]<=n;)a[0]++,u--;if(a[0]>n)return NaN;for(u=e+1;u<s&&o.get(u,r);)a[2]++,u++;if(u===s)return NaN;for(;u<s&&!o.get(u,r)&&a[3]<n;)a[3]++,u++;if(u===s||a[3]>=n)return NaN;for(;u<s&&o.get(u,r)&&a[4]<n;)a[4]++,u++;if(a[4]>=n)return NaN;var l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-i)>=i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,u):NaN},t.prototype.handlePossibleCenter=function(e,r,n,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=t.centerFromEnd(e,n),a=this.crossCheckVertical(r,Math.floor(s),e[2],o);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],o)))){for(var u=o/7,l=!1,c=this.possibleCenters,h=0,d=c.length;h<d;h++){var p=c[h];if(p.aboutEquals(u,a,s)){c[h]=p.combineEstimate(a,s,u),l=!0;break}}if(!l){var v=new P4(s,a,u);c.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var o=Xs(this.possibleCenters),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.getCount()>=t.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,i,o=0,s=0,a=this.possibleCenters.length;try{for(var u=Xs(this.possibleCenters),l=u.next();!l.done;l=u.next()){var c=l.value;c.getCount()>=t.CENTER_QUORUM&&(o++,s+=c.getEstimatedModuleSize())}}catch(w){e={error:w}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}if(o<3)return!1;var h=s/a,d=0;try{for(var p=Xs(this.possibleCenters),v=p.next();!v.done;v=p.next()){var c=v.value;d+=Math.abs(c.getEstimatedModuleSize()-h)}}catch(w){n={error:w}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}return d<=.05*s},t.prototype.selectBestPatterns=function(){var e,r,n,i,o=this.possibleCenters.length;if(o<3)throw new V;var s=this.possibleCenters,a;if(o>3){var u=0,l=0;try{for(var c=Xs(this.possibleCenters),h=c.next();!h.done;h=c.next()){var d=h.value,p=d.getEstimatedModuleSize();u+=p,l+=p*p}}catch(P){e={error:P}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}a=u/o;var v=Math.sqrt(l/o-a*a);s.sort(function(P,k){var A=Math.abs(k.getEstimatedModuleSize()-a),E=Math.abs(P.getEstimatedModuleSize()-a);return A<E?-1:A>E?1:0});for(var w=Math.max(.2*a,v),I=0;I<s.length&&s.length>3;I++){var _=s[I];Math.abs(_.getEstimatedModuleSize()-a)>w&&(s.splice(I,1),I--)}}if(s.length>3){var u=0;try{for(var m=Xs(s),x=m.next();!x.done;x=m.next()){var S=x.value;u+=S.getEstimatedModuleSize()}}catch(k){n={error:k}}finally{try{x&&!x.done&&(i=m.return)&&i.call(m)}finally{if(n)throw n.error}}a=u/s.length,s.sort(function(k,A){if(A.getCount()===k.getCount()){var E=Math.abs(A.getEstimatedModuleSize()-a),T=Math.abs(k.getEstimatedModuleSize()-a);return E<T?1:E>T?-1:0}else return A.getCount()-k.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),M4=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(He.NEED_RESULT_POINT_CALLBACK);var r=new k4(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(r,n,i);if(o<1)throw new V("No pattern found in proccess finder.");var s=t.computeDimension(r,n,i,o),a=Ki.getProvisionalVersionForDimension(s),u=a.getDimensionForVersion()-7,l=null;if(a.getAlignmentPatternCenters().length>0)for(var c=n.getX()-r.getX()+i.getX(),h=n.getY()-r.getY()+i.getY(),d=1-3/u,p=Math.floor(r.getX()+d*(c-r.getX())),v=Math.floor(r.getY()+d*(h-r.getY())),w=4;w<=16;w<<=1)try{l=this.findAlignmentInRegion(o,p,v,w);break}catch(x){if(!(x instanceof V))throw x}var I=t.createTransform(r,n,i,l,s),_=t.sampleGrid(this.image,I,s),m;return l===null?m=[i,r,n]:m=[i,r,n,l],new b1(_,m)},t.createTransform=function(e,r,n,i,o){var s=o-3.5,a,u,l,c;return i!==null?(a=i.getX(),u=i.getY(),l=s-3,c=l):(a=r.getX()-e.getX()+n.getX(),u=r.getY()-e.getY()+n.getY(),l=s,c=s),Xw.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,l,c,3.5,s,e.getX(),e.getY(),r.getX(),r.getY(),a,u,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var i=O1.getInstance();return i.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,i){var o=Ie.round(Y.distance(e,r)/i),s=Ie.round(Y.distance(e,n)/i),a=Math.floor((o+s)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new V("Dimensions could be not found.")}return a},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,i){var o=this.sizeOfBlackWhiteBlackRun(e,r,n,i),s=1,a=e-(n-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var u=Math.floor(r-(i-r)*s);return s=1,u<0?(s=r/(r-u),u=0):u>=this.image.getHeight()&&(s=(this.image.getHeight()-1-r)/(u-r),u=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,r,a,u),o-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,i){var o=Math.abs(i-r)>Math.abs(n-e);if(o){var s=e;e=r,r=s,s=n,n=i,i=s}for(var a=Math.abs(n-e),u=Math.abs(i-r),l=-a/2,c=e<n?1:-1,h=r<i?1:-1,d=0,p=n+c,v=e,w=r;v!==p;v+=c){var I=o?w:v,_=o?v:w;if(d===1===this.image.get(I,_)){if(d===2)return Ie.distance(v,w,e,r);d++}if(l+=u,l>0){if(w===i)break;w+=h,l-=a}}return d===2?Ie.distance(n+c,i,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,i){var o=Math.floor(i*e),s=Math.max(0,r-o),a=Math.min(this.image.getWidth()-1,r+o);if(a-s<e*3)throw new V("Alignment top exceeds estimated module size.");var u=Math.max(0,n-o),l=Math.min(this.image.getHeight()-1,n+o);if(l-u<e*3)throw new V("Alignment bottom exceeds estimated module size.");var c=new O4(this.image,s,u,a-s,l-u,e,this.resultPointCallback);return c.find()},t}(),qd=function(){function t(){this.decoder=new C4}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,i;if(r!=null&&r.get(He.PURE_BARCODE)!==void 0){var o=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(o,r),i=t.NO_POINTS}else{var s=new M4(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(s.getBits(),r),i=s.getPoints()}n.getOther()instanceof ex&&n.getOther().applyMirroredCorrection(i);var a=new $t(n.getText(),n.getRawBytes(),void 0,i,te.QR_CODE,void 0),u=n.getByteSegments();u!==null&&a.putMetadata(Ct.BYTE_SEGMENTS,u);var l=n.getECLevel();return l!==null&&a.putMetadata(Ct.ERROR_CORRECTION_LEVEL,l),n.hasStructuredAppend()&&(a.putMetadata(Ct.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),a.putMetadata(Ct.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),a},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new V;var i=this.moduleSize(r,e),o=r[1],s=n[1],a=r[0],u=n[0];if(a>=u||o>=s)throw new V;if(s-o!==u-a&&(u=a+(s-o),u>=e.getWidth()))throw new V;var l=Math.round((u-a+1)/i),c=Math.round((s-o+1)/i);if(l<=0||c<=0)throw new V;if(c!==l)throw new V;var h=Math.floor(i/2);o+=h,a+=h;var d=a+Math.floor((l-1)*i)-u;if(d>0){if(d>h)throw new V;a-=d}var p=o+Math.floor((c-1)*i)-s;if(p>0){if(p>h)throw new V;o-=p}for(var v=new ln(l,c),w=0;w<c;w++)for(var I=o+Math.floor(w*i),_=0;_<l;_++)e.get(a+Math.floor(_*i),I)&&v.set(_,w);return v},t.moduleSize=function(e,r){for(var n=r.getHeight(),i=r.getWidth(),o=e[0],s=e[1],a=!0,u=0;o<i&&s<n;){if(a!==r.get(o,s)){if(++u===5)break;a=!a}o++,s++}if(o===i||s===n)throw new V;return(o-e[0])/7},t.NO_POINTS=new Array,t}(),L4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xe=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Ie.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=L4(e),a=s.next();!a.done;a=s.next()){var u=a.value;i[o++]=u}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},t.getCodeword=function(e){var r=at.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),F4=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),B4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},V4=function(){function t(){}return t.detectMultiple=function(e,r,n){var i=e.getBlackMatrix(),o=t.detect(n,i);return o.length||(i=i.clone(),i.rotate180(),o=t.detect(n,i)),new F4(i,o)},t.detect=function(e,r){for(var n,i,o=new Array,s=0,a=0,u=!1;s<r.getHeight();){var l=t.findVertices(r,s,a);if(l[0]==null&&l[3]==null){if(!u)break;u=!1,a=0;try{for(var c=(n=void 0,B4(o)),h=c.next();!h.done;h=c.next()){var d=h.value;d[1]!=null&&(s=Math.trunc(Math.max(s,d[1].getY()))),d[3]!=null&&(s=Math.max(s,Math.trunc(d[3].getY())))}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}s+=t.ROW_STEP;continue}if(u=!0,o.push(l),!e)break;l[2]!=null?(a=Math.trunc(l[2].getX()),s=Math.trunc(l[2].getY())):(a=Math.trunc(l[4].getX()),s=Math.trunc(l[4].getY()))}return o},t.findVertices=function(e,r,n){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return t.copyToResult(s,t.findRowsWithPattern(e,i,o,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),s[4]!=null&&(n=Math.trunc(s[4].getX()),r=Math.trunc(s[4].getY())),t.copyToResult(s,t.findRowsWithPattern(e,i,o,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),s},t.copyToResult=function(e,r,n){for(var i=0;i<n.length;i++)e[n[i]]=r[i]},t.findRowsWithPattern=function(e,r,n,i,o,s){for(var a=new Array(4),u=!1,l=new Int32Array(s.length);i<r;i+=t.ROW_STEP){var c=t.findGuardPattern(e,o,i,n,!1,s,l);if(c!=null){for(;i>0;){var h=t.findGuardPattern(e,o,--i,n,!1,s,l);if(h!=null)c=h;else{i++;break}}a[0]=new Y(c[0],i),a[1]=new Y(c[1],i),u=!0;break}}var d=i+1;if(u){for(var p=0,h=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);d<r;d++){var c=t.findGuardPattern(e,h[0],d,n,!1,s,l);if(c!=null&&Math.abs(h[0]-c[0])<t.MAX_PATTERN_DRIFT&&Math.abs(h[1]-c[1])<t.MAX_PATTERN_DRIFT)h=c,p=0;else{if(p>t.SKIPPED_ROW_COUNT_MAX)break;p++}}d-=p+1,a[2]=new Y(h[0],d),a[3]=new Y(h[1],d)}return d-i<t.BARCODE_MIN_HEIGHT&&at.fill(a,null),a},t.findGuardPattern=function(e,r,n,i,o,s,a){at.fillWithin(a,0,a.length,0);for(var u=r,l=0;e.get(u,n)&&u>0&&l++<t.MAX_PIXEL_DRIFT;)u--;for(var c=u,h=0,d=s.length,p=o;c<i;c++){var v=e.get(c,n);if(v!==p)a[h]++;else{if(h===d-1){if(t.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([u,c]);u+=a[0]+a[1],Le.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,p=!p}}return h===d-1&&t.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([u,c-1]):null},t.patternMatchVariance=function(e,r,n){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=r[a];if(o<s)return 1/0;var u=o/s;n*=u;for(var l=0,c=0;c<i;c++){var h=e[c],d=r[c]*u,p=h>d?h-d:d-h;if(p>n)return 1/0;l+=p}return l/o},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),U4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zi=function(){function t(e,r){if(r.length===0)throw new re;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),Le.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=U4(this.coefficients),s=o.next();!s.done;s=o.next()){var a=s.value;i=this.field.add(i,a)}}catch(h){r={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i}for(var u=this.coefficients[0],l=this.coefficients.length,c=1;c<l;c++)u=this.field.add(this.field.multiply(e,u),this.coefficients[c]);return u},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new re("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var o=new Int32Array(n.length),s=n.length-r.length;Le.arraycopy(n,0,o,0,s);for(var a=s;a<n.length;a++)o[a]=this.field.add(r[a-s],n[a]);return new t(this.field,o)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new re("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new re("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,i=e.coefficients,o=i.length,s=new Int32Array(n+o-1),a=0;a<n;a++)for(var u=r[a],l=0;l<o;l++)s[a+l]=this.field.add(s[a+l],this.field.multiply(u,i[l]));return new t(this.field,s)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new re;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),o=0;o<n;o++)i[o]=this.field.multiply(this.coefficients[o],r);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new fe,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),j4=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new re;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Kw;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),z4=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$4=function(t){z4(e,t);function e(r,n){var i=t.call(this)||this;i.modulus=r,i.expTable=new Int32Array(r),i.logTable=new Int32Array(r);for(var o=1,s=0;s<r;s++)i.expTable[s]=o,o=o*n%r;for(var s=0;s<r-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new zi(i,new Int32Array([0])),i.one=new zi(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new re;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new zi(this,i)},e.PDF417_GF=new e(xe.NUMBER_OF_CODEWORDS,3),e}(j4),H4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W4=function(){function t(){this.field=$4.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var i,o,s=new zi(this.field,e),a=new Int32Array(r),u=!1,l=r;l>0;l--){var c=s.evaluateAt(this.field.exp(l));a[r-l]=c,c!==0&&(u=!0)}if(!u)return 0;var h=this.field.getOne();if(n!=null)try{for(var d=H4(n),p=d.next();!p.done;p=d.next()){var v=p.value,w=this.field.exp(e.length-1-v),I=new zi(this.field,new Int32Array([this.field.subtract(0,w),1]));h=h.multiply(I)}}catch(E){i={error:E}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}for(var _=new zi(this.field,a),m=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),_,r),x=m[0],S=m[1],P=this.findErrorLocations(x),k=this.findErrorMagnitudes(S,x,P),l=0;l<P.length;l++){var A=e.length-1-this.field.log(P[l]);if(A<0)throw vt.getChecksumInstance();e[A]=this.field.subtract(e[A],k[l])}return P.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var o=e,s=r,a=this.field.getZero(),u=this.field.getOne();s.getDegree()>=Math.round(n/2);){var l=o,c=a;if(o=s,a=u,o.isZero())throw vt.getChecksumInstance();s=l;for(var h=this.field.getZero(),d=o.getCoefficient(o.getDegree()),p=this.field.inverse(d);s.getDegree()>=o.getDegree()&&!s.isZero();){var v=s.getDegree()-o.getDegree(),w=this.field.multiply(s.getCoefficient(s.getDegree()),p);h=h.add(this.field.buildMonomial(v,w)),s=s.subtract(o.multiplyByMonomial(v,w))}u=h.multiply(a).subtract(c).negative()}var I=u.getCoefficient(0);if(I===0)throw vt.getChecksumInstance();var _=this.field.inverse(I),m=u.multiply(_),x=s.multiply(_);return[m,x]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),i=0,o=1;o<this.field.getSize()&&i<r;o++)e.evaluateAt(o)===0&&(n[i]=this.field.inverse(o),i++);if(i!==r)throw vt.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var i=r.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,r.getCoefficient(s));for(var a=new zi(this.field,o),u=n.length,l=new Int32Array(u),s=0;s<u;s++){var c=this.field.inverse(n[s]),h=this.field.subtract(0,e.evaluateAt(c)),d=this.field.inverse(a.evaluateAt(c));l[s]=this.field.multiply(h,d)}return l},t}(),Yd=function(){function t(e,r,n,i,o){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,i,o)}return t.prototype.constructor_1=function(e,r,n,i,o){var s=r==null||n==null,a=i==null||o==null;if(s&&a)throw new V;s?(r=new Y(0,i.getY()),n=new Y(0,o.getY())):a&&(i=new Y(e.getWidth()-1,r.getY()),o=new Y(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(r.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),o.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){var u=n?this.topLeft:this.topRight,l=Math.trunc(u.getY()-e);l<0&&(l=0);var c=new Y(u.getX(),l);n?i=c:s=c}if(r>0){var h=n?this.bottomLeft:this.bottomRight,d=Math.trunc(h.getY()+r);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var p=new Y(h.getX(),d);n?o=p:a=p}return new t(this.image,i,o,s,a)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),G4=function(){function t(e,r,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),P1=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function i(s,a,u,l,c,h){if(s==="%%")return"%";if(r[++n]!==void 0){s=l?parseInt(l.substr(1)):void 0;var d=c?parseInt(c.substr(1)):void 0,p;switch(h){case"s":p=r[n];break;case"c":p=r[n][0];break;case"f":p=parseFloat(r[n]).toFixed(s);break;case"p":p=parseFloat(r[n]).toPrecision(s);break;case"e":p=parseFloat(r[n]).toExponential(s);break;case"x":p=parseInt(r[n]).toString(d||16);break;case"d":p=parseFloat(parseInt(r[n],d||10).toPrecision(s)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(d);for(var v=parseInt(u),w=u&&u[0]+""=="0"?"0":" ";p.length<v;)p=a!==void 0?p+w:w+p;return p}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),K4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tx=function(){function t(e){this.boundingBox=new Yd(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(r=this.codewords[i],r!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(r=this.codewords[i],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new P1,i=0;try{for(var o=K4(this.codewords),s=o.next();!s.done;s=o.next()){var a=s.value;if(a==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),X4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q4=globalThis&&globalThis.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},ia=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,i=new Array,o=function(h,d){var p={getKey:function(){return h},getValue:function(){return d}};p.getValue()>n?(n=p.getValue(),i=[],i.push(p.getKey())):p.getValue()===n&&i.push(p.getKey())};try{for(var s=X4(this.values.entries()),a=s.next();!a.done;a=s.next()){var u=q4(a.value,2),l=u[0],c=u[1];o(l,c)}}catch(h){e={error:h}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return xe.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),Y4=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ih=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vm=function(t){Y4(e,t);function e(r,n){var i=t.call(this,r)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var r,n;try{for(var i=Ih(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=this.imageRowToCodewordIndex(Math.trunc(s.getY())),l=-1,c=1,h=0,d=a;d<u;d++)if(n[d]!=null){var p=n[d],v=p.getRowNumber()-l;if(v===0)h++;else if(v===1)c=Math.max(c,h),h=1,l=p.getRowNumber();else if(v<0||p.getRowNumber()>=r.getRowCount()||v>d)n[d]=null;else{var w=void 0;c>2?w=(c-2)*v:w=v;for(var I=w>=d,_=1;_<=w&&!I;_++)I=n[d-_]!=null;I?n[d]=null:(l=p.getRowNumber(),h=1)}}},e.prototype.getRowHeights=function(){var r,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=Ih(this.getCodewords()),a=s.next();!a.done;a=s.next()){var u=a.value;if(u!=null){var l=u.getRowNumber();if(l>=o.length)continue;o[l]++}}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=this.getCodewords(),l=-1,c=s;c<a;c++)if(u[c]!=null){var h=u[c];h.setRowNumberAsRowIndicatorColumn();var d=h.getRowNumber()-l;d===0||(d===1?l=h.getRowNumber():h.getRowNumber()>=r.getRowCount()?u[c]=null:l=h.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,i=this.getCodewords(),o=new ia,s=new ia,a=new ia,u=new ia;try{for(var l=Ih(i),c=l.next();!c.done;c=l.next()){var h=c.value;if(h!=null){h.setRowNumberAsRowIndicatorColumn();var d=h.getValue()%30,p=h.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:s.setValue(d*3+1);break;case 1:u.setValue(d/3),a.setValue(d%3);break;case 2:o.setValue(d+1);break}}}}catch(w){r={error:w}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}if(o.getValue().length===0||s.getValue().length===0||a.getValue().length===0||u.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<xe.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>xe.MAX_ROWS_IN_BARCODE)return null;var v=new G4(o.getValue()[0],s.getValue()[0],a.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,v),v},e.prototype.removeIncorrectCodewords=function(r,n){for(var i=0;i<r.length;i++){var o=r[i];if(r[i]!=null){var s=o.getValue()%30,a=o.getRowNumber();if(a>n.getRowCount()){r[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:s*3+1!==n.getRowCountUpperPart()&&(r[i]=null);break;case 1:(Math.trunc(s/3)!==n.getErrorCorrectionLevel()||s%3!==n.getRowCountLowerPart())&&(r[i]=null);break;case 2:s+1!==n.getColumnCount()&&(r[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(tx),Q4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z4=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=xe.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(r,i,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[n];o!=null&&(o.setRowNumber(e[n].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var a=this.detectionResultColumns[s].getCodewords()[n];a!=null&&(o=t.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var a=this.detectionResultColumns[s].getCodewords()[n];a!=null&&(o=t.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=n[r],a=this.detectionResultColumns[e-1].getCodewords(),u=a;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var l=new Array(14);l[2]=a[r],l[3]=u[r],r>0&&(l[0]=n[r-1],l[4]=a[r-1],l[5]=u[r-1]),r>1&&(l[8]=n[r-2],l[10]=a[r-2],l[11]=u[r-2]),r<n.length-1&&(l[1]=n[r+1],l[6]=a[r+1],l[7]=u[r+1]),r<n.length-2&&(l[9]=n[r+2],l[12]=a[r+2],l[13]=u[r+2]);try{for(var c=Q4(l),h=c.next();!h.done;h=c.next()){var d=h.value;if(t.adjustRowNumber(s,d))return}}catch(p){i={error:p}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new P1,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){r.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[n];if(o==null){r.format("    |   ");continue}r.format(" %3d|%3d",o.getRowNumber(),o.getValue())}r.format("%n")}return r.toString()},t}(),J4=function(){function t(e,r,n,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),e8=function(){function t(){}return t.initialize=function(){for(var e=0;e<xe.SYMBOL_TABLE.length;e++)for(var r=xe.SYMBOL_TABLE[e],n=r&1,i=0;i<xe.BARS_IN_MODULE;i++){for(var o=0;(r&1)===n;)o+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(xe.BARS_IN_MODULE)),t.RATIOS_TABLE[e][xe.BARS_IN_MODULE-i-1]=Math.fround(o/xe.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=Ie.sum(e),n=new Int32Array(xe.BARS_IN_MODULE),i=0,o=0,s=0;s<xe.MODULES_IN_CODEWORD;s++){var a=r/(2*xe.MODULES_IN_CODEWORD)+s*r/xe.MODULES_IN_CODEWORD;o+e[i]<=a&&(o+=e[i],i++),n[i]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return xe.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=Ie.sum(e),n=new Array(xe.BARS_IN_MODULE);if(r>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/r);var o=Hd.MAX_VALUE,s=-1;this.bSymbolTableReady||t.initialize();for(var a=0;a<t.RATIOS_TABLE.length;a++){for(var u=0,l=t.RATIOS_TABLE[a],c=0;c<xe.BARS_IN_MODULE;c++){var h=Math.fround(l[c]-n[c]);if(u+=Math.fround(h*h),u>=o)break}u<o&&(o=u,s=xe.SYMBOL_TABLE[a])}return s},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(xe.SYMBOL_TABLE.length).map(function(e){return new Array(xe.BARS_IN_MODULE)}),t}(),t8=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),mm=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),r8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),n8=function(t){r8(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(fr),i8=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new n8;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new S1;if(n===0)return;for(var i=0;i<n;i++)this.write(e[r+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),o8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),s8=function(t){o8(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(fr),a8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),u8=function(t){a8(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new re("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,i=n<<1;if(i-r<0&&(i=r),i<0){if(r<0)throw new s8;i=de.MAX_VALUE}this.buf=at.copyOfUint8Array(this.buf,i)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,i){if(n<0||n>r.length||i<0||n+i-r.length>0)throw new S1;this.ensureCapacity(this.count+i),Le.arraycopy(r,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return at.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(i8),Pe;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Pe||(Pe={}));function rx(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var rl;function Kn(t){if(typeof rl>"u"&&(rl=rx()),rl===null)throw new Error("BigInt is not supported!");return rl(t)}function l8(){var t=[];t[0]=Kn(1);var e=Kn(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var c8=function(){function t(){}return t.decode=function(e,r){var n=new fe(""),i=st.ISO8859_1;n.enableDecoding(i);for(var o=1,s=e[o++],a=new t8;o<e[0];){switch(s){case t.TEXT_COMPACTION_MODE_LATCH:o=t.textCompaction(e,o,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:o=t.byteCompaction(s,e,i,o,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:o=t.numericCompaction(e,o,n);break;case t.ECI_CHARSET:st.getCharacterSetECIByValue(e[o++]);break;case t.ECI_GENERAL_PURPOSE:o+=2;break;case t.ECI_USER_DEFINED:o++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=t.decodeMacroBlock(e,o,a);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new H;default:o--,o=t.textCompaction(e,o,n);break}if(o<e.length)s=e[o++];else throw H.getFormatInstance()}if(n.length()===0)throw H.getFormatInstance();var u=new Yc(null,n.toString(),null,r);return u.setOther(a),u},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw H.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<t.NUMBER_OF_SEQUENCE_CODEWORDS;o++,r++)i[o]=e[r];n.setSegmentIndex(de.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new fe;r=t.textCompaction(e,r,s),n.setFileId(s.toString());var a=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new fe;r=t.textCompaction(e,r+1,u),n.setFileName(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var l=new fe;r=t.textCompaction(e,r+1,l),n.setSender(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new fe;r=t.textCompaction(e,r+1,c),n.setAddressee(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var h=new fe;r=t.numericCompaction(e,r+1,h),n.setSegmentCount(de.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new fe;r=t.numericCompaction(e,r+1,d),n.setTimestamp(mm.parseLong(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new fe;r=t.numericCompaction(e,r+1,p),n.setChecksum(de.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new fe;r=t.numericCompaction(e,r+1,v),n.setFileSize(mm.parseLong(v.toString()));break;default:throw H.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw H.getFormatInstance()}if(a!==-1){var w=r-a;n.isLastSegment()&&w--,n.setOptionalData(at.copyOfRange(e,a,a+w))}return r},t.textCompaction=function(e,r,n){for(var i=new Int32Array((e[0]-r)*2),o=new Int32Array((e[0]-r)*2),s=0,a=!1;r<e[0]&&!a;){var u=e[r++];if(u<t.TEXT_COMPACTION_MODE_LATCH)i[s]=u/30,i[s+1]=u%30,s+=2;else switch(u){case t.TEXT_COMPACTION_MODE_LATCH:i[s++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,a=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[r++],o[s]=u,s++;break}}return t.decodeTextCompaction(i,o,s,n),r},t.decodeTextCompaction=function(e,r,n,i){for(var o=Pe.ALPHA,s=Pe.ALPHA,a=0;a<n;){var u=e[a],l="";switch(o){case Pe.ALPHA:if(u<26)l=String.fromCharCode(65+u);else switch(u){case 26:l=" ";break;case t.LL:o=Pe.LOWER;break;case t.ML:o=Pe.MIXED;break;case t.PS:s=o,o=Pe.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Pe.ALPHA;break}break;case Pe.LOWER:if(u<26)l=String.fromCharCode(97+u);else switch(u){case 26:l=" ";break;case t.AS:s=o,o=Pe.ALPHA_SHIFT;break;case t.ML:o=Pe.MIXED;break;case t.PS:s=o,o=Pe.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Pe.ALPHA;break}break;case Pe.MIXED:if(u<t.PL)l=t.MIXED_CHARS[u];else switch(u){case t.PL:o=Pe.PUNCT;break;case 26:l=" ";break;case t.LL:o=Pe.LOWER;break;case t.AL:o=Pe.ALPHA;break;case t.PS:s=o,o=Pe.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Pe.ALPHA;break}break;case Pe.PUNCT:if(u<t.PAL)l=t.PUNCT_CHARS[u];else switch(u){case t.PAL:o=Pe.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Pe.ALPHA;break}break;case Pe.ALPHA_SHIFT:if(o=s,u<26)l=String.fromCharCode(65+u);else switch(u){case 26:l=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:o=Pe.ALPHA;break}break;case Pe.PUNCT_SHIFT:if(o=s,u<t.PAL)l=t.PUNCT_CHARS[u];else switch(u){case t.PAL:o=Pe.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=Pe.ALPHA;break}break}l!==""&&i.append(l),a++}},t.byteCompaction=function(e,r,n,i,o){var s=new u8,a=0,u=0,l=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),h=r[i++];i<r[0]&&!l;)switch(c[a++]=h,u=900*u+h,h=r[i++],h){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,l=!0;break;default:if(a%5===0&&a>0){for(var d=0;d<6;++d)s.write(Number(Kn(u)>>Kn(8*(5-d))));u=0,a=0}break}i===r[0]&&h<t.TEXT_COMPACTION_MODE_LATCH&&(c[a++]=h);for(var p=0;p<a;p++)s.write(c[p]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<r[0]&&!l;){var v=r[i++];if(v<t.TEXT_COMPACTION_MODE_LATCH)a++,u=900*u+v;else switch(v){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,l=!0;break}if(a%5===0&&a>0){for(var d=0;d<6;++d)s.write(Number(Kn(u)>>Kn(8*(5-d))));u=0,a=0}}break}return o.append(Rr.decode(s.toByteArray(),n)),i},t.numericCompaction=function(e,r,n){for(var i=0,o=!1,s=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!o;){var a=e[r++];if(r===e[0]&&(o=!0),a<t.TEXT_COMPACTION_MODE_LATCH)s[i]=a,i++;else switch(a){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,o=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||a===t.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(n.append(t.decodeBase900toBase10(s,i)),i=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=Kn(0),i=0;i<r;i++)n+=t.EXP900[r-i-1]*Kn(e[i]);var o=n.toString();if(o.charAt(0)!=="1")throw new H;return o.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=rx()?l8():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),qs=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f8=function(){function t(){}return t.decode=function(e,r,n,i,o,s,a){for(var u=new Yd(e,r,n,i,o),l=null,c=null,h,d=!0;;d=!1){if(r!=null&&(l=t.getRowIndicatorColumn(e,u,r,!0,s,a)),i!=null&&(c=t.getRowIndicatorColumn(e,u,i,!1,s,a)),h=t.merge(l,c),h==null)throw V.getNotFoundInstance();var p=h.getBoundingBox();if(d&&p!=null&&(p.getMinY()<u.getMinY()||p.getMaxY()>u.getMaxY()))u=p;else break}h.setBoundingBox(u);var v=h.getBarcodeColumnCount()+1;h.setDetectionResultColumn(0,l),h.setDetectionResultColumn(v,c);for(var w=l!=null,I=1;I<=v;I++){var _=w?I:v-I;if(h.getDetectionResultColumn(_)===void 0){var m=void 0;_===0||_===v?m=new vm(u,_===0):m=new tx(u),h.setDetectionResultColumn(_,m);for(var x=-1,S=x,P=u.getMinY();P<=u.getMaxY();P++){if(x=t.getStartColumn(h,_,P,w),x<0||x>u.getMaxX()){if(S===-1)continue;x=S}var k=t.detectCodeword(e,u.getMinX(),u.getMaxX(),w,x,P,s,a);k!=null&&(m.setCodeword(P,k),S=x,s=Math.min(s,k.getWidth()),a=Math.max(a,k.getWidth()))}}}return t.createDecoderResult(h)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var i=Yd.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new Z4(n,i)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=t.getMax(i),s=0;try{for(var a=qs(i),u=a.next();!u.done;u=a.next()){var l=u.value;if(s+=o-l,l>0)break}}catch(p){r={error:p}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}for(var c=e.getCodewords(),h=0;s>0&&c[h]==null;h++)s--;for(var d=0,h=i.length-1;h>=0&&(d+=o-i[h],!(i[h]>0));h--);for(var h=c.length-1;d>0&&c[h]==null;h--)d--;return e.getBoundingBox().addMissingRows(s,d,e.isLeft())},t.getMax=function(e){var r,n,i=-1;try{for(var o=qs(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=Math.max(i,a)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var i;return r==null||(i=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,i,o,s){for(var a=new vm(r,i),u=0;u<2;u++)for(var l=u===0?1:-1,c=Math.trunc(Math.trunc(n.getX())),h=Math.trunc(Math.trunc(n.getY()));h<=r.getMaxY()&&h>=r.getMinY();h+=l){var d=t.detectCodeword(e,0,e.getWidth(),i,c,h,o,s);d!=null&&(a.setCodeword(h,d),i?c=d.getStartX():c=d.getEndX())}return a},t.adjustCodewordCount=function(e,r){var n=r[0][1],i=n.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>xe.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();n.setValue(o)}else i[0]!==o&&n.setValue(o)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var u=0;u<e.getBarcodeColumnCount();u++){var l=r[a][u+1].getValue(),c=a*e.getBarcodeColumnCount()+u;l.length===0?n.push(c):l.length===1?i[c]=l[0]:(s.push(c),o.push(l))}for(var h=new Array(o.length),d=0;d<h.length;d++)h[d]=o[d];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,xe.toIntArray(n),xe.toIntArray(s),h)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,i,o){for(var s=new Int32Array(i.length),a=100;a-- >0;){for(var u=0;u<s.length;u++)r[i[u]]=o[u][s[u]];try{return t.decodeCodewords(r,e,n)}catch(c){var l=c instanceof vt;if(!l)throw c}if(s.length===0)throw vt.getChecksumInstance();for(var u=0;u<s.length;u++)if(s[u]<o[u].length-1){s[u]++;break}else if(s[u]=0,u===s.length-1)throw vt.getChecksumInstance()}throw vt.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<s.length;a++)for(var u=0;u<s[a].length;u++)s[a][u]=new ia;var l=0;try{for(var c=qs(e.getDetectionResultColumns()),h=c.next();!h.done;h=c.next()){var d=h.value;if(d!=null)try{for(var p=(i=void 0,qs(d.getCodewords())),v=p.next();!v.done;v=p.next()){var w=v.value;if(w!=null){var I=w.getRowNumber();if(I>=0){if(I>=s.length)continue;s[I][l].setValue(w.getValue())}}}}catch(_){i={error:_}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}l++}}catch(_){r={error:_}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return s},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,i){var o,s,a=i?1:-1,u=null;if(t.isValidBarcodeColumn(e,r-a)&&(u=e.getDetectionResultColumn(r-a).getCodeword(n)),u!=null)return i?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(r).getCodewordNearby(n),u!=null)return i?u.getStartX():u.getEndX();if(t.isValidBarcodeColumn(e,r-a)&&(u=e.getDetectionResultColumn(r-a).getCodewordNearby(n)),u!=null)return i?u.getEndX():u.getStartX();for(var l=0;t.isValidBarcodeColumn(e,r-a);){r-=a;try{for(var c=(o=void 0,qs(e.getDetectionResultColumn(r).getCodewords())),h=c.next();!h.done;h=c.next()){var d=h.value;if(d!=null)return(i?d.getEndX():d.getStartX())+a*l*(d.getEndX()-d.getStartX())}}catch(p){o={error:p}}finally{try{h&&!h.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}l++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,i,o,s,a,u){o=t.adjustCodewordStartColumn(e,r,n,i,o,s);var l=t.getModuleBitCount(e,r,n,i,o,s);if(l==null)return null;var c,h=Ie.sum(l);if(i)c=o+h;else{for(var d=0;d<l.length/2;d++){var p=l[d];l[d]=l[l.length-1-d],l[l.length-1-d]=p}c=o,o=c-h}if(!t.checkCodewordSkew(h,a,u))return null;var v=e8.getDecodedValue(l),w=xe.getCodeword(v);return w===-1?null:new J4(o,c,t.getCodewordBucketNumber(v),w)},t.getModuleBitCount=function(e,r,n,i,o,s){for(var a=o,u=new Int32Array(8),l=0,c=i?1:-1,h=i;(i?a<n:a>=r)&&l<u.length;)e.get(a,s)===h?(u[l]++,a+=c):(l++,h=!h);return l===u.length||a===(i?n:r)&&l===u.length-1?u:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,i,o,s){for(var a=o,u=i?-1:1,l=0;l<2;l++){for(;(i?a>=r:a<n)&&i===e.get(a,s);){if(Math.abs(o-a)>t.CODEWORD_SKEW_SIZE)return o;a+=u}u=-u,i=!i}return a},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw H.getFormatInstance();var i=1<<r+1,o=t.correctErrors(e,n,i);t.verifyCodewordCount(e,i);var s=c8.decode(e,""+r);return s.setErrorsCorrected(o),s.setErasures(n.length),s},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw vt.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw H.getFormatInstance();var n=e[0];if(n>e.length)throw H.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw H.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,i=r.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)r[i]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new P1,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var o=e[n][i];o.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new W4,t}(),h8=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qd=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw V.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof H||n instanceof vt?V.getNotFoundInstance():n}},t.decode=function(e,r,n){var i,o,s=new Array,a=V4.detectMultiple(e,r,n);try{for(var u=h8(a.getPoints()),l=u.next();!l.done;l=u.next()){var c=l.value,h=f8.decode(a.getBits(),c[4],c[5],c[6],c[7],t.getMinCodewordWidth(c),t.getMaxCodewordWidth(c)),d=new $t(h.getText(),h.getRawBytes(),void 0,c,te.PDF_417);d.putMetadata(Ct.ERROR_CORRECTION_LEVEL,h.getECLevel());var p=h.getOther();p!=null&&d.putMetadata(Ct.PDF417_EXTRA_METADATA,p),s.push(d)}}catch(v){i={error:v}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return s.map(function(v){return v})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?de.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),d8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ym=function(t){d8(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(fr),_m=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p8=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(He.TRY_HARDER)!==void 0,n=e==null?null:e.get(He.POSSIBLE_FORMATS),i=new Array;if(n!=null){var o=n.some(function(s){return s===te.UPC_A||s===te.UPC_E||s===te.EAN_13||s===te.EAN_8||s===te.CODABAR||s===te.CODE_39||s===te.CODE_93||s===te.CODE_128||s===te.ITF||s===te.RSS_14||s===te.RSS_EXPANDED});o&&!r&&i.push(new na(e)),n.includes(te.QR_CODE)&&i.push(new qd),n.includes(te.DATA_MATRIX)&&i.push(new Xd),n.includes(te.AZTEC)&&i.push(new Gd),n.includes(te.PDF_417)&&i.push(new Qd),o&&r&&i.push(new na(e))}i.length===0&&(r||i.push(new na(e)),i.push(new qd),i.push(new Xd),i.push(new Gd),i.push(new Qd),r&&i.push(new na(e))),this.readers=i},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=_m(this.readers),i=n.next();!i.done;i=n.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new ym("No readers where selected, nothing can be read.");try{for(var i=_m(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(a){if(a instanceof ym)continue}}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}throw new V("No MultiFormat Readers were able to detect the code.")},t}(),g8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v8=function(t){g8(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var i=this,o=new p8;return o.setHints(r),i=t.call(this,o,n)||this,i}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e}(vs),m8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){m8(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Qd,r)||this}return e})(vs);var y8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){y8(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new qd,r)||this}return e})(vs);var Zd;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(Zd||(Zd={}));const nl=Zd;var nx=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new fi(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],i=this.field,o=r.length;o<=e;o++){var s=n.multiply(new fi(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));r.push(s),n=s}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new re("No error correction bytes");var n=e.length-r;if(n<=0)throw new re("No data bytes provided");var i=this.buildGenerator(r),o=new Int32Array(n);Le.arraycopy(e,0,o,0,n);var s=new fi(this.field,o);s=s.multiplyByMonomial(r,1);for(var a=s.divide(i)[1],u=a.getCoefficients(),l=r-u.length,c=0;c<l;c++)e[n+c]=0;Le.arraycopy(u,0,e,n+l,u.length)},t}(),oa=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var a=n[s],u=0;u<i-1;u++){var l=a[u];l===a[u+1]&&l===n[s+1][u]&&l===n[s+1][u+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=0;a<i;a++){var u=n[s];a+6<i&&u[a]===1&&u[a+1]===0&&u[a+2]===1&&u[a+3]===1&&u[a+4]===1&&u[a+5]===0&&u[a+6]===1&&(t.isWhiteHorizontal(u,a-4,a)||t.isWhiteHorizontal(u,a+7,a+11))&&r++,s+6<o&&n[s][a]===1&&n[s+1][a]===0&&n[s+2][a]===1&&n[s+3][a]===1&&n[s+4][a]===1&&n[s+5][a]===0&&n[s+6][a]===1&&(t.isWhiteVertical(n,a,s-4,s)||t.isWhiteVertical(n,a,s+7,s+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var i=r;i<n;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var o=n;o<i;o++)if(e[o][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=n[s],u=0;u<i;u++)a[u]===1&&r++;var l=e.getHeight()*e.getWidth(),c=Math.floor(Math.abs(r*2-l)*10/l);return c*t.N4},t.getDataMaskBit=function(e,r,n){var i,o;switch(e){case 0:i=n+r&1;break;case 1:i=n&1;break;case 2:i=r%3;break;case 3:i=(n+r)%3;break;case 4:i=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:o=n*r,i=(o&1)+o%3;break;case 6:o=n*r,i=(o&1)+o%3&1;break;case 7:o=n*r,i=o%3+(n+r&1)&1;break;default:throw new re("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,i=r?e.getHeight():e.getWidth(),o=r?e.getWidth():e.getHeight(),s=e.getArray(),a=0;a<i;a++){for(var u=0,l=-1,c=0;c<o;c++){var h=r?s[a][c]:s[c][a];h===l?u++:(u>=5&&(n+=t.N1+(u-5)),u=1,l=h)}u>=5&&(n+=t.N1+(u-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),_8=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w8=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),i=0;i!==r;i++)n[i]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var i=_8(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;at.fill(s,e)}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var o=this.bytes[n],s=r.bytes[n],a=0,u=this.width;a<u;++a)if(o[a]!==s[a])return!1;return!0},t.prototype.toString=function(){for(var e=new fe,r=0,n=this.height;r<n;++r){for(var i=this.bytes[r],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),Jd=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new fe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),x8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ve=function(t){x8(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(fr),wm=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,i,o){t.clearMatrix(o),t.embedBasicPatterns(n,o),t.embedTypeInfo(r,i,o),t.maybeEmbedVersionInfo(n,o),t.embedDataBits(e,i,o)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var i=new mt;t.makeTypeInfoBits(e,r,i);for(var o=0,s=i.getSize();o<s;++o){var a=i.get(i.getSize()-1-o),u=t.TYPE_INFO_COORDINATES[o],l=u[0],c=u[1];if(n.setBoolean(l,c,a),o<8){var h=n.getWidth()-o-1,d=8;n.setBoolean(h,d,a)}else{var h=8,d=n.getHeight()-7+(o-8);n.setBoolean(h,d,a)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new mt;t.makeVersionInfoBits(e,n);for(var i=6*3-1,o=0;o<6;++o)for(var s=0;s<3;++s){var a=n.get(i);i--,r.setBoolean(o,r.getHeight()-11+s,a),r.setBoolean(r.getHeight()-11+s,o,a)}}},t.embedDataBits=function(e,r,n){for(var i=0,o=-1,s=n.getWidth()-1,a=n.getHeight()-1;s>0;){for(s===6&&(s-=1);a>=0&&a<n.getHeight();){for(var u=0;u<2;++u){var l=s-u;if(t.isEmpty(n.get(l,a))){var c=void 0;i<e.getSize()?(c=e.get(i),++i):c=!1,r!==255&&oa.getDataMaskBit(r,l,a)&&(c=!c),n.setBoolean(l,a,c)}}a+=o}o=-o,a+=o,s-=2}if(i!==e.getSize())throw new Ve("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-de.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new re("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!Jd.isValidMaskPattern(r))throw new Ve("Invalid mask pattern");var i=e.getBits()<<3|r;n.appendBits(i,5);var o=t.calculateBCHCode(i,t.TYPE_INFO_POLY);n.appendBits(o,10);var s=new mt;if(s.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(s),n.getSize()!==15)throw new Ve("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new Ve("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Ve;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var i=0;i<8;++i){if(!t.isEmpty(n.get(e+i,r)))throw new Ve;n.setNumber(e+i,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var i=0;i<7;++i){if(!t.isEmpty(n.get(e,r+i)))throw new Ve;n.setNumber(e,r+i,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var i=0;i<5;++i)for(var o=t.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)n.setNumber(e+s,r+i,o[s])},t.embedPositionDetectionPattern=function(e,r,n){for(var i=0;i<7;++i)for(var o=t.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)n.setNumber(e+s,r+i,o[s])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],o=0,s=i.length;o!==s;o++){var a=i[o];if(a>=0)for(var u=0;u!==s;u++){var l=i[u];l>=0&&t.isEmpty(r.get(l,a))&&t.embedPositionAdjustmentPattern(l-2,a-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),E8=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),xm=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return oa.applyMaskPenaltyRule1(e)+oa.applyMaskPenaltyRule2(e)+oa.applyMaskPenaltyRule3(e)+oa.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,o=n!==null&&n.get(nl.CHARACTER_SET)!==void 0;o&&(i=n.get(nl.CHARACTER_SET).toString());var s=this.chooseMode(e,i),a=new mt;if(s===Ue.BYTE&&(o||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var u=st.getCharacterSetECIByName(i);u!==void 0&&this.appendECI(u,a)}this.appendModeInfo(s,a);var l=new mt;this.appendBytes(e,s,l,i);var c;if(n!==null&&n.get(nl.QR_VERSION)!==void 0){var h=Number.parseInt(n.get(nl.QR_VERSION).toString(),10);c=Ki.getVersionForNumber(h);var d=this.calculateBitsNeeded(s,a,l,c);if(!this.willFit(d,c,r))throw new Ve("Data too big for requested version")}else c=this.recommendVersion(r,s,a,l);var p=new mt;p.appendBitArray(a);var v=s===Ue.BYTE?l.getSizeInBytes():e.length;this.appendLengthInfo(v,c,s,p),p.appendBitArray(l);var w=c.getECBlocksForLevel(r),I=c.getTotalCodewords()-w.getTotalECCodewords();this.terminateBits(I,p);var _=this.interleaveWithECBytes(p,c.getTotalCodewords(),I,w.getNumBlocks()),m=new Jd;m.setECLevel(r),m.setMode(s),m.setVersion(c);var x=c.getDimensionForVersion(),S=new w8(x,x),P=this.chooseMaskPattern(_,r,c,S);return m.setMaskPattern(P),wm.buildMatrix(_,r,c,P,S),m.setMatrix(S),m},t.recommendVersion=function(e,r,n,i){var o=this.calculateBitsNeeded(r,n,i,Ki.getVersionForNumber(1)),s=this.chooseVersion(o,e),a=this.calculateBitsNeeded(r,n,i,s);return this.chooseVersion(a,e)},t.calculateBitsNeeded=function(e,r,n,i){return r.getSize()+e.getCharacterCountBits(i)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),st.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Ue.KANJI;for(var n=!1,i=!1,o=0,s=e.length;o<s;++o){var a=e.charAt(o);if(t.isDigit(a))n=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return Ue.BYTE}return i?Ue.ALPHANUMERIC:n?Ue.NUMERIC:Ue.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=Rr.encode(e,st.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var o=r[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,a=0;a<Jd.NUM_MASK_PATTERNS;a++){wm.buildMatrix(e,r,n,a,i);var u=this.calculateMaskPenalty(i);u<o&&(o=u,s=a)}return s},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var i=Ki.getVersionForNumber(n);if(t.willFit(e,i,r))return i}throw new Ve("Data too big")},t.willFit=function(e,r,n){var i=r.getTotalCodewords(),o=r.getECBlocksForLevel(n),s=o.getTotalECCodewords(),a=i-s,u=(e+7)/8;return a>=u},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new Ve("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var i=0;i<4&&r.getSize()<n;++i)r.appendBit(!1);var o=r.getSize()&7;if(o>0)for(var i=o;i<8;i++)r.appendBit(!1);for(var s=e-r.getSizeInBytes(),i=0;i<s;++i)r.appendBits(i&1?17:236,8);if(r.getSize()!==n)throw new Ve("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,i,o,s){if(i>=n)throw new Ve("Block ID too large");var a=e%n,u=n-a,l=Math.floor(e/n),c=l+1,h=Math.floor(r/n),d=h+1,p=l-h,v=c-d;if(p!==v)throw new Ve("EC bytes mismatch");if(n!==u+a)throw new Ve("RS blocks mismatch");if(e!==(h+p)*u+(d+v)*a)throw new Ve("Total bytes mismatch");i<u?(o[0]=h,s[0]=p):(o[0]=d,s[0]=v)},t.interleaveWithECBytes=function(e,r,n,i){var o,s,a,u;if(e.getSizeInBytes()!==n)throw new Ve("Number of bits and data bytes does not match");for(var l=0,c=0,h=0,d=new Array,p=0;p<i;++p){var v=new Int32Array(1),w=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,i,p,v,w);var I=v[0],_=new Uint8Array(I);e.toBytes(8*l,_,0,I);var m=t.generateECBytes(_,w[0]);d.push(new E8(_,m)),c=Math.max(c,I),h=Math.max(h,m.length),l+=v[0]}if(n!==l)throw new Ve("Data bytes does not match offset");for(var x=new mt,p=0;p<c;++p)try{for(var S=(o=void 0,xm(d)),P=S.next();!P.done;P=S.next()){var k=P.value,_=k.getDataBytes();p<_.length&&x.appendBits(_[p],8)}}catch(R){o={error:R}}finally{try{P&&!P.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}for(var p=0;p<h;++p)try{for(var A=(a=void 0,xm(d)),E=A.next();!E.done;E=A.next()){var k=E.value,m=k.getErrorCorrectionBytes();p<m.length&&x.appendBits(m[p],8)}}catch(R){a={error:R}}finally{try{E&&!E.done&&(u=A.return)&&u.call(A)}finally{if(a)throw a.error}}if(r!==x.getSizeInBytes())throw new Ve("Interleaving error: "+r+" and "+x.getSizeInBytes()+" differ.");return x},t.generateECBytes=function(e,r){for(var n=e.length,i=new Int32Array(n+r),o=0;o<n;o++)i[o]=e[o]&255;new nx(or.QR_CODE_FIELD_256).encode(i,r);for(var s=new Uint8Array(r),o=0;o<r;o++)s[o]=i[n+o];return s},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,i){var o=n.getCharacterCountBits(r);if(e>=1<<o)throw new Ve(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},t.appendBytes=function(e,r,n,i){switch(r){case Ue.NUMERIC:t.appendNumericBytes(e,n);break;case Ue.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case Ue.BYTE:t.append8BitBytes(e,n,i);break;case Ue.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Ve("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var o=t.getDigit(e.charAt(i));if(i+2<n){var s=t.getDigit(e.charAt(i+1)),a=t.getDigit(e.charAt(i+2));r.appendBits(o*100+s*10+a,10),i+=3}else if(i+1<n){var s=t.getDigit(e.charAt(i+1));r.appendBits(o*10+s,7),i+=2}else r.appendBits(o,4),i++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var o=t.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new Ve;if(i+1<n){var s=t.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new Ve;r.appendBits(o*45+s,11),i+=2}else r.appendBits(o,6),i++}},t.append8BitBytes=function(e,r,n){var i;try{i=Rr.encode(e,n)}catch(u){throw new Ve(u)}for(var o=0,s=i.length;o!==s;o++){var a=i[o];r.appendBits(a,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=Rr.encode(e,st.SJIS)}catch(h){throw new Ve(h)}for(var i=n.length,o=0;o<i;o+=2){var s=n[o]&255,a=n[o+1]&255,u=s<<8&4294967295|a,l=-1;if(u>=33088&&u<=40956?l=u-33088:u>=57408&&u<=60351&&(l=u-49472),l===-1)throw new Ve("Invalid byte sequence");var c=(l>>8)*192+(l&255);r.appendBits(c,13)}},t.appendECI=function(e,r){r.appendBits(Ue.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=st.UTF8.getName(),t})();var A8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){A8(e,t);function e(r,n,i,o,s,a,u,l){var c=t.call(this,a,u)||this;if(c.yuvData=r,c.dataWidth=n,c.dataHeight=i,c.left=o,c.top=s,o+a>n||s+u>i)throw new re("Crop rectangle does not fit within image data.");return l&&c.reverseHorizontal(a,u),c}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new re("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var o=(r+this.top)*this.dataWidth+this.left;return Le.arraycopy(this.yuvData,o,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=r*n,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Le.arraycopy(this.yuvData,s,o,0,i),o;for(var a=0;a<n;a++){var u=a*r;Le.arraycopy(this.yuvData,s,o,u,r),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,i,o,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(r*n),o=this.yuvData,s=this.top*this.dataWidth+this.left,a=0;a<n;a++){for(var u=a*r,l=0;l<r;l++){var c=o[s+l*e.THUMBNAIL_SCALE_FACTOR]&255;i[u+l]=4278190080|c*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<n;o++,s+=this.dataWidth)for(var a=s+r/2,u=s,l=s+r-1;u<a;u++,l--){var c=i[u];i[u]=i[l],i[l]=c}},e.prototype.invert=function(){return new R1(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(qc);var I8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){I8(e,t);function e(r,n,i,o,s,a,u){var l=t.call(this,n,i)||this;if(l.dataWidth=o,l.dataHeight=s,l.left=a,l.top=u,r.BYTES_PER_ELEMENT===4){for(var c=n*i,h=new Uint8ClampedArray(c),d=0;d<c;d++){var p=r[d],v=p>>16&255,w=p>>7&510,I=p&255;h[d]=(v+w+I)/4&255}l.luminances=h}else l.luminances=r;if(o===void 0&&(l.dataWidth=n),s===void 0&&(l.dataHeight=i),a===void 0&&(l.left=0),u===void 0&&(l.top=0),l.left+n>l.dataWidth||l.top+i>l.dataHeight)throw new re("Crop rectangle does not fit within image data.");return l}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new re("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var o=(r+this.top)*this.dataWidth+this.left;return Le.arraycopy(this.luminances,o,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=r*n,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Le.arraycopy(this.luminances,s,o,0,i),o;for(var a=0;a<n;a++){var u=a*r;Le.arraycopy(this.luminances,s,o,u,r),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new R1(this)},e})(qc);var T8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),C8=function(t){T8(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(st),S8=function(){function t(){}return t.ISO_8859_1=st.ISO8859_1,t}(),e0,R8=301,b8=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=R8);return{LOG:t,ALOG:e}};e0=b8([],[]),e0.LOG;e0.ALOG;var Em;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Em||(Em={}));var Am=129,ix=230,O8=231,N8=235,P8=236,D8=237,k8=238,M8=239,L8=240,Th=254,F8=254,Im="[)>05",Tm="[)>06",Cm="",Oe=0,Et=1,qt=2,nt=3,dt=4,Lt=5,B8=function(){function t(){}return t.prototype.getEncodingMode=function(){return Oe},t.prototype.encode=function(e){var r=Ur.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=Ur.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Lt:e.writeCodeword(O8),e.signalEncoderChange(Lt);return;case Et:e.writeCodeword(ix),e.signalEncoderChange(Et);return;case nt:e.writeCodeword(k8),e.signalEncoderChange(nt);break;case qt:e.writeCodeword(M8),e.signalEncoderChange(qt);break;case dt:e.writeCodeword(L8),e.signalEncoderChange(dt);break;default:throw new Error("Illegal mode: "+i)}else Ur.isExtendedASCII(n)?(e.writeCodeword(N8),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(Ur.isDigit(e)&&Ur.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),V8=function(){function t(){}return t.prototype.getEncodingMode=function(){return Lt},t.prototype.encode=function(e){var r=new fe;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var i=Ur.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Oe);break}}var o=r.length()-1,s=1,a=e.getCodewordCount()+o+s;e.updateSymbolInfo(a);var u=e.getSymbolInfo().getDataCapacity()-a>0;if(e.hasMoreCharacters()||u)if(o<=249)r.setCharAt(0,_e.getCharAt(o));else if(o<=1555)r.setCharAt(0,_e.getCharAt(Math.floor(o/250)+249)),r.insert(1,_e.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var l=0,n=r.length();l<n;l++)e.writeCodeword(this.randomize255State(r.charAt(l).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,i=e+n;return i<=255?i:i-256},t}(),D1=function(){function t(){}return t.prototype.getEncodingMode=function(){return Et},t.prototype.encodeMaximal=function(e){for(var r=new fe,n=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,n=this.encodeChar(s,r),r.length()%3===0&&(i=e.pos,o=r.length())}if(o!==r.length()){var a=Math.floor(r.length()/3*2),u=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(u);var l=e.getSymbolInfo().getDataCapacity()-u,c=Math.floor(r.length()%3);(c===2&&l!==2||c===1&&(n>3||l!==1))&&(e.pos=i)}r.length()>0&&e.writeCodeword(ix),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new fe;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,r),o=Math.floor(r.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var a=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var u=new fe;for(r.length()%3===2&&a!==2&&(i=this.backtrackOneCharacter(e,r,u,i));r.length()%3===1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,r,u,i);break}var l=r.length();if(l%3===0){var c=Ur.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(c!==this.getEncodingMode()){e.signalEncoderChange(Oe);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,i){var o=r.length(),s=r.toString().substring(0,o-i);r.setLengthToZero(),r.append(s),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,n),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),i=r.length()%3,o=e.getCodewordCount()+n;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(Th)}else if(s===1&&i===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(Th),e.pos--}else if(i===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(s>0||e.hasMoreCharacters())&&e.writeCodeword(Th)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Oe)},t.prototype.encodeChar=function(e,r){if(e===" ".charCodeAt(0))return r.append(3),1;if(e>="0".charCodeAt(0)&&e<="9".charCodeAt(0))return r.append(e-48+4),1;if(e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0))return r.append(e-65+14),1;if(e<" ".charCodeAt(0))return r.append(0),r.append(e),2;if(e<="/".charCodeAt(0))return r.append(1),r.append(e-33),2;if(e<="@".charCodeAt(0))return r.append(1),r.append(e-58+15),2;if(e<="_".charCodeAt(0))return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,i=r%256,o=new fe;return o.append(n),o.append(i),o.toString()},t}(),U8=function(){function t(){}return t.prototype.getEncodingMode=function(){return dt},t.prototype.encode=function(e){for(var r=new fe;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var i=r.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var o=r.toString().substring(4);r.setLengthToZero(),r.append(o);var s=Ur.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(Oe);break}}}r.append(_e.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var s=n-1,a=this.encodeToCodewords(r.toString()),u=!e.hasMoreCharacters(),l=u&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(l=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))}l?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(a)}finally{e.signalEncoderChange(Oe)}},t.prototype.encodeChar=function(e,r){e>=" ".charCodeAt(0)&&e<="?".charCodeAt(0)?r.append(e):e>="@".charCodeAt(0)&&e<="^".charCodeAt(0)?r.append(_e.getCharAt(e-64)):Ur.illegalCharacter(_e.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=r>=2?e.charAt(1).charCodeAt(0):0,o=r>=3?e.charAt(2).charCodeAt(0):0,s=r>=4?e.charAt(3).charCodeAt(0):0,a=(n<<18)+(i<<12)+(o<<6)+s,u=a>>16&255,l=a>>8&255,c=a&255,h=new fe;return h.append(u),r>=2&&h.append(l),r>=3&&h.append(c),h.toString()},t}(),j8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z8=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ce=function(){function t(e,r,n,i,o,s,a,u){a===void 0&&(a=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=a,this.rsBlockError=u}return t.lookup=function(e,r,n,i,o){var s,a;r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var u=z8(H8),l=u.next();!l.done;l=u.next()){var c=l.value;if(!(r===1&&c.rectangular)&&!(r===2&&!c.rectangular)&&!(n!=null&&(c.getSymbolWidth()<n.getWidth()||c.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(c.getSymbolWidth()>i.getWidth()||c.getSymbolHeight()>i.getHeight()))&&e<=c.dataCapacity)return c}}catch(h){s={error:h}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),$8=function(t){j8(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(Ce),H8=[new Ce(!1,3,5,8,8,1),new Ce(!1,5,7,10,10,1),new Ce(!0,5,7,16,6,1),new Ce(!1,8,10,12,12,1),new Ce(!0,10,11,14,6,2),new Ce(!1,12,12,14,14,1),new Ce(!0,16,14,24,10,1),new Ce(!1,18,14,16,16,1),new Ce(!1,22,18,18,18,1),new Ce(!0,22,18,16,10,2),new Ce(!1,30,20,20,20,1),new Ce(!0,32,24,16,14,2),new Ce(!1,36,24,22,22,1),new Ce(!1,44,28,24,24,1),new Ce(!0,49,28,22,14,2),new Ce(!1,62,36,14,14,4),new Ce(!1,86,42,16,16,4),new Ce(!1,114,48,18,18,4),new Ce(!1,144,56,20,20,4),new Ce(!1,174,68,22,22,4),new Ce(!1,204,84,24,24,4,102,42),new Ce(!1,280,112,14,14,16,140,56),new Ce(!1,368,144,16,16,16,92,36),new Ce(!1,456,192,18,18,16,114,48),new Ce(!1,576,224,20,20,16,144,56),new Ce(!1,696,272,22,22,16,174,68),new Ce(!1,816,336,24,24,16,136,56),new Ce(!1,1050,408,18,18,36,175,68),new Ce(!1,1304,496,20,20,36,163,62),new $8],W8=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(a){return a.charCodeAt(0)}),n=new fe,i=0,o=r.length;i<o;i++){var s=String.fromCharCode(r[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(s)}this.msg=n.toString(),this.shape=0,this.codewords=new fe,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Ce.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),G8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K8=function(t){G8(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return nt},e.prototype.encode=function(r){for(var n=new fe;r.hasMoreCharacters();){var i=r.getCurrentChar();r.pos++,this.encodeChar(i,n);var o=n.length();if(o%3===0){this.writeNextTriplet(r,n);var s=Ur.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){r.signalEncoderChange(Oe);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case"*".charCodeAt(0):n.append(1);break;case">".charCodeAt(0):n.append(2);break;case" ".charCodeAt(0):n.append(3);break;default:r>="0".charCodeAt(0)&&r<="9".charCodeAt(0)?n.append(r-48+4):r>="A".charCodeAt(0)&&r<="Z".charCodeAt(0)?n.append(r-65+14):Ur.illegalCharacter(_e.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var i=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),o=n.length();r.pos-=o,(r.getRemainingCharacters()>1||i>1||r.getRemainingCharacters()!==i)&&r.writeCodeword(F8),r.getNewEncoding()<0&&r.signalEncoderChange(Oe)},e}(D1),X8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q8=function(t){X8(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return qt},e.prototype.encodeChar=function(r,n){if(r===" ".charCodeAt(0))return n.append(3),1;if(r>="0".charCodeAt(0)&&r<="9".charCodeAt(0))return n.append(r-48+4),1;if(r>="a".charCodeAt(0)&&r<="z".charCodeAt(0))return n.append(r-97+14),1;if(r<" ".charCodeAt(0))return n.append(0),n.append(r),2;if(r<="/".charCodeAt(0))return n.append(1),n.append(r-33),2;if(r<="@".charCodeAt(0))return n.append(1),n.append(r-58+15),2;if(r>="[".charCodeAt(0)&&r<="_".charCodeAt(0))return n.append(1),n.append(r-91+22),2;if(r==="`".charCodeAt(0))return n.append(2),n.append(0),2;if(r<="Z".charCodeAt(0))return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(r-128,n),i},e}(D1),Y8=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=Am+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,i,o){r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new D1,a=[new B8,s,new q8,new K8,new U8,new V8],u=new W8(e);u.setSymbolShape(r),u.setSizeConstraints(n,i),e.startsWith(Im)&&e.endsWith(Cm)?(u.writeCodeword(P8),u.setSkipAtEnd(2),u.pos+=Im.length):e.startsWith(Tm)&&e.endsWith(Cm)&&(u.writeCodeword(D8),u.setSkipAtEnd(2),u.pos+=Tm.length);var l=Oe;for(o&&(s.encodeMaximal(u),l=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)a[l].encode(u),u.getNewEncoding()>=0&&(l=u.getNewEncoding(),u.resetEncoderSignal());var c=u.getCodewordCount();u.updateSymbolInfo();var h=u.getSymbolInfo().getDataCapacity();c<h&&l!==Oe&&l!==Lt&&l!==dt&&u.writeCodeword("þ");var d=u.getCodewords();for(d.length()<h&&d.append(Am);d.length()<h;)d.append(this.randomize253State(d.length()+1));return u.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var i=this.lookAheadTestIntern(e,r,n);if(n===nt&&i===nt){for(var o=Math.min(r+3,e.length),s=r;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return Oe}else if(n===dt&&i===dt){for(var o=Math.min(r+4,e.length),s=r;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return Oe}return i},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var i;n===Oe?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var o=0,s=new Uint8Array(6),a=[];;){if(r+o===e.length){at.fill(s,0),at.fill(a,0);var u=this.findMinimums(i,a,de.MAX_VALUE,s),l=this.getMinimumCount(s);if(a[Oe]===u)return Oe;if(l===1){if(s[Lt]>0)return Lt;if(s[dt]>0)return dt;if(s[qt]>0)return qt;if(s[nt]>0)return nt}return Et}var c=e.charCodeAt(r+o);if(o++,this.isDigit(c)?i[Oe]+=.5:this.isExtendedASCII(c)?(i[Oe]=Math.ceil(i[Oe]),i[Oe]+=2):(i[Oe]=Math.ceil(i[Oe]),i[Oe]++),this.isNativeC40(c)?i[Et]+=2/3:this.isExtendedASCII(c)?i[Et]+=8/3:i[Et]+=4/3,this.isNativeText(c)?i[qt]+=2/3:this.isExtendedASCII(c)?i[qt]+=8/3:i[qt]+=4/3,this.isNativeX12(c)?i[nt]+=2/3:this.isExtendedASCII(c)?i[nt]+=13/3:i[nt]+=10/3,this.isNativeEDIFACT(c)?i[dt]+=3/4:this.isExtendedASCII(c)?i[dt]+=17/4:i[dt]+=13/4,this.isSpecialB256(c)?i[Lt]+=4:i[Lt]++,o>=4){if(at.fill(s,0),at.fill(a,0),this.findMinimums(i,a,de.MAX_VALUE,s),a[Oe]<this.min(a[Lt],a[Et],a[qt],a[nt],a[dt]))return Oe;if(a[Lt]<a[Oe]||a[Lt]+1<this.min(a[Et],a[qt],a[nt],a[dt]))return Lt;if(a[dt]+1<this.min(a[Lt],a[Et],a[qt],a[nt],a[Oe]))return dt;if(a[qt]+1<this.min(a[Lt],a[Et],a[dt],a[nt],a[Oe]))return qt;if(a[nt]+1<this.min(a[Lt],a[Et],a[dt],a[qt],a[Oe]))return nt;if(a[Et]+1<this.min(a[Oe],a[Lt],a[dt],a[qt])){if(a[Et]<a[nt])return Et;if(a[Et]===a[nt]){for(var h=r+o+1;h<e.length;){var d=e.charCodeAt(h);if(this.isX12TermSep(d))return nt;if(!this.isNativeX12(d))break;h++}return Et}}}}},t.min=function(e,r,n,i,o){var s=Math.min(e,Math.min(r,Math.min(n,i)));return o===void 0?s:Math.min(s,o)},t.findMinimums=function(e,r,n,i){for(var o=0;o<6;o++){var s=r[o]=Math.ceil(e[o]);n>s&&(n=s,at.fill(i,0)),n===s&&(i[o]=i[o]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},t.isNativeText=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="a".charCodeAt(0)&&e<="z".charCodeAt(0)},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},t.isX12TermSep=function(e){return e===13||e==="*".charCodeAt(0)||e===">".charCodeAt(0)},t.isNativeEDIFACT=function(e){return e>=" ".charCodeAt(0)&&e<="^".charCodeAt(0)},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,i=r;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-r},t.illegalCharacter=function(e){var r=de.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}();const Ur=Y8;var Ch=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sm=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Rr.encode(e,this.charset)!=null}catch{return!1}},t}(),Q8=function(){function t(e,r,n){var i,o,s,a,u,l;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(T){return new Sm(C8.forName(T))}),this.encoders=[];var c=[];c.push(new Sm(S8.ISO_8859_1));for(var h=r!=null&&r.name.startsWith("UTF"),d=0;d<e.length;d++){var p=!1;try{for(var v=(i=void 0,Ch(c)),w=v.next();!w.done;w=v.next()){var I=w.value,_=e.charAt(d),m=_.charCodeAt(0);if(m===n||I.canEncode(_)){p=!0;break}}}catch(T){i={error:T}}finally{try{w&&!w.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}if(!p)try{for(var x=(s=void 0,Ch(this.ENCODERS)),S=x.next();!S.done;S=x.next()){var I=S.value;if(I.canEncode(e.charAt(d))){c.push(I),p=!0;break}}}catch(T){s={error:T}}finally{try{S&&!S.done&&(a=x.return)&&a.call(x)}finally{if(s)throw s.error}}p||(h=!0)}if(c.length===1&&!h)this.encoders=[c[0]];else{this.encoders=[];var P=0;try{for(var k=Ch(c),A=k.next();!A.done;A=k.next()){var I=A.value;this.encoders[P++]=I}}catch(T){u={error:T}}finally{try{A&&!A.done&&(l=k.return)&&l.call(k)}finally{if(u)throw u.error}}}var E=-1;if(r!=null){for(var d=0;d<this.encoders.length;d++)if(this.encoders[d]!=null&&r.name===this.encoders[d].name){E=d;break}}this.priorityEncoderIndex=E}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return Rr.encode(_e.getCharAt(e),this.encoders[r].name)},t}(),Z8=3,J8=function(){function t(e,r,n){this.fnc1=n;var i=new Q8(e,r,n);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===n?1e3:s}else this.bytes=this.encodeMinimally(e,i,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new fe,i=e;i<r;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,i,o,s){var a=e.charAt(i).charCodeAt(0),u=0,l=r.length();r.getPriorityEncoderIndex()>=0&&(a===s||r.canEncode(a,r.getPriorityEncoderIndex()))&&(u=r.getPriorityEncoderIndex(),l=u+1);for(var c=u;c<l;c++)(a===s||r.canEncode(a,c))&&this.addEdge(n,i+1,new Rm(a,r,c,o,s))},t.prototype.encodeMinimally=function(e,r,n){var i=e.length,o=new Rm[i+1][r.length()];this.addEdges(e,r,o,0,null,n);for(var s=1;s<=i;s++){for(var a=0;a<r.length();a++)o[s][a]!=null&&s<i&&this.addEdges(e,r,o,s,o[s][a],n);for(var a=0;a<r.length();a++)o[s-1][a]=null}for(var u=-1,l=de.MAX_VALUE,a=0;a<r.length();a++)if(o[i][a]!=null){var c=o[i][a];c.cachedTotalSize<l&&(l=c.cachedTotalSize,u=a)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var h=[],d=o[i][u];d!=null;){if(d.isFNC1())h.unshift(1e3);else for(var p=r.encode(d.c,d.encoderIndex),s=p.length-1;s>=0;s--)h.unshift(p[s]&255);var v=d.previous===null?0:d.previous.encoderIndex;v!==d.encoderIndex&&h.unshift(256+r.getECIValue(d.encoderIndex)),d=d.previous}for(var w=[],s=0;s<w.length;s++)w[s]=h[s];return w},t}(),Rm=function(){function t(e,r,n,i,o){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:r.encode(e,n).length,a=i===null?0:i.encoderIndex;a!==n&&(s+=Z8),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),e6=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();globalThis&&globalThis.__values;var t6=globalThis&&globalThis.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o};globalThis&&globalThis.__spread;var bm;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(bm||(bm={}));(function(t){e6(e,t);function e(r,n,i,o,s){var a=t.call(this,r,n,i)||this;return a.shape=o,a.macroId=s,a}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(J8);var r6=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),Om=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),n6=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),i6=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k1=function(t){i6(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.value=n,o.bitCount=i,o}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+de.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(n6),o6=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),s6=function(t){o6(e,t);function e(r,n,i){var o=t.call(this,r,0,0)||this;return o.binaryShiftStart=n,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(r,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):i===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(k1);function a6(t,e,r){return new s6(t,e,r)}function Ys(t,e,r){return new k1(t,e,r)}var u6=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],hi=0,lc=1,Cr=2,ox=3,Jr=4,l6=new k1(null,0,0),Sh=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,917504+14336+928+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,655360+928+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,655360+992+28,655360+992+30,655360+992+29,0])],c6=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function f6(t){var e,r;try{for(var n=c6(t),i=n.next();!i.done;i=n.next()){var o=i.value;at.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[hi][Jr]=0,t[lc][Jr]=0,t[lc][hi]=28,t[ox][Jr]=0,t[Cr][Jr]=0,t[Cr][hi]=15,t}var sx=f6(at.createInt32Array(6,6)),h6=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d6=function(){function t(e,r,n,i){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,i=this.token;if(e!==this.mode){var o=Sh[this.mode][e];i=Ys(i,o&65535,o>>16),n+=o>>16}var s=e===Cr?4:5;return i=Ys(i,r,s),new t(i,e,0,n+s)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,i=this.mode===Cr?4:5;return n=Ys(n,sx[this.mode][e],i),n=Ys(n,r,5),new t(n,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,i=this.bitCount;if(this.mode===Jr||this.mode===Cr){var o=Sh[n][hi];r=Ys(r,o&65535,o>>16),i+=o>>16,n=hi}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new t(r,n,this.binaryShiftByteCount+1,i+s);return a.binaryShiftByteCount===2047+31&&(a=a.endBinaryShift(e+1)),a},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=a6(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(Sh[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new mt;try{for(var a=h6(i),u=a.next();!u.done;u=a.next()){var l=u.value;l.appendTo(s,e)}}catch(c){r={error:c}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return s},t.prototype.toString=function(){return _e.format("%s bits=%d bytes=%d",u6[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(l6,hi,0,0),t}();function p6(t){var e=_e.getCharCode(" "),r=_e.getCharCode("."),n=_e.getCharCode(",");t[hi][e]=1;for(var i=_e.getCharCode("Z"),o=_e.getCharCode("A"),s=o;s<=i;s++)t[hi][s]=s-o+2;t[lc][e]=1;for(var a=_e.getCharCode("z"),u=_e.getCharCode("a"),s=u;s<=a;s++)t[lc][s]=s-u+2;t[Cr][e]=1;for(var l=_e.getCharCode("9"),c=_e.getCharCode("0"),s=c;s<=l;s++)t[Cr][s]=s-c+2;t[Cr][n]=12,t[Cr][r]=13;for(var h=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],d=0;d<h.length;d++)t[ox][_e.getCharCode(h[d])]=d;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<p.length;d++)_e.getCharCode(p[d])>0&&(t[Jr][_e.getCharCode(p[d])]=d);return t}var Rh=p6(at.createInt32Array(5,256)),il=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g6=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=_e.getCharCode(" "),r=_e.getCharCode(`
`),n=Om.singletonList(d6.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case _e.getCharCode("\r"):o=s===r?2:0;break;case _e.getCharCode("."):o=s===e?3:0;break;case _e.getCharCode(","):o=s===e?4:0;break;case _e.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(n=t.updateStateListForPair(n,i,o),i++):n=this.updateStateListForChar(n,i)}var a=Om.min(n,function(u,l){return u.getBitCount()-l.getBitCount()});return a.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,i,o=[];try{for(var s=il(e),a=s.next();!a.done;a=s.next()){var u=a.value;this.updateStateForChar(u,r,o)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return t.simplifyStates(o)},t.prototype.updateStateForChar=function(e,r,n){for(var i=this.text[r]&255,o=Rh[e.getMode()][i]>0,s=null,a=0;a<=Jr;a++){var u=Rh[a][i];if(u>0){if(s==null&&(s=e.endBinaryShift(r)),!o||a===e.getMode()||a===Cr){var l=s.latchAndAppend(a,u);n.push(l)}if(!o&&sx[e.getMode()][a]>=0){var c=s.shiftAndAppend(a,u);n.push(c)}}}if(e.getBinaryShiftByteCount()>0||Rh[e.getMode()][i]===0){var h=e.addBinaryShiftChar(r);n.push(h)}},t.updateStateListForPair=function(e,r,n){var i,o,s=[];try{for(var a=il(e),u=a.next();!u.done;u=a.next()){var l=u.value;this.updateStateForPair(l,r,n,s)}}catch(c){i={error:c}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(s)},t.updateStateForPair=function(e,r,n,i){var o=e.endBinaryShift(r);if(i.push(o.latchAndAppend(Jr,n)),e.getMode()!==Jr&&i.push(o.shiftAndAppend(Jr,n)),n===3||n===4){var s=o.latchAndAppend(Cr,16-n).latchAndAppend(Cr,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);i.push(a)}},t.simplifyStates=function(e){var r,n,i,o,s=[];try{for(var a=il(e),u=a.next();!u.done;u=a.next()){var l=u.value,c=!0,h=function(I){if(I.isBetterThanOrEqualTo(l))return c=!1,"break";l.isBetterThanOrEqualTo(I)&&(s=s.filter(function(_){return _!==I}))};try{for(var d=(i=void 0,il(s)),p=d.next();!p.done;p=d.next()){var v=p.value,w=h(v);if(w==="break")break}}catch(I){i={error:I}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}c&&s.push(l)}}catch(I){r={error:I}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return s},t}(),v6=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var i=new g6(e).encode(),o=de.truncDivision(i.getSize()*r,100)+11,s=i.getSize()+o,a,u,l,c,h;if(n!==t.DEFAULT_AZTEC_LAYERS){if(a=n<0,u=Math.abs(n),u>(a?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new re(_e.format("Illegal value %s for layers",n));l=t.totalBitsInLayer(u,a),c=t.WORD_SIZE[u];var d=l-l%c;if(h=t.stuffBits(i,c),h.getSize()+o>d)throw new re("Data to large for user specified layer");if(a&&h.getSize()>c*64)throw new re("Data to large for user specified layer")}else{c=0,h=null;for(var p=0;;p++){if(p>t.MAX_NB_BITS)throw new re("Data too large for an Aztec code");if(a=p<=3,u=a?p+1:p,l=t.totalBitsInLayer(u,a),!(s>l)){(h==null||c!==t.WORD_SIZE[u])&&(c=t.WORD_SIZE[u],h=t.stuffBits(i,c));var d=l-l%c;if(!(a&&h.getSize()>c*64)&&h.getSize()+o<=d)break}}}var v=t.generateCheckWords(h,l,c),w=h.getSize()/c,I=t.generateModeMessage(a,u,w),_=(a?11:14)+u*4,m=new Int32Array(_),x;if(a){x=_;for(var p=0;p<m.length;p++)m[p]=p}else{x=_+1+2*de.truncDivision(de.truncDivision(_,2)-1,15);for(var S=de.truncDivision(_,2),P=de.truncDivision(x,2),p=0;p<S;p++){var k=p+de.truncDivision(p,15);m[S-p-1]=P-k-1,m[S+p]=P+k+1}}for(var A=new ln(x),p=0,E=0;p<u;p++){for(var T=(u-p)*4+(a?9:12),R=0;R<T;R++)for(var N=R*2,D=0;D<2;D++)v.get(E+N+D)&&A.set(m[p*2+D],m[p*2+R]),v.get(E+T*2+N+D)&&A.set(m[p*2+R],m[_-1-p*2-D]),v.get(E+T*4+N+D)&&A.set(m[_-1-p*2-D],m[_-1-p*2-R]),v.get(E+T*6+N+D)&&A.set(m[_-1-p*2-R],m[p*2+D]);E+=T*8}if(t.drawModeMessage(A,a,x,I),a)t.drawBullsEye(A,de.truncDivision(x,2),5);else{t.drawBullsEye(A,de.truncDivision(x,2),7);for(var p=0,R=0;p<de.truncDivision(_,2)-1;p+=15,R+=16)for(var D=de.truncDivision(x,2)&1;D<x;D+=2)A.set(de.truncDivision(x,2)-R,D),A.set(de.truncDivision(x,2)+R,D),A.set(D,de.truncDivision(x,2)-R),A.set(D,de.truncDivision(x,2)+R)}var O=new r6;return O.setCompact(a),O.setSize(x),O.setLayers(u),O.setCodeWords(w),O.setMatrix(A),O},t.drawBullsEye=function(e,r,n){for(var i=0;i<n;i+=2)for(var o=r-i;o<=r+i;o++)e.set(o,r-i),e.set(o,r+i),e.set(r-i,o),e.set(r+i,o);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var i=new mt;return e?(i.appendBits(r-1,2),i.appendBits(n-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(r-1,5),i.appendBits(n-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,r,n,i){var o=de.truncDivision(n,2);if(r)for(var s=0;s<7;s++){var a=o-3+s;i.get(s)&&e.set(a,o-5),i.get(s+7)&&e.set(o+5,a),i.get(20-s)&&e.set(a,o+5),i.get(27-s)&&e.set(o-5,a)}else for(var s=0;s<10;s++){var a=o-5+s+de.truncDivision(s,5);i.get(s)&&e.set(a,o-7),i.get(s+10)&&e.set(o+7,a),i.get(29-s)&&e.set(a,o+7),i.get(39-s)&&e.set(o-7,a)}},t.generateCheckWords=function(e,r,n){var i,o,s=e.getSize()/n,a=new nx(t.getGF(n)),u=de.truncDivision(r,n),l=t.bitsToWords(e,n,u);a.encode(l,u-s);var c=r%n,h=new mt;h.appendBits(0,c);try{for(var d=v6(Array.from(l)),p=d.next();!p.done;p=d.next()){var v=p.value;h.appendBits(v,n)}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return h},t.bitsToWords=function(e,r,n){var i=new Int32Array(n),o,s;for(o=0,s=e.getSize()/r;o<s;o++){for(var a=0,u=0;u<r;u++)a|=e.get(o*r+u)?1<<r-u-1:0;i[o]=a}return i},t.getGF=function(e){switch(e){case 4:return or.AZTEC_PARAM;case 6:return or.AZTEC_DATA_6;case 8:return or.AZTEC_DATA_8;case 10:return or.AZTEC_DATA_10;case 12:return or.AZTEC_DATA_12;default:throw new re("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new mt,i=e.getSize(),o=(1<<r)-2,s=0;s<i;s+=r){for(var a=0,u=0;u<r;u++)(s+u>=i||e.get(s+u))&&(a|=1<<r-1-u);(a&o)===o?(n.appendBits(a&o,r),s--):a&o?n.appendBits(a,r):(n.appendBits(a|1,r),s--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();const m6=(t,e,r,n)=>{var o,s,a,u;const i=[r,{code:e,...n||{}}];if((s=(o=t==null?void 0:t.services)==null?void 0:o.logger)!=null&&s.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);Xi(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(u=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&u.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},Nm={},t0=(t,e,r,n)=>{Xi(r)&&Nm[r]||(Xi(r)&&(Nm[r]=new Date),m6(t,e,r,n))},ax=(t,e)=>()=>{if(t.isInitialized)e();else{const r=()=>{setTimeout(()=>{t.off("initialized",r)},0),e()};t.on("initialized",r)}},r0=(t,e,r)=>{t.loadNamespaces(e,ax(t,r))},Pm=(t,e,r,n)=>{if(Xi(r)&&(r=[r]),t.options.preload&&t.options.preload.indexOf(e)>-1)return r0(t,r,n);r.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,ax(t,n))},y6=(t,e,r={})=>!e.languages||!e.languages.length?(t0(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:r.lng,precheck:(n,i)=>{var o;if(((o=r.bindI18n)==null?void 0:o.indexOf("languageChanging"))>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!i(n.isLanguageChangingTo,t))return!1}}),Xi=t=>typeof t=="string",_6=t=>typeof t=="object"&&t!==null,w6=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,x6={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},E6=t=>x6[t],A6=t=>t.replace(w6,E6);let n0={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:A6};const I6=(t={})=>{n0={...n0,...t}},T6=()=>n0;let ux;const C6=t=>{ux=t},S6=()=>ux,R6={type:"3rdParty",init(t){I6(t.options.react),C6(t)}},b6=Z.createContext();class O6{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const N6=(t,e)=>{const r=Z.useRef();return Z.useEffect(()=>{r.current=e?r.current:t},[t,e]),r.current},lx=(t,e,r,n)=>t.getFixedT(e,r,n),P6=(t,e,r,n)=>Z.useCallback(lx(t,e,r,n),[t,e,r,n]),ms=(t,e={})=>{var S,P,k,A;const{i18n:r}=e,{i18n:n,defaultNS:i}=Z.useContext(b6)||{},o=r||n||S6();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new O6),!o){t0(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const E=(R,N)=>Xi(N)?N:_6(N)&&Xi(N.defaultValue)?N.defaultValue:Array.isArray(R)?R[R.length-1]:R,T=[E,{},!1];return T.t=E,T.i18n={},T.ready=!1,T}(S=o.options.react)!=null&&S.wait&&t0(o,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...T6(),...o.options.react,...e},{useSuspense:a,keyPrefix:u}=s;let l=t||i||((P=o.options)==null?void 0:P.defaultNS);l=Xi(l)?[l]:l||["translation"],(A=(k=o.reportNamespaces).addUsedNamespaces)==null||A.call(k,l);const c=(o.isInitialized||o.initializedStoreOnce)&&l.every(E=>y6(E,o,s)),h=P6(o,e.lng||null,s.nsMode==="fallback"?l:l[0],u),d=()=>h,p=()=>lx(o,e.lng||null,s.nsMode==="fallback"?l:l[0],u),[v,w]=Z.useState(d);let I=l.join();e.lng&&(I=`${e.lng}${I}`);const _=N6(I),m=Z.useRef(!0);Z.useEffect(()=>{const{bindI18n:E,bindI18nStore:T}=s;m.current=!0,!c&&!a&&(e.lng?Pm(o,e.lng,l,()=>{m.current&&w(p)}):r0(o,l,()=>{m.current&&w(p)})),c&&_&&_!==I&&m.current&&w(p);const R=()=>{m.current&&w(p)};return E&&(o==null||o.on(E,R)),T&&(o==null||o.store.on(T,R)),()=>{m.current=!1,o&&(E==null||E.split(" ").forEach(N=>o.off(N,R))),T&&o&&T.split(" ").forEach(N=>o.store.off(N,R))}},[o,I]),Z.useEffect(()=>{m.current&&c&&w(d)},[o,u,c]);const x=[v,o,c];if(x.t=v,x.i18n=o,x.ready=c,c||!c&&!a)return x;throw new Promise(E=>{e.lng?Pm(o,e.lng,l,()=>E()):r0(o,l,()=>E())})},D6=({onBarcodeSubmit:t})=>{const[e,r]=Z.useState(""),[n,i]=Z.useState(!1),[o,s]=Z.useState(!1),[a,u]=Z.useState(null),l=Z.useRef(null),c=Z.useRef(null),h=Z.useRef(null),{t:d}=ms(),p=()=>{e.trim()&&(t(e.trim()),r(""))},v=_=>{_.key==="Enter"&&p()},w=async()=>{try{if(u(null),i(!0),s(!0),await new Promise(_=>setTimeout(_,100)),!l.current)throw new Error("Video element not available");c.current=new v8;try{const _=await c.current.listVideoInputDevices();if(console.log("Available cameras:",_),_.length===0)throw new Error("No camera devices found");const m=_.find(x=>x.label.toLowerCase().includes("back")||x.label.toLowerCase().includes("environment"))||_[0];console.log("Selected camera:",m),await c.current.decodeFromVideoDevice(m.deviceId,l.current,(x,S)=>{if(x){const P=x.getText();r(P),I(),alert(`Barcode detected: ${P}`)}S&&!(S instanceof V)&&console.error("Scan error:",S)})}catch(_){console.log("Device enumeration failed, trying with constraints:",_);const m={video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}}},x=await navigator.mediaDevices.getUserMedia(m);l.current.srcObject=x,h.current=x,await new Promise(S=>{l.current.onloadedmetadata=()=>S(void 0)}),c.current.decodeFromVideoElement(l.current).then(S=>{const P=S.getText();r(P),I(),alert(`Barcode detected: ${P}`)}).catch(S=>{S instanceof V||console.error("Scan error:",S)})}}catch(_){_ instanceof Error?(console.error("Error accessing camera:",_),u(`Unable to access camera: ${_.message}. Please ensure you have granted camera permissions.`)):(console.error("Error accessing camera:",_),u("Unable to access camera: Unknown error. Please ensure you have granted camera permissions.")),i(!1),s(!1)}},I=()=>{c.current&&(c.current.reset(),c.current=null),h.current&&(h.current.getTracks().forEach(_=>_.stop()),h.current=null),l.current&&(l.current.srcObject=null),i(!1),s(!1),u(null)};return Z.useEffect(()=>()=>{I()},[]),L.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4",children:[L.jsxs("div",{className:"space-y-3",children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700",children:d("general.enterBarcode")}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"text",value:e,onChange:_=>r(_.target.value),onKeyDown:v,placeholder:d("general.enterBarcodePlaceholder"),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),L.jsx("button",{onClick:p,disabled:!e.trim(),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:d("buttons.add")}),L.jsx("button",{onClick:w,disabled:n,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",title:d("general.scanCameraTitle"),children:L.jsx(IS,{className:"w-4 h-4"})})]})]}),n&&L.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:L.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-lg w-full mx-4",children:[L.jsxs("div",{className:"flex justify-between items-center mb-4",children:[L.jsx("h3",{className:"text-lg font-semibold",children:d("general.scanBarcode")}),L.jsx("button",{onClick:I,className:"p-2 hover:bg-gray-100 rounded-full",children:L.jsx(Gw,{className:"w-5 h-5"})})]}),a&&L.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:a}),L.jsxs("div",{className:"relative",children:[L.jsx("video",{ref:l,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full rounded-lg",style:{maxHeight:"300px"}}),L.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:L.jsx("div",{className:"border-2 border-red-500 w-48 h-24 bg-transparent"})}),o&&L.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full flex items-center gap-2",children:[L.jsx(SS,{className:"w-4 h-4 animate-pulse"}),L.jsx("span",{className:"text-sm",children:d("general.scanning")})]})]}),L.jsx("div",{className:"mt-4 text-sm text-gray-600 text-center",children:d("general.scanningInstructions")})]})})]})},k6=({searchTerm:t,setSearchTerm:e,filter:r,setFilter:n,items:i})=>{const o=i.filter(u=>u.amountInStock>0).length,s=i.filter(u=>u.amountInStock===0).length,{t:a}=ms();return L.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4",children:L.jsxs("div",{className:"space-y-3",children:[L.jsxs("div",{className:"relative",children:[L.jsx(RS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),L.jsx("input",{type:"text",value:t,onChange:u=>e(u.target.value),placeholder:a("search.searchPlaceholder"),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsxs("button",{onClick:()=>n("all"),className:`px-3 py-1 rounded-full text-sm ${r==="all"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,children:[a("search.all")," (",i.length,")"]}),L.jsxs("button",{onClick:()=>n("inStock"),className:`px-3 py-1 rounded-full text-sm ${r==="inStock"?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,children:[a("search.inStock")," (",o,")"]}),L.jsxs("button",{onClick:()=>n("outOfStock"),className:`px-3 py-1 rounded-full text-sm ${r==="outOfStock"?"bg-red-500 text-white":"bg-gray-200 text-gray-700"}`,children:[a("search.outOfStock")," (",s,")"]})]})]})})},M6=(t,e,r=80)=>{const[n,i]=Z.useState(null),[o,s]=Z.useState(0),[a,u]=Z.useState(!1),l=Z.useRef(null),c=S=>{i({x:S.targetTouches[0].clientX,y:S.targetTouches[0].clientY}),u(!0)},h=S=>{if(!n)return;const P=S.targetTouches[0].clientX,k=S.targetTouches[0].clientY,A=P-n.x,E=k-n.y;if(Math.abs(A)>Math.abs(E)){S.preventDefault();const T=120,R=Math.max(-T,Math.min(T,A));s(R)}},d=()=>{if(!n)return;Math.abs(o)>r&&(o>0?e():t()),s(0),u(!1),i(null)},p=S=>{i({x:S.clientX,y:S.clientY}),u(!0)},v=S=>{if(!n||!a)return;const P=S.clientX-n.x,k=S.clientY-n.y;if(Math.abs(P)>Math.abs(k)){const E=Math.max(-120,Math.min(120,P));s(E)}},w=()=>{if(!n)return;Math.abs(o)>r&&(o>0?e():t()),s(0),u(!1),i(null)},I=()=>{const S=Math.min(Math.abs(o)/r,1),P=o>0;return{opacity:S,backgroundColor:P?"#10b981":"#ef4444",transform:`translateX(${o}px)`}},_=()=>({transform:`translateX(${o}px)`,transition:a?"none":"transform 0.3s ease-out",zIndex:a?10:1}),m=()=>Math.abs(o)<20?null:o>0?"+1":"-1",x=Math.abs(o)>10;return{handleTouchStart:c,handleTouchMove:h,handleTouchEnd:d,handleMouseDown:p,handleMouseMove:v,handleMouseUp:w,dragOffset:o,isDragging:a,getRowStyle:_,getBackgroundStyle:I,getActionIcon:m,showBackground:x,elementRef:l}},L6=({item:t,onIncrease:e,onDecrease:r,onEdit:n,onRemove:i})=>{const{handleTouchStart:o,handleTouchMove:s,handleTouchEnd:a,handleMouseDown:u,handleMouseMove:l,handleMouseUp:c,getRowStyle:h,getBackgroundStyle:d,getActionIcon:p,showBackground:v,isDragging:w}=M6(()=>r(t.barcode),()=>e(t.barcode));console.log("item row",{item:t});const{t:I}=ms();return L.jsxs("div",{className:"relative overflow-hidden rounded-lg shadow-sm mb-2",children:[v&&L.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white font-bold text-2xl rounded-lg",style:d(),children:L.jsx("div",{className:"flex items-center space-x-2",children:p()==="+1"?L.jsxs(L.Fragment,{children:[L.jsx(qv,{className:"w-6 h-6"}),L.jsx("span",{className:"drop-shadow-lg",children:"+1"})]}):L.jsxs(L.Fragment,{children:[L.jsx(Xv,{className:"w-6 h-6"}),L.jsx("span",{className:"drop-shadow-lg",children:"-1"})]})})}),L.jsxs("div",{className:`relative bg-white rounded-lg p-4 touch-manipulation ${w?"shadow-lg":""}`,style:h(),onTouchStart:o,onTouchMove:s,onTouchEnd:a,onMouseDown:u,onMouseMove:l,onMouseUp:c,onMouseLeave:c,children:[L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[t.icon.startsWith("http")?L.jsx("img",{src:t.icon,alt:"icon",className:"w-8 h-8 inline-block"}):L.jsx("span",{className:"text-2xl",children:t.icon}),L.jsxs("div",{className:"flex-1 min-w-0",children:[L.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:t.name}),L.jsxs("p",{className:"text-sm text-gray-500",children:["#",t.barcode]})]})]}),L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsxs("div",{className:"flex items-center space-x-1",children:[L.jsx("button",{onClick:()=>r(t.barcode),disabled:t.amountInStock===0,className:"w-8 h-8 rounded-full bg-red-100 text-red-600 hover:bg-red-200 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed flex items-center justify-center transition-colors",children:L.jsx(Xv,{className:"w-4 h-4"})}),L.jsx("span",{className:`w-8 text-center font-semibold ${t.amountInStock===0?"text-red-500":"text-green-600"}`,children:t.amountInStock}),L.jsx("button",{onClick:()=>e(t.barcode),disabled:t.amountInStock===20,className:"w-8 h-8 rounded-full bg-green-100 text-green-600 hover:bg-green-200 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed flex items-center justify-center transition-colors",children:L.jsx(qv,{className:"w-4 h-4"})})]}),L.jsx("button",{onClick:()=>n(t.barcode),className:"w-8 h-8 rounded-full bg-yellow-100 text-yellow-600 hover:bg-yellow-200 flex items-center justify-center transition-colors",children:L.jsx(CS,{className:"w-4 h-4"})}),L.jsx("button",{onClick:()=>i(t.barcode),className:"w-8 h-8 rounded-full bg-red-100 text-red-600 hover:bg-red-200 flex items-center justify-center transition-colors",children:L.jsx(bS,{className:"w-4 h-4"})})]})]}),L.jsx("div",{className:`mt-2 text-xs text-center transition-opacity ${w?"opacity-50":"text-gray-400"}`,children:I(w?"itemRow.releaseSwipeText":"itemRow.swipeText")})]})]})},F6=({items:t,totalItems:e,onIncrease:r,onDecrease:n,onEdit:i,onRemove:o})=>t.length===0?L.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[L.jsx(TS,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),L.jsx("p",{className:"text-gray-500",children:e===0?"No items yet. Add your first item!":"No items match your search."})]}):(console.log("items list",{items:t}),L.jsx("div",{className:"space-y-2",children:t.map(s=>L.jsx(L6,{item:s,onIncrease:r,onDecrease:n,onEdit:i,onRemove:o},s.barcode))}));async function B6(t){try{const r=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${t}.json`)).json();if(r.status!==1)return null;const n=r.product;return{name:n.product_name||"Unknown product",category:n.categories||"Unknown category",brand:n.brands||"Unknown brand",imageUrl:n.image_url||""}}catch(e){return console.error("Error fetching product info:",e),null}}const ae=t=>typeof t=="string",Qs=()=>{let t,e;const r=new Promise((n,i)=>{t=n,e=i});return r.resolve=t,r.reject=e,r},Dm=t=>t==null?"":""+t,V6=(t,e,r)=>{t.forEach(n=>{e[n]&&(r[n]=e[n])})},U6=/###/g,km=t=>t&&t.indexOf("###")>-1?t.replace(U6,"."):t,Mm=t=>!t||ae(t),_a=(t,e,r)=>{const n=ae(e)?e.split("."):e;let i=0;for(;i<n.length-1;){if(Mm(t))return{};const o=km(n[i]);!t[o]&&r&&(t[o]=new r),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++i}return Mm(t)?{}:{obj:t,k:km(n[i])}},Lm=(t,e,r)=>{const{obj:n,k:i}=_a(t,e,Object);if(n!==void 0||e.length===1){n[i]=r;return}let o=e[e.length-1],s=e.slice(0,e.length-1),a=_a(t,s,Object);for(;a.obj===void 0&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=_a(t,s,Object),a!=null&&a.obj&&typeof a.obj[`${a.k}.${o}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=r},j6=(t,e,r,n)=>{const{obj:i,k:o}=_a(t,e,Object);i[o]=i[o]||[],i[o].push(r)},cc=(t,e)=>{const{obj:r,k:n}=_a(t,e);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},z6=(t,e,r)=>{const n=cc(t,r);return n!==void 0?n:cc(e,r)},cx=(t,e,r)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?ae(t[n])||t[n]instanceof String||ae(e[n])||e[n]instanceof String?r&&(t[n]=e[n]):cx(t[n],e[n],r):t[n]=e[n]);return t},_o=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var $6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const H6=t=>ae(t)?t.replace(/[&<>"'\/]/g,e=>$6[e]):t;class W6{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const G6=[" ",",","?","!",";"],K6=new W6(20),X6=(t,e,r)=>{e=e||"",r=r||"";const n=G6.filter(s=>e.indexOf(s)<0&&r.indexOf(s)<0);if(n.length===0)return!0;const i=K6.getRegExp(`(${n.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!i.test(t);if(!o){const s=t.indexOf(r);s>0&&!i.test(t.substring(0,s))&&(o=!0)}return o},i0=(t,e,r=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const n=e.split(r);let i=t;for(let o=0;o<n.length;){if(!i||typeof i!="object")return;let s,a="";for(let u=o;u<n.length;++u)if(u!==o&&(a+=r),a+=n[u],s=i[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&u<n.length-1)continue;o+=u-o+1;break}i=s}return i},$a=t=>t==null?void 0:t.replace("_","-"),q6={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var r,n;(n=(r=console==null?void 0:console[t])==null?void 0:r.apply)==null||n.call(r,console,e)}};let Y6=class o0{constructor(e,r={}){this.init(e,r)}init(e,r={}){this.prefix=r.prefix||"i18next:",this.logger=e||q6,this.options=r,this.debug=r.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,n,i){return i&&!this.debug?null:(ae(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new o0(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new o0(this.logger,e)}};var en=new Y6;class Zc{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const i=this.observers[n].get(r)||0;this.observers[n].set(r,i+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e,...r){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,o])=>{for(let s=0;s<o;s++)i(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,o])=>{for(let s=0;s<o;s++)i.apply(i,[e,...r])})}}class Fm extends Zc{constructor(e,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,n,i={}){var l,c;const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,s=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,r],n&&(Array.isArray(n)?a.push(...n):ae(n)&&o?a.push(...n.split(o)):a.push(n)));const u=cc(this.data,a);return!u&&!r&&!n&&e.indexOf(".")>-1&&(e=a[0],r=a[1],n=a.slice(2).join(".")),u||!s||!ae(n)?u:i0((c=(l=this.data)==null?void 0:l[e])==null?void 0:c[r],n,o)}addResource(e,r,n,i,o={silent:!1}){const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[e,r];n&&(a=a.concat(s?n.split(s):n)),e.indexOf(".")>-1&&(a=e.split("."),i=r,r=a[1]),this.addNamespaces(r),Lm(this.data,a,i),o.silent||this.emit("added",e,r,n,i)}addResources(e,r,n,i={silent:!1}){for(const o in n)(ae(n[o])||Array.isArray(n[o]))&&this.addResource(e,r,o,n[o],{silent:!0});i.silent||this.emit("added",e,r,n)}addResourceBundle(e,r,n,i,o,s={silent:!1,skipCopy:!1}){let a=[e,r];e.indexOf(".")>-1&&(a=e.split("."),i=n,n=r,r=a[1]),this.addNamespaces(r);let u=cc(this.data,a)||{};s.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?cx(u,n,o):u={...u,...n},Lm(this.data,a,u),s.silent||this.emit("added",e,r,n)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(i=>r[i]&&Object.keys(r[i]).length>0)}toJSON(){return this.data}}var fx={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,r,n,i){return t.forEach(o=>{var s;e=((s=this.processors[o])==null?void 0:s.process(e,r,n,i))??e}),e}};const Bm={},Vm=t=>!ae(t)&&typeof t!="boolean"&&typeof t!="number";class fc extends Zc{constructor(e,r={}){super(),V6(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=en.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,r={interpolation:{}}){const n={...r};if(e==null)return!1;const i=this.resolve(e,n);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=r.ns||this.options.defaultNS||[];const s=n&&e.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!X6(e,n,i);if(s&&!a){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:ae(o)?[o]:o};const l=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(l[0])>-1)&&(o=l.shift()),e=l.join(i)}return{key:e,namespaces:ae(o)?[o]:o}}translate(e,r,n){let i=typeof r=="object"?{...r}:r;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(i={...i}),i||(i={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const o=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:a,namespaces:u}=this.extractFromKey(e[e.length-1],i),l=u[u.length-1];let c=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;c===void 0&&(c=":");const h=i.lng||this.language,d=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode")return d?o?{res:`${l}${c}${a}`,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:`${l}${c}${a}`:o?{res:a,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:a;const p=this.resolve(e,i);let v=p==null?void 0:p.res;const w=(p==null?void 0:p.usedKey)||a,I=(p==null?void 0:p.exactUsedKey)||a,_=["[object Number]","[object Function]","[object RegExp]"],m=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject,S=i.count!==void 0&&!ae(i.count),P=fc.hasDefaultValue(i),k=S?this.pluralResolver.getSuffix(h,i.count,i):"",A=i.ordinal&&S?this.pluralResolver.getSuffix(h,i.count,{ordinal:!1}):"",E=S&&!i.ordinal&&i.count===0,T=E&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${k}`]||i[`defaultValue${A}`]||i.defaultValue;let R=v;x&&!v&&P&&(R=T);const N=Vm(R),D=Object.prototype.toString.apply(R);if(x&&R&&N&&_.indexOf(D)<0&&!(ae(m)&&Array.isArray(R))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const O=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,R,{...i,ns:u}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(p.res=O,p.usedParams=this.getUsedParamsDetails(i),p):O}if(s){const O=Array.isArray(R),q=O?[]:{},ee=O?I:w;for(const oe in R)if(Object.prototype.hasOwnProperty.call(R,oe)){const we=`${ee}${s}${oe}`;P&&!v?q[oe]=this.translate(we,{...i,defaultValue:Vm(T)?T[oe]:void 0,joinArrays:!1,ns:u}):q[oe]=this.translate(we,{...i,joinArrays:!1,ns:u}),q[oe]===we&&(q[oe]=R[oe])}v=q}}else if(x&&ae(m)&&Array.isArray(v))v=v.join(m),v&&(v=this.extendTranslation(v,e,i,n));else{let O=!1,q=!1;!this.isValidLookup(v)&&P&&(O=!0,v=T),this.isValidLookup(v)||(q=!0,v=a);const oe=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&q?void 0:v,we=P&&T!==v&&this.options.updateMissing;if(q||O||we){if(this.logger.log(we?"updateKey":"missingKey",h,l,a,we?T:v),s){const ce=this.resolve(a,{...i,keySeparator:!1});ce&&ce.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let z=[];const Q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Q&&Q[0])for(let ce=0;ce<Q.length;ce++)z.push(Q[ce]);else this.options.saveMissingTo==="all"?z=this.languageUtils.toResolveHierarchy(i.lng||this.language):z.push(i.lng||this.language);const se=(ce,me,De)=>{var xr;const wr=P&&De!==v?De:oe;this.options.missingKeyHandler?this.options.missingKeyHandler(ce,l,me,wr,we,i):(xr=this.backendConnector)!=null&&xr.saveMissing&&this.backendConnector.saveMissing(ce,l,me,wr,we,i),this.emit("missingKey",ce,l,me,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&S?z.forEach(ce=>{const me=this.pluralResolver.getSuffixes(ce,i);E&&i[`defaultValue${this.options.pluralSeparator}zero`]&&me.indexOf(`${this.options.pluralSeparator}zero`)<0&&me.push(`${this.options.pluralSeparator}zero`),me.forEach(De=>{se([ce],a+De,i[`defaultValue${De}`]||T)})}):se(z,a,T))}v=this.extendTranslation(v,e,i,p,n),q&&v===a&&this.options.appendNamespaceToMissingKey&&(v=`${l}${c}${a}`),(q||O)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${c}${a}`:a,O?v:void 0,i))}return o?(p.res=v,p.usedParams=this.getUsedParamsDetails(i),p):v}extendTranslation(e,r,n,i,o){var u,l;if((u=this.i18nFormat)!=null&&u.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const c=ae(e)&&(((l=n==null?void 0:n.interpolation)==null?void 0:l.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(c){const p=e.match(this.interpolator.nestingRegexp);h=p&&p.length}let d=n.replace&&!ae(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,n.lng||this.language||i.usedLng,n),c){const p=e.match(this.interpolator.nestingRegexp),v=p&&p.length;h<v&&(n.nest=!1)}!n.lng&&i&&i.res&&(n.lng=this.language||i.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>(o==null?void 0:o[0])===p[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${r[0]}`),null):this.translate(...p,r),n)),n.interpolation&&this.interpolator.reset()}const s=n.postProcess||this.options.postProcess,a=ae(s)?[s]:s;return e!=null&&(a!=null&&a.length)&&n.applyPostProcessor!==!1&&(e=fx.handle(a,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,r={}){let n,i,o,s,a;return ae(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(n))return;const l=this.extractFromKey(u,r),c=l.key;i=c;let h=l.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const d=r.count!==void 0&&!ae(r.count),p=d&&!r.ordinal&&r.count===0,v=r.context!==void 0&&(ae(r.context)||typeof r.context=="number")&&r.context!=="",w=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);h.forEach(I=>{var _,m;this.isValidLookup(n)||(a=I,!Bm[`${w[0]}-${I}`]&&((_=this.utils)!=null&&_.hasLoadedNamespace)&&!((m=this.utils)!=null&&m.hasLoadedNamespace(a))&&(Bm[`${w[0]}-${I}`]=!0,this.logger.warn(`key "${i}" for languages "${w.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(x=>{var k;if(this.isValidLookup(n))return;s=x;const S=[c];if((k=this.i18nFormat)!=null&&k.addLookupKeys)this.i18nFormat.addLookupKeys(S,c,x,I,r);else{let A;d&&(A=this.pluralResolver.getSuffix(x,r.count,r));const E=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(S.push(c+A),r.ordinal&&A.indexOf(T)===0&&S.push(c+A.replace(T,this.options.pluralSeparator)),p&&S.push(c+E)),v){const R=`${c}${this.options.contextSeparator}${r.context}`;S.push(R),d&&(S.push(R+A),r.ordinal&&A.indexOf(T)===0&&S.push(R+A.replace(T,this.options.pluralSeparator)),p&&S.push(R+E))}}let P;for(;P=S.pop();)this.isValidLookup(n)||(o=P,n=this.getResource(x,I,P,r))}))})}),{res:n,usedKey:i,exactUsedKey:o,usedLng:s,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,n,i={}){var o;return(o=this.i18nFormat)!=null&&o.getResource?this.i18nFormat.getResource(e,r,n,i):this.resourceStore.getResource(e,r,n,i)}getUsedParamsDetails(e={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!ae(e.replace);let i=n?e.replace:e;if(n&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const o of r)delete i[o]}return i}static hasDefaultValue(e){const r="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&r===n.substring(0,r.length)&&e[n]!==void 0)return!0;return!1}}class Um{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=en.create("languageUtils")}getScriptPartFromCode(e){if(e=$a(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=$a(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(ae(e)&&e.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(e)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(n=>{if(r)return;const i=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(i))&&(r=i)}),!r&&this.options.supportedLngs&&e.forEach(n=>{if(r)return;const i=this.getScriptPartFromCode(n);if(this.isSupportedCode(i))return r=i;const o=this.getLanguagePartFromCode(n);if(this.isSupportedCode(o))return r=o;r=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),ae(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let n=e[r];return n||(n=e[this.getScriptPartFromCode(r)]),n||(n=e[this.formatLanguageCode(r)]),n||(n=e[this.getLanguagePartFromCode(r)]),n||(n=e.default),n||[]}toResolveHierarchy(e,r){const n=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],e),i=[],o=s=>{s&&(this.isSupportedCode(s)?i.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return ae(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):ae(e)&&o(this.formatLanguageCode(e)),n.forEach(s=>{i.indexOf(s)<0&&o(this.formatLanguageCode(s))}),i}}const jm={zero:0,one:1,two:2,few:3,many:4,other:5},zm={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Q6{constructor(e,r={}){this.languageUtils=e,this.options=r,this.logger=en.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,r){this.rules[e]=r}clearCache(){this.pluralRulesCache={}}getRule(e,r={}){const n=$a(e==="dev"?"en":e),i=r.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let s;try{s=new Intl.PluralRules(n,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),zm;if(!e.match(/-|_/))return zm;const u=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(u,r)}return this.pluralRulesCache[o]=s,s}needsPlural(e,r={}){let n=this.getRule(e,r);return n||(n=this.getRule("dev",r)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,r,n={}){return this.getSuffixes(e,n).map(i=>`${r}${i}`)}getSuffixes(e,r={}){let n=this.getRule(e,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((i,o)=>jm[i]-jm[o]).map(i=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,r,n={}){const i=this.getRule(e,n);return i?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(r)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",r,n))}}const $m=(t,e,r,n=".",i=!0)=>{let o=z6(t,e,r);return!o&&i&&ae(r)&&(o=i0(t,r,n),o===void 0&&(o=i0(e,r,n))),o},bh=t=>t.replace(/\$/g,"$$$$");class Z6{constructor(e={}){var r;this.logger=en.create("interpolator"),this.options=e,this.format=((r=e==null?void 0:e.interpolation)==null?void 0:r.format)||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:i,prefix:o,prefixEscaped:s,suffix:a,suffixEscaped:u,formatSeparator:l,unescapeSuffix:c,unescapePrefix:h,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:v,nestingSuffixEscaped:w,nestingOptionsSeparator:I,maxReplaces:_,alwaysFormat:m}=e.interpolation;this.escape=r!==void 0?r:H6,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?_o(o):s||"{{",this.suffix=a?_o(a):u||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?_o(d):p||_o("$t("),this.nestingSuffix=v?_o(v):w||_o(")"),this.nestingOptionsSeparator=I||",",this.maxReplaces=_||1e3,this.alwaysFormat=m!==void 0?m:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,n)=>(r==null?void 0:r.source)===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,r,n,i){var p;let o,s,a;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=v=>{if(v.indexOf(this.formatSeparator)<0){const m=$m(r,u,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(m,void 0,n,{...i,...r,interpolationkey:v}):m}const w=v.split(this.formatSeparator),I=w.shift().trim(),_=w.join(this.formatSeparator).trim();return this.format($m(r,u,I,this.options.keySeparator,this.options.ignoreJSONStructure),_,n,{...i,...r,interpolationkey:I})};this.resetRegExp();const c=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((p=i==null?void 0:i.interpolation)==null?void 0:p.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>bh(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?bh(this.escape(v)):bh(v)}].forEach(v=>{for(a=0;o=v.regex.exec(e);){const w=o[1].trim();if(s=l(w),s===void 0)if(typeof c=="function"){const _=c(e,o,i);s=ae(_)?_:""}else if(i&&Object.prototype.hasOwnProperty.call(i,w))s="";else if(h){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${e}`),s="";else!ae(s)&&!this.useRawValueToEscape&&(s=Dm(s));const I=v.safeValue(s);if(e=e.replace(o[0],I),h?(v.regex.lastIndex+=s.length,v.regex.lastIndex-=o[0].length):v.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,r,n={}){let i,o,s;const a=(u,l)=>{const c=this.nestingOptionsSeparator;if(u.indexOf(c)<0)return u;const h=u.split(new RegExp(`${c}[ ]*{`));let d=`{${h[1]}`;u=h[0],d=this.interpolate(d,s);const p=d.match(/'/g),v=d.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!v||v.length%2!==0)&&(d=d.replace(/'/g,'"'));try{s=JSON.parse(d),l&&(s={...l,...s})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,w),`${u}${c}${d}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,u};for(;i=this.nestingRegexp.exec(e);){let u=[];s={...n},s=s.replace&&!ae(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let l=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const c=i[1].split(this.formatSeparator).map(h=>h.trim());i[1]=c.shift(),u=c,l=!0}if(o=r(a.call(this,i[1].trim(),s),s),o&&i[0]===e&&!ae(o))return o;ae(o)||(o=Dm(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),o=""),l&&(o=u.reduce((c,h)=>this.format(c,h,n.lng,{...n,interpolationkey:i[1].trim()}),o.trim())),e=e.replace(i[0],o),this.regexp.lastIndex=0}return e}}const J6=t=>{let e=t.toLowerCase().trim();const r={};if(t.indexOf("(")>-1){const n=t.split("(");e=n[0].toLowerCase().trim();const i=n[1].substring(0,n[1].length-1);e==="currency"&&i.indexOf(":")<0?r.currency||(r.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?r.range||(r.range=i.trim()):i.split(";").forEach(s=>{if(s){const[a,...u]=s.split(":"),l=u.join(":").trim().replace(/^'+|'+$/g,""),c=a.trim();r[c]||(r[c]=l),l==="false"&&(r[c]=!1),l==="true"&&(r[c]=!0),isNaN(l)||(r[c]=parseInt(l,10))}})}return{formatName:e,formatOptions:r}},Hm=t=>{const e={};return(r,n,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const s=n+JSON.stringify(o);let a=e[s];return a||(a=t($a(n),i),e[s]=a),a(r)}},eR=t=>(e,r,n)=>t($a(r),n)(e);class tR{constructor(e={}){this.logger=en.create("formatter"),this.options=e,this.init(e)}init(e,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const n=r.cacheInBuiltFormats?Hm:eR;this.formats={number:n((i,o)=>{const s=new Intl.NumberFormat(i,{...o});return a=>s.format(a)}),currency:n((i,o)=>{const s=new Intl.NumberFormat(i,{...o,style:"currency"});return a=>s.format(a)}),datetime:n((i,o)=>{const s=new Intl.DateTimeFormat(i,{...o});return a=>s.format(a)}),relativetime:n((i,o)=>{const s=new Intl.RelativeTimeFormat(i,{...o});return a=>s.format(a,o.range||"day")}),list:n((i,o)=>{const s=new Intl.ListFormat(i,{...o});return a=>s.format(a)})}}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=Hm(r)}format(e,r,n,i={}){const o=r.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(a=>a.indexOf(")")>-1)){const a=o.findIndex(u=>u.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,a)].join(this.formatSeparator)}return o.reduce((a,u)=>{var h;const{formatName:l,formatOptions:c}=J6(u);if(this.formats[l]){let d=a;try{const p=((h=i==null?void 0:i.formatParams)==null?void 0:h[i.interpolationkey])||{},v=p.locale||p.lng||i.locale||i.lng||n;d=this.formats[l](a,v,{...c,...i,...p})}catch(p){this.logger.warn(p)}return d}else this.logger.warn(`there was no format function for ${l}`);return a},e)}}const rR=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class nR extends Zc{constructor(e,r,n,i={}){var o,s;super(),this.backend=e,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=en.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(s=(o=this.backend)==null?void 0:o.init)==null||s.call(o,n,i.backend,i)}queueLoad(e,r,n,i){const o={},s={},a={},u={};return e.forEach(l=>{let c=!0;r.forEach(h=>{const d=`${l}|${h}`;!n.reload&&this.store.hasResourceBundle(l,h)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?s[d]===void 0&&(s[d]=!0):(this.state[d]=1,c=!1,s[d]===void 0&&(s[d]=!0),o[d]===void 0&&(o[d]=!0),u[h]===void 0&&(u[h]=!0)))}),c||(a[l]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(u)}}loaded(e,r,n){const i=e.split("|"),o=i[0],s=i[1];r&&this.emit("failedLoading",o,s,r),!r&&n&&this.store.addResourceBundle(o,s,n,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&n&&(this.state[e]=0);const a={};this.queue.forEach(u=>{j6(u.loaded,[o],s),rR(u,e),r&&u.errors.push(r),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(l=>{a[l]||(a[l]={});const c=u.loaded[l];c.length&&c.forEach(h=>{a[l][h]===void 0&&(a[l][h]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(u=>!u.done)}read(e,r,n,i=0,o=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:n,tried:i,wait:o,callback:s});return}this.readingCalls++;const a=(l,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(l&&c&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,n,i+1,o*2,s)},o);return}s(l,c)},u=this.backend[n].bind(this.backend);if(u.length===2){try{const l=u(e,r);l&&typeof l.then=="function"?l.then(c=>a(null,c)).catch(a):a(null,l)}catch(l){a(l)}return}return u(e,r,a)}prepareLoading(e,r,n={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();ae(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ae(r)&&(r=[r]);const o=this.queueLoad(e,r,n,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(e,r,n){this.prepareLoading(e,r,{},n)}reload(e,r,n){this.prepareLoading(e,r,{reload:!0},n)}loadOne(e,r=""){const n=e.split("|"),i=n[0],o=n[1];this.read(i,o,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${r}loading namespace ${o} for language ${i} failed`,s),!s&&a&&this.logger.log(`${r}loaded namespace ${o} for language ${i}`,a),this.loaded(e,s,a)})}saveMissing(e,r,n,i,o,s={},a=()=>{}){var u,l,c,h,d;if((l=(u=this.services)==null?void 0:u.utils)!=null&&l.hasLoadedNamespace&&!((h=(c=this.services)==null?void 0:c.utils)!=null&&h.hasLoadedNamespace(r))){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((d=this.backend)!=null&&d.create){const p={...s,isUpdate:o},v=this.backend.create.bind(this.backend);if(v.length<6)try{let w;v.length===5?w=v(e,r,n,i,p):w=v(e,r,n,i),w&&typeof w.then=="function"?w.then(I=>a(null,I)).catch(a):a(null,w)}catch(w){a(w)}else v(e,r,n,i,a,p)}!e||!e[0]||this.store.addResource(e[0],r,n,i)}}}const Wm=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ae(t[1])&&(e.defaultValue=t[1]),ae(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(n=>{e[n]=r[n]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Gm=t=>{var e,r;return ae(t.ns)&&(t.ns=[t.ns]),ae(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ae(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((r=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:r.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},ol=()=>{},iR=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(r=>{typeof t[r]=="function"&&(t[r]=t[r].bind(t))})};class Ha extends Zc{constructor(e={},r){if(super(),this.options=Gm(e),this.services={},this.logger=en,this.modules={external:[]},iR(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(e={},r){this.isInitializing=!0,typeof e=="function"&&(r=e,e={}),e.defaultNS==null&&e.ns&&(ae(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=Wm();this.options={...n,...this.options,...Gm(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=l=>l?typeof l=="function"?new l:l:null;if(!this.options.isClone){this.modules.logger?en.init(i(this.modules.logger),this.options):en.init(null,this.options);let l;this.modules.formatter?l=this.modules.formatter:l=tR;const c=new Um(this.options);this.store=new Fm(this.options.resources,this.options);const h=this.services;h.logger=en,h.resourceStore=this.store,h.languageUtils=c,h.pluralResolver=new Q6(c,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(h.formatter=i(l),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new Z6(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new nR(i(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(d,...p)=>{this.emit(d,...p)}),this.modules.languageDetector&&(h.languageDetector=i(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=i(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new fc(this.services,this.options),this.translator.on("*",(d,...p)=>{this.emit(d,...p)}),this.modules.external.forEach(d=>{d.init&&d.init(this)})}if(this.format=this.options.interpolation.format,r||(r=ol),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l=>{this[l]=(...c)=>this.store[l](...c)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l=>{this[l]=(...c)=>(this.store[l](...c),this)});const a=Qs(),u=()=>{const l=(c,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(h),r(c,h)};if(this.languages&&!this.isInitialized)return l(null,this.t.bind(this));this.changeLanguage(this.options.lng,l)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),a}loadResources(e,r=ol){var o,s;let n=r;const i=ae(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const a=[],u=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(h=>{h!=="cimode"&&a.indexOf(h)<0&&a.push(h)})};i?u(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>u(c)),(s=(o=this.options.preload)==null?void 0:o.forEach)==null||s.call(o,l=>u(l)),this.services.backendConnector.load(a,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(l)})}else n(null)}reloadResources(e,r,n){const i=Qs();return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),n||(n=ol),this.services.backendConnector.reload(e,r,o=>{i.resolve(),n(o)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&fx.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,r){this.isLanguageChangingTo=e;const n=Qs();this.emit("languageChanging",e);const i=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},o=(a,u)=>{u?this.isLanguageChangingTo===e&&(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,n.resolve((...l)=>this.t(...l)),r&&r(a,(...l)=>this.t(...l))},s=a=>{var c,h;!e&&!a&&this.services.languageDetector&&(a=[]);const u=ae(a)?a:a&&a[0],l=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(ae(a)?[a]:a);l&&(this.language||i(l),this.translator.language||this.translator.changeLanguage(l),(h=(c=this.services.languageDetector)==null?void 0:c.cacheUserLanguage)==null||h.call(c,l)),this.loadResources(l,d=>{o(d,l)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),n}getFixedT(e,r,n){const i=(o,s,...a)=>{let u;typeof s!="object"?u=this.options.overloadTranslationOptionHandler([o,s].concat(a)):u={...s},u.lng=u.lng||i.lng,u.lngs=u.lngs||i.lngs,u.ns=u.ns||i.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||n||i.keyPrefix);const l=this.options.keySeparator||".";let c;return u.keyPrefix&&Array.isArray(o)?c=o.map(h=>`${u.keyPrefix}${l}${h}`):c=u.keyPrefix?`${u.keyPrefix}${l}${o}`:o,this.t(c,u)};return ae(e)?i.lng=e:i.lngs=e,i.ns=r,i.keyPrefix=n,i}t(...e){var r;return(r=this.translator)==null?void 0:r.translate(...e)}exists(...e){var r;return(r=this.translator)==null?void 0:r.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const s=(a,u)=>{const l=this.services.backendConnector.state[`${a}|${u}`];return l===-1||l===0||l===2};if(r.precheck){const a=r.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(n,e)&&(!i||s(o,e)))}loadNamespaces(e,r){const n=Qs();return this.options.ns?(ae(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{n.resolve(),r&&r(i)}),n):(r&&r(),Promise.resolve())}loadLanguages(e,r){const n=Qs();ae(e)&&(e=[e]);const i=this.options.preload||[],o=e.filter(s=>i.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return o.length?(this.options.preload=i.concat(o),this.loadResources(s=>{n.resolve(),r&&r(s)}),n):(r&&r(),Promise.resolve())}dir(e){var i,o;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((o=this.services)==null?void 0:o.languageUtils)||new Um(Wm());return r.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},r){return new Ha(e,r)}cloneInstance(e={},r=ol){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},o=new Ha(i);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const a=Object.keys(this.store.data).reduce((u,l)=>(u[l]={...this.store.data[l]},u[l]=Object.keys(u[l]).reduce((c,h)=>(c[h]={...u[l][h]},c),u[l]),u),{});o.store=new Fm(a,i),o.services.resourceStore=o.store}return o.translator=new fc(o.services,i),o.translator.on("*",(a,...u)=>{o.emit(a,...u)}),o.init(i,r),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ht=Ha.createInstance();Ht.createInstance=Ha.createInstance;Ht.createInstance;Ht.dir;Ht.init;Ht.loadResources;Ht.reloadResources;Ht.use;Ht.changeLanguage;Ht.getFixedT;Ht.t;Ht.exists;Ht.setDefaultNamespace;Ht.hasLoadedNamespace;Ht.loadNamespaces;Ht.loadLanguages;const{slice:oR,forEach:sR}=[];function aR(t){return sR.call(oR.call(arguments,1),e=>{if(e)for(const r in e)t[r]===void 0&&(t[r]=e[r])}),t}function uR(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(r=>r.test(t))}const Km=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,lR=function(t,e){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let o=`${t}=${i}`;if(n.maxAge>0){const s=n.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(s)}`}if(n.domain){if(!Km.test(n.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${n.domain}`}if(n.path){if(!Km.test(n.path))throw new TypeError("option path is invalid");o+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(o+="; Partitioned"),o},Xm={create(t,e,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+r*60*1e3)),n&&(i.domain=n),document.cookie=lR(t,e,i)},read(t){const e=`${t}=`,r=document.cookie.split(";");for(let n=0;n<r.length;n++){let i=r[n];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var cR={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return Xm.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:r,cookieMinutes:n,cookieDomain:i,cookieOptions:o}=e;r&&typeof document<"u"&&Xm.create(r,t,n,i,o)}},fR={name:"querystring",lookup(t){var n;let{lookupQuerystring:e}=t,r;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((n=window.location.hash)==null?void 0:n.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const s=i.substring(1).split("&");for(let a=0;a<s.length;a++){const u=s[a].indexOf("=");u>0&&s[a].substring(0,u)===e&&(r=s[a].substring(u+1))}}return r}},hR={name:"hash",lookup(t){var i;let{lookupHash:e,lookupFromHashIndex:r}=t,n;if(typeof window<"u"){const{hash:o}=window.location;if(o&&o.length>2){const s=o.substring(1);if(e){const a=s.split("&");for(let u=0;u<a.length;u++){const l=a[u].indexOf("=");l>0&&a[u].substring(0,l)===e&&(n=a[u].substring(l+1))}}if(n)return n;if(!n&&r>-1){const a=o.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?(i=a[typeof r=="number"?r:0])==null?void 0:i.replace("/",""):void 0}}}return n}};let wo=null;const qm=()=>{if(wo!==null)return wo;try{if(wo=typeof window<"u"&&window.localStorage!==null,!wo)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{wo=!1}return wo};var dR={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&qm())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:r}=e;r&&qm()&&window.localStorage.setItem(r,t)}};let xo=null;const Ym=()=>{if(xo!==null)return xo;try{if(xo=typeof window<"u"&&window.sessionStorage!==null,!xo)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{xo=!1}return xo};var pR={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&Ym())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:r}=e;r&&Ym()&&window.sessionStorage.setItem(r,t)}},gR={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:r,userLanguage:n,language:i}=navigator;if(r)for(let o=0;o<r.length;o++)e.push(r[o]);n&&e.push(n),i&&e.push(i)}return e.length>0?e:void 0}},vR={name:"htmlTag",lookup(t){let{htmlTag:e}=t,r;const n=e||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(r=n.getAttribute("lang")),r}},mR={name:"path",lookup(t){var i;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(r)?(i=r[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},yR={name:"subdomain",lookup(t){var i,o;let{lookupFromSubdomainIndex:e}=t;const r=typeof e=="number"?e+1:1,n=typeof window<"u"&&((o=(i=window.location)==null?void 0:i.hostname)==null?void 0:o.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(n)return n[r]}};let hx=!1;try{document.cookie,hx=!0}catch{}const dx=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];hx||dx.splice(1,1);const _R=()=>({order:dx,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class px{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,r)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=aR(r,this.options||{},_R()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(cR),this.addDetector(fR),this.addDetector(dR),this.addDetector(pR),this.addDetector(gR),this.addDetector(vR),this.addDetector(mR),this.addDetector(yR),this.addDetector(hR)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return e.forEach(n=>{if(this.detectors[n]){let i=this.detectors[n].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(r=r.concat(i))}}),r=r.filter(n=>n!=null&&!uR(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||r.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(e,this.options)}))}}px.type="languageDetector";const wR={appTitle:"My stock",home:"Home",log:"Log",scheduled:"Scheduled",medicines:"Medicines",kids:"Kids",settings:"Settings",manageMedicines:"Manage Medicines",manageUsers:"Manage Users",switchUser:"Switch User",about:"About"},xR={description:"Manage Home Inventory",version:"Version",developer:"Developer:",developerName:"Yossi Hauser",contact:"Contact",appNameLabel:"App Name",emailLabel:"Email"},ER={guest:"Guest",barcode:"Barcode",category:"Category",brand:"Brand",itemName:"Item Name",pic:"Icon",add:"Add",addItemTitle:"Add New Item",productIcon:"Product Icon",productImageTitle:"Use product image",enterBarcode:"Enter Barcode Number",enterBarcodePlaceholder:"Type barcode number...",enterCategory:"Enter category",enterBrand:"Enter brand",productFound:"Product found and loaded",productNotFound:"No data was found for this product",scanCameraTitle:"Scan barcode with camera",scanBarcode:"Scan Barcode",scanning:"Scanning...",scanningInstructions:"Position the barcode within the red rectangle to scan",editItemTitle:"Edit Item",enterItemName:"Enter item name",optionalIcon:"Optical icons"},AR={cancel:"Cancel",remove:"Remove",add:"Add",addItem:"Add item",save:"Save",close:"Close"},IR={remove:"Remove Item",removeWarning:"Are you sure you want to remove this item from your inventory? This action cannot be undone."},TR={searchPlaceholder:"Search items...",all:"All",inStock:"In Stock",outOfStock:"Out of Stock"},CR={releaseSwipeText:"Release to confirm action",swipeText:"Swipe right to increase • Swipe left to decrease"},SR={header:wR,about:xR,general:ER,buttons:AR,remove:IR,search:TR,itemRow:CR},RR={appTitle:"מלא מחדש",home:"בית",log:"תיעוד",kids:"ילדים",settings:"הגדרות",manageUsers:"ניהול משתמשים",switchUser:"החלף משתמש",about:"אודות"},bR={description:"ניהול מלאי",version:"גרסה",developer:"מפתח:",developerName:"יוסי האוזר",contact:"צור קשר",appNameLabel:"שם האפליקציה",emailLabel:"אימייל"},OR={guest:"אורח",barcode:"ברקוד",category:"קטגוריה",brand:"מותג",itemName:"שם המוצר",pic:"תמונה",add:"הוספה",addItemTitle:"הוספת מוצר חדש",productIcon:"אייקון",productImageTitle:"תמונת מוצר",enterBarcode:"הכנס מספר ברקוד",enterBarcodePlaceholder:"מספר ברקוד...",enterCategory:"הכנס קטגוריה",enterBrand:"הכנס מותג",productFound:"נמצאו פרטי המוצר",productNotFound:"לא נמצא מידע למוצר הזה",scanCameraTitle:"סרוק ברקוד עם המצלמה",scanBarcode:"סרוק ברקוד",scanning:"סורק...",scanningInstructions:"לסריקה מקם את הברקוד בתוך המסגרת האדומה",editItemTitle:"עריכת מוצר",enterItemName:"הכנס שם מוצר",optionalIcon:"אייקון חלופי לבחירה"},NR={cancel:"ביטול",remove:"הסרה",add:"הוספה",addItem:"הוסף מוצר",save:"שמירה",close:"סגור"},PR={remove:"הסר מוצר",removeWarning:`למחוק את המוצר ? 
 (הפעולה אינה הפיכה)`},DR={searchPlaceholder:"חיפוש...",all:"הכל",inStock:"במלאי",outOfStock:"אזל מהמלאי"},kR={releaseSwipeText:"שחרר לאישור",swipeText:" החלק ימינה להוספה • החלק שמאלה להפחתה"},MR={header:RR,about:bR,general:OR,buttons:NR,remove:PR,search:DR,itemRow:kR},LR={en:{translation:SR},he:{translation:MR}};Ht.use(px).use(R6).init({resources:LR,fallbackLng:"he",debug:!1,interpolation:{escapeValue:!1},react:{useSuspense:!1}});const FR=({isOpen:t,onClose:e,onAdd:r,onEdit:n,barcode:i,editItem:o=null})=>{const[s,a]=Z.useState(""),[u,l]=Z.useState(""),[c,h]=Z.useState(""),[d,p]=Z.useState("📦"),[v,w]=Z.useState(null),[I,_]=Z.useState(!1),m=["📦","🍎","🥛","🍞","🧴","📱","👕","📚","🔧","💊"],{t:x}=ms(),S=o!==null;Z.useEffect(()=>{S&&o?(a(o.name||""),l(o.category||""),h(o.brand||""),p(o.icon||"📦"),o.icon&&(o.icon.startsWith("http")||o.icon.startsWith("data:"))&&_(!0)):i&&!S&&B6(i).then(T=>{w(T),T&&(a(T.name||""),l(T.category||""),h(T.brand||""),T.imageUrl&&(_(!0),p(T.imageUrl)))})},[i,o,S]);const P=()=>{s.trim()&&(S&&n&&o?n(o.barcode,s.trim(),d,u.trim(),c.trim()):r(s.trim(),d,u.trim(),c.trim()),k())},k=()=>{a(""),p("📦"),l(""),h(""),w(null),_(!1)},A=()=>{k(),e()},E=T=>{p(T),_(!1)};return t?L.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:L.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm",children:[L.jsxs("div",{className:"flex justify-between items-center mb-4",children:[L.jsx("h2",{className:"text-lg font-semibold",children:x(S?"general.editItemTitle":"general.addItemTitle")}),L.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600",children:L.jsx(Gw,{className:"w-5 h-5"})})]}),L.jsxs("div",{className:"space-y-4",children:[L.jsx("div",{children:L.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[x("general.barcode"),": ",S?o==null?void 0:o.barcode:i]})}),L.jsxs("div",{children:[L.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[x("general.itemName"),":"]}),L.jsx("input",{type:"text",value:s,onChange:T=>a(T.target.value),placeholder:x("general.enterItemName"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),L.jsxs("div",{children:[L.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[x("general.pic"),":"]}),d&&L.jsx("div",{className:"mb-2",children:L.jsx("div",{className:"w-12 h-12 rounded-md border-2 border-blue-500 bg-blue-50 flex items-center justify-center overflow-hidden",children:d.startsWith("http")?L.jsx("img",{src:d,alt:"icon",className:"w-full h-full object-contain"}):L.jsx("span",{className:"text-2xl",children:d})})}),L.jsx("p",{className:"text-xs text-gray-500 mt-1",children:x("general.optionalIcon")}),L.jsx("div",{className:"grid grid-cols-5 gap-2",children:m.map(T=>L.jsx("button",{onClick:()=>E(T),className:`w-10 h-10 rounded-md border-2 flex items-center justify-center text-xl ${d===T&&!I?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:T},T))})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:x("general.category")}),L.jsx("input",{type:"text",value:u,onChange:T=>l(T.target.value),placeholder:x("general.enterCategory"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:x("general.brand")}),L.jsx("input",{type:"text",value:c,onChange:T=>h(T.target.value),placeholder:x("general.enterBrand"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),!S&&v&&L.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:L.jsx("p",{className:"text-sm text-gray-600",children:x(v?"general.productFound":"general.productNotFound")})}),L.jsxs("div",{className:"flex gap-2 pt-2",children:[L.jsx("button",{onClick:A,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:x("buttons.cancel")}),L.jsx("button",{onClick:P,disabled:!s.trim(),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:x(S?"buttons.save":"buttons.addItem")})]})]})]})}):null},BR=({isOpen:t,onClose:e,onConfirm:r})=>{if(!t)return null;const{t:n}=ms();return L.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:L.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm",children:[L.jsxs("div",{className:"flex items-center mb-4",children:[L.jsx(AS,{className:"w-6 h-6 text-red-500 mr-2"}),L.jsx("h2",{className:"text-lg font-semibold",children:n("remove.remove")})]}),L.jsx("p",{className:"text-gray-600 mb-6",children:n("remove.removeWarning")}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:n("buttons.cancel")}),L.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",children:n("buttons.remove")})]})]})})};const VR="inventory-app",UR="0.2.1",jR="module",zR={dev:"vite",build:"tsc && vite build",lint:"eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",preview:"vite preview",deploy:"vite build && gh-pages -d dist"},$R={"@types/uuid":"^10.0.0","@zxing/library":"^0.21.3",firebase:"^11.9.1","i18next-browser-languagedetector":"^8.2.0","lucide-react":"^0.263.1",react:"^18.2.0","react-dom":"^18.2.0","react-i18next":"^15.5.3",uuid:"^11.1.0","vite-plugin-gh-pages":"^1.0.1"},HR={"@types/node":"^24.0.3","@types/react":"^18.2.15","@types/react-dom":"^18.2.7","@typescript-eslint/eslint-plugin":"^8.34.0","@typescript-eslint/parser":"^8.34.0","@vitejs/plugin-react":"^4.0.3",autoprefixer:"^10.4.14",eslint:"^8.45.0","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-react-refresh":"^0.4.3","gh-pages":"^6.3.0",postcss:"^8.4.27",tailwindcss:"^3.3.3",typescript:"^5.0.2","typescript-eslint":"^8.34.0",vite:"^4.4.5"},WR={name:VR,private:!0,version:UR,type:jR,scripts:zR,dependencies:$R,devDependencies:HR},GR=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},KR=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[r++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[r++],s=t[r++],a=t[r++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const o=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},vx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=o>>2,h=(o&3)<<4|a>>4;let d=(a&15)<<2|l>>6,p=l&63;u||(p=64,s||(d=64)),n.push(r[c],r[h],r[d],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const o=r[t.charAt(i++)],a=i<t.length?r[t.charAt(i)]:0;++i;const l=i<t.length?r[t.charAt(i)]:64;++i;const h=i<t.length?r[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||h==null)throw new XR;const d=o<<2|a>>4;if(n.push(d),l!==64){const p=a<<4&240|l>>2;if(n.push(p),h!==64){const v=l<<6&192|h;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class XR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qR=function(t){const e=gx(t);return vx.encodeByteArray(e,!0)},hc=function(t){return qR(t).replace(/\./g,"")},mx=function(t){try{return vx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=()=>YR().__FIREBASE_DEFAULTS__,ZR=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mx(t[1]);return e&&JSON.parse(e)},Jc=()=>{try{return GR()||QR()||ZR()||JR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yx=t=>{var e,r;return(r=(e=Jc())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},eb=t=>{const e=yx(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},_x=()=>{var t;return(t=Jc())===null||t===void 0?void 0:t.config},wx=t=>{var e;return(e=Jc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(t){return t.endsWith(".cloudworkstations.dev")}async function xx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[hc(JSON.stringify(r)),hc(JSON.stringify(s)),a].join(".")}const wa={};function nb(){const t={prod:[],emulator:[]};for(const e of Object.keys(wa))wa[e]?t.emulator.push(e):t.prod.push(e);return t}function ib(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let Qm=!1;function Ex(t,e){if(typeof window>"u"||typeof document>"u"||!ys(window.location.host)||wa[t]===e||wa[t]||Qm)return;wa[t]=e;function r(d){return`__firebase__banner__${d}`}const n="__firebase__banner",o=nb().prod.length>0;function s(){const d=document.getElementById(n);d&&d.remove()}function a(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function u(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function l(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Qm=!0,s()},d}function c(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=ib(n),p=r("text"),v=document.getElementById(p)||document.createElement("span"),w=r("learnmore"),I=document.getElementById(w)||document.createElement("a"),_=r("preprendIcon"),m=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const x=d.element;a(x),c(I,w);const S=l();u(m,_),x.append(m,v,I,S),document.body.appendChild(x)}o?(v.innerText="Preview backend disconnected.",m.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(m.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ob(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function sb(){var t;const e=(t=Jc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ab(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ub(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cb(){const t=jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fb(){return!sb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ax(){try{return typeof indexedDB=="object"}catch{return!1}}function Ix(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){e(r)}})}function hb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="FirebaseError";class dn extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=db,Object.setPrototypeOf(this,dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lo.prototype.create)}}class lo{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?pb(o,n):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new dn(i,a,n)}}function pb(t,e){return t.replace(gb,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const gb=/\{\$([^}]+)}/g;function vb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function to(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const o=t[i],s=e[i];if(Zm(o)&&Zm(s)){if(!to(o,s))return!1}else if(o!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function Zm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function mb(t,e){const r=new yb(t,e);return r.subscribe.bind(r)}class yb{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");_b(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Oh),i.error===void 0&&(i.error=Oh),i.complete===void 0&&(i.complete=Oh);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _b(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Oh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return t&&t._delegate?t._delegate:t}class Wr{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new tb;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Eb(e))try{this.getOrInitializeService({instanceIdentifier:Bi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=Bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bi){return this.instances.has(e)}getOptions(e=Bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);n===a&&s.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),o=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:xb(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Bi){return this.component?this.component.multipleInstances?e:Bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xb(t){return t===Bi?void 0:t}function Eb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new wb(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const Ib={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},Tb=ge.INFO,Cb={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},Sb=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=Cb[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class M1{constructor(e){this.name=e,this._logLevel=Tb,this._logHandler=Sb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ib[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const Rb=(t,e)=>e.some(r=>t instanceof r);let Jm,ey;function bb(){return Jm||(Jm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ob(){return ey||(ey=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tx=new WeakMap,s0=new WeakMap,Cx=new WeakMap,Nh=new WeakMap,L1=new WeakMap;function Nb(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{r(Tn(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&Tx.set(r,t)}).catch(()=>{}),L1.set(e,t),e}function Pb(t){if(s0.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});s0.set(t,e)}let a0={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return s0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Cx.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Tn(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Db(t){a0=t(a0)}function kb(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Ph(this),e,...r);return Cx.set(n,e.sort?e.sort():[e]),Tn(n)}:Ob().includes(t)?function(...e){return t.apply(Ph(this),e),Tn(Tx.get(this))}:function(...e){return Tn(t.apply(Ph(this),e))}}function Mb(t){return typeof t=="function"?kb(t):(t instanceof IDBTransaction&&Pb(t),Rb(t,bb())?new Proxy(t,a0):t)}function Tn(t){if(t instanceof IDBRequest)return Nb(t);if(Nh.has(t))return Nh.get(t);const e=Mb(t);return e!==t&&(Nh.set(t,e),L1.set(e,t)),e}const Ph=t=>L1.get(t);function ef(t,e,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Tn(s);return n&&s.addEventListener("upgradeneeded",u=>{n(Tn(s.result),u.oldVersion,u.newVersion,Tn(s.transaction),u)}),r&&s.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function Dh(t,{blocked:e}={}){const r=indexedDB.deleteDatabase(t);return e&&r.addEventListener("blocked",n=>e(n.oldVersion,n)),Tn(r).then(()=>{})}const Lb=["get","getKey","getAll","getAllKeys","count"],Fb=["put","add","delete","clear"],kh=new Map;function ty(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kh.get(e))return kh.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=Fb.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Lb.includes(r)))return;const o=async function(s,...a){const u=this.transaction(s,i?"readwrite":"readonly");let l=u.store;return n&&(l=l.index(a.shift())),(await Promise.all([l[r](...a),i&&u.done]))[0]};return kh.set(e,o),o}Db(t=>({...t,get:(e,r,n)=>ty(e,r)||t.get(e,r,n),has:(e,r)=>!!ty(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Vb(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Vb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const u0="@firebase/app",ry="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new M1("@firebase/app"),Ub="@firebase/app-compat",jb="@firebase/analytics-compat",zb="@firebase/analytics",$b="@firebase/app-check-compat",Hb="@firebase/app-check",Wb="@firebase/auth",Gb="@firebase/auth-compat",Kb="@firebase/database",Xb="@firebase/data-connect",qb="@firebase/database-compat",Yb="@firebase/functions",Qb="@firebase/functions-compat",Zb="@firebase/installations",Jb="@firebase/installations-compat",eO="@firebase/messaging",tO="@firebase/messaging-compat",rO="@firebase/performance",nO="@firebase/performance-compat",iO="@firebase/remote-config",oO="@firebase/remote-config-compat",sO="@firebase/storage",aO="@firebase/storage-compat",uO="@firebase/firestore",lO="@firebase/ai",cO="@firebase/firestore-compat",fO="firebase",hO="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="[DEFAULT]",dO={[u0]:"fire-core",[Ub]:"fire-core-compat",[zb]:"fire-analytics",[jb]:"fire-analytics-compat",[Hb]:"fire-app-check",[$b]:"fire-app-check-compat",[Wb]:"fire-auth",[Gb]:"fire-auth-compat",[Kb]:"fire-rtdb",[Xb]:"fire-data-connect",[qb]:"fire-rtdb-compat",[Yb]:"fire-fn",[Qb]:"fire-fn-compat",[Zb]:"fire-iid",[Jb]:"fire-iid-compat",[eO]:"fire-fcm",[tO]:"fire-fcm-compat",[rO]:"fire-perf",[nO]:"fire-perf-compat",[iO]:"fire-rc",[oO]:"fire-rc-compat",[sO]:"fire-gcs",[aO]:"fire-gcs-compat",[uO]:"fire-fst",[cO]:"fire-fst-compat",[lO]:"fire-vertex","fire-js":"fire-js",[fO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new Map,pO=new Map,c0=new Map;function ny(t,e){try{t.container.addComponent(e)}catch(r){Nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function cn(t){const e=t.name;if(c0.has(e))return Nn.debug(`There were multiple attempts to register component ${e}.`),!1;c0.set(e,t);for(const r of dc.values())ny(r,t);for(const r of pO.values())ny(r,t);return!0}function _s(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Zr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},di=new lo("app","Firebase",gO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=hO;function Sx(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:l0,automaticDataCollectionEnabled:!0},e),i=n.name;if(typeof i!="string"||!i)throw di.create("bad-app-name",{appName:String(i)});if(r||(r=_x()),!r)throw di.create("no-options");const o=dc.get(i);if(o){if(to(r,o.options)&&to(n,o.config))return o;throw di.create("duplicate-app",{appName:i})}const s=new Ab(i);for(const u of c0.values())s.addComponent(u);const a=new vO(r,n,s);return dc.set(i,a),a}function F1(t=l0){const e=dc.get(t);if(!e&&t===l0&&_x())return Sx();if(!e)throw di.create("no-app",{appName:t});return e}function br(t,e,r){var n;let i=(n=dO[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nn.warn(a.join(" "));return}cn(new Wr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO="firebase-heartbeat-database",yO=1,Wa="firebase-heartbeat-store";let Mh=null;function Rx(){return Mh||(Mh=ef(mO,yO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wa)}catch(r){console.warn(r)}}}}).catch(t=>{throw di.create("idb-open",{originalErrorMessage:t.message})})),Mh}async function _O(t){try{const r=(await Rx()).transaction(Wa),n=await r.objectStore(Wa).get(bx(t));return await r.done,n}catch(e){if(e instanceof dn)Nn.warn(e.message);else{const r=di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nn.warn(r.message)}}}async function iy(t,e){try{const n=(await Rx()).transaction(Wa,"readwrite");await n.objectStore(Wa).put(e,bx(t)),await n.done}catch(r){if(r instanceof dn)Nn.warn(r.message);else{const n=di.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Nn.warn(n.message)}}}function bx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=1024,xO=30;class EO{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new IO(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=oy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>xO){const s=TO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Nn.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=oy(),{heartbeatsToSend:n,unsentEntries:i}=AO(this._heartbeatsCache.heartbeats),o=hc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return Nn.warn(r),""}}}function oy(){return new Date().toISOString().substring(0,10)}function AO(t,e=wO){const r=[];let n=t.slice();for(const i of t){const o=r.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),sy(r)>e){o.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),sy(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class IO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ax()?Ix().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await _O(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return iy(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return iy(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function sy(t){return hc(JSON.stringify({version:2,heartbeats:t})).length}function TO(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(t){cn(new Wr("platform-logger",e=>new Bb(e),"PRIVATE")),cn(new Wr("heartbeat",e=>new EO(e),"PRIVATE")),br(u0,ry,t),br(u0,ry,"esm2017"),br("fire-js","")}CO("");var ay=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pi,Ox;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,E){function T(){}T.prototype=E.prototype,A.D=E.prototype,A.prototype=new T,A.prototype.constructor=A,A.C=function(R,N,D){for(var O=Array(arguments.length-2),q=2;q<arguments.length;q++)O[q-2]=arguments[q];return E.prototype[N].apply(R,O)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,E,T){T||(T=0);var R=Array(16);if(typeof E=="string")for(var N=0;16>N;++N)R[N]=E.charCodeAt(T++)|E.charCodeAt(T++)<<8|E.charCodeAt(T++)<<16|E.charCodeAt(T++)<<24;else for(N=0;16>N;++N)R[N]=E[T++]|E[T++]<<8|E[T++]<<16|E[T++]<<24;E=A.g[0],T=A.g[1],N=A.g[2];var D=A.g[3],O=E+(D^T&(N^D))+R[0]+3614090360&4294967295;E=T+(O<<7&4294967295|O>>>25),O=D+(N^E&(T^N))+R[1]+3905402710&4294967295,D=E+(O<<12&4294967295|O>>>20),O=N+(T^D&(E^T))+R[2]+606105819&4294967295,N=D+(O<<17&4294967295|O>>>15),O=T+(E^N&(D^E))+R[3]+3250441966&4294967295,T=N+(O<<22&4294967295|O>>>10),O=E+(D^T&(N^D))+R[4]+4118548399&4294967295,E=T+(O<<7&4294967295|O>>>25),O=D+(N^E&(T^N))+R[5]+1200080426&4294967295,D=E+(O<<12&4294967295|O>>>20),O=N+(T^D&(E^T))+R[6]+2821735955&4294967295,N=D+(O<<17&4294967295|O>>>15),O=T+(E^N&(D^E))+R[7]+4249261313&4294967295,T=N+(O<<22&4294967295|O>>>10),O=E+(D^T&(N^D))+R[8]+1770035416&4294967295,E=T+(O<<7&4294967295|O>>>25),O=D+(N^E&(T^N))+R[9]+2336552879&4294967295,D=E+(O<<12&4294967295|O>>>20),O=N+(T^D&(E^T))+R[10]+4294925233&4294967295,N=D+(O<<17&4294967295|O>>>15),O=T+(E^N&(D^E))+R[11]+2304563134&4294967295,T=N+(O<<22&4294967295|O>>>10),O=E+(D^T&(N^D))+R[12]+1804603682&4294967295,E=T+(O<<7&4294967295|O>>>25),O=D+(N^E&(T^N))+R[13]+4254626195&4294967295,D=E+(O<<12&4294967295|O>>>20),O=N+(T^D&(E^T))+R[14]+2792965006&4294967295,N=D+(O<<17&4294967295|O>>>15),O=T+(E^N&(D^E))+R[15]+1236535329&4294967295,T=N+(O<<22&4294967295|O>>>10),O=E+(N^D&(T^N))+R[1]+4129170786&4294967295,E=T+(O<<5&4294967295|O>>>27),O=D+(T^N&(E^T))+R[6]+3225465664&4294967295,D=E+(O<<9&4294967295|O>>>23),O=N+(E^T&(D^E))+R[11]+643717713&4294967295,N=D+(O<<14&4294967295|O>>>18),O=T+(D^E&(N^D))+R[0]+3921069994&4294967295,T=N+(O<<20&4294967295|O>>>12),O=E+(N^D&(T^N))+R[5]+3593408605&4294967295,E=T+(O<<5&4294967295|O>>>27),O=D+(T^N&(E^T))+R[10]+38016083&4294967295,D=E+(O<<9&4294967295|O>>>23),O=N+(E^T&(D^E))+R[15]+3634488961&4294967295,N=D+(O<<14&4294967295|O>>>18),O=T+(D^E&(N^D))+R[4]+3889429448&4294967295,T=N+(O<<20&4294967295|O>>>12),O=E+(N^D&(T^N))+R[9]+568446438&4294967295,E=T+(O<<5&4294967295|O>>>27),O=D+(T^N&(E^T))+R[14]+3275163606&4294967295,D=E+(O<<9&4294967295|O>>>23),O=N+(E^T&(D^E))+R[3]+4107603335&4294967295,N=D+(O<<14&4294967295|O>>>18),O=T+(D^E&(N^D))+R[8]+1163531501&4294967295,T=N+(O<<20&4294967295|O>>>12),O=E+(N^D&(T^N))+R[13]+2850285829&4294967295,E=T+(O<<5&4294967295|O>>>27),O=D+(T^N&(E^T))+R[2]+4243563512&4294967295,D=E+(O<<9&4294967295|O>>>23),O=N+(E^T&(D^E))+R[7]+1735328473&4294967295,N=D+(O<<14&4294967295|O>>>18),O=T+(D^E&(N^D))+R[12]+2368359562&4294967295,T=N+(O<<20&4294967295|O>>>12),O=E+(T^N^D)+R[5]+4294588738&4294967295,E=T+(O<<4&4294967295|O>>>28),O=D+(E^T^N)+R[8]+2272392833&4294967295,D=E+(O<<11&4294967295|O>>>21),O=N+(D^E^T)+R[11]+1839030562&4294967295,N=D+(O<<16&4294967295|O>>>16),O=T+(N^D^E)+R[14]+4259657740&4294967295,T=N+(O<<23&4294967295|O>>>9),O=E+(T^N^D)+R[1]+2763975236&4294967295,E=T+(O<<4&4294967295|O>>>28),O=D+(E^T^N)+R[4]+1272893353&4294967295,D=E+(O<<11&4294967295|O>>>21),O=N+(D^E^T)+R[7]+4139469664&4294967295,N=D+(O<<16&4294967295|O>>>16),O=T+(N^D^E)+R[10]+3200236656&4294967295,T=N+(O<<23&4294967295|O>>>9),O=E+(T^N^D)+R[13]+681279174&4294967295,E=T+(O<<4&4294967295|O>>>28),O=D+(E^T^N)+R[0]+3936430074&4294967295,D=E+(O<<11&4294967295|O>>>21),O=N+(D^E^T)+R[3]+3572445317&4294967295,N=D+(O<<16&4294967295|O>>>16),O=T+(N^D^E)+R[6]+76029189&4294967295,T=N+(O<<23&4294967295|O>>>9),O=E+(T^N^D)+R[9]+3654602809&4294967295,E=T+(O<<4&4294967295|O>>>28),O=D+(E^T^N)+R[12]+3873151461&4294967295,D=E+(O<<11&4294967295|O>>>21),O=N+(D^E^T)+R[15]+530742520&4294967295,N=D+(O<<16&4294967295|O>>>16),O=T+(N^D^E)+R[2]+3299628645&4294967295,T=N+(O<<23&4294967295|O>>>9),O=E+(N^(T|~D))+R[0]+4096336452&4294967295,E=T+(O<<6&4294967295|O>>>26),O=D+(T^(E|~N))+R[7]+1126891415&4294967295,D=E+(O<<10&4294967295|O>>>22),O=N+(E^(D|~T))+R[14]+2878612391&4294967295,N=D+(O<<15&4294967295|O>>>17),O=T+(D^(N|~E))+R[5]+4237533241&4294967295,T=N+(O<<21&4294967295|O>>>11),O=E+(N^(T|~D))+R[12]+1700485571&4294967295,E=T+(O<<6&4294967295|O>>>26),O=D+(T^(E|~N))+R[3]+2399980690&4294967295,D=E+(O<<10&4294967295|O>>>22),O=N+(E^(D|~T))+R[10]+4293915773&4294967295,N=D+(O<<15&4294967295|O>>>17),O=T+(D^(N|~E))+R[1]+2240044497&4294967295,T=N+(O<<21&4294967295|O>>>11),O=E+(N^(T|~D))+R[8]+1873313359&4294967295,E=T+(O<<6&4294967295|O>>>26),O=D+(T^(E|~N))+R[15]+4264355552&4294967295,D=E+(O<<10&4294967295|O>>>22),O=N+(E^(D|~T))+R[6]+2734768916&4294967295,N=D+(O<<15&4294967295|O>>>17),O=T+(D^(N|~E))+R[13]+1309151649&4294967295,T=N+(O<<21&4294967295|O>>>11),O=E+(N^(T|~D))+R[4]+4149444226&4294967295,E=T+(O<<6&4294967295|O>>>26),O=D+(T^(E|~N))+R[11]+3174756917&4294967295,D=E+(O<<10&4294967295|O>>>22),O=N+(E^(D|~T))+R[2]+718787259&4294967295,N=D+(O<<15&4294967295|O>>>17),O=T+(D^(N|~E))+R[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(N+(O<<21&4294967295|O>>>11))&4294967295,A.g[2]=A.g[2]+N&4294967295,A.g[3]=A.g[3]+D&4294967295}n.prototype.u=function(A,E){E===void 0&&(E=A.length);for(var T=E-this.blockSize,R=this.B,N=this.h,D=0;D<E;){if(N==0)for(;D<=T;)i(this,A,D),D+=this.blockSize;if(typeof A=="string"){for(;D<E;)if(R[N++]=A.charCodeAt(D++),N==this.blockSize){i(this,R),N=0;break}}else for(;D<E;)if(R[N++]=A[D++],N==this.blockSize){i(this,R),N=0;break}}this.h=N,this.o+=E},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;var T=8*this.o;for(E=A.length-8;E<A.length;++E)A[E]=T&255,T/=256;for(this.u(A),A=Array(16),E=T=0;4>E;++E)for(var R=0;32>R;R+=8)A[T++]=this.g[E]>>>R&255;return A};function o(A,E){var T=a;return Object.prototype.hasOwnProperty.call(T,A)?T[A]:T[A]=E(A)}function s(A,E){this.h=E;for(var T=[],R=!0,N=A.length-1;0<=N;N--){var D=A[N]|0;R&&D==E||(T[N]=D,R=!1)}this.g=T}var a={};function u(A){return-128<=A&&128>A?o(A,function(E){return new s([E|0],0>E?-1:0)}):new s([A|0],0>A?-1:0)}function l(A){if(isNaN(A)||!isFinite(A))return h;if(0>A)return I(l(-A));for(var E=[],T=1,R=0;A>=T;R++)E[R]=A/T|0,T*=4294967296;return new s(E,0)}function c(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return I(c(A.substring(1),E));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=l(Math.pow(E,8)),R=h,N=0;N<A.length;N+=8){var D=Math.min(8,A.length-N),O=parseInt(A.substring(N,N+D),E);8>D?(D=l(Math.pow(E,D)),R=R.j(D).add(l(O))):(R=R.j(T),R=R.add(l(O)))}return R}var h=u(0),d=u(1),p=u(16777216);t=s.prototype,t.m=function(){if(w(this))return-I(this).m();for(var A=0,E=1,T=0;T<this.g.length;T++){var R=this.i(T);A+=(0<=R?R:4294967296+R)*E,E*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(v(this))return"0";if(w(this))return"-"+I(this).toString(A);for(var E=l(Math.pow(A,6)),T=this,R="";;){var N=S(T,E).g;T=_(T,N.j(E));var D=((0<T.g.length?T.g[0]:T.h)>>>0).toString(A);if(T=N,v(T))return D+R;for(;6>D.length;)D="0"+D;R=D+R}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function v(A){if(A.h!=0)return!1;for(var E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function w(A){return A.h==-1}t.l=function(A){return A=_(this,A),w(A)?-1:v(A)?0:1};function I(A){for(var E=A.g.length,T=[],R=0;R<E;R++)T[R]=~A.g[R];return new s(T,~A.h).add(d)}t.abs=function(){return w(this)?I(this):this},t.add=function(A){for(var E=Math.max(this.g.length,A.g.length),T=[],R=0,N=0;N<=E;N++){var D=R+(this.i(N)&65535)+(A.i(N)&65535),O=(D>>>16)+(this.i(N)>>>16)+(A.i(N)>>>16);R=O>>>16,D&=65535,O&=65535,T[N]=O<<16|D}return new s(T,T[T.length-1]&-2147483648?-1:0)};function _(A,E){return A.add(I(E))}t.j=function(A){if(v(this)||v(A))return h;if(w(this))return w(A)?I(this).j(I(A)):I(I(this).j(A));if(w(A))return I(this.j(I(A)));if(0>this.l(p)&&0>A.l(p))return l(this.m()*A.m());for(var E=this.g.length+A.g.length,T=[],R=0;R<2*E;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(var N=0;N<A.g.length;N++){var D=this.i(R)>>>16,O=this.i(R)&65535,q=A.i(N)>>>16,ee=A.i(N)&65535;T[2*R+2*N]+=O*ee,m(T,2*R+2*N),T[2*R+2*N+1]+=D*ee,m(T,2*R+2*N+1),T[2*R+2*N+1]+=O*q,m(T,2*R+2*N+1),T[2*R+2*N+2]+=D*q,m(T,2*R+2*N+2)}for(R=0;R<E;R++)T[R]=T[2*R+1]<<16|T[2*R];for(R=E;R<2*E;R++)T[R]=0;return new s(T,0)};function m(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function x(A,E){this.g=A,this.h=E}function S(A,E){if(v(E))throw Error("division by zero");if(v(A))return new x(h,h);if(w(A))return E=S(I(A),E),new x(I(E.g),I(E.h));if(w(E))return E=S(A,I(E)),new x(I(E.g),E.h);if(30<A.g.length){if(w(A)||w(E))throw Error("slowDivide_ only works with positive integers.");for(var T=d,R=E;0>=R.l(A);)T=P(T),R=P(R);var N=k(T,1),D=k(R,1);for(R=k(R,2),T=k(T,2);!v(R);){var O=D.add(R);0>=O.l(A)&&(N=N.add(T),D=O),R=k(R,1),T=k(T,1)}return E=_(A,N.j(E)),new x(N,E)}for(N=h;0<=A.l(E);){for(T=Math.max(1,Math.floor(A.m()/E.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),D=l(T),O=D.j(E);w(O)||0<O.l(A);)T-=R,D=l(T),O=D.j(E);v(D)&&(D=d),N=N.add(D),A=_(A,O)}return new x(N,A)}t.A=function(A){return S(this,A).h},t.and=function(A){for(var E=Math.max(this.g.length,A.g.length),T=[],R=0;R<E;R++)T[R]=this.i(R)&A.i(R);return new s(T,this.h&A.h)},t.or=function(A){for(var E=Math.max(this.g.length,A.g.length),T=[],R=0;R<E;R++)T[R]=this.i(R)|A.i(R);return new s(T,this.h|A.h)},t.xor=function(A){for(var E=Math.max(this.g.length,A.g.length),T=[],R=0;R<E;R++)T[R]=this.i(R)^A.i(R);return new s(T,this.h^A.h)};function P(A){for(var E=A.g.length+1,T=[],R=0;R<E;R++)T[R]=A.i(R)<<1|A.i(R-1)>>>31;return new s(T,A.h)}function k(A,E){var T=E>>5;E%=32;for(var R=A.g.length-T,N=[],D=0;D<R;D++)N[D]=0<E?A.i(D+T)>>>E|A.i(D+T+1)<<32-E:A.i(D+T);return new s(N,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Ox=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=c,pi=s}).apply(typeof ay<"u"?ay:typeof self<"u"?self:typeof window<"u"?window:{});var sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nx,sa,Px,Rl,f0,Dx,kx,Mx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,g,y){return f==Array.prototype||f==Object.prototype||(f[g]=y.value),f};function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof sl=="object"&&sl];for(var g=0;g<f.length;++g){var y=f[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var n=r(this);function i(f,g){if(g)e:{var y=n;f=f.split(".");for(var C=0;C<f.length-1;C++){var M=f[C];if(!(M in y))break e;y=y[M]}f=f[f.length-1],C=y[f],g=g(C),g!=C&&g!=null&&e(y,f,{configurable:!0,writable:!0,value:g})}}function o(f,g){f instanceof String&&(f+="");var y=0,C=!1,M={next:function(){if(!C&&y<f.length){var B=y++;return{value:g(B,f[B]),done:!1}}return C=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(f){return f||function(){return o(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function u(f){var g=typeof f;return g=g!="object"?g:f?Array.isArray(f)?"array":g:"null",g=="array"||g=="object"&&typeof f.length=="number"}function l(f){var g=typeof f;return g=="object"&&f!=null||g=="function"}function c(f,g,y){return f.call.apply(f.bind,arguments)}function h(f,g,y){if(!f)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,C),f.apply(g,M)}}return function(){return f.apply(g,arguments)}}function d(f,g,y){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:h,d.apply(null,arguments)}function p(f,g){var y=Array.prototype.slice.call(arguments,1);return function(){var C=y.slice();return C.push.apply(C,arguments),f.apply(this,C)}}function v(f,g){function y(){}y.prototype=g.prototype,f.aa=g.prototype,f.prototype=new y,f.prototype.constructor=f,f.Qb=function(C,M,B){for(var W=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)W[ke-2]=arguments[ke];return g.prototype[M].apply(C,W)}}function w(f){const g=f.length;if(0<g){const y=Array(g);for(let C=0;C<g;C++)y[C]=f[C];return y}return[]}function I(f,g){for(let y=1;y<arguments.length;y++){const C=arguments[y];if(u(C)){const M=f.length||0,B=C.length||0;f.length=M+B;for(let W=0;W<B;W++)f[M+W]=C[W]}else f.push(C)}}class _{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function m(f){return/^[\s\xa0]*$/.test(f)}function x(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function S(f){return S[" "](f),f}S[" "]=function(){};var P=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function k(f,g,y){for(const C in f)g.call(y,f[C],C,f)}function A(f,g){for(const y in f)g.call(void 0,f[y],y,f)}function E(f){const g={};for(const y in f)g[y]=f[y];return g}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(f,g){let y,C;for(let M=1;M<arguments.length;M++){C=arguments[M];for(y in C)f[y]=C[y];for(let B=0;B<T.length;B++)y=T[B],Object.prototype.hasOwnProperty.call(C,y)&&(f[y]=C[y])}}function N(f){var g=1;f=f.split(":");const y=[];for(;0<g&&f.length;)y.push(f.shift()),g--;return f.length&&y.push(f.join(":")),y}function D(f){a.setTimeout(()=>{throw f},0)}function O(){var f=Q;let g=null;return f.g&&(g=f.g,f.g=f.g.next,f.g||(f.h=null),g.next=null),g}class q{constructor(){this.h=this.g=null}add(g,y){const C=ee.get();C.set(g,y),this.h?this.h.next=C:this.g=C,this.h=C}}var ee=new _(()=>new oe,f=>f.reset());class oe{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let we,z=!1,Q=new q,se=()=>{const f=a.Promise.resolve(void 0);we=()=>{f.then(ce)}};var ce=()=>{for(var f;f=O();){try{f.h.call(f.g)}catch(y){D(y)}var g=ee;g.j(f),100>g.h&&(g.h++,f.next=g.g,g.g=f)}z=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function De(f,g){this.type=f,this.g=this.target=g,this.defaultPrevented=!1}De.prototype.h=function(){this.defaultPrevented=!0};var wr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,g=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const y=()=>{};a.addEventListener("test",y,g),a.removeEventListener("test",y,g)}catch{}return f}();function xr(f,g){if(De.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var y=this.type=f.type,C=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=g,g=f.relatedTarget){if(P){e:{try{S(g.nodeName);var M=!0;break e}catch{}M=!1}M||(g=null)}}else y=="mouseover"?g=f.fromElement:y=="mouseout"&&(g=f.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:pn[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&xr.aa.h.call(this)}}v(xr,De);var pn={2:"touch",3:"pen",4:"mouse"};xr.prototype.h=function(){xr.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Kr="closure_listenable_"+(1e6*Math.random()|0),vI=0;function mI(f,g,y,C,M){this.listener=f,this.proxy=null,this.src=g,this.type=y,this.capture=!!C,this.ha=M,this.key=++vI,this.da=this.fa=!1}function _u(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function wu(f){this.src=f,this.g={},this.h=0}wu.prototype.add=function(f,g,y,C,M){var B=f.toString();f=this.g[B],f||(f=this.g[B]=[],this.h++);var W=Tf(f,g,C,M);return-1<W?(g=f[W],y||(g.fa=!1)):(g=new mI(g,this.src,B,!!C,M),g.fa=y,f.push(g)),g};function If(f,g){var y=g.type;if(y in f.g){var C=f.g[y],M=Array.prototype.indexOf.call(C,g,void 0),B;(B=0<=M)&&Array.prototype.splice.call(C,M,1),B&&(_u(g),f.g[y].length==0&&(delete f.g[y],f.h--))}}function Tf(f,g,y,C){for(var M=0;M<f.length;++M){var B=f[M];if(!B.da&&B.listener==g&&B.capture==!!y&&B.ha==C)return M}return-1}var Cf="closure_lm_"+(1e6*Math.random()|0),Sf={};function Vp(f,g,y,C,M){if(C&&C.once)return jp(f,g,y,C,M);if(Array.isArray(g)){for(var B=0;B<g.length;B++)Vp(f,g[B],y,C,M);return null}return y=Nf(y),f&&f[Kr]?f.K(g,y,l(C)?!!C.capture:!!C,M):Up(f,g,y,!1,C,M)}function Up(f,g,y,C,M,B){if(!g)throw Error("Invalid event type");var W=l(M)?!!M.capture:!!M,ke=bf(f);if(ke||(f[Cf]=ke=new wu(f)),y=ke.add(g,y,C,W,B),y.proxy)return y;if(C=yI(),y.proxy=C,C.src=f,C.listener=y,f.addEventListener)wr||(M=W),M===void 0&&(M=!1),f.addEventListener(g.toString(),C,M);else if(f.attachEvent)f.attachEvent($p(g.toString()),C);else if(f.addListener&&f.removeListener)f.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return y}function yI(){function f(y){return g.call(f.src,f.listener,y)}const g=_I;return f}function jp(f,g,y,C,M){if(Array.isArray(g)){for(var B=0;B<g.length;B++)jp(f,g[B],y,C,M);return null}return y=Nf(y),f&&f[Kr]?f.L(g,y,l(C)?!!C.capture:!!C,M):Up(f,g,y,!0,C,M)}function zp(f,g,y,C,M){if(Array.isArray(g))for(var B=0;B<g.length;B++)zp(f,g[B],y,C,M);else C=l(C)?!!C.capture:!!C,y=Nf(y),f&&f[Kr]?(f=f.i,g=String(g).toString(),g in f.g&&(B=f.g[g],y=Tf(B,y,C,M),-1<y&&(_u(B[y]),Array.prototype.splice.call(B,y,1),B.length==0&&(delete f.g[g],f.h--)))):f&&(f=bf(f))&&(g=f.g[g.toString()],f=-1,g&&(f=Tf(g,y,C,M)),(y=-1<f?g[f]:null)&&Rf(y))}function Rf(f){if(typeof f!="number"&&f&&!f.da){var g=f.src;if(g&&g[Kr])If(g.i,f);else{var y=f.type,C=f.proxy;g.removeEventListener?g.removeEventListener(y,C,f.capture):g.detachEvent?g.detachEvent($p(y),C):g.addListener&&g.removeListener&&g.removeListener(C),(y=bf(g))?(If(y,f),y.h==0&&(y.src=null,g[Cf]=null)):_u(f)}}}function $p(f){return f in Sf?Sf[f]:Sf[f]="on"+f}function _I(f,g){if(f.da)f=!0;else{g=new xr(g,this);var y=f.listener,C=f.ha||f.src;f.fa&&Rf(f),f=y.call(C,g)}return f}function bf(f){return f=f[Cf],f instanceof wu?f:null}var Of="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nf(f){return typeof f=="function"?f:(f[Of]||(f[Of]=function(g){return f.handleEvent(g)}),f[Of])}function Ot(){me.call(this),this.i=new wu(this),this.M=this,this.F=null}v(Ot,me),Ot.prototype[Kr]=!0,Ot.prototype.removeEventListener=function(f,g,y,C){zp(this,f,g,y,C)};function Wt(f,g){var y,C=f.F;if(C)for(y=[];C;C=C.F)y.push(C);if(f=f.M,C=g.type||g,typeof g=="string")g=new De(g,f);else if(g instanceof De)g.target=g.target||f;else{var M=g;g=new De(C,f),R(g,M)}if(M=!0,y)for(var B=y.length-1;0<=B;B--){var W=g.g=y[B];M=xu(W,C,!0,g)&&M}if(W=g.g=f,M=xu(W,C,!0,g)&&M,M=xu(W,C,!1,g)&&M,y)for(B=0;B<y.length;B++)W=g.g=y[B],M=xu(W,C,!1,g)&&M}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var f=this.i,g;for(g in f.g){for(var y=f.g[g],C=0;C<y.length;C++)_u(y[C]);delete f.g[g],f.h--}}this.F=null},Ot.prototype.K=function(f,g,y,C){return this.i.add(String(f),g,!1,y,C)},Ot.prototype.L=function(f,g,y,C){return this.i.add(String(f),g,!0,y,C)};function xu(f,g,y,C){if(g=f.i.g[String(g)],!g)return!0;g=g.concat();for(var M=!0,B=0;B<g.length;++B){var W=g[B];if(W&&!W.da&&W.capture==y){var ke=W.listener,_t=W.ha||W.src;W.fa&&If(f.i,W),M=ke.call(_t,C)!==!1&&M}}return M&&!C.defaultPrevented}function Hp(f,g,y){if(typeof f=="function")y&&(f=d(f,y));else if(f&&typeof f.handleEvent=="function")f=d(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(f,g||0)}function Wp(f){f.g=Hp(()=>{f.g=null,f.i&&(f.i=!1,Wp(f))},f.l);const g=f.h;f.h=null,f.m.apply(null,g)}class wI extends me{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Wp(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ss(f){me.call(this),this.h=f,this.g={}}v(Ss,me);var Gp=[];function Kp(f){k(f.g,function(g,y){this.g.hasOwnProperty(y)&&Rf(g)},f),f.g={}}Ss.prototype.N=function(){Ss.aa.N.call(this),Kp(this)},Ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pf=a.JSON.stringify,xI=a.JSON.parse,EI=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Df(){}Df.prototype.h=null;function Xp(f){return f.h||(f.h=f.i())}function qp(){}var Rs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kf(){De.call(this,"d")}v(kf,De);function Mf(){De.call(this,"c")}v(Mf,De);var bi={},Yp=null;function Eu(){return Yp=Yp||new Ot}bi.La="serverreachability";function Qp(f){De.call(this,bi.La,f)}v(Qp,De);function bs(f){const g=Eu();Wt(g,new Qp(g))}bi.STAT_EVENT="statevent";function Zp(f,g){De.call(this,bi.STAT_EVENT,f),this.stat=g}v(Zp,De);function Gt(f){const g=Eu();Wt(g,new Zp(g,f))}bi.Ma="timingevent";function Jp(f,g){De.call(this,bi.Ma,f),this.size=g}v(Jp,De);function Os(f,g){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},g)}function Ns(){this.g=!0}Ns.prototype.xa=function(){this.g=!1};function AI(f,g,y,C,M,B){f.info(function(){if(f.g)if(B)for(var W="",ke=B.split("&"),_t=0;_t<ke.length;_t++){var Ae=ke[_t].split("=");if(1<Ae.length){var Nt=Ae[0];Ae=Ae[1];var Pt=Nt.split("_");W=2<=Pt.length&&Pt[1]=="type"?W+(Nt+"="+Ae+"&"):W+(Nt+"=redacted&")}}else W=null;else W=B;return"XMLHTTP REQ ("+C+") [attempt "+M+"]: "+g+`
`+y+`
`+W})}function II(f,g,y,C,M,B,W){f.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+M+"]: "+g+`
`+y+`
`+B+" "+W})}function ho(f,g,y,C){f.info(function(){return"XMLHTTP TEXT ("+g+"): "+CI(f,y)+(C?" "+C:"")})}function TI(f,g){f.info(function(){return"TIMEOUT: "+g})}Ns.prototype.info=function(){};function CI(f,g){if(!f.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(f=0;f<y.length;f++)if(Array.isArray(y[f])){var C=y[f];if(!(2>C.length)){var M=C[1];if(Array.isArray(M)&&!(1>M.length)){var B=M[0];if(B!="noop"&&B!="stop"&&B!="close")for(var W=1;W<M.length;W++)M[W]=""}}}}return Pf(y)}catch{return g}}var Au={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},eg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lf;function Iu(){}v(Iu,Df),Iu.prototype.g=function(){return new XMLHttpRequest},Iu.prototype.i=function(){return{}},Lf=new Iu;function Bn(f,g,y,C){this.j=f,this.i=g,this.l=y,this.R=C||1,this.U=new Ss(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tg}function tg(){this.i=null,this.g="",this.h=!1}var rg={},Ff={};function Bf(f,g,y){f.L=1,f.v=Ru(gn(g)),f.m=y,f.P=!0,ng(f,null)}function ng(f,g){f.F=Date.now(),Tu(f),f.A=gn(f.v);var y=f.A,C=f.R;Array.isArray(C)||(C=[String(C)]),mg(y.i,"t",C),f.C=0,y=f.j.J,f.h=new tg,f.g=Mg(f.j,y?g:null,!f.m),0<f.O&&(f.M=new wI(d(f.Y,f,f.g),f.O)),g=f.U,y=f.g,C=f.ca;var M="readystatechange";Array.isArray(M)||(M&&(Gp[0]=M.toString()),M=Gp);for(var B=0;B<M.length;B++){var W=Vp(y,M[B],C||g.handleEvent,!1,g.h||g);if(!W)break;g.g[W.key]=W}g=f.H?E(f.H):{},f.m?(f.u||(f.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,g)):(f.u="GET",f.g.ea(f.A,f.u,null,g)),bs(),AI(f.i,f.u,f.A,f.l,f.R,f.m)}Bn.prototype.ca=function(f){f=f.target;const g=this.M;g&&vn(f)==3?g.j():this.Y(f)},Bn.prototype.Y=function(f){try{if(f==this.g)e:{const Pt=vn(this.g);var g=this.g.Ba();const vo=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||Ig(this.g)))){this.J||Pt!=4||g==7||(g==8||0>=vo?bs(3):bs(2)),Vf(this);var y=this.g.Z();this.X=y;t:if(ig(this)){var C=Ig(this.g);f="";var M=C.length,B=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Oi(this),Ps(this);var W="";break t}this.h.i=new a.TextDecoder}for(g=0;g<M;g++)this.h.h=!0,f+=this.h.i.decode(C[g],{stream:!(B&&g==M-1)});C.length=0,this.h.g+=f,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=y==200,II(this.i,this.u,this.A,this.l,this.R,Pt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,_t=this.g;if((ke=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(ke)){var Ae=ke;break t}}Ae=null}if(y=Ae)ho(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Uf(this,y);else{this.o=!1,this.s=3,Gt(12),Oi(this),Ps(this);break e}}if(this.P){y=!0;let Pr;for(;!this.J&&this.C<W.length;)if(Pr=SI(this,W),Pr==Ff){Pt==4&&(this.s=4,Gt(14),y=!1),ho(this.i,this.l,null,"[Incomplete Response]");break}else if(Pr==rg){this.s=4,Gt(15),ho(this.i,this.l,W,"[Invalid Chunk]"),y=!1;break}else ho(this.i,this.l,Pr,null),Uf(this,Pr);if(ig(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||W.length!=0||this.h.h||(this.s=1,Gt(16),y=!1),this.o=this.o&&y,!y)ho(this.i,this.l,W,"[Invalid Chunked Response]"),Oi(this),Ps(this);else if(0<W.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Gf(Nt),Nt.M=!0,Gt(11))}}else ho(this.i,this.l,W,null),Uf(this,W);Pt==4&&Oi(this),this.o&&!this.J&&(Pt==4?Ng(this.j,this):(this.o=!1,Tu(this)))}else HI(this.g),y==400&&0<W.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),Oi(this),Ps(this)}}}catch{}finally{}};function ig(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function SI(f,g){var y=f.C,C=g.indexOf(`
`,y);return C==-1?Ff:(y=Number(g.substring(y,C)),isNaN(y)?rg:(C+=1,C+y>g.length?Ff:(g=g.slice(C,C+y),f.C=C+y,g)))}Bn.prototype.cancel=function(){this.J=!0,Oi(this)};function Tu(f){f.S=Date.now()+f.I,og(f,f.I)}function og(f,g){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Os(d(f.ba,f),g)}function Vf(f){f.B&&(a.clearTimeout(f.B),f.B=null)}Bn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(TI(this.i,this.A),this.L!=2&&(bs(),Gt(17)),Oi(this),this.s=2,Ps(this)):og(this,this.S-f)};function Ps(f){f.j.G==0||f.J||Ng(f.j,f)}function Oi(f){Vf(f);var g=f.M;g&&typeof g.ma=="function"&&g.ma(),f.M=null,Kp(f.U),f.g&&(g=f.g,f.g=null,g.abort(),g.ma())}function Uf(f,g){try{var y=f.j;if(y.G!=0&&(y.g==f||jf(y.h,f))){if(!f.K&&jf(y.h,f)&&y.G==3){try{var C=y.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var M=C;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<f.F)ku(y),Pu(y);else break e;Wf(y),Gt(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=Os(d(y.Za,y),6e3));if(1>=ug(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Pi(y,11)}else if((f.K||y.g==f)&&ku(y),!m(g))for(M=y.Da.g.parse(g),g=0;g<M.length;g++){let Ae=M[g];if(y.T=Ae[0],Ae=Ae[1],y.G==2)if(Ae[0]=="c"){y.K=Ae[1],y.ia=Ae[2];const Nt=Ae[3];Nt!=null&&(y.la=Nt,y.j.info("VER="+y.la));const Pt=Ae[4];Pt!=null&&(y.Aa=Pt,y.j.info("SVER="+y.Aa));const vo=Ae[5];vo!=null&&typeof vo=="number"&&0<vo&&(C=1.5*vo,y.L=C,y.j.info("backChannelRequestTimeoutMs_="+C)),C=y;const Pr=f.g;if(Pr){const Lu=Pr.g?Pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lu){var B=C.h;B.g||Lu.indexOf("spdy")==-1&&Lu.indexOf("quic")==-1&&Lu.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(zf(B,B.h),B.h=null))}if(C.D){const Kf=Pr.g?Pr.g.getResponseHeader("X-HTTP-Session-Id"):null;Kf&&(C.ya=Kf,Fe(C.I,C.D,Kf))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-f.F,y.j.info("Handshake RTT: "+y.R+"ms")),C=y;var W=f;if(C.qa=kg(C,C.J?C.ia:null,C.W),W.K){lg(C.h,W);var ke=W,_t=C.L;_t&&(ke.I=_t),ke.B&&(Vf(ke),Tu(ke)),C.g=W}else bg(C);0<y.i.length&&Du(y)}else Ae[0]!="stop"&&Ae[0]!="close"||Pi(y,7);else y.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Pi(y,7):Hf(y):Ae[0]!="noop"&&y.l&&y.l.ta(Ae),y.v=0)}}bs(4)}catch{}}var RI=class{constructor(f,g){this.g=f,this.map=g}};function sg(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ag(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ug(f){return f.h?1:f.g?f.g.size:0}function jf(f,g){return f.h?f.h==g:f.g?f.g.has(g):!1}function zf(f,g){f.g?f.g.add(g):f.h=g}function lg(f,g){f.h&&f.h==g?f.h=null:f.g&&f.g.has(g)&&f.g.delete(g)}sg.prototype.cancel=function(){if(this.i=cg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function cg(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let g=f.i;for(const y of f.g.values())g=g.concat(y.D);return g}return w(f.i)}function bI(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var g=[],y=f.length,C=0;C<y;C++)g.push(f[C]);return g}g=[],y=0;for(C in f)g[y++]=f[C];return g}function OI(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(u(f)||typeof f=="string"){var g=[];f=f.length;for(var y=0;y<f;y++)g.push(y);return g}g=[],y=0;for(const C in f)g[y++]=C;return g}}}function fg(f,g){if(f.forEach&&typeof f.forEach=="function")f.forEach(g,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,g,void 0);else for(var y=OI(f),C=bI(f),M=C.length,B=0;B<M;B++)g.call(void 0,C[B],y&&y[B],f)}var hg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NI(f,g){if(f){f=f.split("&");for(var y=0;y<f.length;y++){var C=f[y].indexOf("="),M=null;if(0<=C){var B=f[y].substring(0,C);M=f[y].substring(C+1)}else B=f[y];g(B,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Ni(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ni){this.h=f.h,Cu(this,f.j),this.o=f.o,this.g=f.g,Su(this,f.s),this.l=f.l;var g=f.i,y=new Ms;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),dg(this,y),this.m=f.m}else f&&(g=String(f).match(hg))?(this.h=!1,Cu(this,g[1]||"",!0),this.o=Ds(g[2]||""),this.g=Ds(g[3]||"",!0),Su(this,g[4]),this.l=Ds(g[5]||"",!0),dg(this,g[6]||"",!0),this.m=Ds(g[7]||"")):(this.h=!1,this.i=new Ms(null,this.h))}Ni.prototype.toString=function(){var f=[],g=this.j;g&&f.push(ks(g,pg,!0),":");var y=this.g;return(y||g=="file")&&(f.push("//"),(g=this.o)&&f.push(ks(g,pg,!0),"@"),f.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&f.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&f.push("/"),f.push(ks(y,y.charAt(0)=="/"?kI:DI,!0))),(y=this.i.toString())&&f.push("?",y),(y=this.m)&&f.push("#",ks(y,LI)),f.join("")};function gn(f){return new Ni(f)}function Cu(f,g,y){f.j=y?Ds(g,!0):g,f.j&&(f.j=f.j.replace(/:$/,""))}function Su(f,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);f.s=g}else f.s=null}function dg(f,g,y){g instanceof Ms?(f.i=g,FI(f.i,f.h)):(y||(g=ks(g,MI)),f.i=new Ms(g,f.h))}function Fe(f,g,y){f.i.set(g,y)}function Ru(f){return Fe(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Ds(f,g){return f?g?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ks(f,g,y){return typeof f=="string"?(f=encodeURI(f).replace(g,PI),y&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function PI(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var pg=/[#\/\?@]/g,DI=/[#\?:]/g,kI=/[#\?]/g,MI=/[#\?@]/g,LI=/#/g;function Ms(f,g){this.h=this.g=null,this.i=f||null,this.j=!!g}function Vn(f){f.g||(f.g=new Map,f.h=0,f.i&&NI(f.i,function(g,y){f.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=Ms.prototype,t.add=function(f,g){Vn(this),this.i=null,f=po(this,f);var y=this.g.get(f);return y||this.g.set(f,y=[]),y.push(g),this.h+=1,this};function gg(f,g){Vn(f),g=po(f,g),f.g.has(g)&&(f.i=null,f.h-=f.g.get(g).length,f.g.delete(g))}function vg(f,g){return Vn(f),g=po(f,g),f.g.has(g)}t.forEach=function(f,g){Vn(this),this.g.forEach(function(y,C){y.forEach(function(M){f.call(g,M,C,this)},this)},this)},t.na=function(){Vn(this);const f=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let C=0;C<g.length;C++){const M=f[C];for(let B=0;B<M.length;B++)y.push(g[C])}return y},t.V=function(f){Vn(this);let g=[];if(typeof f=="string")vg(this,f)&&(g=g.concat(this.g.get(po(this,f))));else{f=Array.from(this.g.values());for(let y=0;y<f.length;y++)g=g.concat(f[y])}return g},t.set=function(f,g){return Vn(this),this.i=null,f=po(this,f),vg(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[g]),this.h+=1,this},t.get=function(f,g){return f?(f=this.V(f),0<f.length?String(f[0]):g):g};function mg(f,g,y){gg(f,g),0<y.length&&(f.i=null,f.g.set(po(f,g),w(y)),f.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var C=g[y];const B=encodeURIComponent(String(C)),W=this.V(C);for(C=0;C<W.length;C++){var M=B;W[C]!==""&&(M+="="+encodeURIComponent(String(W[C]))),f.push(M)}}return this.i=f.join("&")};function po(f,g){return g=String(g),f.j&&(g=g.toLowerCase()),g}function FI(f,g){g&&!f.j&&(Vn(f),f.i=null,f.g.forEach(function(y,C){var M=C.toLowerCase();C!=M&&(gg(this,C),mg(this,M,y))},f)),f.j=g}function BI(f,g){const y=new Ns;if(a.Image){const C=new Image;C.onload=p(Un,y,"TestLoadImage: loaded",!0,g,C),C.onerror=p(Un,y,"TestLoadImage: error",!1,g,C),C.onabort=p(Un,y,"TestLoadImage: abort",!1,g,C),C.ontimeout=p(Un,y,"TestLoadImage: timeout",!1,g,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=f}else g(!1)}function VI(f,g){const y=new Ns,C=new AbortController,M=setTimeout(()=>{C.abort(),Un(y,"TestPingServer: timeout",!1,g)},1e4);fetch(f,{signal:C.signal}).then(B=>{clearTimeout(M),B.ok?Un(y,"TestPingServer: ok",!0,g):Un(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(M),Un(y,"TestPingServer: error",!1,g)})}function Un(f,g,y,C,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),C(y)}catch{}}function UI(){this.g=new EI}function jI(f,g,y){const C=y||"";try{fg(f,function(M,B){let W=M;l(M)&&(W=Pf(M)),g.push(C+B+"="+encodeURIComponent(W))})}catch(M){throw g.push(C+"type="+encodeURIComponent("_badmap")),M}}function bu(f){this.l=f.Ub||null,this.j=f.eb||!1}v(bu,Df),bu.prototype.g=function(){return new Ou(this.l,this.j)},bu.prototype.i=function(f){return function(){return f}}({});function Ou(f,g){Ot.call(this),this.D=f,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Ou,Ot),t=Ou.prototype,t.open=function(f,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=g,this.readyState=1,Fs(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(g.body=f),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ls(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Fs(this)),this.g&&(this.readyState=3,Fs(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yg(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function yg(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var g=f.value?f.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!f.done}))&&(this.response=this.responseText+=g)}f.done?Ls(this):Fs(this),this.readyState==3&&yg(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Ls(this))},t.Qa=function(f){this.g&&(this.response=f,Ls(this))},t.ga=function(){this.g&&Ls(this)};function Ls(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Fs(f)}t.setRequestHeader=function(f,g){this.u.append(f,g)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,f.push(y[0]+": "+y[1]),y=g.next();return f.join(`\r
`)};function Fs(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ou.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function _g(f){let g="";return k(f,function(y,C){g+=C,g+=":",g+=y,g+=`\r
`}),g}function $f(f,g,y){e:{for(C in y){var C=!1;break e}C=!0}C||(y=_g(y),typeof f=="string"?y!=null&&encodeURIComponent(String(y)):Fe(f,g,y))}function qe(f){Ot.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(qe,Ot);var zI=/^https?$/i,$I=["POST","PUT"];t=qe.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,g,y,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);g=g?g.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lf.g(),this.v=this.o?Xp(this.o):Xp(Lf),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(g,String(f),!0),this.B=!1}catch(B){wg(this,B);return}if(f=y||"",y=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var M in C)y.set(M,C[M]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const B of C.keys())y.set(B,C.get(B));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(y.keys()).find(B=>B.toLowerCase()=="content-type"),M=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call($I,g,void 0))||C||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,W]of y)this.g.setRequestHeader(B,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ag(this),this.u=!0,this.g.send(f),this.u=!1}catch(B){wg(this,B)}};function wg(f,g){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=g,f.m=5,xg(f),Nu(f)}function xg(f){f.A||(f.A=!0,Wt(f,"complete"),Wt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Wt(this,"complete"),Wt(this,"abort"),Nu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nu(this,!0)),qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Eg(this):this.bb())},t.bb=function(){Eg(this)};function Eg(f){if(f.h&&typeof s<"u"&&(!f.v[1]||vn(f)!=4||f.Z()!=2)){if(f.u&&vn(f)==4)Hp(f.Ea,0,f);else if(Wt(f,"readystatechange"),vn(f)==4){f.h=!1;try{const W=f.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var C;if(C=W===0){var M=String(f.D).match(hg)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),C=!zI.test(M?M.toLowerCase():"")}y=C}if(y)Wt(f,"complete"),Wt(f,"success");else{f.m=6;try{var B=2<vn(f)?f.g.statusText:""}catch{B=""}f.l=B+" ["+f.Z()+"]",xg(f)}}finally{Nu(f)}}}}function Nu(f,g){if(f.g){Ag(f);const y=f.g,C=f.v[0]?()=>{}:null;f.g=null,f.v=null,g||Wt(f,"ready");try{y.onreadystatechange=C}catch{}}}function Ag(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function vn(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var g=this.g.responseText;return f&&g.indexOf(f)==0&&(g=g.substring(f.length)),xI(g)}};function Ig(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function HI(f){const g={};f=(f.g&&2<=vn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<f.length;C++){if(m(f[C]))continue;var y=N(f[C]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const B=g[M]||[];g[M]=B,B.push(y)}A(g,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bs(f,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[f]||g}function Tg(f){this.Aa=0,this.i=[],this.j=new Ns,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bs("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bs("baseRetryDelayMs",5e3,f),this.cb=Bs("retryDelaySeedMs",1e4,f),this.Wa=Bs("forwardChannelMaxRetries",2,f),this.wa=Bs("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new sg(f&&f.concurrentRequestLimit),this.Da=new UI,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tg.prototype,t.la=8,t.G=1,t.connect=function(f,g,y,C){Gt(0),this.W=f,this.H=g||{},y&&C!==void 0&&(this.H.OSID=y,this.H.OAID=C),this.F=this.X,this.I=kg(this,null,this.W),Du(this)};function Hf(f){if(Cg(f),f.G==3){var g=f.U++,y=gn(f.I);if(Fe(y,"SID",f.K),Fe(y,"RID",g),Fe(y,"TYPE","terminate"),Vs(f,y),g=new Bn(f,f.j,g),g.L=2,g.v=Ru(gn(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=g.v,y=!0),y||(g.g=Mg(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Tu(g)}Dg(f)}function Pu(f){f.g&&(Gf(f),f.g.cancel(),f.g=null)}function Cg(f){Pu(f),f.u&&(a.clearTimeout(f.u),f.u=null),ku(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function Du(f){if(!ag(f.h)&&!f.s){f.s=!0;var g=f.Ga;we||se(),z||(we(),z=!0),Q.add(g,f),f.B=0}}function WI(f,g){return ug(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=g.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Os(d(f.Ga,f,g),Pg(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const M=new Bn(this,this.j,f);let B=this.o;if(this.S&&(B?(B=E(B),R(B,this.S)):B=this.S),this.m!==null||this.O||(M.H=B,B=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var C=this.i[y];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Rg(this,M,g),y=gn(this.I),Fe(y,"RID",f),Fe(y,"CVER",22),this.D&&Fe(y,"X-HTTP-Session-Id",this.D),Vs(this,y),B&&(this.O?g="headers="+encodeURIComponent(String(_g(B)))+"&"+g:this.m&&$f(y,this.m,B)),zf(this.h,M),this.Ua&&Fe(y,"TYPE","init"),this.P?(Fe(y,"$req",g),Fe(y,"SID","null"),M.T=!0,Bf(M,y,null)):Bf(M,y,g),this.G=2}}else this.G==3&&(f?Sg(this,f):this.i.length==0||ag(this.h)||Sg(this))};function Sg(f,g){var y;g?y=g.l:y=f.U++;const C=gn(f.I);Fe(C,"SID",f.K),Fe(C,"RID",y),Fe(C,"AID",f.T),Vs(f,C),f.m&&f.o&&$f(C,f.m,f.o),y=new Bn(f,f.j,y,f.B+1),f.m===null&&(y.H=f.o),g&&(f.i=g.D.concat(f.i)),g=Rg(f,y,1e3),y.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),zf(f.h,y),Bf(y,C,g)}function Vs(f,g){f.H&&k(f.H,function(y,C){Fe(g,C,y)}),f.l&&fg({},function(y,C){Fe(g,C,y)})}function Rg(f,g,y){y=Math.min(f.i.length,y);var C=f.l?d(f.l.Na,f.l,f):null;e:{var M=f.i;let B=-1;for(;;){const W=["count="+y];B==-1?0<y?(B=M[0].g,W.push("ofs="+B)):B=0:W.push("ofs="+B);let ke=!0;for(let _t=0;_t<y;_t++){let Ae=M[_t].g;const Nt=M[_t].map;if(Ae-=B,0>Ae)B=Math.max(0,M[_t].g-100),ke=!1;else try{jI(Nt,W,"req"+Ae+"_")}catch{C&&C(Nt)}}if(ke){C=W.join("&");break e}}}return f=f.i.splice(0,y),g.D=f,C}function bg(f){if(!f.g&&!f.u){f.Y=1;var g=f.Fa;we||se(),z||(we(),z=!0),Q.add(g,f),f.v=0}}function Wf(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Os(d(f.Fa,f),Pg(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,Og(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Os(d(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),Pu(this),Og(this))};function Gf(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function Og(f){f.g=new Bn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var g=gn(f.qa);Fe(g,"RID","rpc"),Fe(g,"SID",f.K),Fe(g,"AID",f.T),Fe(g,"CI",f.F?"0":"1"),!f.F&&f.ja&&Fe(g,"TO",f.ja),Fe(g,"TYPE","xmlhttp"),Vs(f,g),f.m&&f.o&&$f(g,f.m,f.o),f.L&&(f.g.I=f.L);var y=f.g;f=f.ia,y.L=1,y.v=Ru(gn(g)),y.m=null,y.P=!0,ng(y,f)}t.Za=function(){this.C!=null&&(this.C=null,Pu(this),Wf(this),Gt(19))};function ku(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function Ng(f,g){var y=null;if(f.g==g){ku(f),Gf(f),f.g=null;var C=2}else if(jf(f.h,g))y=g.D,lg(f.h,g),C=1;else return;if(f.G!=0){if(g.o)if(C==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var M=f.B;C=Eu(),Wt(C,new Jp(C,y)),Du(f)}else bg(f);else if(M=g.s,M==3||M==0&&0<g.X||!(C==1&&WI(f,g)||C==2&&Wf(f)))switch(y&&0<y.length&&(g=f.h,g.i=g.i.concat(y)),M){case 1:Pi(f,5);break;case 4:Pi(f,10);break;case 3:Pi(f,6);break;default:Pi(f,2)}}}function Pg(f,g){let y=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(y*=2),y*g}function Pi(f,g){if(f.j.info("Error code "+g),g==2){var y=d(f.fb,f),C=f.Xa;const M=!C;C=new Ni(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Cu(C,"https"),Ru(C),M?BI(C.toString(),y):VI(C.toString(),y)}else Gt(2);f.G=0,f.l&&f.l.sa(g),Dg(f),Cg(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function Dg(f){if(f.G=0,f.ka=[],f.l){const g=cg(f.h);(g.length!=0||f.i.length!=0)&&(I(f.ka,g),I(f.ka,f.i),f.h.i.length=0,w(f.i),f.i.length=0),f.l.ra()}}function kg(f,g,y){var C=y instanceof Ni?gn(y):new Ni(y);if(C.g!="")g&&(C.g=g+"."+C.g),Su(C,C.s);else{var M=a.location;C=M.protocol,g=g?g+"."+M.hostname:M.hostname,M=+M.port;var B=new Ni(null);C&&Cu(B,C),g&&(B.g=g),M&&Su(B,M),y&&(B.l=y),C=B}return y=f.D,g=f.ya,y&&g&&Fe(C,y,g),Fe(C,"VER",f.la),Vs(f,C),C}function Mg(f,g,y){if(g&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=f.Ca&&!f.pa?new qe(new bu({eb:y})):new qe(f.pa),g.Ha(f.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lg(){}t=Lg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Mu(){}Mu.prototype.g=function(f,g){return new hr(f,g)};function hr(f,g){Ot.call(this),this.g=new Tg(g),this.l=f,this.h=g&&g.messageUrlParams||null,f=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(f?f["X-WebChannel-Content-Type"]=g.messageContentType:f={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(f?f["X-WebChannel-Client-Profile"]=g.va:f={"X-WebChannel-Client-Profile":g.va}),this.g.S=f,(f=g&&g.Sb)&&!m(f)&&(this.g.m=f),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!m(g)&&(this.g.D=g,f=this.h,f!==null&&g in f&&(f=this.h,g in f&&delete f[g])),this.j=new go(this)}v(hr,Ot),hr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hr.prototype.close=function(){Hf(this.g)},hr.prototype.o=function(f){var g=this.g;if(typeof f=="string"){var y={};y.__data__=f,f=y}else this.u&&(y={},y.__data__=Pf(f),f=y);g.i.push(new RI(g.Ya++,f)),g.G==3&&Du(g)},hr.prototype.N=function(){this.g.l=null,delete this.j,Hf(this.g),delete this.g,hr.aa.N.call(this)};function Fg(f){kf.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var g=f.__sm__;if(g){e:{for(const y in g){f=y;break e}f=void 0}(this.i=f)&&(f=this.i,g=g!==null&&f in g?g[f]:void 0),this.data=g}else this.data=f}v(Fg,kf);function Bg(){Mf.call(this),this.status=1}v(Bg,Mf);function go(f){this.g=f}v(go,Lg),go.prototype.ua=function(){Wt(this.g,"a")},go.prototype.ta=function(f){Wt(this.g,new Fg(f))},go.prototype.sa=function(f){Wt(this.g,new Bg)},go.prototype.ra=function(){Wt(this.g,"b")},Mu.prototype.createWebChannel=Mu.prototype.g,hr.prototype.send=hr.prototype.o,hr.prototype.open=hr.prototype.m,hr.prototype.close=hr.prototype.close,Mx=function(){return new Mu},kx=function(){return Eu()},Dx=bi,f0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Au.NO_ERROR=0,Au.TIMEOUT=8,Au.HTTP_ERROR=6,Rl=Au,eg.COMPLETE="complete",Px=eg,qp.EventType=Rs,Rs.OPEN="a",Rs.CLOSE="b",Rs.ERROR="c",Rs.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,sa=qp,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,Nx=qe}).apply(typeof sl<"u"?sl:typeof self<"u"?self:typeof window<"u"?window:{});const uy="@firebase/firestore",ly="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xs="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new M1("@firebase/firestore");function Eo(){return ro.logLevel}function G(t,...e){if(ro.logLevel<=ge.DEBUG){const r=e.map(B1);ro.debug(`Firestore (${xs}): ${t}`,...r)}}function Pn(t,...e){if(ro.logLevel<=ge.ERROR){const r=e.map(B1);ro.error(`Firestore (${xs}): ${t}`,...r)}}function os(t,...e){if(ro.logLevel<=ge.WARN){const r=e.map(B1);ro.warn(`Firestore (${xs}): ${t}`,...r)}}function B1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,Lx(t,n,r)}function Lx(t,e,r){let n=`FIRESTORE (${xs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Pn(n),new Error(n)}function Re(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||Lx(e,i,n)}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends dn{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ft.UNAUTHENTICATED))}shutdown(){}}class RO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class bO{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Re(this.o===void 0,42304);let n=this.i;const i=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let o=new Cn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Cn,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Cn)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Re(typeof n.accessToken=="string",31837,{l:n}),new Fx(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class OO{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NO{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new OO(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PO{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Re(this.o===void 0,3512);const n=o=>{o.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,G("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const i=o=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Re(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new cy(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=DO(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<r&&(n+=e.charAt(i[o]%62))}return n}}function he(t,e){return t<e?-1:t>e?1:0}function h0(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=t.codePointAt(r),i=e.codePointAt(r);if(n!==i){if(n<128&&i<128)return he(n,i);{const o=Bx(),s=kO(o.encode(fy(t,r)),o.encode(fy(e,r)));return s!==0?s:he(n,i)}}r+=n>65535?2:1}return he(t.length,e.length)}function fy(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function kO(t,e){for(let r=0;r<t.length&&r<e.length;++r)if(t[r]!==e[r])return he(t[r],e[r]);return he(t.length,e.length)}function ss(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=-62135596800,dy=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*dy);return new ct(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new X(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new X(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<hy)throw new X(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dy}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-hy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new ct(0,0))}static max(){return new ue(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="__name__";class Yr{constructor(e,r,n){r===void 0?r=0:r>e.length&&ne(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&ne(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Yr.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Yr?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const o=Yr.compareSegments(e.get(i),r.get(i));if(o!==0)return o}return he(e.length,r.length)}static compareSegments(e,r){const n=Yr.isNumericId(e),i=Yr.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?Yr.extractNumericId(e).compare(Yr.extractNumericId(r)):h0(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pi.fromString(e.substring(4,e.length-2))}}class je extends Yr{construct(e,r,n){return new je(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new X(j.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new je(r)}static emptyPath(){return new je([])}}const MO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends Yr{construct(e,r,n){return new Tt(e,r,n)}static isValidIdentifier(e){return MO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===py}static keyField(){return new Tt([py])}static fromServerFormat(e){const r=[];let n="",i=0;const o=()=>{if(n.length===0)throw new X(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new X(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new X(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(n+=a,i++):(o(),i++)}if(o(),s)throw new X(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(r)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(je.fromString(e))}static fromName(e){return new J(je.fromString(e).popFirst(5))}static empty(){return new J(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return je.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new je(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=-1;function LO(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(n===1e9?new ct(r+1,0):new ct(r,n));return new yi(i,J.empty(),e)}function FO(t){return new yi(t.readTime,t.key,Ga)}class yi{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new yi(ue.min(),J.empty(),Ga)}static max(){return new yi(ue.max(),J.empty(),Ga)}}function BO(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=J.comparator(t.documentKey,e.documentKey),r!==0?r:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Es(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==VO)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new U((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(r,o).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof U?r:U.resolve(r)}catch(r){return U.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):U.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):U.reject(r)}static resolve(e){return new U((r,n)=>{r(e)})}static reject(e){return new U((r,n)=>{n(e)})}static waitFor(e){return new U((r,n)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&r()},u=>n(u))}),s=!0,o===i&&r()})}static or(e){let r=U.resolve(!1);for(const n of e)r=r.next(i=>i?U.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,o)=>{n.push(r.call(this,i,o))}),this.waitFor(n)}static mapArray(e,r){return new U((n,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const l=u;r(e[l]).next(c=>{s[l]=c,++a,a===o&&n(s)},c=>i(c))}})}static doWhile(e,r){return new U((n,i)=>{const o=()=>{e()===!0?r().next(()=>{o()},i):n()};o()})}}function jO(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function As(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ue(n),this.ce=n=>r.writeSequenceNumber(n))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}tf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=-1;function rf(t){return t==null}function pc(t){return t===0&&1/t==-1/0}function zO(t){return typeof t=="number"&&Number.isInteger(t)&&!pc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="";function $O(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=gy(e)),e=HO(t.get(r),e);return gy(e)}function HO(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const o=t.charAt(i);switch(o){case"\0":r+="";break;case Ux:r+="";break;default:r+=o}}return r}function gy(t){return t+Ux+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Si(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function jx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,r){this.comparator=e,this.root=r||It.EMPTY}insert(e,r){return new Xe(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new al(this.root,e,this.comparator,!1)}getReverseIterator(){return new al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new al(this.root,e,this.comparator,!0)}}class al{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?n(e.key,r):1,r&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,r,n,i,o){this.key=e,this.value=r,this.color=n??It.RED,this.left=i??It.EMPTY,this.right=o??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,o){return new It(e??this.key,r??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,r,n),null):o===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return It.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,r,n,i,o){return this}insert(e,r,n){return new It(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new my(this.data.getIterator())}getIteratorFrom(e){return new my(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new ft(this.comparator);return r.data=e,r}}class my{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new gr([])}unionWith(e){let r=new ft(Tt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new gr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ss(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new zx("Invalid base64 string: "+o):o}}(e);return new bt(r)}static fromUint8Array(e){const r=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new bt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const WO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _i(t){if(Re(!!t,39018),typeof t=="string"){let e=0;const r=WO.exec(t);if(Re(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wi(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="server_timestamp",Hx="__type__",Wx="__previous_value__",Gx="__local_write_time__";function U1(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Hx])===null||r===void 0?void 0:r.stringValue)===$x}function nf(t){const e=t.mapValue.fields[Wx];return U1(e)?nf(e):e}function Ka(t){const e=_i(t.mapValue.fields[Gx].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,r,n,i,o,s,a,u,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=c}}const gc="(default)";class Xa{constructor(e,r){this.projectId=e,this.database=r||gc}static empty(){return new Xa("","")}get isDefaultDatabase(){return this.database===gc}isEqual(e){return e instanceof Xa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="__type__",Xx="__max__",ul={mapValue:{fields:{__type__:{stringValue:Xx}}}},qx="__vector__",vc="value";function xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?U1(t)?4:XO(t)?9007199254740991:KO(t)?10:11:ne(28295,{value:t})}function fn(t,e){if(t===e)return!0;const r=xi(t);if(r!==xi(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ka(t).isEqual(Ka(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=_i(i.timestampValue),a=_i(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return wi(i.bytesValue).isEqual(wi(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Qe(i.geoPointValue.latitude)===Qe(o.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Qe(i.integerValue)===Qe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Qe(i.doubleValue),a=Qe(o.doubleValue);return s===a?pc(s)===pc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ss(t.arrayValue.values||[],e.arrayValue.values||[],fn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(vy(s)!==vy(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!fn(s[u],a[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function qa(t,e){return(t.values||[]).find(r=>fn(r,e))!==void 0}function as(t,e){if(t===e)return 0;const r=xi(t),n=xi(e);if(r!==n)return he(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Qe(o.integerValue||o.doubleValue),u=Qe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return yy(t.timestampValue,e.timestampValue);case 4:return yy(Ka(t),Ka(e));case 5:return h0(t.stringValue,e.stringValue);case 6:return function(o,s){const a=wi(o),u=wi(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=he(a[l],u[l]);if(c!==0)return c}return he(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=he(Qe(o.latitude),Qe(s.latitude));return a!==0?a:he(Qe(o.longitude),Qe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _y(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,c;const h=o.fields||{},d=s.fields||{},p=(a=h[vc])===null||a===void 0?void 0:a.arrayValue,v=(u=d[vc])===null||u===void 0?void 0:u.arrayValue,w=he(((l=p==null?void 0:p.values)===null||l===void 0?void 0:l.length)||0,((c=v==null?void 0:v.values)===null||c===void 0?void 0:c.length)||0);return w!==0?w:_y(p,v)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===ul.mapValue&&s===ul.mapValue)return 0;if(o===ul.mapValue)return 1;if(s===ul.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),l=s.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let h=0;h<u.length&&h<c.length;++h){const d=h0(u[h],c[h]);if(d!==0)return d;const p=as(a[u[h]],l[c[h]]);if(p!==0)return p}return he(u.length,c.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{Pe:r})}}function yy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const r=_i(t),n=_i(e),i=he(r.seconds,n.seconds);return i!==0?i:he(r.nanos,n.nanos)}function _y(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const o=as(r[i],n[i]);if(o)return o}return he(r.length,n.length)}function us(t){return d0(t)}function d0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=_i(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return wi(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return J.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const o of r.values||[])i?i=!1:n+=",",n+=d0(o);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const s of n)o?o=!1:i+=",",i+=`${s}:${d0(r.fields[s])}`;return i+"}"}(t.mapValue):ne(61005,{value:t})}function bl(t){switch(xi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nf(t);return e?16+bl(e):16;case 5:return 2*t.stringValue.length;case 6:return wi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,o)=>i+bl(o),0)}(t.arrayValue);case 10:case 11:return function(n){let i=0;return Si(n.fields,(o,s)=>{i+=o.length+bl(s)}),i}(t.mapValue);default:throw ne(13486,{value:t})}}function wy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function p0(t){return!!t&&"integerValue"in t}function j1(t){return!!t&&"arrayValue"in t}function xy(t){return!!t&&"nullValue"in t}function Ey(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ol(t){return!!t&&"mapValue"in t}function KO(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Kx])===null||r===void 0?void 0:r.stringValue)===qx}function xa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Si(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=xa(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=xa(t.arrayValue.values[r]);return e}return Object.assign({},t)}function XO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Xx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Ol(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=xa(r)}setAll(e){let r=Tt.emptyPath(),n={},i=[];e.forEach((s,a)=>{if(!r.isImmediateParentOf(a)){const u=this.getFieldsMap(r);this.applyChanges(u,n,i),n={},i=[],r=a.popLast()}s?n[a.lastSegment()]=xa(s):i.push(a.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,n,i)}delete(e){const r=this.field(e.popLast());Ol(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return fn(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];Ol(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Si(r,(i,o)=>e[i]=o);for(const i of n)delete e[i]}clone(){return new sr(xa(this.value))}}function Yx(t){const e=[];return Si(t.fields,(r,n)=>{const i=new Tt([r]);if(Ol(n)){const o=Yx(n.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new gr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,r,n,i,o,s,a){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Vt(e,0,ue.min(),ue.min(),ue.min(),sr.empty(),0)}static newFoundDocument(e,r,n,i){return new Vt(e,1,r,ue.min(),n,i,0)}static newNoDocument(e,r){return new Vt(e,2,r,ue.min(),ue.min(),sr.empty(),0)}static newUnknownDocument(e,r){return new Vt(e,3,r,ue.min(),ue.min(),sr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,r){this.position=e,this.inclusive=r}}function Ay(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?n=J.comparator(J.fromName(s.referenceValue),r.key):n=as(s,r.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function Iy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!fn(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,r="asc"){this.field=e,this.dir=r}}function qO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{}class tt extends Qx{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new QO(e,r,n):r==="array-contains"?new eN(e,n):r==="in"?new tN(e,n):r==="not-in"?new rN(e,n):r==="array-contains-any"?new nN(e,n):new tt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new ZO(e,n):new JO(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(as(r,this.value)):r!==null&&xi(this.value)===xi(r)&&this.matchesComparison(as(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gr extends Qx{constructor(e,r){super(),this.filters=e,this.op=r,this.Te=null}static create(e,r){return new Gr(e,r)}matches(e){return Zx(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Zx(t){return t.op==="and"}function Jx(t){return YO(t)&&Zx(t)}function YO(t){for(const e of t.filters)if(e instanceof Gr)return!1;return!0}function g0(t){if(t instanceof tt)return t.field.canonicalString()+t.op.toString()+us(t.value);if(Jx(t))return t.filters.map(e=>g0(e)).join(",");{const e=t.filters.map(r=>g0(r)).join(",");return`${t.op}(${e})`}}function eE(t,e){return t instanceof tt?function(n,i){return i instanceof tt&&n.op===i.op&&n.field.isEqual(i.field)&&fn(n.value,i.value)}(t,e):t instanceof Gr?function(n,i){return i instanceof Gr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((o,s,a)=>o&&eE(s,i.filters[a]),!0):!1}(t,e):void ne(19439)}function tE(t){return t instanceof tt?function(r){return`${r.field.canonicalString()} ${r.op} ${us(r.value)}`}(t):t instanceof Gr?function(r){return r.op.toString()+" {"+r.getFilters().map(tE).join(" ,")+"}"}(t):"Filter"}class QO extends tt{constructor(e,r,n){super(e,r,n),this.key=J.fromName(n.referenceValue)}matches(e){const r=J.comparator(e.key,this.key);return this.matchesComparison(r)}}class ZO extends tt{constructor(e,r){super(e,"in",r),this.keys=rE("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class JO extends tt{constructor(e,r){super(e,"not-in",r),this.keys=rE("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function rE(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>J.fromName(n.referenceValue))}class eN extends tt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return j1(r)&&qa(r.arrayValue,this.value)}}class tN extends tt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&qa(this.value.arrayValue,r)}}class rN extends tt{constructor(e,r){super(e,"not-in",r)}matches(e){if(qa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!qa(this.value.arrayValue,r)}}class nN extends tt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!j1(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>qa(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,r=null,n=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}}function Ty(t,e=null,r=[],n=[],i=null,o=null,s=null){return new iN(t,e,r,n,i,o,s)}function z1(t){const e=le(t);if(e.Ie===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>g0(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),rf(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>us(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>us(n)).join(",")),e.Ie=r}return e.Ie}function $1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!qO(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!eE(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Iy(t.startAt,e.startAt)&&Iy(t.endAt,e.endAt)}function v0(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,r=null,n=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function oN(t,e,r,n,i,o,s,a){return new uu(t,e,r,n,i,o,s,a)}function H1(t){return new uu(t)}function Cy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nE(t){return t.collectionGroup!==null}function Ea(t){const e=le(t);if(e.Ee===null){e.Ee=[];const r=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),r.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ft(Tt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new yc(o,n))}),r.has(Tt.keyField().canonicalString())||e.Ee.push(new yc(Tt.keyField(),n))}return e.Ee}function nn(t){const e=le(t);return e.de||(e.de=sN(e,Ea(t))),e.de}function sN(t,e){if(t.limitType==="F")return Ty(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new yc(i.field,o)});const r=t.endAt?new mc(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new mc(t.startAt.position,t.startAt.inclusive):null;return Ty(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function m0(t,e){const r=t.filters.concat([e]);return new uu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function y0(t,e,r){return new uu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function of(t,e){return $1(nn(t),nn(e))&&t.limitType===e.limitType}function iE(t){return`${z1(nn(t))}|lt:${t.limitType}`}function Ao(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>tE(i)).join(", ")}]`),rf(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>us(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>us(i)).join(",")),`Target(${n})`}(nn(t))}; limitType=${t.limitType})`}function sf(t,e){return e.isFoundDocument()&&function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):J.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,i){for(const o of Ea(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,a,u){const l=Ay(s,a,u);return s.inclusive?l<=0:l<0}(n.startAt,Ea(n),i)||n.endAt&&!function(s,a,u){const l=Ay(s,a,u);return s.inclusive?l>=0:l>0}(n.endAt,Ea(n),i))}(t,e)}function aN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oE(t){return(e,r)=>{let n=!1;for(const i of Ea(t)){const o=uN(i,e,r);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function uN(t,e,r){const n=t.field.isKeyField()?J.comparator(e.key,r.key):function(o,s,a){const u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?as(u,l):ne(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Si(this.inner,(r,n)=>{for(const[i,o]of n)e(i,o)})}isEmpty(){return jx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=new Xe(J.comparator);function Dn(){return lN}const sE=new Xe(J.comparator);function aa(...t){let e=sE;for(const r of t)e=e.insert(r.key,r);return e}function aE(t){let e=sE;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function $i(){return Aa()}function uE(){return Aa()}function Aa(){return new co(t=>t.toString(),(t,e)=>t.isEqual(e))}const cN=new Xe(J.comparator),fN=new ft(J.comparator);function ve(...t){let e=fN;for(const r of t)e=e.add(r);return e}const hN=new ft(he);function dN(){return hN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function lE(t){return{integerValue:""+t}}function pN(t,e){return zO(e)?lE(e):W1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this._=void 0}}function gN(t,e,r){return t instanceof _c?function(i,o){const s={fields:{[Hx]:{stringValue:$x},[Gx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&U1(o)&&(o=nf(o)),o&&(s.fields[Wx]=o),{mapValue:s}}(r,e):t instanceof Ya?fE(t,e):t instanceof Qa?hE(t,e):function(i,o){const s=cE(i,o),a=Sy(s)+Sy(i.Re);return p0(s)&&p0(i.Re)?lE(a):W1(i.serializer,a)}(t,e)}function vN(t,e,r){return t instanceof Ya?fE(t,e):t instanceof Qa?hE(t,e):r}function cE(t,e){return t instanceof wc?function(n){return p0(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class _c extends af{}class Ya extends af{constructor(e){super(),this.elements=e}}function fE(t,e){const r=dE(e);for(const n of t.elements)r.some(i=>fn(i,n))||r.push(n);return{arrayValue:{values:r}}}class Qa extends af{constructor(e){super(),this.elements=e}}function hE(t,e){let r=dE(e);for(const n of t.elements)r=r.filter(i=>!fn(i,n));return{arrayValue:{values:r}}}class wc extends af{constructor(e,r){super(),this.serializer=e,this.Re=r}}function Sy(t){return Qe(t.integerValue||t.doubleValue)}function dE(t){return j1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function mN(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Ya&&i instanceof Ya||n instanceof Qa&&i instanceof Qa?ss(n.elements,i.elements,fn):n instanceof wc&&i instanceof wc?fn(n.Re,i.Re):n instanceof _c&&i instanceof _c}(t.transform,e.transform)}class yN{constructor(e,r){this.version=e,this.transformResults=r}}class on{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class uf{}function pE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vE(t.key,on.none()):new lu(t.key,t.data,on.none());{const r=t.data,n=sr.empty();let i=new ft(Tt.comparator);for(let o of e.fields)if(!i.has(o)){let s=r.field(o);s===null&&o.length>1&&(o=o.popLast(),s=r.field(o)),s===null?n.delete(o):n.set(o,s),i=i.add(o)}return new Ri(t.key,n,new gr(i.toArray()),on.none())}}function _N(t,e,r){t instanceof lu?function(i,o,s){const a=i.value.clone(),u=by(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,r):t instanceof Ri?function(i,o,s){if(!Nl(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=by(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(gE(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,r):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function Ia(t,e,r,n){return t instanceof lu?function(o,s,a,u){if(!Nl(o.precondition,s))return a;const l=o.value.clone(),c=Oy(o.fieldTransforms,u,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,r,n):t instanceof Ri?function(o,s,a,u){if(!Nl(o.precondition,s))return a;const l=Oy(o.fieldTransforms,u,s),c=s.data;return c.setAll(gE(o)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(o,s,a){return Nl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,r)}function wN(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),o=cE(n.transform,i||null);o!=null&&(r===null&&(r=sr.empty()),r.set(n.field,o))}return r||null}function Ry(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&ss(n,i,(o,s)=>mN(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class lu extends uf{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ri extends uf{constructor(e,r,n,i,o=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function gE(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function by(t,e,r){const n=new Map;Re(t.length===r.length,32656,{Ve:r.length,me:t.length});for(let i=0;i<r.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);n.set(o.field,vN(s,a,r[i]))}return n}function Oy(t,e,r){const n=new Map;for(const i of t){const o=i.transform,s=r.data.field(i.field);n.set(i.field,gN(o,s,e))}return n}class vE extends uf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xN extends uf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&_N(o,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Ia(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Ia(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=uE();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=r.has(i.key)?null:a;const u=pE(s,a);u!==null&&n.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ue.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ve())}isEqual(e){return this.batchId===e.batchId&&ss(this.mutations,e.mutations,(r,n)=>Ry(r,n))&&ss(this.baseMutations,e.baseMutations,(r,n)=>Ry(r,n))}}class G1{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Re(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let i=function(){return cN}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,n[s].version);return new G1(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,ye;function TN(t){switch(t){case j.OK:return ne(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function mE(t){if(t===void 0)return Pn("GRPC error has no .code"),j.UNKNOWN;switch(t){case Je.OK:return j.OK;case Je.CANCELLED:return j.CANCELLED;case Je.UNKNOWN:return j.UNKNOWN;case Je.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Je.INTERNAL:return j.INTERNAL;case Je.UNAVAILABLE:return j.UNAVAILABLE;case Je.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Je.NOT_FOUND:return j.NOT_FOUND;case Je.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Je.ABORTED:return j.ABORTED;case Je.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Je.DATA_LOSS:return j.DATA_LOSS;default:return ne(39323,{code:t})}}(ye=Je||(Je={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new pi([4294967295,4294967295],0);function Ny(t){const e=Bx().encode(t),r=new Ox;return r.update(e),new Uint8Array(r.digest())}function Py(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new pi([r,n],0),new pi([i,o],0)]}class K1{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ua(`Invalid padding: ${r}`);if(n<0)throw new ua(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ua(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ua(`Invalid padding when bitmap length is 0: ${r}`);this.pe=8*e.length-r,this.ye=pi.fromNumber(this.pe)}we(e,r,n){let i=e.add(r.multiply(pi.fromNumber(n)));return i.compare(CN)===1&&(i=new pi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const r=Ny(e),[n,i]=Py(r);for(let o=0;o<this.hashCount;o++){const s=this.we(n,i,o);if(!this.be(s))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new K1(o,i,r);return n.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;const r=Ny(e),[n,i]=Py(r);for(let o=0;o<this.hashCount;o++){const s=this.we(n,i,o);this.Se(s)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ua extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,r,n,i,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,cu.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new lf(ue.min(),i,new Xe(he),Dn(),ve())}}class cu{constructor(e,r,n,i,o){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new cu(n,r,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,r,n,i){this.De=e,this.removedTargetIds=r,this.key=n,this.ve=i}}class yE{constructor(e,r){this.targetId=e,this.Ce=r}}class _E{constructor(e,r,n=bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class Dy{constructor(){this.Fe=0,this.Me=ky(),this.xe=bt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ve(),r=ve(),n=ve();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:ne(38017,{changeType:o})}}),new cu(this.xe,this.Oe,e,r,n)}Qe(){this.Ne=!1,this.Me=ky()}$e(e,r){this.Ne=!0,this.Me=this.Me.insert(e,r)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Re(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class SN{constructor(e){this.ze=e,this.je=new Map,this.He=Dn(),this.Je=ll(),this.Ye=ll(),this.Ze=new Xe(he)}Xe(e){for(const r of e.De)e.ve&&e.ve.isFoundDocument()?this.et(r,e.ve):this.tt(r,e.key,e.ve);for(const r of e.removedTargetIds)this.tt(r,e.key,e.ve)}nt(e){this.forEachTarget(e,r=>{const n=this.rt(r);switch(e.state){case 0:this.it(r)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(r);break;case 3:this.it(r)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(r)&&(this.st(r),n.ke(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.je.forEach((n,i)=>{this.it(i)&&r(i)})}ot(e){const r=e.targetId,n=e.Ce.count,i=this._t(r);if(i){const o=i.target;if(v0(o))if(n===0){const s=new J(o.path);this.tt(r,s,Vt.newNoDocument(s,ue.min()))}else Re(n===1,20013,{expectedCount:n});else{const s=this.ut(r);if(s!==n){const a=this.ct(e),u=a?this.lt(a,e,s):1;if(u!==0){this.st(r);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(r,l)}}}}}ct(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=r;let s,a;try{s=wi(n).toUint8Array()}catch(u){if(u instanceof zx)return os("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new K1(s,i,o)}catch(u){return os(u instanceof ua?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.pe===0?null:a}lt(e,r,n){return r.Ce.count===n-this.Tt(e,r.targetId)?0:2}Tt(e,r){const n=this.ze.getRemoteKeysForTarget(r);let i=0;return n.forEach(o=>{const s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(r,o,null),i++)}),i}It(e){const r=new Map;this.je.forEach((o,s)=>{const a=this._t(s);if(a){if(o.current&&v0(a.target)){const u=new J(a.target.path);this.Et(u).has(s)||this.dt(s,u)||this.tt(s,u,Vt.newNoDocument(u,e))}o.Le&&(r.set(s,o.qe()),o.Qe())}});let n=ve();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const l=this._t(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));const i=new lf(e,r,this.Ze,this.He,n);return this.He=Dn(),this.Je=ll(),this.Ye=ll(),this.Ze=new Xe(he),i}et(e,r){if(!this.it(e))return;const n=this.dt(e,r.key)?2:0;this.rt(e).$e(r.key,n),this.He=this.He.insert(r.key,r),this.Je=this.Je.insert(r.key,this.Et(r.key).add(e)),this.Ye=this.Ye.insert(r.key,this.At(r.key).add(e))}tt(e,r,n){if(!this.it(e))return;const i=this.rt(e);this.dt(e,r)?i.$e(r,1):i.Ue(r),this.Ye=this.Ye.insert(r,this.At(r).delete(e)),this.Ye=this.Ye.insert(r,this.At(r).add(e)),n&&(this.He=this.He.insert(r,n))}removeTarget(e){this.je.delete(e)}ut(e){const r=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let r=this.je.get(e);return r||(r=new Dy,this.je.set(e,r)),r}At(e){let r=this.Ye.get(e);return r||(r=new ft(he),this.Ye=this.Ye.insert(e,r)),r}Et(e){let r=this.Je.get(e);return r||(r=new ft(he),this.Je=this.Je.insert(e,r)),r}it(e){const r=this._t(e)!==null;return r||G("WatchChangeAggregator","Detected inactive target",e),r}_t(e){const r=this.je.get(e);return r&&r.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Dy),this.ze.getRemoteKeysForTarget(e).forEach(r=>{this.tt(e,r,null)})}dt(e,r){return this.ze.getRemoteKeysForTarget(e).has(r)}}function ll(){return new Xe(J.comparator)}function ky(){return new Xe(J.comparator)}const RN=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),bN=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),ON=(()=>({and:"AND",or:"OR"}))();class NN{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function _0(t,e){return t.useProto3Json||rf(e)?e:{value:e}}function xc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function PN(t,e){return xc(t,e.toTimestamp())}function sn(t){return Re(!!t,49232),ue.fromTimestamp(function(r){const n=_i(r);return new ct(n.seconds,n.nanos)}(t))}function X1(t,e){return w0(t,e).canonicalString()}function w0(t,e){const r=function(i){return new je(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function xE(t){const e=je.fromString(t);return Re(CE(e),10190,{key:e.toString()}),e}function x0(t,e){return X1(t.databaseId,e.path)}function Lh(t,e){const r=xE(e);if(r.get(1)!==t.databaseId.projectId)throw new X(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new X(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new J(AE(r))}function EE(t,e){return X1(t.databaseId,e)}function DN(t){const e=xE(t);return e.length===4?je.emptyPath():AE(e)}function E0(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AE(t){return Re(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function My(t,e,r){return{name:x0(t,e),fields:r.value.mapValue.fields}}function kN(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,c){return l.useProto3Json?(Re(c===void 0||typeof c=="string",58123),bt.fromBase64String(c||"")):(Re(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),bt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){const c=l.code===void 0?j.UNKNOWN:mE(l.code);return new X(c,l.message||"")}(s);r=new _E(n,i,o,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Lh(t,n.document.name),o=sn(n.document.updateTime),s=n.document.createTime?sn(n.document.createTime):ue.min(),a=new sr({mapValue:{fields:n.document.fields}}),u=Vt.newFoundDocument(i,o,s,a),l=n.targetIds||[],c=n.removedTargetIds||[];r=new Pl(l,c,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Lh(t,n.document),o=n.readTime?sn(n.readTime):ue.min(),s=Vt.newNoDocument(i,o),a=n.removedTargetIds||[];r=new Pl([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Lh(t,n.document),o=n.removedTargetIds||[];r=new Pl([],o,i,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,s=new IN(i,o),a=n.targetId;r=new yE(a,s)}}return r}function MN(t,e){let r;if(e instanceof lu)r={update:My(t,e.key,e.value)};else if(e instanceof vE)r={delete:x0(t,e.key)};else if(e instanceof Ri)r={update:My(t,e.key,e.data),updateMask:HN(e.fieldMask)};else{if(!(e instanceof xN))return ne(16599,{ft:e.type});r={verify:x0(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(o,s){const a=s.transform;if(a instanceof _c)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ya)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof wc)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw ne(20930,{transform:s.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:PN(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ne(27497)}(t,e.precondition)),r}function LN(t,e){return t&&t.length>0?(Re(e!==void 0,14353),t.map(r=>function(i,o){let s=i.updateTime?sn(i.updateTime):sn(o);return s.isEqual(ue.min())&&(s=sn(o)),new yN(s,i.transformResults||[])}(r,e))):[]}function FN(t,e){return{documents:[EE(t,e.path)]}}function BN(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=EE(t,i);const o=function(l){if(l.length!==0)return TE(Gr.create(l,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const s=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:Io(d.field),direction:jN(d.dir)}}(c))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);const a=_0(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:r,parent:i}}function VN(t){let e=DN(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Re(n===1,65062);const c=r.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let o=[];r.where&&(o=function(h){const d=IE(h);return d instanceof Gr&&Jx(d)?d.getFilters():[d]}(r.where));let s=[];r.orderBy&&(s=function(h){return h.map(d=>function(v){return new yc(To(v.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(d))}(r.orderBy));let a=null;r.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,rf(d)?null:d}(r.limit));let u=null;r.startAt&&(u=function(h){const d=!!h.before,p=h.values||[];return new mc(p,d)}(r.startAt));let l=null;return r.endAt&&(l=function(h){const d=!h.before,p=h.values||[];return new mc(p,d)}(r.endAt)),oN(e,i,s,o,a,"F",u,l)}function UN(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:i})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function IE(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=To(r.unaryFilter.field);return tt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=To(r.unaryFilter.field);return tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=To(r.unaryFilter.field);return tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=To(r.unaryFilter.field);return tt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(r){return tt.create(To(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Gr.create(r.compositeFilter.filters.map(n=>IE(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(r.compositeFilter.op))}(t):ne(30097,{filter:t})}function jN(t){return RN[t]}function zN(t){return bN[t]}function $N(t){return ON[t]}function Io(t){return{fieldPath:t.canonicalString()}}function To(t){return Tt.fromServerFormat(t.fieldPath)}function TE(t){return t instanceof tt?function(r){if(r.op==="=="){if(Ey(r.value))return{unaryFilter:{field:Io(r.field),op:"IS_NAN"}};if(xy(r.value))return{unaryFilter:{field:Io(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Ey(r.value))return{unaryFilter:{field:Io(r.field),op:"IS_NOT_NAN"}};if(xy(r.value))return{unaryFilter:{field:Io(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(r.field),op:zN(r.op),value:r.value}}}(t):t instanceof Gr?function(r){const n=r.getFilters().map(i=>TE(i));return n.length===1?n[0]:{compositeFilter:{op:$N(r.op),filters:n}}}(t):ne(54877,{filter:t})}function HN(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function CE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,r,n,i,o=ue.min(),s=ue.min(),a=bt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.wt=e}}function GN(t){const e=VN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?y0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this.Cn=new XN}addToCollectionParentIndex(e,r){return this.Cn.add(r),U.resolve()}getCollectionParents(e,r){return U.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return U.resolve()}deleteFieldIndex(e,r){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,r){return U.resolve()}getDocumentsMatchingTarget(e,r){return U.resolve(null)}getIndexType(e,r){return U.resolve(0)}getFieldIndexes(e,r){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,r){return U.resolve(yi.min())}getMinOffsetFromCollectionGroup(e,r){return U.resolve(yi.min())}updateCollectionGroup(e,r,n){return U.resolve()}updateIndexEntries(e,r){return U.resolve()}}class XN{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new ft(je.comparator),o=!i.has(n);return this.index[r]=i.add(n),o}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new ft(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SE=41943040;class nr{static withCacheSize(e){return new nr(e,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr.DEFAULT_COLLECTION_PERCENTILE=10,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nr.DEFAULT=new nr(SE,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nr.DISABLED=new nr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new ls(0)}static lr(){return new ls(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="LruGarbageCollector",qN=1048576;function By([t,e],[r,n]){const i=he(t,r);return i===0?he(e,n):i}class YN{constructor(e){this.Er=e,this.buffer=new ft(By),this.dr=0}Ar(){return++this.dr}Rr(e){const r=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();By(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class QN{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){G(Fy,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){As(r)?G(Fy,"Ignoring IndexedDB error during garbage collection: ",r):await Es(r)}await this.mr(3e5)})}}class ZN{constructor(e,r){this.gr=e,this.params=r}calculateTargetCount(e,r){return this.gr.pr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return U.resolve(tf.le);const n=new YN(r);return this.gr.forEachTarget(e,i=>n.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>n.Rr(i))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.gr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.gr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Ly)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ly):this.wr(e,r))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,r){let n,i,o,s,a,u,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(n=h,a=Date.now(),this.removeTargets(e,n,r))).next(h=>(o=h,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(l=Date.now(),Eo()<=ge.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-c}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${h} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}}function JN(t,e){return new ZN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.changes=new co(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?U.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&Ia(n.mutation,i,gr.empty(),ct.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,ve()).next(()=>n))}getLocalViewOfDocuments(e,r,n=ve()){const i=$i();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(o=>{let s=aa();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=$i();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,ve()))}populateOverlays(e,r,n){const i=[];return n.forEach(o=>{r.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{r.set(s,a)})})}computeViews(e,r,n,i){let o=Dn();const s=Aa(),a=function(){return Aa()}();return r.forEach((u,l)=>{const c=n.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Ri)?o=o.insert(l.key,l):c!==void 0?(s.set(l.key,c.mutation.getFieldMask()),Ia(c.mutation,l,c.mutation.getFieldMask(),ct.now())):s.set(l.key,gr.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,c)=>s.set(l,c)),r.forEach((l,c)=>{var h;return a.set(l,new tP(c,(h=s.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,r){const n=Aa();let i=new Xe((s,a)=>s-a),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const a of s)a.keys().forEach(u=>{const l=r.get(u);if(l===null)return;let c=n.get(u)||gr.empty();c=a.applyToLocalView(l,c),n.set(u,c);const h=(i.get(a.batchId)||ve()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,h=uE();c.forEach(d=>{if(!o.has(d)){const p=pE(r.get(d),n.get(d));p!==null&&h.set(d,p),o=o.add(d)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,h))}return U.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(s){return J.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):nE(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-o.size):U.resolve($i());let a=Ga,u=o;return s.next(l=>U.forEach(l,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(c)?U.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ve())).next(c=>({batchId:a,changes:aE(c)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new J(r)).next(n=>{let i=aa();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const o=r.collectionGroup;let s=aa();return this.indexManager.getCollectionParents(e,o).next(a=>U.forEach(a,u=>{const l=function(h,d){return new uu(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,n,i).next(c=>{c.forEach((h,d)=>{s=s.insert(h,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,r,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,o,i))).next(s=>{o.forEach((u,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,Vt.newInvalidDocument(c)))});let a=aa();return s.forEach((u,l)=>{const c=o.get(u);c!==void 0&&Ia(c.mutation,l,gr.empty(),ct.now()),sf(r,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,r){return U.resolve(this.kr.get(r))}saveBundleMetadata(e,r){return this.kr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:sn(i.createTime)}}(r)),U.resolve()}getNamedQuery(e,r){return U.resolve(this.qr.get(r))}saveNamedQuery(e,r){return this.qr.set(r.name,function(i){return{name:i.name,query:GN(i.bundledQuery),readTime:sn(i.readTime)}}(r)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.overlays=new Xe(J.comparator),this.Qr=new Map}getOverlay(e,r){return U.resolve(this.overlays.get(r))}getOverlays(e,r){const n=$i();return U.forEach(r,i=>this.getOverlay(e,i).next(o=>{o!==null&&n.set(i,o)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,o)=>{this.St(e,r,o)}),U.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Qr.get(n);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(n)),U.resolve()}getOverlaysForCollection(e,r,n){const i=$i(),o=r.length+1,s=new J(r.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!r.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>n&&i.set(u.getKey(),u)}return U.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let o=new Xe((l,c)=>l-c);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===r&&l.largestBatchId>n){let c=o.get(l.largestBatchId);c===null&&(c=$i(),o=o.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=$i(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return U.resolve(a)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.Qr.get(i.largestBatchId).delete(n.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new AN(r,n));let o=this.Qr.get(r);o===void 0&&(o=ve(),this.Qr.set(r,o)),this.Qr.set(r,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.$r=new ft(pt.Ur),this.Kr=new ft(pt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,r){const n=new pt(e,r);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.zr(new pt(e,r))}jr(e,r){e.forEach(n=>this.removeReference(n,r))}Hr(e){const r=new J(new je([])),n=new pt(r,e),i=new pt(r,e+1),o=[];return this.Kr.forEachInRange([n,i],s=>{this.zr(s),o.push(s.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const r=new J(new je([])),n=new pt(r,e),i=new pt(r,e+1);let o=ve();return this.Kr.forEachInRange([n,i],s=>{o=o.add(s.key)}),o}containsKey(e){const r=new pt(e,0),n=this.$r.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class pt{constructor(e,r){this.key=e,this.Zr=r}static Ur(e,r){return J.comparator(e.key,r.key)||he(e.Zr,r.Zr)}static Wr(e,r){return he(e.Zr,r.Zr)||J.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.nr=1,this.Xr=new ft(pt.Ur)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new EN(o,r,n,i);this.mutationQueue.push(s);for(const a of i)this.Xr=this.Xr.add(new pt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(s)}lookupMutationBatch(e,r){return U.resolve(this.ei(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ti(n),o=i<0?0:i;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?V1:this.nr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new pt(r,0),i=new pt(r,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([n,i],s=>{const a=this.ei(s.Zr);o.push(a)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new ft(he);return r.forEach(i=>{const o=new pt(i,0),s=new pt(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,s],a=>{n=n.add(a.Zr)})}),U.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let o=n;J.isDocumentKey(o)||(o=o.child(""));const s=new pt(new J(o),0);let a=new ft(he);return this.Xr.forEachWhile(u=>{const l=u.key.path;return!!n.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Zr)),!0)},s),U.resolve(this.ni(a))}ni(e){const r=[];return e.forEach(n=>{const i=this.ei(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){Re(this.ri(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Xr;return U.forEach(r.mutations,i=>{const o=new pt(i.key,r.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=n})}sr(e){}containsKey(e,r){const n=new pt(r,0),i=this.Xr.firstAfterOrEqual(n);return U.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ri(e,r){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const r=this.ti(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.ii=e,this.docs=function(){return new Xe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),o=i?i.size:0,s=this.ii(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return U.resolve(n?n.document.mutableCopy():Vt.newInvalidDocument(r))}getEntries(e,r){let n=Dn();return r.forEach(i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():Vt.newInvalidDocument(i))}),U.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let o=Dn();const s=r.path,a=new J(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||BO(FO(c),n)<=0||(i.has(c.key)||sf(r,c))&&(o=o.insert(c.key,c.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,r,n,i){ne(9500)}si(e,r){return U.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new uP(this)}getSize(e){return U.resolve(this.size)}}class uP extends eP{constructor(e){super(),this.Br=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.Br.addEntry(e,i)):this.Br.removeEntry(n)}),U.waitFor(r)}getFromCache(e,r){return this.Br.getEntry(e,r)}getAllFromCache(e,r){return this.Br.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.persistence=e,this.oi=new co(r=>z1(r),$1),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this._i=0,this.ai=new q1,this.targetCount=0,this.ui=ls.cr()}forEachTarget(e,r){return this.oi.forEach((n,i)=>r(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this._i&&(this._i=r),U.resolve()}Tr(e){this.oi.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ui=new ls(r),this.highestTargetId=r),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,r){return this.Tr(r),this.targetCount+=1,U.resolve()}updateTargetData(e,r){return this.Tr(r),U.resolve()}removeTargetData(e,r){return this.oi.delete(r.target),this.ai.Hr(r.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,r,n){let i=0;const o=[];return this.oi.forEach((s,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.oi.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(o).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,r){const n=this.oi.get(r)||null;return U.resolve(n)}addMatchingKeys(e,r,n){return this.ai.Gr(r,n),U.resolve()}removeMatchingKeys(e,r,n){this.ai.jr(r,n);const i=this.persistence.referenceDelegate,o=[];return i&&r.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),U.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.ai.Hr(r),U.resolve()}getMatchingKeysForTargetId(e,r){const n=this.ai.Yr(r);return U.resolve(n)}containsKey(e,r){return U.resolve(this.ai.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,r){this.ci={},this.overlays={},this.li=new tf(0),this.hi=!1,this.hi=!0,this.Pi=new oP,this.referenceDelegate=e(this),this.Ti=new lP(this),this.indexManager=new KN,this.remoteDocumentCache=function(i){return new aP(i)}(n=>this.referenceDelegate.Ii(n)),this.serializer=new WN(r),this.Ei=new nP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new iP,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ci[e.toKey()];return n||(n=new sP(r,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,r,n){G("MemoryPersistence","Starting transaction:",e);const i=new cP(this.li.next());return this.referenceDelegate.di(),n(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,r){return U.or(Object.values(this.ci).map(n=>()=>n.containsKey(e,r)))}}class cP extends UO{constructor(e){super(),this.currentSequenceNumber=e}}class Y1{constructor(e){this.persistence=e,this.Vi=new q1,this.mi=null}static fi(e){return new Y1(e)}get gi(){if(this.mi)return this.mi;throw ne(60996)}addReference(e,r,n){return this.Vi.addReference(n,r),this.gi.delete(n.toString()),U.resolve()}removeReference(e,r,n){return this.Vi.removeReference(n,r),this.gi.add(n.toString()),U.resolve()}markPotentiallyOrphaned(e,r){return this.gi.add(r.toString()),U.resolve()}removeTarget(e,r){this.Vi.Hr(r.targetId).forEach(i=>this.gi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>n.removeTargetData(e,r))}di(){this.mi=new Set}Ai(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.gi,n=>{const i=J.fromPath(n);return this.pi(e,i).next(o=>{o||r.removeEntry(i,ue.min())})}).next(()=>(this.mi=null,r.apply(e)))}updateLimboDocument(e,r){return this.pi(e,r).next(n=>{n?this.gi.delete(r.toString()):this.gi.add(r.toString())})}Ii(e){return 0}pi(e,r){return U.or([()=>U.resolve(this.Vi.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ri(e,r)])}}class Ec{constructor(e,r){this.persistence=e,this.yi=new co(n=>$O(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=JN(this,r)}static fi(e,r){return new Ec(e,r)}di(){}Ai(e){return U.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}pr(e){const r=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(i=>n+i))}br(e){let r=0;return this.yr(e,n=>{r++}).next(()=>r)}yr(e,r){return U.forEach(this.yi,(n,i)=>this.Dr(e,n,i).next(o=>o?U.resolve():r(i)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,r).next(a=>{a||(n++,o.removeEntry(s,ue.min()))})).next(()=>o.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.yi.set(r,e.currentSequenceNumber),U.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.yi.set(n,e.currentSequenceNumber),U.resolve()}removeReference(e,r,n){return this.yi.set(n,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,r){return this.yi.set(r,e.currentSequenceNumber),U.resolve()}Ii(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=bl(e.data.value)),r}Dr(e,r,n){return U.or([()=>this.persistence.Ri(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.yi.get(r);return U.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.ds=n,this.As=i}static Rs(e,r){let n=ve(),i=ve();for(const o of r.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Q1(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return fb()?8:jO(jt())>0?6:4}()}initialize(e,r){this.ys=e,this.indexManager=r,this.Vs=!0}getDocumentsMatchingQuery(e,r,n,i){const o={result:null};return this.ws(e,r).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.bs(e,r,i,n).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new fP;return this.Ss(e,r,s).next(a=>{if(o.result=a,this.fs)return this.Ds(e,r,s,a.size)})}).next(()=>o.result)}Ds(e,r,n,i){return n.documentReadCount<this.gs?(Eo()<=ge.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Ao(r),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),U.resolve()):(Eo()<=ge.DEBUG&&G("QueryEngine","Query:",Ao(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ps*i?(Eo()<=ge.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Ao(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nn(r))):U.resolve())}ws(e,r){if(Cy(r))return U.resolve(null);let n=nn(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=y0(r,null,"F"),n=nn(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const s=ve(...o);return this.ys.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,n).next(u=>{const l=this.vs(r,a);return this.Cs(r,l,s,u.readTime)?this.ws(e,y0(r,null,"F")):this.Fs(e,l,r,u)}))})))}bs(e,r,n,i){return Cy(r)||i.isEqual(ue.min())?U.resolve(null):this.ys.getDocuments(e,n).next(o=>{const s=this.vs(r,o);return this.Cs(r,s,n,i)?U.resolve(null):(Eo()<=ge.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ao(r)),this.Fs(e,s,r,LO(i,Ga)).next(a=>a))})}vs(e,r){let n=new ft(oE(e));return r.forEach((i,o)=>{sf(e,o)&&(n=n.add(o))}),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,r,n){return Eo()<=ge.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Ao(r)),this.ys.getDocumentsMatchingQuery(e,r,yi.min(),n)}Fs(e,r,n,i){return this.ys.getDocumentsMatchingQuery(e,n,i).next(o=>(r.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="LocalStore",dP=3e8;class pP{constructor(e,r,n,i){this.persistence=e,this.Ms=r,this.serializer=i,this.xs=new Xe(he),this.Os=new co(o=>z1(o),$1),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rP(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.xs))}}function gP(t,e,r,n){return new pP(t,e,r,n)}async function bE(t,e){const r=le(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(o=>(i=o,r.Ls(e),r.mutationQueue.getAllMutationBatches(n))).next(o=>{const s=[],a=[];let u=ve();for(const l of i){s.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of o){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return r.localDocuments.getDocuments(n,u).next(l=>({ks:l,removedBatchIds:s,addedBatchIds:a}))})})}function vP(t,e){const r=le(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),o=r.Bs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const h=l.batch,d=h.keys();let p=U.resolve();return d.forEach(v=>{p=p.next(()=>c.getEntry(u,v)).next(w=>{const I=l.docVersions.get(v);Re(I!==null,48541),w.version.compareTo(I)<0&&(h.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),c.addEntry(w)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(u,h))}(r,n,e,o).next(()=>o.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let u=ve();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function OE(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ti.getLastRemoteSnapshotVersion(r))}function mP(t,e){const r=le(t),n=e.snapshotVersion;let i=r.xs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=r.Bs.newChangeBuffer({trackRemovals:!0});i=r.xs;const a=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;a.push(r.Ti.removeMatchingKeys(o,c.removedDocuments,h).next(()=>r.Ti.addMatchingKeys(o,c.addedDocuments,h)));let p=d.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(bt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,n)),i=i.insert(h,p),function(w,I,_){return w.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=dP?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(d,p,c)&&a.push(r.Ti.updateTargetData(o,p))});let u=Dn(),l=ve();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(o,c))}),a.push(yP(o,s,e.documentUpdates).next(c=>{u=c.qs,l=c.Qs})),!n.isEqual(ue.min())){const c=r.Ti.getLastRemoteSnapshotVersion(o).next(h=>r.Ti.setTargetsMetadata(o,o.currentSequenceNumber,n));a.push(c)}return U.waitFor(a).next(()=>s.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(r.xs=i,o))}function yP(t,e,r){let n=ve(),i=ve();return r.forEach(o=>n=n.add(o)),e.getEntries(t,n).next(o=>{let s=Dn();return r.forEach((a,u)=>{const l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ue.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):G(Z1,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{qs:s,Qs:i}})}function _P(t,e){const r=le(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=V1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function wP(t,e){const r=le(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Ti.getTargetData(n,e).next(o=>o?(i=o,U.resolve(i)):r.Ti.allocateTargetId(n).next(s=>(i=new ri(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Ti.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.xs.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.xs=r.xs.insert(n.targetId,n),r.Os.set(e,n.targetId)),n})}async function A0(t,e,r){const n=le(t),i=n.xs.get(e),o=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",o,s=>n.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!As(s))throw s;G(Z1,`Failed to update sequence numbers for target ${e}: ${s}`)}n.xs=n.xs.remove(e),n.Os.delete(i.target)}function Vy(t,e,r){const n=le(t);let i=ue.min(),o=ve();return n.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,c){const h=le(u),d=h.Os.get(c);return d!==void 0?U.resolve(h.xs.get(d)):h.Ti.getTargetData(l,c)}(n,s,nn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,n.Ti.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>n.Ms.getDocumentsMatchingQuery(s,e,r?i:ue.min(),r?o:ve())).next(a=>(xP(n,aN(e),a),{documents:a,$s:o})))}function xP(t,e,r){let n=t.Ns.get(e)||ue.min();r.forEach((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),t.Ns.set(e,n)}class Uy{constructor(){this.activeTargetIds=dN()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EP{constructor(){this.xo=new Uy,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,r,n){this.Oo[e]=r}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Uy,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="ConnectivityMonitor";class zy{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){G(jy,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){G(jy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl=null;function I0(){return cl===null?cl=function(){return 268435456+Math.round(2147483648*Math.random())}():cl++,"0x"+cl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="RestConnection",IP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TP{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=r+"://"+e.host,this.Wo=`projects/${n}/databases/${i}`,this.Go=this.databaseId.database===gc?`project_id=${n}`:`project_id=${n}&database_id=${i}`}zo(e,r,n,i,o){const s=I0(),a=this.jo(e,r.toUriEncodedString());G(Fh,`Sending RPC '${e}' ${s}:`,a,n);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,o);const{host:l}=new URL(a),c=ys(l);return this.Jo(e,a,u,n,c).then(h=>(G(Fh,`Received RPC '${e}' ${s}: `,h),h),h=>{throw os(Fh,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",n),h})}Yo(e,r,n,i,o,s){return this.zo(e,r,n,i,o)}Ho(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>e[o]=i),n&&n.headers.forEach((i,o)=>e[o]=i)}jo(e,r){const n=IP[e];return`${this.Ko}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class SP extends TP{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,o){const s=I0();return new Promise((a,u)=>{const l=new Nx;l.setWithCredentials(!0),l.listenOnce(Px.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Rl.NO_ERROR:const h=l.getResponseJson();G(Mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case Rl.TIMEOUT:G(Mt,`RPC '${e}' ${s} timed out`),u(new X(j.DEADLINE_EXCEEDED,"Request time out"));break;case Rl.HTTP_ERROR:const d=l.getStatus();if(G(Mt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const w=function(_){const m=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(m)>=0?m:j.UNKNOWN}(v.status);u(new X(w,v.message))}else u(new X(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new X(j.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{h_:e,streamId:s,P_:l.getLastErrorCode(),T_:l.getLastError()})}}finally{G(Mt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);G(Mt,`RPC '${e}' ${s} sending request:`,i),l.send(r,"POST",c,n,15)})}I_(e,r,n){const i=I0(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Mx(),a=kx(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const c=o.join("");G(Mt,`Creating RPC '${e}' stream ${i}: ${c}`,u);const h=s.createWebChannel(c,u);this.E_(h);let d=!1,p=!1;const v=new CP({Zo:I=>{p?G(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(d||(G(Mt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),G(Mt,`RPC '${e}' stream ${i} sending:`,I),h.send(I))},Xo:()=>h.close()}),w=(I,_,m)=>{I.listen(_,x=>{try{m(x)}catch(S){setTimeout(()=>{throw S},0)}})};return w(h,sa.EventType.OPEN,()=>{p||(G(Mt,`RPC '${e}' stream ${i} transport opened.`),v.__())}),w(h,sa.EventType.CLOSE,()=>{p||(p=!0,G(Mt,`RPC '${e}' stream ${i} transport closed`),v.u_(),this.d_(h))}),w(h,sa.EventType.ERROR,I=>{p||(p=!0,os(Mt,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),v.u_(new X(j.UNAVAILABLE,"The operation could not be completed")))}),w(h,sa.EventType.MESSAGE,I=>{var _;if(!p){const m=I.data[0];Re(!!m,16349);const x=m,S=(x==null?void 0:x.error)||((_=x[0])===null||_===void 0?void 0:_.error);if(S){G(Mt,`RPC '${e}' stream ${i} received error:`,S);const P=S.status;let k=function(T){const R=Je[T];if(R!==void 0)return mE(R)}(P),A=S.message;k===void 0&&(k=j.INTERNAL,A="Unknown error status: "+P+" with message "+S.message),p=!0,v.u_(new X(k,A)),h.close()}else G(Mt,`RPC '${e}' stream ${i} received:`,m),v.c_(m)}}),w(a,Dx.STAT_EVENT,I=>{I.stat===f0.PROXY?G(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===f0.NOPROXY&&G(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.a_()},0),v}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(r=>r===e)}}function Bh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t){return new NN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,r,n=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=r,this.A_=n,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const r=Math.floor(this.m_+this.w_()),n=Math.max(0,Date.now()-this.g_),i=Math.max(0,r-n);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="PersistentStream";class PE{constructor(e,r,n,i,o,s,a,u){this.xi=e,this.S_=n,this.D_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new NE(e,r)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,r){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():r&&r.code===j.RESOURCE_EXHAUSTED?(Pn(r.toString()),Pn("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):r&&r.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(r)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),r=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.v_===r&&this.z_(n,i)},n=>{e(()=>{const i=new X(j.UNKNOWN,"Fetching auth token failed: "+n.message);return this.j_(i)})})}z_(e,r){const n=this.G_(this.v_);this.stream=this.H_(e,r),this.stream.e_(()=>{n(()=>this.listener.e_())}),this.stream.n_(()=>{n(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{n(()=>this.j_(i))}),this.stream.onMessage(i=>{n(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return G($y,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return r=>{this.xi.enqueueAndForget(()=>this.v_===e?r():(G($y,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RP extends PE{constructor(e,r,n,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.serializer=o}H_(e,r){return this.connection.I_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const r=kN(this.serializer,e),n=function(o){if(!("targetChange"in o))return ue.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ue.min():s.readTime?sn(s.readTime):ue.min()}(e);return this.listener.Y_(r,n)}Z_(e){const r={};r.database=E0(this.serializer),r.addTarget=function(o,s){let a;const u=s.target;if(a=v0(u)?{documents:FN(o,u)}:{query:BN(o,u).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=wE(o,s.resumeToken);const l=_0(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ue.min())>0){a.readTime=xc(o,s.snapshotVersion.toTimestamp());const l=_0(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const n=UN(this.serializer,e);n&&(r.labels=n),this.Q_(r)}X_(e){const r={};r.database=E0(this.serializer),r.removeTarget=e,this.Q_(r)}}class bP extends PE{constructor(e,r,n,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,r){return this.connection.I_("Write",e,r)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const r=LN(e.writeResults,e.commitTime),n=sn(e.commitTime);return this.listener.ra(n,r)}ia(){const e={};e.database=E0(this.serializer),this.Q_(e)}ta(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>MN(this.serializer,n))};this.Q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{}class NP extends OP{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new X(j.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,r,n,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.zo(e,w0(r,n),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(j.UNKNOWN,o.toString())})}Yo(e,r,n,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Yo(e,w0(r,n),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(j.UNKNOWN,s.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class PP{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Pn(r),this.ua=!1):G("OnlineStateTracker",r)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="RemoteStore";class DP{constructor(e,r,n,i,o){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(s=>{n.enqueueAndForget(async()=>{fo(this)&&(G(no,"Restarting streams for network reachability change."),await async function(u){const l=le(u);l.da.add(4),await fu(l),l.Va.set("Unknown"),l.da.delete(4),await ff(l)}(this))})}),this.Va=new PP(n,i)}}async function ff(t){if(fo(t))for(const e of t.Aa)await e(!0)}async function fu(t){for(const e of t.Aa)await e(!1)}function DE(t,e){const r=le(t);r.Ea.has(e.targetId)||(r.Ea.set(e.targetId,e),rp(r)?tp(r):Is(r).N_()&&ep(r,e))}function J1(t,e){const r=le(t),n=Is(r);r.Ea.delete(e),n.N_()&&kE(r,e),r.Ea.size===0&&(n.N_()?n.k_():fo(r)&&r.Va.set("Unknown"))}function ep(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Is(t).Z_(e)}function kE(t,e){t.ma.Ke(e),Is(t).X_(e)}function tp(t){t.ma=new SN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Is(t).start(),t.Va.ca()}function rp(t){return fo(t)&&!Is(t).O_()&&t.Ea.size>0}function fo(t){return le(t).da.size===0}function ME(t){t.ma=void 0}async function kP(t){t.Va.set("Online")}async function MP(t){t.Ea.forEach((e,r)=>{ep(t,e)})}async function LP(t,e){ME(t),rp(t)?(t.Va.Pa(e),tp(t)):t.Va.set("Unknown")}async function FP(t,e,r){if(t.Va.set("Online"),e instanceof _E&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.Ea.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ea.delete(a),i.ma.removeTarget(a))}(t,e)}catch(n){G(no,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Ac(t,n)}else if(e instanceof Pl?t.ma.Xe(e):e instanceof yE?t.ma.ot(e):t.ma.nt(e),!r.isEqual(ue.min()))try{const n=await OE(t.localStore);r.compareTo(n)>=0&&await function(o,s){const a=o.ma.It(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=o.Ea.get(l);c&&o.Ea.set(l,c.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{const c=o.Ea.get(u);if(!c)return;o.Ea.set(u,c.withResumeToken(bt.EMPTY_BYTE_STRING,c.snapshotVersion)),kE(o,u);const h=new ri(c.target,u,l,c.sequenceNumber);ep(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){G(no,"Failed to raise snapshot:",n),await Ac(t,n)}}async function Ac(t,e,r){if(!As(e))throw e;t.da.add(1),await fu(t),t.Va.set("Offline"),r||(r=()=>OE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(no,"Retrying IndexedDB access"),await r(),t.da.delete(1),await ff(t)})}function LE(t,e){return e().catch(r=>Ac(t,r,e))}async function hf(t){const e=le(t),r=Ei(e);let n=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:V1;for(;BP(e);)try{const i=await _P(e.localStore,n);if(i===null){e.Ia.length===0&&r.k_();break}n=i.batchId,VP(e,i)}catch(i){await Ac(e,i)}FE(e)&&BE(e)}function BP(t){return fo(t)&&t.Ia.length<10}function VP(t,e){t.Ia.push(e);const r=Ei(t);r.N_()&&r.ea&&r.ta(e.mutations)}function FE(t){return fo(t)&&!Ei(t).O_()&&t.Ia.length>0}function BE(t){Ei(t).start()}async function UP(t){Ei(t).ia()}async function jP(t){const e=Ei(t);for(const r of t.Ia)e.ta(r.mutations)}async function zP(t,e,r){const n=t.Ia.shift(),i=G1.from(n,e,r);await LE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await hf(t)}async function $P(t,e){e&&Ei(t).ea&&await async function(n,i){if(function(s){return TN(s)&&s!==j.ABORTED}(i.code)){const o=n.Ia.shift();Ei(n).L_(),await LE(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await hf(n)}}(t,e),FE(t)&&BE(t)}async function Hy(t,e){const r=le(t);r.asyncQueue.verifyOperationInProgress(),G(no,"RemoteStore received new credentials");const n=fo(r);r.da.add(3),await fu(r),n&&r.Va.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.da.delete(3),await ff(r)}async function HP(t,e){const r=le(t);e?(r.da.delete(2),await ff(r)):e||(r.da.add(2),await fu(r),r.Va.set("Unknown"))}function Is(t){return t.fa||(t.fa=function(r,n,i){const o=le(r);return o.oa(),new RP(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:kP.bind(null,t),n_:MP.bind(null,t),i_:LP.bind(null,t),Y_:FP.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),rp(t)?tp(t):t.Va.set("Unknown")):(await t.fa.stop(),ME(t))})),t.fa}function Ei(t){return t.ga||(t.ga=function(r,n,i){const o=le(r);return o.oa(),new bP(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:UP.bind(null,t),i_:$P.bind(null,t),na:jP.bind(null,t),ra:zP.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await hf(t)):(await t.ga.stop(),t.Ia.length>0&&(G(no,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,r,n,i,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new Cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,o){const s=Date.now()+n,a=new np(e,r,s,i,o);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ip(t,e){if(Pn("AsyncQueue",`${e}: ${t}`),As(t))return new X(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{static emptySet(e){return new Ko(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||J.comparator(r.key,n.key):(r,n)=>J.comparator(r.key,n.key),this.keyedMap=aa(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ko)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Ko;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(){this.pa=new Xe(J.comparator)}track(e){const r=e.doc.key,n=this.pa.get(r);n?e.type!==0&&n.type===3?this.pa=this.pa.insert(r,e):e.type===3&&n.type!==1?this.pa=this.pa.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.pa=this.pa.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.pa=this.pa.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.pa=this.pa.remove(r):e.type===1&&n.type===2?this.pa=this.pa.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.pa=this.pa.insert(r,{type:2,doc:e.doc}):ne(63341,{Vt:e,ya:n}):this.pa=this.pa.insert(r,e)}wa(){const e=[];return this.pa.inorderTraversal((r,n)=>{e.push(n)}),e}}class cs{constructor(e,r,n,i,o,s,a,u,l){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,r,n,i,o){const s=[];return r.forEach(a=>{s.push({type:0,doc:a})}),new cs(e,r,Ko.emptySet(r),s,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class GP{constructor(){this.queries=Gy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=le(r),o=i.queries;i.queries=Gy(),o.forEach((s,a)=>{for(const u of a.Sa)u.onError(n)})})(this,new X(j.ABORTED,"Firestore shutting down"))}}function Gy(){return new co(t=>iE(t),of)}async function VE(t,e){const r=le(t);let n=3;const i=e.query;let o=r.queries.get(i);o?!o.Da()&&e.va()&&(n=2):(o=new WP,n=e.va()?0:1);try{switch(n){case 0:o.ba=await r.onListen(i,!0);break;case 1:o.ba=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(s){const a=ip(s,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(a)}r.queries.set(i,o),o.Sa.push(e),e.Fa(r.onlineState),o.ba&&e.Ma(o.ba)&&op(r)}async function UE(t,e){const r=le(t),n=e.query;let i=3;const o=r.queries.get(n);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function KP(t,e){const r=le(t);let n=!1;for(const i of e){const o=i.query,s=r.queries.get(o);if(s){for(const a of s.Sa)a.Ma(i)&&(n=!0);s.ba=i}}n&&op(r)}function XP(t,e,r){const n=le(t),i=n.queries.get(e);if(i)for(const o of i.Sa)o.onError(r);n.queries.delete(e)}function op(t){t.Ca.forEach(e=>{e.next()})}var T0,Ky;(Ky=T0||(T0={})).xa="default",Ky.Cache="cache";class jE{constructor(e,r,n){this.query=e,this.Oa=r,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=n||{}}Ma(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new cs(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Na?this.La(e)&&(this.Oa.next(e),r=!0):this.ka(e,this.onlineState)&&(this.qa(e),r=!0),this.Ba=e,r}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let r=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),r=!0),r}ka(e,r){if(!e.fromCache||!this.va())return!0;const n=r!=="Offline";return(!this.options.Qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}La(e){if(e.docChanges.length>0)return!0;const r=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}qa(e){e=cs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==T0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this.key=e}}class $E{constructor(e){this.key=e}}class qP{constructor(e,r){this.query=e,this.Ha=r,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ve(),this.mutatedKeys=ve(),this.Za=oE(e),this.Xa=new Ko(this.Za)}get eu(){return this.Ha}tu(e,r){const n=r?r.nu:new Wy,i=r?r.Xa:this.Xa;let o=r?r.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),p=sf(this.query,h)?h:null,v=!!d&&this.mutatedKeys.has(d.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let I=!1;d&&p?d.data.isEqual(p.data)?v!==w&&(n.track({type:3,doc:p}),I=!0):this.ru(d,p)||(n.track({type:2,doc:p}),I=!0,(u&&this.Za(p,u)>0||l&&this.Za(p,l)<0)&&(a=!0)):!d&&p?(n.track({type:0,doc:p}),I=!0):d&&!p&&(n.track({type:1,doc:d}),I=!0,(u||l)&&(a=!0)),I&&(p?(s=s.add(p),o=w?o.add(c):o.delete(c)):(s=s.delete(c),o=o.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),o=o.delete(c.key),n.track({type:1,doc:c})}return{Xa:s,nu:n,Cs:a,mutatedKeys:o}}ru(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const s=e.nu.wa();s.sort((c,h)=>function(p,v){const w=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:I})}};return w(p)-w(v)}(c.type,h.type)||this.Za(c.doc,h.doc)),this.iu(n),i=i!=null&&i;const a=r&&!i?this.su():[],u=this.Ya.size===0&&this.current&&!i?1:0,l=u!==this.Ja;return this.Ja=u,s.length!==0||l?{snapshot:new cs(this.query,e.Xa,o,s,e.mutatedKeys,u===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Wy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(r=>this.Ha=this.Ha.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ha=this.Ha.delete(r)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=ve(),this.Xa.forEach(n=>{this._u(n.key)&&(this.Ya=this.Ya.add(n.key))});const r=[];return e.forEach(n=>{this.Ya.has(n)||r.push(new $E(n))}),this.Ya.forEach(n=>{e.has(n)||r.push(new zE(n))}),r}au(e){this.Ha=e.$s,this.Ya=ve();const r=this.tu(e.documents);return this.applyChanges(r,!0)}uu(){return cs.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const sp="SyncEngine";class YP{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class QP{constructor(e){this.key=e,this.cu=!1}}class ZP{constructor(e,r,n,i,o,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.lu={},this.hu=new co(a=>iE(a),of),this.Pu=new Map,this.Tu=new Set,this.Iu=new Xe(J.comparator),this.Eu=new Map,this.du=new q1,this.Au={},this.Ru=new Map,this.Vu=ls.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function JP(t,e,r=!0){const n=qE(t);let i;const o=n.hu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=await HE(n,e,r,!0),i}async function eD(t,e){const r=qE(t);await HE(r,e,!0,!1)}async function HE(t,e,r,n){const i=await wP(t.localStore,nn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,r);let a;return n&&(a=await tD(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&r&&DE(t.remoteStore,i),a}async function tD(t,e,r,n,i){t.fu=(h,d,p)=>async function(w,I,_,m){let x=I.view.tu(_);x.Cs&&(x=await Vy(w.localStore,I.query,!1).then(({documents:A})=>I.view.tu(A,x)));const S=m&&m.targetChanges.get(I.targetId),P=m&&m.targetMismatches.get(I.targetId)!=null,k=I.view.applyChanges(x,w.isPrimaryClient,S,P);return qy(w,I.targetId,k.ou),k.snapshot}(t,h,d,p);const o=await Vy(t.localStore,e,!0),s=new qP(e,o.$s),a=s.tu(o.documents),u=cu.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);qy(t,r,l.ou);const c=new YP(e,r,s);return t.hu.set(e,c),t.Pu.has(r)?t.Pu.get(r).push(e):t.Pu.set(r,[e]),l.snapshot}async function rD(t,e,r){const n=le(t),i=n.hu.get(e),o=n.Pu.get(i.targetId);if(o.length>1)return n.Pu.set(i.targetId,o.filter(s=>!of(s,e))),void n.hu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await A0(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&J1(n.remoteStore,i.targetId),C0(n,i.targetId)}).catch(Es)):(C0(n,i.targetId),await A0(n.localStore,i.targetId,!0))}async function nD(t,e){const r=le(t),n=r.hu.get(e),i=r.Pu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),J1(r.remoteStore,n.targetId))}async function iD(t,e,r){const n=fD(t);try{const i=await function(s,a){const u=le(s),l=ct.now(),c=a.reduce((p,v)=>p.add(v.key),ve());let h,d;return u.persistence.runTransaction("Locally write mutations","readwrite",p=>{let v=Dn(),w=ve();return u.Bs.getEntries(p,c).next(I=>{v=I,v.forEach((_,m)=>{m.isValidDocument()||(w=w.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(p,v)).next(I=>{h=I;const _=[];for(const m of a){const x=wN(m,h.get(m.key).overlayedDocument);x!=null&&_.push(new Ri(m.key,x,Yx(x.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(p,l,_,a)}).next(I=>{d=I;const _=I.applyToLocalDocumentSet(h,w);return u.documentOverlayCache.saveOverlays(p,I.batchId,_)})}).then(()=>({batchId:d.batchId,changes:aE(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Au[s.currentUser.toKey()];l||(l=new Xe(he)),l=l.insert(a,u),s.Au[s.currentUser.toKey()]=l}(n,i.batchId,r),await hu(n,i.changes),await hf(n.remoteStore)}catch(i){const o=ip(i,"Failed to persist write");r.reject(o)}}async function WE(t,e){const r=le(t);try{const n=await mP(r.localStore,e);e.targetChanges.forEach((i,o)=>{const s=r.Eu.get(o);s&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.cu=!0:i.modifiedDocuments.size>0?Re(s.cu,14607):i.removedDocuments.size>0&&(Re(s.cu,42227),s.cu=!1))}),await hu(r,n,e)}catch(n){await Es(n)}}function Xy(t,e,r){const n=le(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.hu.forEach((o,s)=>{const a=s.view.Fa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=le(s);u.onlineState=a;let l=!1;u.queries.forEach((c,h)=>{for(const d of h.Sa)d.Fa(a)&&(l=!0)}),l&&op(u)}(n.eventManager,e),i.length&&n.lu.Y_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function oD(t,e,r){const n=le(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Eu.get(e),o=i&&i.key;if(o){let s=new Xe(J.comparator);s=s.insert(o,Vt.newNoDocument(o,ue.min()));const a=ve().add(o),u=new lf(ue.min(),new Map,new Xe(he),s,a);await WE(n,u),n.Iu=n.Iu.remove(o),n.Eu.delete(e),ap(n)}else await A0(n.localStore,e,!1).then(()=>C0(n,e,r)).catch(Es)}async function sD(t,e){const r=le(t),n=e.batch.batchId;try{const i=await vP(r.localStore,e);KE(r,n,null),GE(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await hu(r,i)}catch(i){await Es(i)}}async function aD(t,e,r){const n=le(t);try{const i=await function(s,a){const u=le(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(h=>(Re(h!==null,37113),c=h.keys(),u.mutationQueue.removeMutationBatch(l,h))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(n.localStore,e);KE(n,e,r),GE(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await hu(n,i)}catch(i){await Es(i)}}function GE(t,e){(t.Ru.get(e)||[]).forEach(r=>{r.resolve()}),t.Ru.delete(e)}function KE(t,e,r){const n=le(t);let i=n.Au[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(r?o.reject(r):o.resolve(),i=i.remove(e)),n.Au[n.currentUser.toKey()]=i}}function C0(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Pu.get(e))t.hu.delete(n),r&&t.lu.gu(n,r);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(n=>{t.du.containsKey(n)||XE(t,n)})}function XE(t,e){t.Tu.delete(e.path.canonicalString());const r=t.Iu.get(e);r!==null&&(J1(t.remoteStore,r),t.Iu=t.Iu.remove(e),t.Eu.delete(r),ap(t))}function qy(t,e,r){for(const n of r)n instanceof zE?(t.du.addReference(n.key,e),uD(t,n)):n instanceof $E?(G(sp,"Document no longer in limbo: "+n.key),t.du.removeReference(n.key,e),t.du.containsKey(n.key)||XE(t,n.key)):ne(19791,{pu:n})}function uD(t,e){const r=e.key,n=r.path.canonicalString();t.Iu.get(r)||t.Tu.has(n)||(G(sp,"New document in limbo: "+r),t.Tu.add(n),ap(t))}function ap(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const r=new J(je.fromString(e)),n=t.Vu.next();t.Eu.set(n,new QP(r)),t.Iu=t.Iu.insert(r,n),DE(t.remoteStore,new ri(nn(H1(r.path)),n,"TargetPurposeLimboResolution",tf.le))}}async function hu(t,e,r){const n=le(t),i=[],o=[],s=[];n.hu.isEmpty()||(n.hu.forEach((a,u)=>{s.push(n.fu(u,e,r).then(l=>{var c;if((l||r)&&n.isPrimaryClient){const h=l?!l.fromCache:(c=r==null?void 0:r.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;n.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);const h=Q1.Rs(u.targetId,l);o.push(h)}}))}),await Promise.all(s),n.lu.Y_(i),await async function(u,l){const c=le(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>U.forEach(l,d=>U.forEach(d.ds,p=>c.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>U.forEach(d.As,p=>c.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!As(h))throw h;G(Z1,"Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const p=c.xs.get(d),v=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(v);c.xs=c.xs.insert(d,w)}}}(n.localStore,o))}async function lD(t,e){const r=le(t);if(!r.currentUser.isEqual(e)){G(sp,"User change. New user:",e.toKey());const n=await bE(r.localStore,e);r.currentUser=e,function(o,s){o.Ru.forEach(a=>{a.forEach(u=>{u.reject(new X(j.CANCELLED,s))})}),o.Ru.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await hu(r,n.ks)}}function cD(t,e){const r=le(t),n=r.Eu.get(e);if(n&&n.cu)return ve().add(n.key);{let i=ve();const o=r.Pu.get(e);if(!o)return i;for(const s of o){const a=r.hu.get(s);i=i.unionWith(a.view.eu)}return i}}function qE(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=WE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oD.bind(null,e),e.lu.Y_=KP.bind(null,e.eventManager),e.lu.gu=XP.bind(null,e.eventManager),e}function fD(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aD.bind(null,e),e}class Ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,r){return null}Cu(e,r){return null}Du(e){return gP(this.persistence,new hP,e.initialUser,this.serializer)}Su(e){return new RE(Y1.fi,this.serializer)}bu(e){return new EP}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ic.provider={build:()=>new Ic};class hD extends Ic{constructor(e){super(),this.cacheSizeBytes=e}vu(e,r){Re(this.persistence.referenceDelegate instanceof Ec,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new QN(n,e.asyncQueue,r)}Su(e){const r=this.cacheSizeBytes!==void 0?nr.withCacheSize(this.cacheSizeBytes):nr.DEFAULT;return new RE(n=>Ec.fi(n,r),this.serializer)}}class S0{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Xy(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=lD.bind(null,this.syncEngine),await HP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GP}()}createDatastore(e){const r=cf(e.databaseInfo.databaseId),n=function(o){return new SP(o)}(e.databaseInfo);return function(o,s,a,u){return new NP(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,o,s,a){return new DP(n,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,r=>Xy(this.syncEngine,r,0),function(){return zy.C()?new zy:new AP}())}createSyncEngine(e,r){return function(i,o,s,a,u,l,c){const h=new ZP(i,o,s,a,u,l);return c&&(h.mu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const o=le(i);G(no,"RemoteStore shutting down."),o.da.add(5),await fu(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}S0.provider={build:()=>new S0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Pn("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="FirestoreClient";class dD{constructor(e,r,n,i,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Ft.UNAUTHENTICATED,this.clientId=Vx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,async s=>{G(Ai,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(G(Ai,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=ip(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Vh(t,e){t.asyncQueue.verifyOperationInProgress(),G(Ai,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await bE(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Yy(t,e){t.asyncQueue.verifyOperationInProgress();const r=await pD(t);G(Ai,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>Hy(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>Hy(e.remoteStore,i)),t._onlineComponents=e}async function pD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(Ai,"Using user provided OfflineComponentProvider");try{await Vh(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;os("Error using user provided cache. Falling back to memory cache: "+r),await Vh(t,new Ic)}}else G(Ai,"Using default OfflineComponentProvider"),await Vh(t,new hD(void 0));return t._offlineComponents}async function QE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(Ai,"Using user provided OnlineComponentProvider"),await Yy(t,t._uninitializedComponentsProvider._online)):(G(Ai,"Using default OnlineComponentProvider"),await Yy(t,new S0))),t._onlineComponents}function gD(t){return QE(t).then(e=>e.syncEngine)}async function ZE(t){const e=await QE(t),r=e.eventManager;return r.onListen=JP.bind(null,e.syncEngine),r.onUnlisten=rD.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=eD.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=nD.bind(null,e.syncEngine),r}function vD(t,e,r={}){const n=new Cn;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){const c=new YE({next:d=>{c.xu(),s.enqueueAndForget(()=>UE(o,h));const p=d.docs.has(a);!p&&d.fromCache?l.reject(new X(j.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&u&&u.source==="server"?l.reject(new X(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new jE(H1(a.path),c,{includeMetadataChanges:!0,Qa:!0});return VE(o,h)}(await ZE(t),t.asyncQueue,e,r,n)),n.promise}function mD(t,e,r={}){const n=new Cn;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){const c=new YE({next:d=>{c.xu(),s.enqueueAndForget(()=>UE(o,h)),d.fromCache&&u.source==="server"?l.reject(new X(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new jE(a,c,{includeMetadataChanges:!0,Qa:!0});return VE(o,h)}(await ZE(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t,e,r){if(!r)throw new X(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yD(t,e,r,n){if(e===!0&&n===!0)throw new X(j.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Zy(t){if(!J.isDocumentKey(t))throw new X(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jy(t){if(J.isDocumentKey(t))throw new X(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function df(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=df(t);throw new X(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="firestore.googleapis.com",e2=!0;class t2{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new X(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tA,this.ssl=e2}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:e2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qN)throw new X(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JE((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new SO;switch(n.type){case"firstParty":return new NO(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new X(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Qy.get(r);n&&(G("ComponentProvider","Removing Datastore"),Qy.delete(r),n.terminate())}(this),Promise.resolve()}}function _D(t,e,r,n={}){var i;t=kn(t,pf);const o=ys(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${r}`;o&&(xx(`https://${u}`),Ex("Firestore",!0)),s.host!==tA&&s.host!==u&&os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:n});if(!to(l,a)&&(t._setSettings(l),n.mockUserToken)){let c,h;if(typeof n.mockUserToken=="string")c=n.mockUserToken,h=Ft.MOCK_USER;else{c=rb(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new X(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ft(d)}t._authCredentials=new RO(new Fx(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ts(this.firestore,e,this._query)}}class Zt{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}}class gi extends Ts{constructor(e,r,n){super(e,r,H1(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new J(e))}withConverter(e){return new gi(this.firestore,e,this._path)}}function wD(t,e,...r){if(t=zt(t),eA("collection","path",e),t instanceof pf){const n=je.fromString(e,...r);return Jy(n),new gi(t,null,n)}{if(!(t instanceof Zt||t instanceof gi))throw new X(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(je.fromString(e,...r));return Jy(n),new gi(t.firestore,null,n)}}function gf(t,e,...r){if(t=zt(t),arguments.length===1&&(e=Vx.newId()),eA("doc","path",e),t instanceof pf){const n=je.fromString(e,...r);return Zy(n),new Zt(t,null,new J(n))}{if(!(t instanceof Zt||t instanceof gi))throw new X(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(je.fromString(e,...r));return Zy(n),new Zt(t.firestore,t instanceof gi?t.converter:null,new J(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="AsyncQueue";class n2{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new NE(this,"async_queue_retry"),this.rc=()=>{const n=Bh();n&&G(r2,"Visibility state changed to "+n.visibilityState),this.x_.b_()},this.sc=e;const r=Bh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const r=Bh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const r=new Cn;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!As(e))throw e;G(r2,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const r=this.sc.then(()=>(this.ec=!0,e().catch(n=>{throw this.Xu=n,this.ec=!1,Pn("INTERNAL UNHANDLED ERROR: ",i2(n)),n}).then(n=>(this.ec=!1,n))));return this.sc=r,r}enqueueAfterDelay(e,r,n){this.oc(),this.nc.indexOf(e)>-1&&(r=0);const i=np.createAndSchedule(this,e,r,n,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&ne(47125,{cc:i2(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const r of this.Zu)if(r.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Zu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const r=this.Zu.indexOf(e);this.Zu.splice(r,1)}}function i2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class du extends pf{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new n2,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new n2(e),this._firestoreClient=void 0,await e}}}function xD(t,e){const r=typeof t=="object"?t:F1(),n=typeof t=="string"?t:e||gc,i=_s(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=eb("firestore");o&&_D(i,...o)}return i}function up(t){if(t._terminated)throw new X(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ED(t),t._firestoreClient}function ED(t){var e,r,n;const i=t._freezeSettings(),o=function(a,u,l,c){return new GO(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,JE(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new dD(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fs(bt.fromBase64String(e))}catch(r){throw new X(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new fs(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new X(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new X(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new X(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=/^__.*__$/;class ID{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Ri(e,this.data,this.fieldMask,r,this.fieldTransforms):new lu(e,this.data,r,this.fieldTransforms)}}class rA{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Ri(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function nA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ic:t})}}class hp{constructor(e,r,n,i,o,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new hp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.dc({path:n,Rc:!1});return i.Vc(e),i}mc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.dc({path:n,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Tc(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(nA(this.Ic)&&AD.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class TD{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||cf(e)}bc(e,r,n,i=!1){return new hp({Ic:e,methodName:r,wc:n,path:Tt.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dp(t){const e=t._freezeSettings(),r=cf(t._databaseId);return new TD(t._databaseId,!!e.ignoreUndefinedProperties,r)}function CD(t,e,r,n,i,o={}){const s=t.bc(o.merge||o.mergeFields?2:0,e,r,i);pp("Data must be an object, but it was:",s,n);const a=iA(n,s);let u,l;if(o.merge)u=new gr(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const c=[];for(const h of o.mergeFields){const d=R0(e,h,r);if(!s.contains(d))throw new X(j.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);sA(c,d)||c.push(d)}u=new gr(c),l=s.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,l=s.fieldTransforms;return new ID(new sr(a),u,l)}class mf extends lp{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mf}}function SD(t,e,r,n){const i=t.bc(1,e,r);pp("Data must be an object, but it was:",i,n);const o=[],s=sr.empty();Si(n,(u,l)=>{const c=gp(e,u,r);l=zt(l);const h=i.mc(c);if(l instanceof mf)o.push(c);else{const d=pu(l,h);d!=null&&(o.push(c),s.set(c,d))}});const a=new gr(o);return new rA(s,a,i.fieldTransforms)}function RD(t,e,r,n,i,o){const s=t.bc(1,e,r),a=[R0(e,n,r)],u=[i];if(o.length%2!=0)throw new X(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<o.length;d+=2)a.push(R0(e,o[d])),u.push(o[d+1]);const l=[],c=sr.empty();for(let d=a.length-1;d>=0;--d)if(!sA(l,a[d])){const p=a[d];let v=u[d];v=zt(v);const w=s.mc(p);if(v instanceof mf)l.push(p);else{const I=pu(v,w);I!=null&&(l.push(p),c.set(p,I))}}const h=new gr(l);return new rA(c,h,s.fieldTransforms)}function bD(t,e,r,n=!1){return pu(r,t.bc(n?4:3,e))}function pu(t,e){if(oA(t=zt(t)))return pp("Unsupported field value:",e,t),iA(t,e);if(t instanceof lp)return function(n,i){if(!nA(i.Ic))throw i.gc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(n,i){const o=[];let s=0;for(const a of n){let u=pu(a,i.fc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(n,i){if((n=zt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return pN(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=ct.fromDate(n);return{timestampValue:xc(i.serializer,o)}}if(n instanceof ct){const o=new ct(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:xc(i.serializer,o)}}if(n instanceof cp)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof fs)return{bytesValue:wE(i.serializer,n._byteString)};if(n instanceof Zt){const o=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(o))throw i.gc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:X1(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof fp)return function(s,a){return{mapValue:{fields:{[Kx]:{stringValue:qx},[vc]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.gc("VectorValues must only contain numeric values.");return W1(a.serializer,l)})}}}}}}(n,i);throw i.gc(`Unsupported field value: ${df(n)}`)}(t,e)}function iA(t,e){const r={};return jx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Si(t,(n,i)=>{const o=pu(i,e.Ac(n));o!=null&&(r[n]=o)}),{mapValue:{fields:r}}}function oA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof cp||t instanceof fs||t instanceof Zt||t instanceof lp||t instanceof fp)}function pp(t,e,r){if(!oA(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=df(r);throw n==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+n)}}function R0(t,e,r){if((e=zt(e))instanceof vf)return e._internalPath;if(typeof e=="string")return gp(t,e);throw Tc("Field path arguments must be of type string or ",t,!1,void 0,r)}const OD=new RegExp("[~\\*/\\[\\]]");function gp(t,e,r){if(e.search(OD)>=0)throw Tc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new vf(...e.split("."))._internalPath}catch{throw Tc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Tc(t,e,r,n,i){const o=n&&!n.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${n}`),s&&(u+=` in document ${i}`),u+=")"),new X(j.INVALID_ARGUMENT,a+t+u)}function sA(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,r,n,i,o){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ND(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(vp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class ND extends aA{data(){return super.data()}}function vp(t,e){return typeof e=="string"?gp(t,e):e instanceof vf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mp{}class DD extends mp{}function kD(t,e,...r){let n=[];e instanceof mp&&n.push(e),n=n.concat(r),function(o){const s=o.filter(u=>u instanceof yp).length,a=o.filter(u=>u instanceof yf).length;if(s>1||s>0&&a>0)throw new X(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class yf extends DD{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new yf(e,r,n)}_apply(e){const r=this._parse(e);return uA(e._query,r),new Ts(e.firestore,e.converter,m0(e._query,r))}_parse(e){const r=dp(e.firestore);return function(o,s,a,u,l,c,h){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new X(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){s2(h,c);const v=[];for(const w of h)v.push(o2(u,o,w));d={arrayValue:{values:v}}}else d=o2(u,o,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||s2(h,c),d=bD(a,s,h,c==="in"||c==="not-in");return tt.create(l,c,d)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function MD(t,e,r){const n=e,i=vp("where",t);return yf._create(i,n,r)}class yp extends mp{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new yp(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Gr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)uA(s,u),s=m0(s,u)}(e._query,r),new Ts(e.firestore,e.converter,m0(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function o2(t,e,r){if(typeof(r=zt(r))=="string"){if(r==="")throw new X(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nE(e)&&r.indexOf("/")!==-1)throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(je.fromString(r));if(!J.isDocumentKey(n))throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return wy(t,new J(n))}if(r instanceof Zt)return wy(t,r._key);throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${df(r)}.`)}function s2(t,e){if(!Array.isArray(t)||t.length===0)throw new X(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uA(t,e){const r=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new X(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class LD{convertValue(e,r="none"){switch(xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Si(e,(i,o)=>{n[i]=this.convertValue(o,r)}),n}convertVectorValue(e){var r,n,i;const o=(i=(n=(r=e.fields)===null||r===void 0?void 0:r[vc].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(s=>Qe(s.doubleValue));return new fp(o)}convertGeoPoint(e){return new cp(Qe(e.latitude),Qe(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=nf(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Ka(e));default:return null}}convertTimestamp(e){const r=_i(e);return new ct(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=je.fromString(e);Re(CE(n),9688,{name:e});const i=new Xa(n.get(1),n.get(3)),o=new J(n.popFirst(5));return i.isEqual(r)||Pn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lA extends aA{constructor(e,r,n,i,o,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Dl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(vp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Dl extends lA{data(e={}){return super.data(e)}}class BD{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new la(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Dl(this._firestore,this._userDataWriter,n.key,n,new la(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new X(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const u=new Dl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new la(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const u=new Dl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new la(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),c=s.indexOf(a.doc.key)),{type:VD(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function VD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t){t=kn(t,Zt);const e=kn(t.firestore,du);return vD(up(e),t._key).then(r=>jD(e,t,r))}class cA extends LD{constructor(e){super(),this.firestore=e}convertBytes(e){return new fs(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,r)}}function UD(t){t=kn(t,Ts);const e=kn(t.firestore,du),r=up(e),n=new cA(e);return PD(t._query),mD(r,t._query).then(i=>new BD(e,n,t,i))}function fA(t,e,r){t=kn(t,Zt);const n=kn(t.firestore,du),i=FD(t.converter,e,r);return dA(n,[CD(dp(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,on.none())])}function hA(t,e,r,...n){t=kn(t,Zt);const i=kn(t.firestore,du),o=dp(i);let s;return s=typeof(e=zt(e))=="string"||e instanceof vf?RD(o,"updateDoc",t._key,e,r,n):SD(o,"updateDoc",t._key,e),dA(i,[s.toMutation(t._key,on.exists(!0))])}function dA(t,e){return function(n,i){const o=new Cn;return n.asyncQueue.enqueueAndForget(async()=>iD(await gD(n),i,o)),o.promise}(up(t),e)}function jD(t,e,r){const n=r.docs.get(e._key),i=new cA(t);return new lA(t,i,e._key,n,new la(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(i){xs=i})(ws),cn(new Wr("firestore",(n,{instanceIdentifier:i,options:o})=>{const s=n.getProvider("app").getImmediate(),a=new du(new bO(n.getProvider("auth-internal")),new PO(s,n.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new X(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(l.options.projectId,c)}(s,i),s);return o=Object.assign({useFetchStreams:r},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),br(uy,ly,e),br(uy,ly,"esm2017")})();var zD="firebase",$D="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br(zD,$D,"app");function wp(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function pA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HD=pA,gA=new lo("auth","Firebase",pA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new M1("@firebase/auth");function WD(t,...e){Cc.logLevel<=ge.WARN&&Cc.warn(`Auth (${ws}): ${t}`,...e)}function kl(t,...e){Cc.logLevel<=ge.ERROR&&Cc.error(`Auth (${ws}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,...e){throw xp(t,...e)}function an(t,...e){return xp(t,...e)}function vA(t,e,r){const n=Object.assign(Object.assign({},HD()),{[e]:r});return new lo("auth","Firebase",n).create(e,{appName:t.name})}function qi(t){return vA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xp(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return gA.create(t,...e)}function ie(t,e,...r){if(!t)throw xp(e,...r)}function En(t){const e="INTERNAL ASSERTION FAILED: "+t;throw kl(e),new Error(e)}function Ln(t,e){t||En(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function GD(){return a2()==="http:"||a2()==="https:"}function a2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GD()||ub()||"connection"in navigator)?navigator.onLine:!0}function XD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,r){this.shortDelay=e,this.longDelay=r,Ln(r>e,"Short delay should be less than long delay!"),this.isMobile=ob()||lb()}get(){return KD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t,e){Ln(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;En("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;En("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;En("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QD=new gu(3e4,6e4);function Ap(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Cs(t,e,r,n,i={}){return yA(t,i,async()=>{let o={},s={};n&&(e==="GET"?s=n:o={body:JSON.stringify(n)});const a=au(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const l=Object.assign({method:e,headers:u},o);return ab()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&ys(t.emulatorConfig.host)&&(l.credentials="include"),mA.fetch()(await _A(t,t.config.apiHost,r,a),l)})}async function yA(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},qD),e);try{const i=new JD(t),o=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw fl(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw fl(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw fl(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw fl(t,"user-disabled",s);const c=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw vA(t,c,l);Mn(t,c)}}catch(i){if(i instanceof dn)throw i;Mn(t,"network-request-failed",{message:String(i)})}}async function ZD(t,e,r,n,i={}){const o=await Cs(t,e,r,n,i);return"mfaPendingCredential"in o&&Mn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function _A(t,e,r,n){const i=`${e}${r}?${n}`,o=t,s=o.config.emulator?Ep(t.config,i):`${t.config.apiScheme}://${i}`;return YD.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}class JD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(an(this.auth,"network-request-failed")),QD.get())})}}function fl(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=an(t,e,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e5(t,e){return Cs(t,"POST","/v1/accounts:delete",e)}async function Sc(t,e){return Cs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function t5(t,e=!1){const r=zt(t),n=await r.getIdToken(e),i=Ip(n);ie(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:n,authTime:Ta(Uh(i.auth_time)),issuedAtTime:Ta(Uh(i.iat)),expirationTime:Ta(Uh(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Uh(t){return Number(t)*1e3}function Ip(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return kl("JWT malformed, contained fewer than 3 sections"),null;try{const i=mx(r);return i?JSON.parse(i):(kl("Failed to decode base64 JWT payload"),null)}catch(i){return kl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function u2(t){const e=Ip(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof dn&&r5(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function r5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ta(this.lastLoginAt),this.creationTime=Ta(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Za(t,Sc(r,{idToken:n}));ie(i==null?void 0:i.users.length,r,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?wA(o.providerUserInfo):[],a=o5(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new O0(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function i5(t){const e=zt(t);await Rc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function o5(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function wA(t){return t.map(e=>{var{providerId:r}=e,n=wp(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s5(t,e){const r=await yA(t,{},async()=>{const n=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await _A(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:n};return t.emulatorConfig&&ys(t.emulatorConfig.host)&&(u.credentials="include"),mA.fetch()(s,u)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function a5(t,e){return Cs(t,"POST","/v2/accounts:revokeToken",Ap(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):u2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const r=u2(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:o}=await s5(e,r);this.updateTokensAndExpiration(n,i,Number(o))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:o}=r,s=new Xo;return n&&(ie(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(ie(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ie(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xo,this.toJSON())}_performRefresh(){return En("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jr{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,o=wp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new n5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new O0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const r=await Za(this,this.stsTokenManager.getToken(this.auth,e));return ie(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return t5(this,e)}reload(){return i5(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new jr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Rc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zr(this.auth.app))return Promise.reject(qi(this.auth));const e=await this.getIdToken();return await Za(this,e5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,o,s,a,u,l,c;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,d=(i=r.email)!==null&&i!==void 0?i:void 0,p=(o=r.phoneNumber)!==null&&o!==void 0?o:void 0,v=(s=r.photoURL)!==null&&s!==void 0?s:void 0,w=(a=r.tenantId)!==null&&a!==void 0?a:void 0,I=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,_=(l=r.createdAt)!==null&&l!==void 0?l:void 0,m=(c=r.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:x,emailVerified:S,isAnonymous:P,providerData:k,stsTokenManager:A}=r;ie(x&&A,e,"internal-error");const E=Xo.fromJSON(this.name,A);ie(typeof x=="string",e,"internal-error"),Hn(h,e.name),Hn(d,e.name),ie(typeof S=="boolean",e,"internal-error"),ie(typeof P=="boolean",e,"internal-error"),Hn(p,e.name),Hn(v,e.name),Hn(w,e.name),Hn(I,e.name),Hn(_,e.name),Hn(m,e.name);const T=new jr({uid:x,auth:e,email:d,emailVerified:S,displayName:h,isAnonymous:P,photoURL:v,phoneNumber:p,tenantId:w,stsTokenManager:E,createdAt:_,lastLoginAt:m});return k&&Array.isArray(k)&&(T.providerData=k.map(R=>Object.assign({},R))),I&&(T._redirectEventId=I),T}static async _fromIdTokenResponse(e,r,n=!1){const i=new Xo;i.updateFromServerResponse(r);const o=new jr({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Rc(o),o}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];ie(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?wA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new Xo;a.updateFromIdToken(n);const u=new jr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new O0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new Map;function An(t){Ln(t instanceof Function,"Expected a class definition");let e=l2.get(t);return e?(Ln(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,l2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}xA.type="NONE";const c2=xA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t,e,r){return`firebase:${t}:${e}:${r}`}class qo{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:o}=this.auth;this.fullUserKey=Ml(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ml("persistence",i.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Sc(this.auth,{idToken:e}).catch(()=>{});return r?jr._fromGetAccountInfoResponse(this.auth,r,e):null}return jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new qo(An(c2),e,n);const i=(await Promise.all(r.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let o=i[0]||An(c2);const s=Ml(n,e.config.apiKey,e.name);let a=null;for(const l of r)try{const c=await l._get(s);if(c){let h;if(typeof c=="string"){const d=await Sc(e,{idToken:c}).catch(()=>{});if(!d)break;h=await jr._fromGetAccountInfoResponse(e,d,c)}else h=jr._fromJSON(e,c);l!==o&&(a=h),o=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new qo(o,e,n):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(r.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new qo(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SA(e))return"Blackberry";if(RA(e))return"Webos";if(AA(e))return"Safari";if((e.includes("chrome/")||IA(e))&&!e.includes("edge/"))return"Chrome";if(CA(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function EA(t=jt()){return/firefox\//i.test(t)}function AA(t=jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IA(t=jt()){return/crios\//i.test(t)}function TA(t=jt()){return/iemobile/i.test(t)}function CA(t=jt()){return/android/i.test(t)}function SA(t=jt()){return/blackberry/i.test(t)}function RA(t=jt()){return/webos/i.test(t)}function Tp(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function u5(t=jt()){var e;return Tp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function l5(){return cb()&&document.documentMode===10}function bA(t=jt()){return Tp(t)||CA(t)||RA(t)||SA(t)||/windows phone/i.test(t)||TA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t,e=[]){let r;switch(t){case"Browser":r=f2(jt());break;case"Worker":r=`${f2(jt())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${ws}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=o=>new Promise((s,a)=>{try{const u=e(o);s(u)}catch(u){a(u)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t,e={}){return Cs(t,"GET","/v2/passwordPolicy",Ap(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=6;class d5{constructor(e){var r,n,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=s.minPasswordLength)!==null&&r!==void 0?r:h5,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,o,s,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new h2(this),this.idTokenSubscription=new h2(this),this.beforeStateQueue=new c5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=An(r)),this._initializationPromise=this.queue(async()=>{var n,i,o;if(!this._deleted&&(this.persistenceManager=await qo.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Sc(this,{idToken:e}),n=await jr._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Zr(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&(u!=null&&u.user)&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Rc(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zr(this.app))return Promise.reject(qi(this));const r=e?zt(e):null;return r&&ie(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zr(this.app)?Promise.reject(qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zr(this.app)?Promise.reject(qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(An(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await f5(this),r=new d5(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lo("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await a5(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&An(e)||this._popupRedirectResolver;ie(r,this,"argument-error"),this.redirectPersistenceManager=await qo.create(this,[An(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,i);return()=>{s=!0,u()}}else{const u=e.addObserver(r);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;if(Zr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&WD(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Cp(t){return zt(t)}class h2{constructor(e){this.auth=e,this.observer=null,this.addObserver=mb(r=>this.observer=r)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function g5(t){Sp=t}function v5(t){return Sp.loadJS(t)}function m5(){return Sp.gapiScript}function y5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t,e){const r=_s(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),o=r.getOptions();if(to(o,e??{}))return i;Mn(i,"already-initialized")}return r.initialize({options:e})}function w5(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(An);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function x5(t,e,r){const n=Cp(t);ie(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!!(r!=null&&r.disableWarnings),o=NA(e),{host:s,port:a}=E5(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},c=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){ie(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ie(to(l,n.config.emulator)&&to(c,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=l,n.emulatorConfig=c,n.settings.appVerificationDisabledForTesting=!0,ys(s)?(xx(`${o}//${s}${u}`),Ex("Auth",!0)):i||A5()}function NA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function E5(t){const e=NA(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const o=i[1];return{host:o,port:d2(n.substr(o.length+1))}}else{const[o,s]=n.split(":");return{host:o,port:d2(s)}}}function d2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function A5(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return En("not implemented")}_getIdTokenResponse(e){return En("not implemented")}_linkToIdToken(e,r){return En("not implemented")}_getReauthenticationResolver(e){return En("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t,e){return ZD(t,"POST","/v1/accounts:signInWithIdp",Ap(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5="http://localhost";class io extends PA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Mn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,o=wp(r,["providerId","signInMethod"]);if(!n||!i)return null;const s=new io(n,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return Yo(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Yo(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Yo(e,r)}buildRequest(){const e={requestUri:I5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=au(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends DA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends vu{constructor(){super("facebook.com")}static credential(e){return io._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yn.credential(e.oauthAccessToken)}catch{return null}}}Yn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return io._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Qn.credential(r,n)}catch{return null}}}Qn.GOOGLE_SIGN_IN_METHOD="google.com";Qn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends vu{constructor(){super("github.com")}static credential(e){return io._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zn.credential(e.oauthAccessToken)}catch{return null}}}Zn.GITHUB_SIGN_IN_METHOD="github.com";Zn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends vu{constructor(){super("twitter.com")}static credential(e,r){return io._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Jn.credential(r,n)}catch{return null}}}Jn.TWITTER_SIGN_IN_METHOD="twitter.com";Jn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const o=await jr._fromIdTokenResponse(e,n,i),s=p2(n);return new hs({user:o,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=p2(n);return new hs({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function p2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends dn{constructor(e,r,n,i){var o;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,bc.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new bc(e,r,n,i)}}function kA(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?bc._fromErrorAndOperation(t,o,e,n):o})}async function T5(t,e,r=!1){const n=await Za(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return hs._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(t,e,r=!1){const{auth:n}=t;if(Zr(n.app))return Promise.reject(qi(n));const i="reauthenticate";try{const o=await Za(t,kA(n,i,e,t),r);ie(o.idToken,n,"internal-error");const s=Ip(o.idToken);ie(s,n,"internal-error");const{sub:a}=s;return ie(t.uid===a,n,"user-mismatch"),hs._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Mn(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S5(t,e,r=!1){if(Zr(t.app))return Promise.reject(qi(t));const n="signIn",i=await kA(t,n,e),o=await hs._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(o.user),o}function R5(t,e,r,n){return zt(t).onIdTokenChanged(e,r,n)}function b5(t,e,r){return zt(t).beforeAuthStateChanged(e,r)}const Oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Oc,"1"),this.storage.removeItem(Oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=1e3,N5=10;class LA extends MA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,a,u)=>{this.notifyListeners(s,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},o=this.storage.getItem(n);l5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,N5):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},O5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}LA.type="LOCAL";const P5=LA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA extends MA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}FA.type="SESSION";const BA=FA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new _f(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:o}=r.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(s).map(async l=>l(r.origin,o)),u=await D5(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_f.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{const l=Rp("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(d.data.response);break;default:clearTimeout(c),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:r},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return window}function M5(t){un().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(){return typeof un().WorkerGlobalScope<"u"&&typeof un().importScripts=="function"}async function L5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function B5(){return VA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="firebaseLocalStorageDb",V5=1,Nc="firebaseLocalStorage",jA="fbase_key";class mu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function wf(t,e){return t.transaction([Nc],e?"readwrite":"readonly").objectStore(Nc)}function U5(){const t=indexedDB.deleteDatabase(UA);return new mu(t).toPromise()}function N0(){const t=indexedDB.open(UA,V5);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Nc,{keyPath:jA})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Nc)?e(n):(n.close(),await U5(),e(await N0()))})})}async function g2(t,e,r){const n=wf(t,!0).put({[jA]:e,value:r});return new mu(n).toPromise()}async function j5(t,e){const r=wf(t,!1).get(e),n=await new mu(r).toPromise();return n===void 0?null:n.value}function v2(t,e){const r=wf(t,!0).delete(e);return new mu(r).toPromise()}const z5=800,$5=3;class zA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await N0(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>$5)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_f._getInstance(B5()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await L5(),!this.activeServiceWorker)return;this.sender=new k5(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await N0();return await g2(e,Oc,"1"),await v2(e,Oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>g2(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>j5(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>v2(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=wf(i,!1).getAll();return new mu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zA.type="LOCAL";const H5=zA;new gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t,e){return e?An(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp extends PA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Yo(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function G5(t){return S5(t.auth,new bp(t),t.bypassAuthState)}function K5(t){const{auth:e,user:r}=t;return ie(r,e,"internal-error"),C5(r,new bp(t),t.bypassAuthState)}async function X5(t){const{auth:e,user:r}=t;return ie(r,e,"internal-error"),T5(r,new bp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,r,n,i,o=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return G5;case"linkViaPopup":case"linkViaRedirect":return X5;case"reauthViaPopup":case"reauthViaRedirect":return K5;default:Mn(this.auth,"internal-error")}}resolve(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=new gu(2e3,1e4);class Uo extends $A{constructor(e,r,n,i,o){super(e,r,i,o),this.provider=n,this.authWindow=null,this.pollId=null,Uo.currentPopupAction&&Uo.currentPopupAction.cancel(),Uo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){Ln(this.filter.length===1,"Popup operations only handle one event");const e=Rp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Uo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q5.get())};e()}}Uo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5="pendingRedirect",Ll=new Map;class Q5 extends $A{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Ll.get(this.auth._key());if(!e){try{const n=await Z5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Ll.set(this.auth._key(),e)}return this.bypassAuthState||Ll.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z5(t,e){const r=tk(e),n=ek(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function J5(t,e){Ll.set(t._key(),e)}function ek(t){return An(t._redirectPersistence)}function tk(t){return Ml(Y5,t.config.apiKey,t.name)}async function rk(t,e,r=!1){if(Zr(t.app))return Promise.reject(qi(t));const n=Cp(t),i=W5(n,e),s=await new Q5(n,i,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=10*60*1e3;class ik{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ok(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!HA(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(an(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nk&&this.cachedEventUids.clear(),this.cachedEventUids.has(m2(e))}saveEventToCache(e){this.cachedEventUids.add(m2(e)),this.lastProcessedEventTime=Date.now()}}function m2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ok(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sk(t,e={}){return Cs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uk=/^https?/;async function lk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sk(t);for(const r of e)try{if(ck(r))return}catch{}Mn(t,"unauthorized-domain")}function ck(t){const e=b0(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!uk.test(r))return!1;if(ak.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=new gu(3e4,6e4);function y2(){const t=un().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function hk(t){return new Promise((e,r)=>{var n,i,o;function s(){y2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y2(),r(an(t,"network-request-failed"))},timeout:fk.get()})}if(!((i=(n=un().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=un().gapi)===null||o===void 0)&&o.load)s();else{const a=y5("iframefcb");return un()[a]=()=>{gapi.load?s():r(an(t,"network-request-failed"))},v5(`${m5()}?onload=${a}`).catch(u=>r(u))}}).catch(e=>{throw Fl=null,e})}let Fl=null;function dk(t){return Fl=Fl||hk(t),Fl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=new gu(5e3,15e3),gk="__/auth/iframe",vk="emulator/auth/iframe",mk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _k(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Ep(e,vk):`https://${t.config.authDomain}/${gk}`,n={apiKey:e.apiKey,appName:t.name,v:ws},i=yk.get(t.config.apiHost);i&&(n.eid=i);const o=t._getFrameworks();return o.length&&(n.fw=o.join(",")),`${r}?${au(n).slice(1)}`}async function wk(t){const e=await dk(t),r=un().gapi;return ie(r,t,"internal-error"),e.open({where:document.body,url:_k(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mk,dontclear:!0},n=>new Promise(async(i,o)=>{await n.restyle({setHideOnLeave:!1});const s=an(t,"network-request-failed"),a=un().setTimeout(()=>{o(s)},pk.get());function u(){un().clearTimeout(a),i(n)}n.ping(u).then(u,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ek=500,Ak=600,Ik="_blank",Tk="http://localhost";class _2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ck(t,e,r,n=Ek,i=Ak){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const u=Object.assign(Object.assign({},xk),{width:n.toString(),height:i.toString(),top:o,left:s}),l=jt().toLowerCase();r&&(a=IA(l)?Ik:r),EA(l)&&(e=e||Tk,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[p,v])=>`${d}${p}=${v},`,"");if(u5(l)&&a!=="_self")return Sk(e||"",a),new _2(null);const h=window.open(e||"",a,c);ie(h,t,"popup-blocked");try{h.focus()}catch{}return new _2(h)}function Sk(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="__/auth/handler",bk="emulator/auth/handler",Ok=encodeURIComponent("fac");async function w2(t,e,r,n,i,o){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:ws,eventId:i};if(e instanceof DA){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",vb(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries(o||{}))s[c]=h}if(e instanceof vu){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(s.scopes=c.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await t._getAppCheckToken(),l=u?`#${Ok}=${encodeURIComponent(u)}`:"";return`${Nk(t)}?${au(a).slice(1)}${l}`}function Nk({config:t}){return t.emulator?Ep(t,bk):`https://${t.authDomain}/${Rk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="webStorageSupport";class Pk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BA,this._completeRedirectFn=rk,this._overrideRedirectResult=J5}async _openPopup(e,r,n,i){var o;Ln((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await w2(e,r,n,b0(),i);return Ck(e,s,Rp())}async _openRedirect(e,r,n,i){await this._originValidation(e);const o=await w2(e,r,n,b0(),i);return M5(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:o}=this.eventManagers[r];return i?Promise.resolve(i):(Ln(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await wk(e),n=new ik(e);return r.register("authEvent",i=>(ie(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(jh,{type:jh},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[jh];s!==void 0&&r(!!s),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=lk(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return bA()||AA()||Tp()}}const Dk=Pk;var x2="@firebase/auth",E2="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Lk(t){cn(new Wr("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=n.options;ie(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OA(t)},l=new p5(n,i,o,u);return w5(l,r),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),cn(new Wr("auth-internal",e=>{const r=Cp(e.getProvider("auth").getImmediate());return(n=>new kk(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),br(x2,E2,Mk(t)),br(x2,E2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=5*60,Bk=wx("authIdTokenMaxAge")||Fk;let A2=null;const Vk=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Bk)return;const i=r==null?void 0:r.token;A2!==i&&(A2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Uk(t=F1()){const e=_s(t,"auth");if(e.isInitialized())return e.getImmediate();const r=_5(t,{popupRedirectResolver:Dk,persistence:[H5,P5,BA]}),n=wx("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const s=Vk(o.toString());b5(r,s,()=>s(r.currentUser)),R5(r,a=>s(a))}}const i=yx("auth");return i&&x5(r,`http://${i}`),r}function jk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}g5({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const o=an("internal-error");o.customData=i,r(o)},n.type="text/javascript",n.charset="UTF-8",jk().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Lk("Browser");const WA="@firebase/installations",Op="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=1e4,KA=`w:${Op}`,XA="FIS_v2",zk="https://firebaseinstallations.googleapis.com/v1",$k=60*60*1e3,Hk="installations",Wk="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},oo=new lo(Hk,Wk,Gk);function qA(t){return t instanceof dn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA({projectId:t}){return`${zk}/projects/${t}/installations`}function QA(t){return{token:t.token,requestStatus:2,expiresIn:Xk(t.expiresIn),creationTime:Date.now()}}async function ZA(t,e){const n=(await e.json()).error;return oo.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function JA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Kk(t,{refreshToken:e}){const r=JA(t);return r.append("Authorization",qk(e)),r}async function eI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Xk(t){return Number(t.replace("s","000"))}function qk(t){return`${XA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yk({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=YA(t),i=JA(t),o=e.getImmediate({optional:!0});if(o){const l=await o.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const s={fid:r,authVersion:XA,appId:t.appId,sdkVersion:KA},a={method:"POST",headers:i,body:JSON.stringify(s)},u=await eI(()=>fetch(n,a));if(u.ok){const l=await u.json();return{fid:l.fid||r,registrationStatus:2,refreshToken:l.refreshToken,authToken:QA(l.authToken)}}else throw await ZA("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=/^[cdef][\w-]{21}$/,P0="";function Jk(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=e9(t);return Zk.test(r)?r:P0}catch{return P0}}function e9(t){return Qk(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new Map;function nI(t,e){const r=xf(t);iI(r,e),t9(r,e)}function iI(t,e){const r=rI.get(t);if(r)for(const n of r)n(e)}function t9(t,e){const r=r9();r&&r.postMessage({key:t,fid:e}),n9()}let Hi=null;function r9(){return!Hi&&"BroadcastChannel"in self&&(Hi=new BroadcastChannel("[Firebase] FID Change"),Hi.onmessage=t=>{iI(t.data.key,t.data.fid)}),Hi}function n9(){rI.size===0&&Hi&&(Hi.close(),Hi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9="firebase-installations-database",o9=1,so="firebase-installations-store";let zh=null;function Np(){return zh||(zh=ef(i9,o9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(so)}}})),zh}async function Pc(t,e){const r=xf(t),i=(await Np()).transaction(so,"readwrite"),o=i.objectStore(so),s=await o.get(r);return await o.put(e,r),await i.done,(!s||s.fid!==e.fid)&&nI(t,e.fid),e}async function oI(t){const e=xf(t),n=(await Np()).transaction(so,"readwrite");await n.objectStore(so).delete(e),await n.done}async function Ef(t,e){const r=xf(t),i=(await Np()).transaction(so,"readwrite"),o=i.objectStore(so),s=await o.get(r),a=e(s);return a===void 0?await o.delete(r):await o.put(a,r),await i.done,a&&(!s||s.fid!==a.fid)&&nI(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pp(t){let e;const r=await Ef(t.appConfig,n=>{const i=s9(n),o=a9(t,i);return e=o.registrationPromise,o.installationEntry});return r.fid===P0?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function s9(t){const e=t||{fid:Jk(),registrationStatus:0};return sI(e)}function a9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(oo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=u9(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:l9(t)}:{installationEntry:e}}async function u9(t,e){try{const r=await Yk(t,e);return Pc(t.appConfig,r)}catch(r){throw qA(r)&&r.customData.serverCode===409?await oI(t.appConfig):await Pc(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function l9(t){let e=await I2(t.appConfig);for(;e.registrationStatus===1;)await tI(100),e=await I2(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await Pp(t);return n||r}return e}function I2(t){return Ef(t,e=>{if(!e)throw oo.create("installation-not-found");return sI(e)})}function sI(t){return c9(t)?{fid:t.fid,registrationStatus:0}:t}function c9(t){return t.registrationStatus===1&&t.registrationTime+GA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f9({appConfig:t,heartbeatServiceProvider:e},r){const n=h9(t,r),i=Kk(t,r),o=e.getImmediate({optional:!0});if(o){const l=await o.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const s={installation:{sdkVersion:KA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(s)},u=await eI(()=>fetch(n,a));if(u.ok){const l=await u.json();return QA(l)}else throw await ZA("Generate Auth Token",u)}function h9(t,{fid:e}){return`${YA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(t,e=!1){let r;const n=await Ef(t.appConfig,o=>{if(!aI(o))throw oo.create("not-registered");const s=o.authToken;if(!e&&g9(s))return o;if(s.requestStatus===1)return r=d9(t,e),o;{if(!navigator.onLine)throw oo.create("app-offline");const a=m9(o);return r=p9(t,a),a}});return r?await r:n.authToken}async function d9(t,e){let r=await T2(t.appConfig);for(;r.authToken.requestStatus===1;)await tI(100),r=await T2(t.appConfig);const n=r.authToken;return n.requestStatus===0?Dp(t,e):n}function T2(t){return Ef(t,e=>{if(!aI(e))throw oo.create("not-registered");const r=e.authToken;return y9(r)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function p9(t,e){try{const r=await f9(t,e),n=Object.assign(Object.assign({},e),{authToken:r});return await Pc(t.appConfig,n),r}catch(r){if(qA(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await oI(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Pc(t.appConfig,n)}throw r}}function aI(t){return t!==void 0&&t.registrationStatus===2}function g9(t){return t.requestStatus===2&&!v9(t)}function v9(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+$k}function m9(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function y9(t){return t.requestStatus===1&&t.requestTime+GA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _9(t){const e=t,{installationEntry:r,registrationPromise:n}=await Pp(e);return n?n.catch(console.error):Dp(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w9(t,e=!1){const r=t;return await x9(r),(await Dp(r,e)).token}async function x9(t){const{registrationPromise:e}=await Pp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E9(t){if(!t||!t.options)throw $h("App Configuration");if(!t.name)throw $h("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw $h(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function $h(t){return oo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="installations",A9="installations-internal",I9=t=>{const e=t.getProvider("app").getImmediate(),r=E9(e),n=_s(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},T9=t=>{const e=t.getProvider("app").getImmediate(),r=_s(e,uI).getImmediate();return{getId:()=>_9(r),getToken:i=>w9(r,i)}};function C9(){cn(new Wr(uI,I9,"PUBLIC")),cn(new Wr(A9,T9,"PRIVATE"))}C9();br(WA,Op);br(WA,Op,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9="/firebase-messaging-sw.js",R9="/firebase-cloud-messaging-push-scope",lI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",b9="https://fcmregistrations.googleapis.com/v1",cI="google.c.a.c_id",O9="google.c.a.c_l",N9="google.c.a.ts",P9="google.c.a.e",C2=1e4;var S2;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(S2||(S2={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ja;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Ja||(Ja={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function D9(t){const e="=".repeat((4-t.length%4)%4),r=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(r),i=new Uint8Array(n.length);for(let o=0;o<n.length;++o)i[o]=n.charCodeAt(o);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="fcm_token_details_db",k9=5,R2="fcm_token_object_Store";async function M9(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(Hh))return null;let e=null;return(await ef(Hh,k9,{upgrade:async(n,i,o,s)=>{var a;if(i<2||!n.objectStoreNames.contains(R2))return;const u=s.objectStore(R2),l=await u.index("fcmSenderId").get(t);if(await u.clear(),!!l){if(i===2){const c=l;if(!c.auth||!c.p256dh||!c.endpoint)return;e={token:c.fcmToken,createTime:(a=c.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:yn(c.vapidKey)}}}else if(i===3){const c=l;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:yn(c.auth),p256dh:yn(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:yn(c.vapidKey)}}}else if(i===4){const c=l;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:yn(c.auth),p256dh:yn(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:yn(c.vapidKey)}}}}}})).close(),await Dh(Hh),await Dh("fcm_vapid_details_db"),await Dh("undefined"),L9(e)?e:null}function L9(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9="firebase-messaging-database",B9=1,eu="firebase-messaging-store";let Wh=null;function fI(){return Wh||(Wh=ef(F9,B9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(eu)}}})),Wh}async function V9(t){const e=hI(t),n=await(await fI()).transaction(eu).objectStore(eu).get(e);if(n)return n;{const i=await M9(t.appConfig.senderId);if(i)return await kp(t,i),i}}async function kp(t,e){const r=hI(t),i=(await fI()).transaction(eu,"readwrite");return await i.objectStore(eu).put(e,r),await i.done,e}function hI({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Jt=new lo("messaging","Messaging",U9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j9(t,e){const r=await Lp(t),n=dI(e),i={method:"POST",headers:r,body:JSON.stringify(n)};let o;try{o=await(await fetch(Mp(t.appConfig),i)).json()}catch(s){throw Jt.create("token-subscribe-failed",{errorInfo:s==null?void 0:s.toString()})}if(o.error){const s=o.error.message;throw Jt.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw Jt.create("token-subscribe-no-token");return o.token}async function z9(t,e){const r=await Lp(t),n=dI(e.subscriptionOptions),i={method:"PATCH",headers:r,body:JSON.stringify(n)};let o;try{o=await(await fetch(`${Mp(t.appConfig)}/${e.token}`,i)).json()}catch(s){throw Jt.create("token-update-failed",{errorInfo:s==null?void 0:s.toString()})}if(o.error){const s=o.error.message;throw Jt.create("token-update-failed",{errorInfo:s})}if(!o.token)throw Jt.create("token-update-no-token");return o.token}async function $9(t,e){const n={method:"DELETE",headers:await Lp(t)};try{const o=await(await fetch(`${Mp(t.appConfig)}/${e}`,n)).json();if(o.error){const s=o.error.message;throw Jt.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw Jt.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function Mp({projectId:t}){return`${b9}/projects/${t}/registrations`}async function Lp({appConfig:t,installations:e}){const r=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function dI({p256dh:t,auth:e,endpoint:r,vapidKey:n}){const i={web:{endpoint:r,auth:e,p256dh:t}};return n!==lI&&(i.web.applicationPubKey=n),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=7*24*60*60*1e3;async function W9(t){const e=await K9(t.swRegistration,t.vapidKey),r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:yn(e.getKey("auth")),p256dh:yn(e.getKey("p256dh"))},n=await V9(t.firebaseDependencies);if(n){if(X9(n.subscriptionOptions,r))return Date.now()>=n.createTime+H9?G9(t,{token:n.token,createTime:Date.now(),subscriptionOptions:r}):n.token;try{await $9(t.firebaseDependencies,n.token)}catch(i){console.warn(i)}return b2(t.firebaseDependencies,r)}else return b2(t.firebaseDependencies,r)}async function G9(t,e){try{const r=await z9(t.firebaseDependencies,e),n=Object.assign(Object.assign({},e),{token:r,createTime:Date.now()});return await kp(t.firebaseDependencies,n),r}catch(r){throw r}}async function b2(t,e){const n={token:await j9(t,e),createTime:Date.now(),subscriptionOptions:e};return await kp(t,n),n.token}async function K9(t,e){const r=await t.pushManager.getSubscription();return r||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:D9(e)})}function X9(t,e){const r=e.vapidKey===t.vapidKey,n=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return r&&n&&i&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return q9(e,t),Y9(e,t),Q9(e,t),e}function q9(t,e){if(!e.notification)return;t.notification={};const r=e.notification.title;r&&(t.notification.title=r);const n=e.notification.body;n&&(t.notification.body=n);const i=e.notification.image;i&&(t.notification.image=i);const o=e.notification.icon;o&&(t.notification.icon=o)}function Y9(t,e){e.data&&(t.data=e.data)}function Q9(t,e){var r,n,i,o,s;if(!e.fcmOptions&&!(!((r=e.notification)===null||r===void 0)&&r.click_action))return;t.fcmOptions={};const a=(i=(n=e.fcmOptions)===null||n===void 0?void 0:n.link)!==null&&i!==void 0?i:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(t.fcmOptions.link=a);const u=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t){return typeof t=="object"&&!!t&&cI in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */J9("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function J9(t,e){const r=[];for(let n=0;n<t.length;n++)r.push(t.charAt(n)),n<e.length&&r.push(e.charAt(n));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7(t){if(!t||!t.options)throw Gh("App Configuration Object");if(!t.name)throw Gh("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:r}=t;for(const n of e)if(!r[n])throw Gh(n);return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}function Gh(t){return Jt.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e,r,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=e7(e);this.firebaseDependencies={app:e,appConfig:i,installations:r,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r7(t){try{t.swRegistration=await navigator.serviceWorker.register(S9,{scope:R9}),t.swRegistration.update().catch(()=>{}),await n7(t.swRegistration)}catch(e){throw Jt.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function n7(t){return new Promise((e,r)=>{const n=setTimeout(()=>r(new Error(`Service worker not registered after ${C2} ms`)),C2),i=t.installing||t.waiting;t.active?(clearTimeout(n),e()):i?i.onstatechange=o=>{var s;((s=o.target)===null||s===void 0?void 0:s.state)==="activated"&&(i.onstatechange=null,clearTimeout(n),e())}:(clearTimeout(n),r(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i7(t,e){if(!e&&!t.swRegistration&&await r7(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Jt.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o7(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=lI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s7(t,e){if(!navigator)throw Jt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Jt.create("permission-blocked");return await o7(t,e==null?void 0:e.vapidKey),await i7(t,e==null?void 0:e.serviceWorkerRegistration),W9(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a7(t,e,r){const n=u7(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:r[cI],message_name:r[O9],message_time:r[N9],message_device_time:Math.floor(Date.now()/1e3)})}function u7(t){switch(t){case Ja.NOTIFICATION_CLICKED:return"notification_open";case Ja.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l7(t,e){const r=e.data;if(!r.isFirebaseMessaging)return;t.onMessageHandler&&r.messageType===Ja.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(O2(r)):t.onMessageHandler.next(O2(r)));const n=r.data;Z9(n)&&n[P9]==="1"&&await a7(t,r.messageType,n)}const N2="@firebase/messaging",P2="0.12.21";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7=t=>{const e=new t7(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",r=>l7(e,r)),e},f7=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:n=>s7(e,n)}};function h7(){cn(new Wr("messaging",c7,"PUBLIC")),cn(new Wr("messaging-internal",f7,"PRIVATE")),br(N2,P2),br(N2,P2,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d7(){try{await Ix()}catch{return!1}return typeof window<"u"&&Ax()&&hb()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(t=F1()){return d7().then(e=>{if(!e)throw Jt.create("unsupported-browser")},e=>{throw Jt.create("indexed-db-unsupported")}),_s(zt(t),"messaging").getImmediate()}h7();const g7={apiKey:"AIzaSyB4W2cA7Ec8x4u3A9kvNfKKgBLfgquVnPg",authDomain:"inventoryapp-5fc4d.firebaseapp.com",projectId:"inventoryapp-5fc4d",storageBucket:"inventoryapp-5fc4d.firebasestorage.app",messagingSenderId:"777550688499",appId:"1:777550688499:web:46373408b19205a0ba4786",measurementId:"G-G08N6QEVZP"};console.log("firebase config");const Fp=Sx(g7),yu=xD(Fp);Uk(Fp);p7(Fp);const v7="users",Af="items",pI=async t=>{console.log("getUserByusername",t);try{const e=kD(wD(yu,v7),MD("username","==",t)),r=await UD(e);if(!r.empty){const n=r.docs[0].data();return{username:n.username,email:n.email,familyID:n.familyID,userID:n.userID}}return null}catch(e){throw console.error("Error getting user by username:",e),e}},m7=async()=>{console.log("in initializeAdminUser");try{const t=await pI("admin");if(t)return t;throw new Error("Admin user not found in database")}catch(t){throw console.error("Error initializing admin user:",t),t}},y7=async(t,e)=>{try{const r=gf(yu,Af,t);(await _p(r)).exists()?await hA(r,{[e.id]:e}):await fA(r,{[e.id]:e})}catch(r){throw console.error(`Error adding item to family ${t}:`,r),r}},hl=async(t,e)=>{try{const r=gf(yu,Af,t);await hA(r,{[e.id]:e})}catch(r){throw console.error(`Error updating item in family ${t}:`,r),r}},_7=async(t,e)=>{try{const r=gf(yu,Af,t),n=await _p(r);if(n.exists()){const i=n.data();delete i[e],await fA(r,i)}}catch(r){throw console.error(`Error deleting item ${e} from family ${t}:`,r),r}},w7=async t=>{try{const e=gf(yu,Af,t),r=await _p(e);if(r.exists()){const n=r.data();return Object.values(n)}return[]}catch(e){throw console.error(`Error getting items for family ${t}:`,e),e}},gI=Z.createContext(void 0),Bp=()=>{const t=Z.useContext(gI);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},x7=({children:t})=>{const[e,r]=Z.useState(null),[n,i]=Z.useState(!0);Z.useEffect(()=>{(async()=>{try{const l=await m7();r(l)}catch(l){console.error("Error initializing auth:",l)}finally{i(!1)}})()},[]);const a={user:e,login:async u=>{try{i(!0);const l=await pI(u);return l?(r(l),!0):!1}catch(l){return console.error("Error during login:",l),!1}finally{i(!1)}},logout:()=>{r(null)},isLoading:n};return L.jsx(gI.Provider,{value:a,children:t})},E7=({isOpen:t,onClose:e})=>{const[r,n]=Z.useState(""),[i,o]=Z.useState(""),[s,a]=Z.useState(!1),{login:u}=Bp(),l=async h=>{h.preventDefault(),o(""),a(!0);try{await u(r.trim())?(n(""),e()):o("User not found. Please check the username and try again.")}catch{o("An error occurred. Please try again.")}finally{a(!1)}},c=()=>{n(""),o(""),e()};return t?L.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:L.jsxs("div",{className:"bg-white rounded-lg p-6 w-80 max-w-sm mx-4",children:[L.jsx("h2",{className:"text-xl font-bold mb-4",children:"Switch User"}),L.jsxs("form",{onSubmit:l,children:[L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),L.jsx("input",{id:"username",type:"text",value:r,onChange:h=>n(h.target.value),placeholder:"Enter username",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s,required:!0})]}),i&&L.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:i}),L.jsxs("div",{className:"flex gap-3",children:[L.jsx("button",{type:"button",onClick:c,disabled:s,className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),L.jsx("button",{type:"submit",disabled:s||!r.trim(),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Switching...":"Switch User"})]})]})]})}):null},A7=()=>{const[t,e]=Z.useState(!1),[r,n]=Z.useState(!1),[i,o]=Z.useState(!1),s=Z.useRef(null),{t:a}=ms(),{user:u}=Bp(),l=()=>e(!t),c=d=>{s.current&&!s.current.contains(d.target)&&e(!1)};Z.useEffect(()=>(document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)),[]);const h=()=>{o(!0),e(!1)};return L.jsxs(L.Fragment,{children:[L.jsxs("header",{className:"header",children:[L.jsx("div",{className:"header-left",children:u&&L.jsxs("span",{className:"logged-in-user",children:["(",u.username,")"]})}),L.jsx("div",{className:"header-center",children:L.jsx("h1",{className:"header-title",children:a("header.appTitle")})}),L.jsxs("div",{className:"header-right",ref:s,children:[L.jsx("button",{className:"menu-button",onClick:l,"aria-label":"Menu",children:L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[L.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),L.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),L.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]})}),t&&L.jsxs("div",{className:"menu-dropdown",children:[L.jsx("div",{onClick:()=>{n(!0),e(!1)},children:a("header.about")}),L.jsx("div",{onClick:h,children:"Switch User"})]})]}),r&&L.jsx("div",{className:"modal-overlay",onClick:()=>n(!1),children:L.jsxs("div",{className:"about-modal-content",onClick:d=>d.stopPropagation(),children:[L.jsx("h2",{children:a("header.appTitle")}),L.jsxs("p",{children:[a("about.version"),": ",WR.version]}),L.jsx("button",{onClick:()=>n(!1),className:"about-close-button",children:a("buttons.close")})]})})]}),L.jsx(E7,{isOpen:i,onClose:()=>o(!1)})]})},wt=[];for(let t=0;t<256;++t)wt.push((t+256).toString(16).slice(1));function I7(t,e=0){return(wt[t[e+0]]+wt[t[e+1]]+wt[t[e+2]]+wt[t[e+3]]+"-"+wt[t[e+4]]+wt[t[e+5]]+"-"+wt[t[e+6]]+wt[t[e+7]]+"-"+wt[t[e+8]]+wt[t[e+9]]+"-"+wt[t[e+10]]+wt[t[e+11]]+wt[t[e+12]]+wt[t[e+13]]+wt[t[e+14]]+wt[t[e+15]]).toLowerCase()}let Kh;const T7=new Uint8Array(16);function C7(){if(!Kh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Kh=crypto.getRandomValues.bind(crypto)}return Kh(T7)}const S7=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),D2={randomUUID:S7};function R7(t,e,r){var i;if(D2.randomUUID&&!e&&!t)return D2.randomUUID();t=t||{};const n=t.random??((i=t.rng)==null?void 0:i.call(t))??C7();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let o=0;o<16;++o)e[r+o]=n[o];return e}return I7(n)}const b7=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState(!1),[i,o]=Z.useState(""),[s,a]=Z.useState(""),[u,l]=Z.useState("all"),[c,h]=Z.useState(null),[d,p]=Z.useState(null),[v,w]=Z.useState(!1),[I,_]=Z.useState(null),{user:m,isLoading:x}=Bp();Z.useEffect(()=>{(async()=>{if(m)try{w(!0),_(null);const ee=await w7(m.familyID);e(ee)}catch(ee){console.error("Error fetching items:",ee),_("Failed to load items. Please try again.")}finally{w(!1)}})()},[m]);const S=async q=>{if(m)try{_(null);const ee=t.find(oe=>oe.barcode===q);if(ee){const oe={...ee,amountInStock:Math.min(20,ee.amountInStock+1)};await hl(m.familyID,oe),e(we=>we.map(z=>z.id===oe.id?oe:z))}else o(q),n(!0)}catch(ee){console.error("Error processing barcode:",ee),_("Failed to process barcode. Please try again.")}},P=async(q,ee,oe,we)=>{if(m)try{_(null),console.log("handleAddNewItem called with user:",{user:m,familyID:m.familyID,familyIDType:typeof m.familyID});const z={id:R7(),barcode:i,name:q,icon:ee,category:oe,brand:we,amountInStock:1};if(!m.familyID||typeof m.familyID!="string")throw new Error(`Invalid familyID: ${m.familyID} (type: ${typeof m.familyID})`);console.log("About to call addItemToFamily with:",{familyID:m.familyID,newItem:z}),await y7(m.familyID,z),e(Q=>[...Q,z]),n(!1),o("")}catch(z){console.error("Error adding item:",z),_("Failed to add item. Please try again.")}},k=()=>{n(!1),o(""),p(null),_(null)},A=q=>{const ee=t.find(oe=>oe.id===q);ee&&(p(ee),o(ee.barcode),n(!0))},E=async(q,ee,oe,we,z)=>{if(!(!m||!d))try{_(null);const Q={...d,barcode:q,name:ee,icon:oe,category:we,brand:z};await hl(m.familyID,Q),e(se=>se.map(ce=>ce.id===Q.id?Q:ce)),n(!1),p(null)}catch(Q){console.error("Error editing item:",Q),_("Failed to update item. Please try again.")}},T=async q=>{if(m)try{_(null);const ee=t.find(oe=>oe.id===q);if(ee){const oe={...ee,amountInStock:Math.min(20,ee.amountInStock+1)};await hl(m.familyID,oe),e(we=>we.map(z=>z.id===oe.id?oe:z))}}catch(ee){console.error("Error increasing amount:",ee),_("Failed to update item quantity. Please try again.")}},R=async q=>{if(m)try{_(null);const ee=t.find(oe=>oe.id===q);if(ee){const oe={...ee,amountInStock:Math.max(0,ee.amountInStock-1)};await hl(m.familyID,oe),e(we=>we.map(z=>z.id===oe.id?oe:z))}}catch(ee){console.error("Error decreasing amount:",ee),_("Failed to update item quantity. Please try again.")}},N=q=>{h(q)},D=async()=>{if(!(!m||!c))try{_(null),await _7(m.familyID,c),e(q=>q.filter(ee=>ee.id!==c)),h(null)}catch(q){console.error("Error removing item:",q),_("Failed to remove item. Please try again.")}},O=t.filter(q=>{const ee=q.name.toLowerCase().includes(s.toLowerCase())||q.barcode.includes(s),oe=u==="all"||u==="inStock"&&q.amountInStock>0||u==="outOfStock"&&q.amountInStock===0;return ee&&oe});return x||v?L.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),L.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):m?L.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 max-w-md mx-auto",children:[L.jsx(A7,{}),I&&L.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:[I,L.jsx("button",{onClick:()=>_(null),className:"ml-2 text-red-900 hover:text-red-700",children:"×"})]}),L.jsx(D6,{onBarcodeSubmit:S}),L.jsx(k6,{searchTerm:s,setSearchTerm:a,filter:u,setFilter:l,items:t}),L.jsx(F6,{items:O,totalItems:t.length,onIncrease:T,onDecrease:R,onEdit:A,onRemove:N}),L.jsx(FR,{isOpen:r,onClose:k,onAdd:P,onEdit:E,barcode:i,editItem:d}),L.jsx(BR,{isOpen:!!c,onClose:()=>h(null),onConfirm:D})]}):L.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:L.jsx("div",{className:"text-center",children:L.jsx("p",{className:"text-gray-600",children:"No user logged in"})})})},O7=()=>L.jsx(x7,{children:L.jsx(b7,{})});Xh.createRoot(document.getElementById("root")).render(L.jsx(uT.StrictMode,{children:L.jsx(O7,{})}));
