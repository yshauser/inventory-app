(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function dT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Y2={exports:{}},Vc={},Q2={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var al=Symbol.for("react.element"),pT=Symbol.for("react.portal"),gT=Symbol.for("react.fragment"),mT=Symbol.for("react.strict_mode"),vT=Symbol.for("react.profiler"),yT=Symbol.for("react.provider"),_T=Symbol.for("react.context"),wT=Symbol.for("react.forward_ref"),xT=Symbol.for("react.suspense"),ET=Symbol.for("react.memo"),AT=Symbol.for("react.lazy"),Jg=Symbol.iterator;function IT(t){return t===null||typeof t!="object"?null:(t=Jg&&t[Jg]||t["@@iterator"],typeof t=="function"?t:null)}var Z2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J2=Object.assign,e_={};function ys(t,e,n){this.props=t,this.context=e,this.refs=e_,this.updater=n||Z2}ys.prototype.isReactComponent={};ys.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ys.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function t_(){}t_.prototype=ys.prototype;function z0(t,e,n){this.props=t,this.context=e,this.refs=e_,this.updater=n||Z2}var H0=z0.prototype=new t_;H0.constructor=z0;J2(H0,ys.prototype);H0.isPureReactComponent=!0;var em=Array.isArray,n_=Object.prototype.hasOwnProperty,W0={current:null},r_={key:!0,ref:!0,__self:!0,__source:!0};function i_(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)n_.call(e,r)&&!r_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:al,type:t,key:o,ref:s,props:i,_owner:W0.current}}function TT(t,e){return{$$typeof:al,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function G0(t){return typeof t=="object"&&t!==null&&t.$$typeof===al}function ST(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tm=/\/+/g;function nh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ST(""+t.key):e.toString(36)}function _u(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case al:case pT:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+nh(s,0):r,em(i)?(n="",t!=null&&(n=t.replace(tm,"$&/")+"/"),_u(i,e,n,"",function(u){return u})):i!=null&&(G0(i)&&(i=TT(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(tm,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",em(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+nh(o,a);s+=_u(o,e,n,l,i)}else if(l=IT(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+nh(o,a++),s+=_u(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function zl(t,e,n){if(t==null)return t;var r=[],i=0;return _u(t,r,"","",function(o){return e.call(n,o,i++)}),r}function CT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},wu={transition:null},bT={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:wu,ReactCurrentOwner:W0};function o_(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:zl,forEach:function(t,e,n){zl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zl(t,function(){e++}),e},toArray:function(t){return zl(t,function(e){return e})||[]},only:function(t){if(!G0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=ys;me.Fragment=gT;me.Profiler=vT;me.PureComponent=z0;me.StrictMode=mT;me.Suspense=xT;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bT;me.act=o_;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=J2({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=W0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)n_.call(e,l)&&!r_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:al,type:t.type,key:i,ref:o,props:r,_owner:s}};me.createContext=function(t){return t={$$typeof:_T,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yT,_context:t},t.Consumer=t};me.createElement=i_;me.createFactory=function(t){var e=i_.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:wT,render:t}};me.isValidElement=G0;me.lazy=function(t){return{$$typeof:AT,_payload:{_status:-1,_result:t},_init:CT}};me.memo=function(t,e){return{$$typeof:ET,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=wu.transition;wu.transition={};try{t()}finally{wu.transition=e}};me.unstable_act=o_;me.useCallback=function(t,e){return en.current.useCallback(t,e)};me.useContext=function(t){return en.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return en.current.useDeferredValue(t)};me.useEffect=function(t,e){return en.current.useEffect(t,e)};me.useId=function(){return en.current.useId()};me.useImperativeHandle=function(t,e,n){return en.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return en.current.useMemo(t,e)};me.useReducer=function(t,e,n){return en.current.useReducer(t,e,n)};me.useRef=function(t){return en.current.useRef(t)};me.useState=function(t){return en.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return en.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return en.current.useTransition()};me.version="18.3.1";Q2.exports=me;var H=Q2.exports;const RT=dT(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT=H,OT=Symbol.for("react.element"),PT=Symbol.for("react.fragment"),DT=Object.prototype.hasOwnProperty,kT=NT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MT={key:!0,ref:!0,__self:!0,__source:!0};function s_(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)DT.call(e,r)&&!MT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:OT,type:t,key:o,ref:s,props:i,_owner:kT.current}}Vc.Fragment=PT;Vc.jsx=s_;Vc.jsxs=s_;Y2.exports=Vc;var N=Y2.exports,id={},a_={exports:{}},_n={},l_={exports:{}},u_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,W){var Z=j.length;j.push(W);e:for(;0<Z;){var q=Z-1>>>1,le=j[q];if(0<i(le,W))j[q]=W,j[Z]=le,Z=q;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var W=j[0],Z=j.pop();if(Z!==W){j[0]=Z;e:for(var q=0,le=j.length,Ce=le>>>1;q<Ce;){var xn=2*(q+1)-1,En=j[xn],vr=xn+1,Zn=j[vr];if(0>i(En,Z))vr<le&&0>i(Zn,En)?(j[q]=Zn,j[vr]=Z,q=vr):(j[q]=En,j[xn]=Z,q=xn);else if(vr<le&&0>i(Zn,Z))j[q]=Zn,j[vr]=Z,q=vr;else break e}}return W}function i(j,W){var Z=j.sortIndex-W.sortIndex;return Z!==0?Z:j.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,h=null,d=3,p=!1,m=!1,w=!1,I=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(j){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=j)r(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(u)}}function T(j){if(w=!1,x(j),!m)if(n(l)!==null)m=!0,Y(P);else{var W=n(u);W!==null&&X(T,W.startTime-j)}}function P(j,W){m=!1,w&&(w=!1,y(E),E=-1),p=!0;var Z=d;try{for(x(W),h=n(l);h!==null&&(!(h.expirationTime>W)||j&&!D());){var q=h.callback;if(typeof q=="function"){h.callback=null,d=h.priorityLevel;var le=q(h.expirationTime<=W);W=t.unstable_now(),typeof le=="function"?h.callback=le:h===n(l)&&r(l),x(W)}else r(l);h=n(l)}if(h!==null)var Ce=!0;else{var xn=n(u);xn!==null&&X(T,xn.startTime-W),Ce=!1}return Ce}finally{h=null,d=Z,p=!1}}var k=!1,A=null,E=-1,S=5,b=-1;function D(){return!(t.unstable_now()-b<S)}function M(){if(A!==null){var j=t.unstable_now();b=j;var W=!0;try{W=A(!0,j)}finally{W?O():(k=!1,A=null)}}else k=!1}var O;if(typeof v=="function")O=function(){v(M)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,te=he.port2;he.port1.onmessage=M,O=function(){te.postMessage(null)}}else O=function(){I(M,0)};function Y(j){A=j,k||(k=!0,O())}function X(j,W){E=I(function(){j(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,Y(P))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(d){case 1:case 2:case 3:var W=3;break;default:W=d}var Z=d;d=W;try{return j()}finally{d=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,W){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Z=d;d=j;try{return W()}finally{d=Z}},t.unstable_scheduleCallback=function(j,W,Z){var q=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?q+Z:q):Z=q,j){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=Z+le,j={id:c++,callback:W,priorityLevel:j,startTime:Z,expirationTime:le,sortIndex:-1},Z>q?(j.sortIndex=Z,e(u,j),n(l)===null&&j===n(u)&&(w?(y(E),E=-1):w=!0,X(T,Z-q))):(j.sortIndex=le,e(l,j),m||p||(m=!0,Y(P))),j},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(j){var W=d;return function(){var Z=d;d=W;try{return j.apply(this,arguments)}finally{d=Z}}}})(u_);l_.exports=u_;var LT=l_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT=H,yn=LT;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c_=new Set,Pa={};function ho(t,e){ns(t,e),ns(t+"Capture",e)}function ns(t,e){for(Pa[t]=e,t=0;t<e.length;t++)c_.add(e[t])}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),od=Object.prototype.hasOwnProperty,BT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nm={},rm={};function VT(t){return od.call(rm,t)?!0:od.call(nm,t)?!1:BT.test(t)?rm[t]=!0:(nm[t]=!0,!1)}function UT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jT(t,e,n,r){if(e===null||typeof e>"u"||UT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var K0=/[\-:]([a-z])/g;function X0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(K0,X0);Rt[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(K0,X0);Rt[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(K0,X0);Rt[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function q0(t,e,n,r){var i=Rt.hasOwnProperty(e)?Rt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jT(e,n,i,r)&&(n=null),r||i===null?VT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ur=FT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hl=Symbol.for("react.element"),Po=Symbol.for("react.portal"),Do=Symbol.for("react.fragment"),Y0=Symbol.for("react.strict_mode"),sd=Symbol.for("react.profiler"),f_=Symbol.for("react.provider"),h_=Symbol.for("react.context"),Q0=Symbol.for("react.forward_ref"),ad=Symbol.for("react.suspense"),ld=Symbol.for("react.suspense_list"),Z0=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),d_=Symbol.for("react.offscreen"),im=Symbol.iterator;function Ws(t){return t===null||typeof t!="object"?null:(t=im&&t[im]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,rh;function ra(t){if(rh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rh=e&&e[1]||""}return`
`+rh+t}var ih=!1;function oh(t,e){if(!t||ih)return"";ih=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{ih=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ra(t):""}function $T(t){switch(t.tag){case 5:return ra(t.type);case 16:return ra("Lazy");case 13:return ra("Suspense");case 19:return ra("SuspenseList");case 0:case 2:case 15:return t=oh(t.type,!1),t;case 11:return t=oh(t.type.render,!1),t;case 1:return t=oh(t.type,!0),t;default:return""}}function ud(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Do:return"Fragment";case Po:return"Portal";case sd:return"Profiler";case Y0:return"StrictMode";case ad:return"Suspense";case ld:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case h_:return(t.displayName||"Context")+".Consumer";case f_:return(t._context.displayName||"Context")+".Provider";case Q0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Z0:return e=t.displayName||null,e!==null?e:ud(t.type)||"Memo";case Xr:e=t._payload,t=t._init;try{return ud(t(e))}catch{}}return null}function zT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ud(e);case 8:return e===Y0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _i(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function p_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function HT(t){var e=p_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wl(t){t._valueTracker||(t._valueTracker=HT(t))}function g_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=p_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Hu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cd(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function om(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=_i(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function m_(t,e){e=e.checked,e!=null&&q0(t,"checked",e,!1)}function fd(t,e){m_(t,e);var n=_i(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hd(t,e.type,n):e.hasOwnProperty("defaultValue")&&hd(t,e.type,_i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hd(t,e,n){(e!=="number"||Hu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ia=Array.isArray;function Go(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+_i(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function dd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function am(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(ia(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_i(n)}}function v_(t,e){var n=_i(e.value),r=_i(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function y_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?y_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gl,__=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gl=Gl||document.createElement("div"),Gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ma={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WT=["Webkit","ms","Moz","O"];Object.keys(ma).forEach(function(t){WT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ma[e]=ma[t]})});function w_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ma.hasOwnProperty(t)&&ma[t]?(""+e).trim():e+"px"}function x_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=w_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var GT=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gd(t,e){if(e){if(GT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function md(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vd=null;function J0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yd=null,Ko=null,Xo=null;function um(t){if(t=cl(t)){if(typeof yd!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Hc(e),yd(t.stateNode,t.type,e))}}function E_(t){Ko?Xo?Xo.push(t):Xo=[t]:Ko=t}function A_(){if(Ko){var t=Ko,e=Xo;if(Xo=Ko=null,um(t),e)for(t=0;t<e.length;t++)um(e[t])}}function I_(t,e){return t(e)}function T_(){}var sh=!1;function S_(t,e,n){if(sh)return t(e,n);sh=!0;try{return I_(t,e,n)}finally{sh=!1,(Ko!==null||Xo!==null)&&(T_(),A_())}}function ka(t,e){var n=t.stateNode;if(n===null)return null;var r=Hc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var _d=!1;if(Or)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){_d=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{_d=!1}function KT(t,e,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var va=!1,Wu=null,Gu=!1,wd=null,XT={onError:function(t){va=!0,Wu=t}};function qT(t,e,n,r,i,o,s,a,l){va=!1,Wu=null,KT.apply(XT,arguments)}function YT(t,e,n,r,i,o,s,a,l){if(qT.apply(this,arguments),va){if(va){var u=Wu;va=!1,Wu=null}else throw Error(z(198));Gu||(Gu=!0,wd=u)}}function po(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function C_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cm(t){if(po(t)!==t)throw Error(z(188))}function QT(t){var e=t.alternate;if(!e){if(e=po(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return cm(i),t;if(o===r)return cm(i),e;o=o.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function b_(t){return t=QT(t),t!==null?R_(t):null}function R_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=R_(t);if(e!==null)return e;t=t.sibling}return null}var N_=yn.unstable_scheduleCallback,fm=yn.unstable_cancelCallback,ZT=yn.unstable_shouldYield,JT=yn.unstable_requestPaint,Ze=yn.unstable_now,eS=yn.unstable_getCurrentPriorityLevel,e1=yn.unstable_ImmediatePriority,O_=yn.unstable_UserBlockingPriority,Ku=yn.unstable_NormalPriority,tS=yn.unstable_LowPriority,P_=yn.unstable_IdlePriority,Uc=null,or=null;function nS(t){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Uc,t,void 0,(t.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:oS,rS=Math.log,iS=Math.LN2;function oS(t){return t>>>=0,t===0?32:31-(rS(t)/iS|0)|0}var Kl=64,Xl=4194304;function oa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=oa(a):(o&=s,o!==0&&(r=oa(o)))}else s=n&~i,s!==0?r=oa(s):o!==0&&(r=oa(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wn(e),i=1<<n,r|=t[n],e&=~i;return r}function sS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Wn(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=sS(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function xd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function D_(){var t=Kl;return Kl<<=1,!(Kl&4194240)&&(Kl=64),t}function ah(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ll(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wn(e),t[e]=n}function lS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Wn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function t1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Pe=0;function k_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var M_,n1,L_,F_,B_,Ed=!1,ql=[],oi=null,si=null,ai=null,Ma=new Map,La=new Map,Qr=[],uS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hm(t,e){switch(t){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":si=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Ma.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":La.delete(e.pointerId)}}function Ks(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=cl(e),e!==null&&n1(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function cS(t,e,n,r,i){switch(e){case"focusin":return oi=Ks(oi,t,e,n,r,i),!0;case"dragenter":return si=Ks(si,t,e,n,r,i),!0;case"mouseover":return ai=Ks(ai,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ma.set(o,Ks(Ma.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,La.set(o,Ks(La.get(o)||null,t,e,n,r,i)),!0}return!1}function V_(t){var e=zi(t.target);if(e!==null){var n=po(e);if(n!==null){if(e=n.tag,e===13){if(e=C_(n),e!==null){t.blockedOn=e,B_(t.priority,function(){L_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ad(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vd=r,n.target.dispatchEvent(r),vd=null}else return e=cl(n),e!==null&&n1(e),t.blockedOn=n,!1;e.shift()}return!0}function dm(t,e,n){xu(t)&&n.delete(e)}function fS(){Ed=!1,oi!==null&&xu(oi)&&(oi=null),si!==null&&xu(si)&&(si=null),ai!==null&&xu(ai)&&(ai=null),Ma.forEach(dm),La.forEach(dm)}function Xs(t,e){t.blockedOn===e&&(t.blockedOn=null,Ed||(Ed=!0,yn.unstable_scheduleCallback(yn.unstable_NormalPriority,fS)))}function Fa(t){function e(i){return Xs(i,t)}if(0<ql.length){Xs(ql[0],t);for(var n=1;n<ql.length;n++){var r=ql[n];r.blockedOn===t&&(r.blockedOn=null)}}for(oi!==null&&Xs(oi,t),si!==null&&Xs(si,t),ai!==null&&Xs(ai,t),Ma.forEach(e),La.forEach(e),n=0;n<Qr.length;n++)r=Qr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qr.length&&(n=Qr[0],n.blockedOn===null);)V_(n),n.blockedOn===null&&Qr.shift()}var qo=Ur.ReactCurrentBatchConfig,qu=!0;function hS(t,e,n,r){var i=Pe,o=qo.transition;qo.transition=null;try{Pe=1,r1(t,e,n,r)}finally{Pe=i,qo.transition=o}}function dS(t,e,n,r){var i=Pe,o=qo.transition;qo.transition=null;try{Pe=4,r1(t,e,n,r)}finally{Pe=i,qo.transition=o}}function r1(t,e,n,r){if(qu){var i=Ad(t,e,n,r);if(i===null)vh(t,e,r,Yu,n),hm(t,r);else if(cS(i,t,e,n,r))r.stopPropagation();else if(hm(t,r),e&4&&-1<uS.indexOf(t)){for(;i!==null;){var o=cl(i);if(o!==null&&M_(o),o=Ad(t,e,n,r),o===null&&vh(t,e,r,Yu,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else vh(t,e,r,null,n)}}var Yu=null;function Ad(t,e,n,r){if(Yu=null,t=J0(r),t=zi(t),t!==null)if(e=po(t),e===null)t=null;else if(n=e.tag,n===13){if(t=C_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yu=t,null}function U_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eS()){case e1:return 1;case O_:return 4;case Ku:case tS:return 16;case P_:return 536870912;default:return 16}default:return 16}}var ni=null,i1=null,Eu=null;function j_(){if(Eu)return Eu;var t,e=i1,n=e.length,r,i="value"in ni?ni.value:ni.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Eu=i.slice(t,1<r?1-r:void 0)}function Au(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yl(){return!0}function pm(){return!1}function wn(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Yl:pm,this.isPropagationStopped=pm,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yl)},persist:function(){},isPersistent:Yl}),e}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},o1=wn(_s),ul=Ke({},_s,{view:0,detail:0}),pS=wn(ul),lh,uh,qs,jc=Ke({},ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qs&&(qs&&t.type==="mousemove"?(lh=t.screenX-qs.screenX,uh=t.screenY-qs.screenY):uh=lh=0,qs=t),lh)},movementY:function(t){return"movementY"in t?t.movementY:uh}}),gm=wn(jc),gS=Ke({},jc,{dataTransfer:0}),mS=wn(gS),vS=Ke({},ul,{relatedTarget:0}),ch=wn(vS),yS=Ke({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),_S=wn(yS),wS=Ke({},_s,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xS=wn(wS),ES=Ke({},_s,{data:0}),mm=wn(ES),AS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=TS[t])?!!e[t]:!1}function s1(){return SS}var CS=Ke({},ul,{key:function(t){if(t.key){var e=AS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Au(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s1,charCode:function(t){return t.type==="keypress"?Au(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Au(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bS=wn(CS),RS=Ke({},jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vm=wn(RS),NS=Ke({},ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s1}),OS=wn(NS),PS=Ke({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),DS=wn(PS),kS=Ke({},jc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),MS=wn(kS),LS=[9,13,27,32],a1=Or&&"CompositionEvent"in window,ya=null;Or&&"documentMode"in document&&(ya=document.documentMode);var FS=Or&&"TextEvent"in window&&!ya,$_=Or&&(!a1||ya&&8<ya&&11>=ya),ym=String.fromCharCode(32),_m=!1;function z_(t,e){switch(t){case"keyup":return LS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function H_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ko=!1;function BS(t,e){switch(t){case"compositionend":return H_(e);case"keypress":return e.which!==32?null:(_m=!0,ym);case"textInput":return t=e.data,t===ym&&_m?null:t;default:return null}}function VS(t,e){if(ko)return t==="compositionend"||!a1&&z_(t,e)?(t=j_(),Eu=i1=ni=null,ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $_&&e.locale!=="ko"?null:e.data;default:return null}}var US={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!US[t.type]:e==="textarea"}function W_(t,e,n,r){E_(r),e=Qu(e,"onChange"),0<e.length&&(n=new o1("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _a=null,Ba=null;function jS(t){nw(t,0)}function $c(t){var e=Fo(t);if(g_(e))return t}function $S(t,e){if(t==="change")return e}var G_=!1;if(Or){var fh;if(Or){var hh="oninput"in document;if(!hh){var xm=document.createElement("div");xm.setAttribute("oninput","return;"),hh=typeof xm.oninput=="function"}fh=hh}else fh=!1;G_=fh&&(!document.documentMode||9<document.documentMode)}function Em(){_a&&(_a.detachEvent("onpropertychange",K_),Ba=_a=null)}function K_(t){if(t.propertyName==="value"&&$c(Ba)){var e=[];W_(e,Ba,t,J0(t)),S_(jS,e)}}function zS(t,e,n){t==="focusin"?(Em(),_a=e,Ba=n,_a.attachEvent("onpropertychange",K_)):t==="focusout"&&Em()}function HS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $c(Ba)}function WS(t,e){if(t==="click")return $c(e)}function GS(t,e){if(t==="input"||t==="change")return $c(e)}function KS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xn=typeof Object.is=="function"?Object.is:KS;function Va(t,e){if(Xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!od.call(e,i)||!Xn(t[i],e[i]))return!1}return!0}function Am(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Im(t,e){var n=Am(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Am(n)}}function X_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?X_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function q_(){for(var t=window,e=Hu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hu(t.document)}return e}function l1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function XS(t){var e=q_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&X_(n.ownerDocument.documentElement,n)){if(r!==null&&l1(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Im(n,o);var s=Im(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qS=Or&&"documentMode"in document&&11>=document.documentMode,Mo=null,Id=null,wa=null,Td=!1;function Tm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Td||Mo==null||Mo!==Hu(r)||(r=Mo,"selectionStart"in r&&l1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wa&&Va(wa,r)||(wa=r,r=Qu(Id,"onSelect"),0<r.length&&(e=new o1("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Mo)))}function Ql(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Lo={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},dh={},Y_={};Or&&(Y_=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function zc(t){if(dh[t])return dh[t];if(!Lo[t])return t;var e=Lo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Y_)return dh[t]=e[n];return t}var Q_=zc("animationend"),Z_=zc("animationiteration"),J_=zc("animationstart"),ew=zc("transitionend"),tw=new Map,Sm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ci(t,e){tw.set(t,e),ho(e,[t])}for(var ph=0;ph<Sm.length;ph++){var gh=Sm[ph],YS=gh.toLowerCase(),QS=gh[0].toUpperCase()+gh.slice(1);Ci(YS,"on"+QS)}Ci(Q_,"onAnimationEnd");Ci(Z_,"onAnimationIteration");Ci(J_,"onAnimationStart");Ci("dblclick","onDoubleClick");Ci("focusin","onFocus");Ci("focusout","onBlur");Ci(ew,"onTransitionEnd");ns("onMouseEnter",["mouseout","mouseover"]);ns("onMouseLeave",["mouseout","mouseover"]);ns("onPointerEnter",["pointerout","pointerover"]);ns("onPointerLeave",["pointerout","pointerover"]);ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ho("onBeforeInput",["compositionend","keypress","textInput","paste"]);ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZS=new Set("cancel close invalid load scroll toggle".split(" ").concat(sa));function Cm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,YT(r,e,void 0,t),t.currentTarget=null}function nw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Cm(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Cm(i,a,u),o=l}}}if(Gu)throw t=wd,Gu=!1,wd=null,t}function Be(t,e){var n=e[Nd];n===void 0&&(n=e[Nd]=new Set);var r=t+"__bubble";n.has(r)||(rw(e,t,2,!1),n.add(r))}function mh(t,e,n){var r=0;e&&(r|=4),rw(n,t,r,e)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function Ua(t){if(!t[Zl]){t[Zl]=!0,c_.forEach(function(n){n!=="selectionchange"&&(ZS.has(n)||mh(n,!1,t),mh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zl]||(e[Zl]=!0,mh("selectionchange",!1,e))}}function rw(t,e,n,r){switch(U_(e)){case 1:var i=hS;break;case 4:i=dS;break;default:i=r1}n=i.bind(null,e,n,t),i=void 0,!_d||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vh(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=zi(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}S_(function(){var u=o,c=J0(n),h=[];e:{var d=tw.get(t);if(d!==void 0){var p=o1,m=t;switch(t){case"keypress":if(Au(n)===0)break e;case"keydown":case"keyup":p=bS;break;case"focusin":m="focus",p=ch;break;case"focusout":m="blur",p=ch;break;case"beforeblur":case"afterblur":p=ch;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=mS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=OS;break;case Q_:case Z_:case J_:p=_S;break;case ew:p=DS;break;case"scroll":p=pS;break;case"wheel":p=MS;break;case"copy":case"cut":case"paste":p=xS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=vm}var w=(e&4)!==0,I=!w&&t==="scroll",y=w?d!==null?d+"Capture":null:d;w=[];for(var v=u,x;v!==null;){x=v;var T=x.stateNode;if(x.tag===5&&T!==null&&(x=T,y!==null&&(T=ka(v,y),T!=null&&w.push(ja(v,T,x)))),I)break;v=v.return}0<w.length&&(d=new p(d,m,null,n,c),h.push({event:d,listeners:w}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==vd&&(m=n.relatedTarget||n.fromElement)&&(zi(m)||m[Pr]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?zi(m):null,m!==null&&(I=po(m),m!==I||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(w=gm,T="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(w=vm,T="onPointerLeave",y="onPointerEnter",v="pointer"),I=p==null?d:Fo(p),x=m==null?d:Fo(m),d=new w(T,v+"leave",p,n,c),d.target=I,d.relatedTarget=x,T=null,zi(c)===u&&(w=new w(y,v+"enter",m,n,c),w.target=x,w.relatedTarget=I,T=w),I=T,p&&m)t:{for(w=p,y=m,v=0,x=w;x;x=Eo(x))v++;for(x=0,T=y;T;T=Eo(T))x++;for(;0<v-x;)w=Eo(w),v--;for(;0<x-v;)y=Eo(y),x--;for(;v--;){if(w===y||y!==null&&w===y.alternate)break t;w=Eo(w),y=Eo(y)}w=null}else w=null;p!==null&&bm(h,d,p,w,!1),m!==null&&I!==null&&bm(h,I,m,w,!0)}}e:{if(d=u?Fo(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var P=$S;else if(wm(d))if(G_)P=GS;else{P=HS;var k=zS}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(P=WS);if(P&&(P=P(t,u))){W_(h,P,n,c);break e}k&&k(t,d,u),t==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&hd(d,"number",d.value)}switch(k=u?Fo(u):window,t){case"focusin":(wm(k)||k.contentEditable==="true")&&(Mo=k,Id=u,wa=null);break;case"focusout":wa=Id=Mo=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,Tm(h,n,c);break;case"selectionchange":if(qS)break;case"keydown":case"keyup":Tm(h,n,c)}var A;if(a1)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ko?z_(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&($_&&n.locale!=="ko"&&(ko||E!=="onCompositionStart"?E==="onCompositionEnd"&&ko&&(A=j_()):(ni=c,i1="value"in ni?ni.value:ni.textContent,ko=!0)),k=Qu(u,E),0<k.length&&(E=new mm(E,t,null,n,c),h.push({event:E,listeners:k}),A?E.data=A:(A=H_(n),A!==null&&(E.data=A)))),(A=FS?BS(t,n):VS(t,n))&&(u=Qu(u,"onBeforeInput"),0<u.length&&(c=new mm("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=A))}nw(h,e)})}function ja(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ka(t,n),o!=null&&r.unshift(ja(t,o,i)),o=ka(t,e),o!=null&&r.push(ja(t,o,i))),t=t.return}return r}function Eo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bm(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ka(n,o),l!=null&&s.unshift(ja(n,l,a))):i||(l=ka(n,o),l!=null&&s.push(ja(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var JS=/\r\n?/g,eC=/\u0000|\uFFFD/g;function Rm(t){return(typeof t=="string"?t:""+t).replace(JS,`
`).replace(eC,"")}function Jl(t,e,n){if(e=Rm(e),Rm(t)!==e&&n)throw Error(z(425))}function Zu(){}var Sd=null,Cd=null;function bd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rd=typeof setTimeout=="function"?setTimeout:void 0,tC=typeof clearTimeout=="function"?clearTimeout:void 0,Nm=typeof Promise=="function"?Promise:void 0,nC=typeof queueMicrotask=="function"?queueMicrotask:typeof Nm<"u"?function(t){return Nm.resolve(null).then(t).catch(rC)}:Rd;function rC(t){setTimeout(function(){throw t})}function yh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Fa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fa(e)}function li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Om(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ws=Math.random().toString(36).slice(2),nr="__reactFiber$"+ws,$a="__reactProps$"+ws,Pr="__reactContainer$"+ws,Nd="__reactEvents$"+ws,iC="__reactListeners$"+ws,oC="__reactHandles$"+ws;function zi(t){var e=t[nr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pr]||n[nr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Om(t);t!==null;){if(n=t[nr])return n;t=Om(t)}return e}t=n,n=t.parentNode}return null}function cl(t){return t=t[nr]||t[Pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Hc(t){return t[$a]||null}var Od=[],Bo=-1;function bi(t){return{current:t}}function $e(t){0>Bo||(t.current=Od[Bo],Od[Bo]=null,Bo--)}function Me(t,e){Bo++,Od[Bo]=t.current,t.current=e}var wi={},jt=bi(wi),un=bi(!1),eo=wi;function rs(t,e){var n=t.type.contextTypes;if(!n)return wi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function cn(t){return t=t.childContextTypes,t!=null}function Ju(){$e(un),$e(jt)}function Pm(t,e,n){if(jt.current!==wi)throw Error(z(168));Me(jt,e),Me(un,n)}function iw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,zT(t)||"Unknown",i));return Ke({},n,r)}function ec(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wi,eo=jt.current,Me(jt,t),Me(un,un.current),!0}function Dm(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=iw(t,e,eo),r.__reactInternalMemoizedMergedChildContext=t,$e(un),$e(jt),Me(jt,t)):$e(un),Me(un,n)}var Er=null,Wc=!1,_h=!1;function ow(t){Er===null?Er=[t]:Er.push(t)}function sC(t){Wc=!0,ow(t)}function Ri(){if(!_h&&Er!==null){_h=!0;var t=0,e=Pe;try{var n=Er;for(Pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Er=null,Wc=!1}catch(i){throw Er!==null&&(Er=Er.slice(t+1)),N_(e1,Ri),i}finally{Pe=e,_h=!1}}return null}var Vo=[],Uo=0,tc=null,nc=0,In=[],Tn=0,to=null,Ir=1,Tr="";function Vi(t,e){Vo[Uo++]=nc,Vo[Uo++]=tc,tc=t,nc=e}function sw(t,e,n){In[Tn++]=Ir,In[Tn++]=Tr,In[Tn++]=to,to=t;var r=Ir;t=Tr;var i=32-Wn(r)-1;r&=~(1<<i),n+=1;var o=32-Wn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ir=1<<32-Wn(e)+i|n<<i|r,Tr=o+t}else Ir=1<<o|n<<i|r,Tr=t}function u1(t){t.return!==null&&(Vi(t,1),sw(t,1,0))}function c1(t){for(;t===tc;)tc=Vo[--Uo],Vo[Uo]=null,nc=Vo[--Uo],Vo[Uo]=null;for(;t===to;)to=In[--Tn],In[Tn]=null,Tr=In[--Tn],In[Tn]=null,Ir=In[--Tn],In[Tn]=null}var vn=null,gn=null,ze=!1,jn=null;function aw(t,e){var n=Cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function km(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,gn=li(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=to!==null?{id:Ir,overflow:Tr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,gn=null,!0):!1;default:return!1}}function Pd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dd(t){if(ze){var e=gn;if(e){var n=e;if(!km(t,e)){if(Pd(t))throw Error(z(418));e=li(n.nextSibling);var r=vn;e&&km(t,e)?aw(r,n):(t.flags=t.flags&-4097|2,ze=!1,vn=t)}}else{if(Pd(t))throw Error(z(418));t.flags=t.flags&-4097|2,ze=!1,vn=t}}}function Mm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function eu(t){if(t!==vn)return!1;if(!ze)return Mm(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bd(t.type,t.memoizedProps)),e&&(e=gn)){if(Pd(t))throw lw(),Error(z(418));for(;e;)aw(t,e),e=li(e.nextSibling)}if(Mm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gn=li(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=vn?li(t.stateNode.nextSibling):null;return!0}function lw(){for(var t=gn;t;)t=li(t.nextSibling)}function is(){gn=vn=null,ze=!1}function f1(t){jn===null?jn=[t]:jn.push(t)}var aC=Ur.ReactCurrentBatchConfig;function Ys(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function tu(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Lm(t){var e=t._init;return e(t._payload)}function uw(t){function e(y,v){if(t){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=hi(y,v),y.index=0,y.sibling=null,y}function o(y,v,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,x,T){return v===null||v.tag!==6?(v=Sh(x,y.mode,T),v.return=y,v):(v=i(v,x),v.return=y,v)}function l(y,v,x,T){var P=x.type;return P===Do?c(y,v,x.props.children,T,x.key):v!==null&&(v.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Xr&&Lm(P)===v.type)?(T=i(v,x.props),T.ref=Ys(y,v,x),T.return=y,T):(T=Nu(x.type,x.key,x.props,null,y.mode,T),T.ref=Ys(y,v,x),T.return=y,T)}function u(y,v,x,T){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Ch(x,y.mode,T),v.return=y,v):(v=i(v,x.children||[]),v.return=y,v)}function c(y,v,x,T,P){return v===null||v.tag!==7?(v=Qi(x,y.mode,T,P),v.return=y,v):(v=i(v,x),v.return=y,v)}function h(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Sh(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Hl:return x=Nu(v.type,v.key,v.props,null,y.mode,x),x.ref=Ys(y,null,v),x.return=y,x;case Po:return v=Ch(v,y.mode,x),v.return=y,v;case Xr:var T=v._init;return h(y,T(v._payload),x)}if(ia(v)||Ws(v))return v=Qi(v,y.mode,x,null),v.return=y,v;tu(y,v)}return null}function d(y,v,x,T){var P=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return P!==null?null:a(y,v,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Hl:return x.key===P?l(y,v,x,T):null;case Po:return x.key===P?u(y,v,x,T):null;case Xr:return P=x._init,d(y,v,P(x._payload),T)}if(ia(x)||Ws(x))return P!==null?null:c(y,v,x,T,null);tu(y,x)}return null}function p(y,v,x,T,P){if(typeof T=="string"&&T!==""||typeof T=="number")return y=y.get(x)||null,a(v,y,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Hl:return y=y.get(T.key===null?x:T.key)||null,l(v,y,T,P);case Po:return y=y.get(T.key===null?x:T.key)||null,u(v,y,T,P);case Xr:var k=T._init;return p(y,v,x,k(T._payload),P)}if(ia(T)||Ws(T))return y=y.get(x)||null,c(v,y,T,P,null);tu(v,T)}return null}function m(y,v,x,T){for(var P=null,k=null,A=v,E=v=0,S=null;A!==null&&E<x.length;E++){A.index>E?(S=A,A=null):S=A.sibling;var b=d(y,A,x[E],T);if(b===null){A===null&&(A=S);break}t&&A&&b.alternate===null&&e(y,A),v=o(b,v,E),k===null?P=b:k.sibling=b,k=b,A=S}if(E===x.length)return n(y,A),ze&&Vi(y,E),P;if(A===null){for(;E<x.length;E++)A=h(y,x[E],T),A!==null&&(v=o(A,v,E),k===null?P=A:k.sibling=A,k=A);return ze&&Vi(y,E),P}for(A=r(y,A);E<x.length;E++)S=p(A,y,E,x[E],T),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?E:S.key),v=o(S,v,E),k===null?P=S:k.sibling=S,k=S);return t&&A.forEach(function(D){return e(y,D)}),ze&&Vi(y,E),P}function w(y,v,x,T){var P=Ws(x);if(typeof P!="function")throw Error(z(150));if(x=P.call(x),x==null)throw Error(z(151));for(var k=P=null,A=v,E=v=0,S=null,b=x.next();A!==null&&!b.done;E++,b=x.next()){A.index>E?(S=A,A=null):S=A.sibling;var D=d(y,A,b.value,T);if(D===null){A===null&&(A=S);break}t&&A&&D.alternate===null&&e(y,A),v=o(D,v,E),k===null?P=D:k.sibling=D,k=D,A=S}if(b.done)return n(y,A),ze&&Vi(y,E),P;if(A===null){for(;!b.done;E++,b=x.next())b=h(y,b.value,T),b!==null&&(v=o(b,v,E),k===null?P=b:k.sibling=b,k=b);return ze&&Vi(y,E),P}for(A=r(y,A);!b.done;E++,b=x.next())b=p(A,y,E,b.value,T),b!==null&&(t&&b.alternate!==null&&A.delete(b.key===null?E:b.key),v=o(b,v,E),k===null?P=b:k.sibling=b,k=b);return t&&A.forEach(function(M){return e(y,M)}),ze&&Vi(y,E),P}function I(y,v,x,T){if(typeof x=="object"&&x!==null&&x.type===Do&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Hl:e:{for(var P=x.key,k=v;k!==null;){if(k.key===P){if(P=x.type,P===Do){if(k.tag===7){n(y,k.sibling),v=i(k,x.props.children),v.return=y,y=v;break e}}else if(k.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Xr&&Lm(P)===k.type){n(y,k.sibling),v=i(k,x.props),v.ref=Ys(y,k,x),v.return=y,y=v;break e}n(y,k);break}else e(y,k);k=k.sibling}x.type===Do?(v=Qi(x.props.children,y.mode,T,x.key),v.return=y,y=v):(T=Nu(x.type,x.key,x.props,null,y.mode,T),T.ref=Ys(y,v,x),T.return=y,y=T)}return s(y);case Po:e:{for(k=x.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(y,v.sibling),v=i(v,x.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=Ch(x,y.mode,T),v.return=y,y=v}return s(y);case Xr:return k=x._init,I(y,v,k(x._payload),T)}if(ia(x))return m(y,v,x,T);if(Ws(x))return w(y,v,x,T);tu(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,x),v.return=y,y=v):(n(y,v),v=Sh(x,y.mode,T),v.return=y,y=v),s(y)):n(y,v)}return I}var os=uw(!0),cw=uw(!1),rc=bi(null),ic=null,jo=null,h1=null;function d1(){h1=jo=ic=null}function p1(t){var e=rc.current;$e(rc),t._currentValue=e}function kd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Yo(t,e){ic=t,h1=jo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function Pn(t){var e=t._currentValue;if(h1!==t)if(t={context:t,memoizedValue:e,next:null},jo===null){if(ic===null)throw Error(z(308));jo=t,ic.dependencies={lanes:0,firstContext:t}}else jo=jo.next=t;return e}var Hi=null;function g1(t){Hi===null?Hi=[t]:Hi.push(t)}function fw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,g1(e)):(n.next=i.next,i.next=n),e.interleaved=n,Dr(t,r)}function Dr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qr=!1;function m1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ui(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Dr(t,n)}return i=r.interleaved,i===null?(e.next=e,g1(r)):(e.next=i.next,i.next=e),r.interleaved=e,Dr(t,n)}function Iu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,t1(t,n)}}function Fm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function oc(t,e,n,r){var i=t.updateQueue;qr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var h=i.baseState;s=0,c=u=l=null,a=o;do{var d=a.lane,p=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,w=a;switch(d=e,p=n,w.tag){case 1:if(m=w.payload,typeof m=="function"){h=m.call(p,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=w.payload,d=typeof m=="function"?m.call(p,h,d):m,d==null)break e;h=Ke({},h,d);break e;case 2:qr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=h):c=c.next=p,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ro|=s,t.lanes=s,t.memoizedState=h}}function Bm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var fl={},sr=bi(fl),za=bi(fl),Ha=bi(fl);function Wi(t){if(t===fl)throw Error(z(174));return t}function v1(t,e){switch(Me(Ha,e),Me(za,t),Me(sr,fl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pd(e,t)}$e(sr),Me(sr,e)}function ss(){$e(sr),$e(za),$e(Ha)}function dw(t){Wi(Ha.current);var e=Wi(sr.current),n=pd(e,t.type);e!==n&&(Me(za,t),Me(sr,n))}function y1(t){za.current===t&&($e(sr),$e(za))}var We=bi(0);function sc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wh=[];function _1(){for(var t=0;t<wh.length;t++)wh[t]._workInProgressVersionPrimary=null;wh.length=0}var Tu=Ur.ReactCurrentDispatcher,xh=Ur.ReactCurrentBatchConfig,no=0,Ge=null,it=null,gt=null,ac=!1,xa=!1,Wa=0,lC=0;function kt(){throw Error(z(321))}function w1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xn(t[n],e[n]))return!1;return!0}function x1(t,e,n,r,i,o){if(no=o,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Tu.current=t===null||t.memoizedState===null?hC:dC,t=n(r,i),xa){o=0;do{if(xa=!1,Wa=0,25<=o)throw Error(z(301));o+=1,gt=it=null,e.updateQueue=null,Tu.current=pC,t=n(r,i)}while(xa)}if(Tu.current=lc,e=it!==null&&it.next!==null,no=0,gt=it=Ge=null,ac=!1,e)throw Error(z(300));return t}function E1(){var t=Wa!==0;return Wa=0,t}function er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Ge.memoizedState=gt=t:gt=gt.next=t,gt}function Dn(){if(it===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=gt===null?Ge.memoizedState:gt.next;if(e!==null)gt=e,it=t;else{if(t===null)throw Error(z(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},gt===null?Ge.memoizedState=gt=t:gt=gt.next=t}return gt}function Ga(t,e){return typeof e=="function"?e(t):e}function Eh(t){var e=Dn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=it,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((no&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,s=r):l=l.next=h,Ge.lanes|=c,ro|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,Xn(r,e.memoizedState)||(ln=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Ge.lanes|=o,ro|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ah(t){var e=Dn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Xn(o,e.memoizedState)||(ln=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function pw(){}function gw(t,e){var n=Ge,r=Dn(),i=e(),o=!Xn(r.memoizedState,i);if(o&&(r.memoizedState=i,ln=!0),r=r.queue,A1(yw.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,Ka(9,vw.bind(null,n,r,i,e),void 0,null),yt===null)throw Error(z(349));no&30||mw(n,e,i)}return i}function mw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vw(t,e,n,r){e.value=n,e.getSnapshot=r,_w(e)&&ww(t)}function yw(t,e,n){return n(function(){_w(e)&&ww(t)})}function _w(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xn(t,n)}catch{return!0}}function ww(t){var e=Dr(t,1);e!==null&&Gn(e,t,1,-1)}function Vm(t){var e=er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:t},e.queue=t,t=t.dispatch=fC.bind(null,Ge,t),[e.memoizedState,t]}function Ka(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xw(){return Dn().memoizedState}function Su(t,e,n,r){var i=er();Ge.flags|=t,i.memoizedState=Ka(1|e,n,void 0,r===void 0?null:r)}function Gc(t,e,n,r){var i=Dn();r=r===void 0?null:r;var o=void 0;if(it!==null){var s=it.memoizedState;if(o=s.destroy,r!==null&&w1(r,s.deps)){i.memoizedState=Ka(e,n,o,r);return}}Ge.flags|=t,i.memoizedState=Ka(1|e,n,o,r)}function Um(t,e){return Su(8390656,8,t,e)}function A1(t,e){return Gc(2048,8,t,e)}function Ew(t,e){return Gc(4,2,t,e)}function Aw(t,e){return Gc(4,4,t,e)}function Iw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Tw(t,e,n){return n=n!=null?n.concat([t]):null,Gc(4,4,Iw.bind(null,e,t),n)}function I1(){}function Sw(t,e){var n=Dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&w1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Cw(t,e){var n=Dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&w1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function bw(t,e,n){return no&21?(Xn(n,e)||(n=D_(),Ge.lanes|=n,ro|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=n)}function uC(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var r=xh.transition;xh.transition={};try{t(!1),e()}finally{Pe=n,xh.transition=r}}function Rw(){return Dn().memoizedState}function cC(t,e,n){var r=fi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Nw(t))Ow(e,n);else if(n=fw(t,e,n,r),n!==null){var i=Qt();Gn(n,t,r,i),Pw(n,e,r)}}function fC(t,e,n){var r=fi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Nw(t))Ow(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Xn(a,s)){var l=e.interleaved;l===null?(i.next=i,g1(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=fw(t,e,i,r),n!==null&&(i=Qt(),Gn(n,t,r,i),Pw(n,e,r))}}function Nw(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function Ow(t,e){xa=ac=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Pw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,t1(t,n)}}var lc={readContext:Pn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},hC={readContext:Pn,useCallback:function(t,e){return er().memoizedState=[t,e===void 0?null:e],t},useContext:Pn,useEffect:Um,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Su(4194308,4,Iw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Su(4194308,4,t,e)},useInsertionEffect:function(t,e){return Su(4,2,t,e)},useMemo:function(t,e){var n=er();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=er();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cC.bind(null,Ge,t),[r.memoizedState,t]},useRef:function(t){var e=er();return t={current:t},e.memoizedState=t},useState:Vm,useDebugValue:I1,useDeferredValue:function(t){return er().memoizedState=t},useTransition:function(){var t=Vm(!1),e=t[0];return t=uC.bind(null,t[1]),er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ge,i=er();if(ze){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),yt===null)throw Error(z(349));no&30||mw(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Um(yw.bind(null,r,o,t),[t]),r.flags|=2048,Ka(9,vw.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=er(),e=yt.identifierPrefix;if(ze){var n=Tr,r=Ir;n=(r&~(1<<32-Wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dC={readContext:Pn,useCallback:Sw,useContext:Pn,useEffect:A1,useImperativeHandle:Tw,useInsertionEffect:Ew,useLayoutEffect:Aw,useMemo:Cw,useReducer:Eh,useRef:xw,useState:function(){return Eh(Ga)},useDebugValue:I1,useDeferredValue:function(t){var e=Dn();return bw(e,it.memoizedState,t)},useTransition:function(){var t=Eh(Ga)[0],e=Dn().memoizedState;return[t,e]},useMutableSource:pw,useSyncExternalStore:gw,useId:Rw,unstable_isNewReconciler:!1},pC={readContext:Pn,useCallback:Sw,useContext:Pn,useEffect:A1,useImperativeHandle:Tw,useInsertionEffect:Ew,useLayoutEffect:Aw,useMemo:Cw,useReducer:Ah,useRef:xw,useState:function(){return Ah(Ga)},useDebugValue:I1,useDeferredValue:function(t){var e=Dn();return it===null?e.memoizedState=t:bw(e,it.memoizedState,t)},useTransition:function(){var t=Ah(Ga)[0],e=Dn().memoizedState;return[t,e]},useMutableSource:pw,useSyncExternalStore:gw,useId:Rw,unstable_isNewReconciler:!1};function Vn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Md(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kc={isMounted:function(t){return(t=t._reactInternals)?po(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qt(),i=fi(t),o=br(r,i);o.payload=e,n!=null&&(o.callback=n),e=ui(t,o,i),e!==null&&(Gn(e,t,i,r),Iu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qt(),i=fi(t),o=br(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ui(t,o,i),e!==null&&(Gn(e,t,i,r),Iu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),r=fi(t),i=br(n,r);i.tag=2,e!=null&&(i.callback=e),e=ui(t,i,r),e!==null&&(Gn(e,t,r,n),Iu(e,t,r))}};function jm(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Va(n,r)||!Va(i,o):!0}function Dw(t,e,n){var r=!1,i=wi,o=e.contextType;return typeof o=="object"&&o!==null?o=Pn(o):(i=cn(e)?eo:jt.current,r=e.contextTypes,o=(r=r!=null)?rs(t,i):wi),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function $m(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Kc.enqueueReplaceState(e,e.state,null)}function Ld(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},m1(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Pn(o):(o=cn(e)?eo:jt.current,i.context=rs(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Md(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Kc.enqueueReplaceState(i,i.state,null),oc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function as(t,e){try{var n="",r=e;do n+=$T(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Ih(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gC=typeof WeakMap=="function"?WeakMap:Map;function kw(t,e,n){n=br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cc||(cc=!0,Kd=r),Fd(t,e)},n}function Mw(t,e,n){n=br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Fd(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Fd(t,e),typeof r!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function zm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=RC.bind(null,t,e,n),e.then(t,t))}function Hm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=br(-1,1),e.tag=2,ui(n,e,1))),n.lanes|=1),t)}var mC=Ur.ReactCurrentOwner,ln=!1;function Yt(t,e,n,r){e.child=t===null?cw(e,null,n,r):os(e,t.child,n,r)}function Gm(t,e,n,r,i){n=n.render;var o=e.ref;return Yo(e,i),r=x1(t,e,n,r,o,i),n=E1(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kr(t,e,i)):(ze&&n&&u1(e),e.flags|=1,Yt(t,e,r,i),e.child)}function Km(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!P1(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Lw(t,e,o,r,i)):(t=Nu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Va,n(s,r)&&t.ref===e.ref)return kr(t,e,i)}return e.flags|=1,t=hi(o,r),t.ref=e.ref,t.return=e,e.child=t}function Lw(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Va(o,r)&&t.ref===e.ref)if(ln=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,kr(t,e,i)}return Bd(t,e,n,r,i)}function Fw(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(zo,pn),pn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(zo,pn),pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Me(zo,pn),pn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Me(zo,pn),pn|=r;return Yt(t,e,i,n),e.child}function Bw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bd(t,e,n,r,i){var o=cn(n)?eo:jt.current;return o=rs(e,o),Yo(e,i),n=x1(t,e,n,r,o,i),r=E1(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kr(t,e,i)):(ze&&r&&u1(e),e.flags|=1,Yt(t,e,n,i),e.child)}function Xm(t,e,n,r,i){if(cn(n)){var o=!0;ec(e)}else o=!1;if(Yo(e,i),e.stateNode===null)Cu(t,e),Dw(e,n,r),Ld(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Pn(u):(u=cn(n)?eo:jt.current,u=rs(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&$m(e,s,r,u),qr=!1;var d=e.memoizedState;s.state=d,oc(e,r,s,i),l=e.memoizedState,a!==r||d!==l||un.current||qr?(typeof c=="function"&&(Md(e,n,c,r),l=e.memoizedState),(a=qr||jm(e,n,a,r,d,l,u))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,hw(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Vn(e.type,a),s.props=u,h=e.pendingProps,d=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Pn(l):(l=cn(n)?eo:jt.current,l=rs(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||d!==l)&&$m(e,s,r,l),qr=!1,d=e.memoizedState,s.state=d,oc(e,r,s,i);var m=e.memoizedState;a!==h||d!==m||un.current||qr?(typeof p=="function"&&(Md(e,n,p,r),m=e.memoizedState),(u=qr||jm(e,n,u,r,d,m,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Vd(t,e,n,r,o,i)}function Vd(t,e,n,r,i,o){Bw(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Dm(e,n,!1),kr(t,e,o);r=e.stateNode,mC.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=os(e,t.child,null,o),e.child=os(e,null,a,o)):Yt(t,e,a,o),e.memoizedState=r.state,i&&Dm(e,n,!0),e.child}function Vw(t){var e=t.stateNode;e.pendingContext?Pm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Pm(t,e.context,!1),v1(t,e.containerInfo)}function qm(t,e,n,r,i){return is(),f1(i),e.flags|=256,Yt(t,e,n,r),e.child}var Ud={dehydrated:null,treeContext:null,retryLane:0};function jd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Uw(t,e,n){var r=e.pendingProps,i=We.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Me(We,i&1),t===null)return Dd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Yc(s,r,0,null),t=Qi(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=jd(n),e.memoizedState=Ud,t):T1(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return vC(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=hi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=hi(a,o):(o=Qi(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?jd(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Ud,r}return o=t.child,t=o.sibling,r=hi(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function T1(t,e){return e=Yc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nu(t,e,n,r){return r!==null&&f1(r),os(e,t.child,null,n),t=T1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vC(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Ih(Error(z(422))),nu(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Yc({mode:"visible",children:r.children},i,0,null),o=Qi(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&os(e,t.child,null,s),e.child.memoizedState=jd(s),e.memoizedState=Ud,o);if(!(e.mode&1))return nu(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(z(419)),r=Ih(o,r,void 0),nu(t,e,s,r)}if(a=(s&t.childLanes)!==0,ln||a){if(r=yt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Dr(t,i),Gn(r,t,i,-1))}return O1(),r=Ih(Error(z(421))),nu(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=NC.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,gn=li(i.nextSibling),vn=e,ze=!0,jn=null,t!==null&&(In[Tn++]=Ir,In[Tn++]=Tr,In[Tn++]=to,Ir=t.id,Tr=t.overflow,to=e),e=T1(e,r.children),e.flags|=4096,e)}function Ym(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),kd(t.return,e,n)}function Th(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function jw(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Yt(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ym(t,n,e);else if(t.tag===19)Ym(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Me(We,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Th(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Th(e,!0,n,null,o);break;case"together":Th(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ro|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yC(t,e,n){switch(e.tag){case 3:Vw(e),is();break;case 5:dw(e);break;case 1:cn(e.type)&&ec(e);break;case 4:v1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Me(rc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Me(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?Uw(t,e,n):(Me(We,We.current&1),t=kr(t,e,n),t!==null?t.sibling:null);Me(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Me(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,Fw(t,e,n)}return kr(t,e,n)}var $w,$d,zw,Hw;$w=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$d=function(){};zw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Wi(sr.current);var o=null;switch(n){case"input":i=cd(t,i),r=cd(t,r),o=[];break;case"select":i=Ke({},i,{value:void 0}),r=Ke({},r,{value:void 0}),o=[];break;case"textarea":i=dd(t,i),r=dd(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zu)}gd(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pa.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Be("scroll",t),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};Hw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qs(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _C(t,e,n){var r=e.pendingProps;switch(c1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return cn(e.type)&&Ju(),Mt(e),null;case 3:return r=e.stateNode,ss(),$e(un),$e(jt),_1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(eu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jn!==null&&(Yd(jn),jn=null))),$d(t,e),Mt(e),null;case 5:y1(e);var i=Wi(Ha.current);if(n=e.type,t!==null&&e.stateNode!=null)zw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Mt(e),null}if(t=Wi(sr.current),eu(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[nr]=e,r[$a]=o,t=(e.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(i=0;i<sa.length;i++)Be(sa[i],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":om(r,o),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Be("invalid",r);break;case"textarea":am(r,o),Be("invalid",r)}gd(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Jl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Jl(r.textContent,a,t),i=["children",""+a]):Pa.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Be("scroll",r)}switch(n){case"input":Wl(r),sm(r,o,!0);break;case"textarea":Wl(r),lm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Zu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=y_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[nr]=e,t[$a]=r,$w(t,e,!1,!1),e.stateNode=t;e:{switch(s=md(n,r),n){case"dialog":Be("cancel",t),Be("close",t),i=r;break;case"iframe":case"object":case"embed":Be("load",t),i=r;break;case"video":case"audio":for(i=0;i<sa.length;i++)Be(sa[i],t);i=r;break;case"source":Be("error",t),i=r;break;case"img":case"image":case"link":Be("error",t),Be("load",t),i=r;break;case"details":Be("toggle",t),i=r;break;case"input":om(t,r),i=cd(t,r),Be("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ke({},r,{value:void 0}),Be("invalid",t);break;case"textarea":am(t,r),i=dd(t,r),Be("invalid",t);break;default:i=r}gd(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?x_(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&__(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Da(t,l):typeof l=="number"&&Da(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Pa.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Be("scroll",t):l!=null&&q0(t,o,l,s))}switch(n){case"input":Wl(t),sm(t,r,!1);break;case"textarea":Wl(t),lm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+_i(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Go(t,!!r.multiple,o,!1):r.defaultValue!=null&&Go(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Zu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)Hw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Wi(Ha.current),Wi(sr.current),eu(e)){if(r=e.stateNode,n=e.memoizedProps,r[nr]=e,(o=r.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:Jl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nr]=e,e.stateNode=r}return Mt(e),null;case 13:if($e(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&gn!==null&&e.mode&1&&!(e.flags&128))lw(),is(),e.flags|=98560,o=!1;else if(o=eu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(z(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[nr]=e}else is(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),o=!1}else jn!==null&&(Yd(jn),jn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?lt===0&&(lt=3):O1())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return ss(),$d(t,e),t===null&&Ua(e.stateNode.containerInfo),Mt(e),null;case 10:return p1(e.type._context),Mt(e),null;case 17:return cn(e.type)&&Ju(),Mt(e),null;case 19:if($e(We),o=e.memoizedState,o===null)return Mt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Qs(o,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=sc(t),s!==null){for(e.flags|=128,Qs(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Me(We,We.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ze()>ls&&(e.flags|=128,r=!0,Qs(o,!1),e.lanes=4194304)}else{if(!r)if(t=sc(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ze)return Mt(e),null}else 2*Ze()-o.renderingStartTime>ls&&n!==1073741824&&(e.flags|=128,r=!0,Qs(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ze(),e.sibling=null,n=We.current,Me(We,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return N1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?pn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function wC(t,e){switch(c1(e),e.tag){case 1:return cn(e.type)&&Ju(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ss(),$e(un),$e(jt),_1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return y1(e),null;case 13:if($e(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));is()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(We),null;case 4:return ss(),null;case 10:return p1(e.type._context),null;case 22:case 23:return N1(),null;case 24:return null;default:return null}}var ru=!1,Vt=!1,xC=typeof WeakSet=="function"?WeakSet:Set,J=null;function $o(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function zd(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var Qm=!1;function EC(t,e){if(Sd=qu,t=q_(),l1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=s+i),h!==o||r!==0&&h.nodeType!==3||(l=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===t)break t;if(d===n&&++u===i&&(a=s),d===o&&++c===r&&(l=s),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cd={focusedElem:t,selectionRange:n},qu=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var w=m.memoizedProps,I=m.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?w:Vn(e.type,w),I);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(T){Ye(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return m=Qm,Qm=!1,m}function Ea(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&zd(e,n,o)}i=i.next}while(i!==r)}}function Xc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ww(t){var e=t.alternate;e!==null&&(t.alternate=null,Ww(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[nr],delete e[$a],delete e[Nd],delete e[iC],delete e[oC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Gw(t){return t.tag===5||t.tag===3||t.tag===4}function Zm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zu));else if(r!==4&&(t=t.child,t!==null))for(Wd(t,e,n),t=t.sibling;t!==null;)Wd(t,e,n),t=t.sibling}function Gd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gd(t,e,n),t=t.sibling;t!==null;)Gd(t,e,n),t=t.sibling}var It=null,Un=!1;function Hr(t,e,n){for(n=n.child;n!==null;)Kw(t,e,n),n=n.sibling}function Kw(t,e,n){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Uc,n)}catch{}switch(n.tag){case 5:Vt||$o(n,e);case 6:var r=It,i=Un;It=null,Hr(t,e,n),It=r,Un=i,It!==null&&(Un?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(Un?(t=It,n=n.stateNode,t.nodeType===8?yh(t.parentNode,n):t.nodeType===1&&yh(t,n),Fa(t)):yh(It,n.stateNode));break;case 4:r=It,i=Un,It=n.stateNode.containerInfo,Un=!0,Hr(t,e,n),It=r,Un=i;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&zd(n,e,s),i=i.next}while(i!==r)}Hr(t,e,n);break;case 1:if(!Vt&&($o(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ye(n,e,a)}Hr(t,e,n);break;case 21:Hr(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,Hr(t,e,n),Vt=r):Hr(t,e,n);break;default:Hr(t,e,n)}}function Jm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xC),e.forEach(function(r){var i=OC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:It=a.stateNode,Un=!1;break e;case 3:It=a.stateNode.containerInfo,Un=!0;break e;case 4:It=a.stateNode.containerInfo,Un=!0;break e}a=a.return}if(It===null)throw Error(z(160));Kw(o,s,i),It=null,Un=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ye(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xw(e,t),e=e.sibling}function Xw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),Jn(t),r&4){try{Ea(3,t,t.return),Xc(3,t)}catch(w){Ye(t,t.return,w)}try{Ea(5,t,t.return)}catch(w){Ye(t,t.return,w)}}break;case 1:Ln(e,t),Jn(t),r&512&&n!==null&&$o(n,n.return);break;case 5:if(Ln(e,t),Jn(t),r&512&&n!==null&&$o(n,n.return),t.flags&32){var i=t.stateNode;try{Da(i,"")}catch(w){Ye(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&m_(i,o),md(a,s);var u=md(a,o);for(s=0;s<l.length;s+=2){var c=l[s],h=l[s+1];c==="style"?x_(i,h):c==="dangerouslySetInnerHTML"?__(i,h):c==="children"?Da(i,h):q0(i,c,h,u)}switch(a){case"input":fd(i,o);break;case"textarea":v_(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Go(i,!!o.multiple,p,!1):d!==!!o.multiple&&(o.defaultValue!=null?Go(i,!!o.multiple,o.defaultValue,!0):Go(i,!!o.multiple,o.multiple?[]:"",!1))}i[$a]=o}catch(w){Ye(t,t.return,w)}}break;case 6:if(Ln(e,t),Jn(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(w){Ye(t,t.return,w)}}break;case 3:if(Ln(e,t),Jn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fa(e.containerInfo)}catch(w){Ye(t,t.return,w)}break;case 4:Ln(e,t),Jn(t);break;case 13:Ln(e,t),Jn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(b1=Ze())),r&4&&Jm(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(u=Vt)||c,Ln(e,t),Vt=u):Ln(e,t),Jn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(J=t,c=t.child;c!==null;){for(h=J=c;J!==null;){switch(d=J,p=d.child,d.tag){case 0:case 11:case 14:case 15:Ea(4,d,d.return);break;case 1:$o(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(w){Ye(r,n,w)}}break;case 5:$o(d,d.return);break;case 22:if(d.memoizedState!==null){tv(h);continue}}p!==null?(p.return=d,J=p):tv(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=h.stateNode,l=h.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=w_("display",s))}catch(w){Ye(t,t.return,w)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){Ye(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ln(e,t),Jn(t),r&4&&Jm(t);break;case 21:break;default:Ln(e,t),Jn(t)}}function Jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Gw(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Da(i,""),r.flags&=-33);var o=Zm(t);Gd(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Zm(t);Wd(t,a,s);break;default:throw Error(z(161))}}catch(l){Ye(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AC(t,e,n){J=t,qw(t)}function qw(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||ru;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Vt;a=ru;var u=Vt;if(ru=s,(Vt=l)&&!u)for(J=i;J!==null;)s=J,l=s.child,s.tag===22&&s.memoizedState!==null?nv(i):l!==null?(l.return=s,J=l):nv(i);for(;o!==null;)J=o,qw(o),o=o.sibling;J=i,ru=a,Vt=u}ev(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,J=o):ev(t)}}function ev(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||Xc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Vn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Bm(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bm(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Fa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Vt||e.flags&512&&Hd(e)}catch(d){Ye(e,e.return,d)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function tv(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function nv(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xc(4,e)}catch(l){Ye(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ye(e,i,l)}}var o=e.return;try{Hd(e)}catch(l){Ye(e,o,l)}break;case 5:var s=e.return;try{Hd(e)}catch(l){Ye(e,s,l)}}}catch(l){Ye(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var IC=Math.ceil,uc=Ur.ReactCurrentDispatcher,S1=Ur.ReactCurrentOwner,Rn=Ur.ReactCurrentBatchConfig,Ee=0,yt=null,et=null,bt=0,pn=0,zo=bi(0),lt=0,Xa=null,ro=0,qc=0,C1=0,Aa=null,on=null,b1=0,ls=1/0,wr=null,cc=!1,Kd=null,ci=null,iu=!1,ri=null,fc=0,Ia=0,Xd=null,bu=-1,Ru=0;function Qt(){return Ee&6?Ze():bu!==-1?bu:bu=Ze()}function fi(t){return t.mode&1?Ee&2&&bt!==0?bt&-bt:aC.transition!==null?(Ru===0&&(Ru=D_()),Ru):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:U_(t.type)),t):1}function Gn(t,e,n,r){if(50<Ia)throw Ia=0,Xd=null,Error(z(185));ll(t,n,r),(!(Ee&2)||t!==yt)&&(t===yt&&(!(Ee&2)&&(qc|=n),lt===4&&Zr(t,bt)),fn(t,r),n===1&&Ee===0&&!(e.mode&1)&&(ls=Ze()+500,Wc&&Ri()))}function fn(t,e){var n=t.callbackNode;aS(t,e);var r=Xu(t,t===yt?bt:0);if(r===0)n!==null&&fm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fm(n),e===1)t.tag===0?sC(rv.bind(null,t)):ow(rv.bind(null,t)),nC(function(){!(Ee&6)&&Ri()}),n=null;else{switch(k_(r)){case 1:n=e1;break;case 4:n=O_;break;case 16:n=Ku;break;case 536870912:n=P_;break;default:n=Ku}n=rx(n,Yw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Yw(t,e){if(bu=-1,Ru=0,Ee&6)throw Error(z(327));var n=t.callbackNode;if(Qo()&&t.callbackNode!==n)return null;var r=Xu(t,t===yt?bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hc(t,r);else{e=r;var i=Ee;Ee|=2;var o=Zw();(yt!==t||bt!==e)&&(wr=null,ls=Ze()+500,Yi(t,e));do try{CC();break}catch(a){Qw(t,a)}while(1);d1(),uc.current=o,Ee=i,et!==null?e=0:(yt=null,bt=0,e=lt)}if(e!==0){if(e===2&&(i=xd(t),i!==0&&(r=i,e=qd(t,i))),e===1)throw n=Xa,Yi(t,0),Zr(t,r),fn(t,Ze()),n;if(e===6)Zr(t,r);else{if(i=t.current.alternate,!(r&30)&&!TC(i)&&(e=hc(t,r),e===2&&(o=xd(t),o!==0&&(r=o,e=qd(t,o))),e===1))throw n=Xa,Yi(t,0),Zr(t,r),fn(t,Ze()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Ui(t,on,wr);break;case 3:if(Zr(t,r),(r&130023424)===r&&(e=b1+500-Ze(),10<e)){if(Xu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Qt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rd(Ui.bind(null,t,on,wr),e);break}Ui(t,on,wr);break;case 4:if(Zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Wn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IC(r/1960))-r,10<r){t.timeoutHandle=Rd(Ui.bind(null,t,on,wr),r);break}Ui(t,on,wr);break;case 5:Ui(t,on,wr);break;default:throw Error(z(329))}}}return fn(t,Ze()),t.callbackNode===n?Yw.bind(null,t):null}function qd(t,e){var n=Aa;return t.current.memoizedState.isDehydrated&&(Yi(t,e).flags|=256),t=hc(t,e),t!==2&&(e=on,on=n,e!==null&&Yd(e)),t}function Yd(t){on===null?on=t:on.push.apply(on,t)}function TC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Xn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zr(t,e){for(e&=~C1,e&=~qc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wn(e),r=1<<n;t[n]=-1,e&=~r}}function rv(t){if(Ee&6)throw Error(z(327));Qo();var e=Xu(t,0);if(!(e&1))return fn(t,Ze()),null;var n=hc(t,e);if(t.tag!==0&&n===2){var r=xd(t);r!==0&&(e=r,n=qd(t,r))}if(n===1)throw n=Xa,Yi(t,0),Zr(t,e),fn(t,Ze()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ui(t,on,wr),fn(t,Ze()),null}function R1(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(ls=Ze()+500,Wc&&Ri())}}function io(t){ri!==null&&ri.tag===0&&!(Ee&6)&&Qo();var e=Ee;Ee|=1;var n=Rn.transition,r=Pe;try{if(Rn.transition=null,Pe=1,t)return t()}finally{Pe=r,Rn.transition=n,Ee=e,!(Ee&6)&&Ri()}}function N1(){pn=zo.current,$e(zo)}function Yi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tC(n)),et!==null)for(n=et.return;n!==null;){var r=n;switch(c1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ju();break;case 3:ss(),$e(un),$e(jt),_1();break;case 5:y1(r);break;case 4:ss();break;case 13:$e(We);break;case 19:$e(We);break;case 10:p1(r.type._context);break;case 22:case 23:N1()}n=n.return}if(yt=t,et=t=hi(t.current,null),bt=pn=e,lt=0,Xa=null,C1=qc=ro=0,on=Aa=null,Hi!==null){for(e=0;e<Hi.length;e++)if(n=Hi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Hi=null}return t}function Qw(t,e){do{var n=et;try{if(d1(),Tu.current=lc,ac){for(var r=Ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ac=!1}if(no=0,gt=it=Ge=null,xa=!1,Wa=0,S1.current=null,n===null||n.return===null){lt=1,Xa=e,et=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=bt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Hm(s);if(p!==null){p.flags&=-257,Wm(p,s,a,o,e),p.mode&1&&zm(o,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var w=new Set;w.add(l),e.updateQueue=w}else m.add(l);break e}else{if(!(e&1)){zm(o,u,e),O1();break e}l=Error(z(426))}}else if(ze&&a.mode&1){var I=Hm(s);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Wm(I,s,a,o,e),f1(as(l,a));break e}}o=l=as(l,a),lt!==4&&(lt=2),Aa===null?Aa=[o]:Aa.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=kw(o,l,e);Fm(o,y);break e;case 1:a=l;var v=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ci===null||!ci.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var T=Mw(o,a,e);Fm(o,T);break e}}o=o.return}while(o!==null)}ex(n)}catch(P){e=P,et===n&&n!==null&&(et=n=n.return);continue}break}while(1)}function Zw(){var t=uc.current;return uc.current=lc,t===null?lc:t}function O1(){(lt===0||lt===3||lt===2)&&(lt=4),yt===null||!(ro&268435455)&&!(qc&268435455)||Zr(yt,bt)}function hc(t,e){var n=Ee;Ee|=2;var r=Zw();(yt!==t||bt!==e)&&(wr=null,Yi(t,e));do try{SC();break}catch(i){Qw(t,i)}while(1);if(d1(),Ee=n,uc.current=r,et!==null)throw Error(z(261));return yt=null,bt=0,lt}function SC(){for(;et!==null;)Jw(et)}function CC(){for(;et!==null&&!ZT();)Jw(et)}function Jw(t){var e=nx(t.alternate,t,pn);t.memoizedProps=t.pendingProps,e===null?ex(t):et=e,S1.current=null}function ex(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wC(n,e),n!==null){n.flags&=32767,et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,et=null;return}}else if(n=_C(n,e,pn),n!==null){et=n;return}if(e=e.sibling,e!==null){et=e;return}et=e=t}while(e!==null);lt===0&&(lt=5)}function Ui(t,e,n){var r=Pe,i=Rn.transition;try{Rn.transition=null,Pe=1,bC(t,e,n,r)}finally{Rn.transition=i,Pe=r}return null}function bC(t,e,n,r){do Qo();while(ri!==null);if(Ee&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(lS(t,o),t===yt&&(et=yt=null,bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||iu||(iu=!0,rx(Ku,function(){return Qo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Rn.transition,Rn.transition=null;var s=Pe;Pe=1;var a=Ee;Ee|=4,S1.current=null,EC(t,n),Xw(n,t),XS(Cd),qu=!!Sd,Cd=Sd=null,t.current=n,AC(n),JT(),Ee=a,Pe=s,Rn.transition=o}else t.current=n;if(iu&&(iu=!1,ri=t,fc=i),o=t.pendingLanes,o===0&&(ci=null),nS(n.stateNode),fn(t,Ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(cc)throw cc=!1,t=Kd,Kd=null,t;return fc&1&&t.tag!==0&&Qo(),o=t.pendingLanes,o&1?t===Xd?Ia++:(Ia=0,Xd=t):Ia=0,Ri(),null}function Qo(){if(ri!==null){var t=k_(fc),e=Rn.transition,n=Pe;try{if(Rn.transition=null,Pe=16>t?16:t,ri===null)var r=!1;else{if(t=ri,ri=null,fc=0,Ee&6)throw Error(z(331));var i=Ee;for(Ee|=4,J=t.current;J!==null;){var o=J,s=o.child;if(J.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(J=u;J!==null;){var c=J;switch(c.tag){case 0:case 11:case 15:Ea(8,c,o)}var h=c.child;if(h!==null)h.return=c,J=h;else for(;J!==null;){c=J;var d=c.sibling,p=c.return;if(Ww(c),c===u){J=null;break}if(d!==null){d.return=p,J=d;break}J=p}}}var m=o.alternate;if(m!==null){var w=m.child;if(w!==null){m.child=null;do{var I=w.sibling;w.sibling=null,w=I}while(w!==null)}}J=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,J=s;else e:for(;J!==null;){if(o=J,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ea(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,J=y;break e}J=o.return}}var v=t.current;for(J=v;J!==null;){s=J;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,J=x;else e:for(s=v;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xc(9,a)}}catch(P){Ye(a,a.return,P)}if(a===s){J=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,J=T;break e}J=a.return}}if(Ee=i,Ri(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Uc,t)}catch{}r=!0}return r}finally{Pe=n,Rn.transition=e}}return!1}function iv(t,e,n){e=as(n,e),e=kw(t,e,1),t=ui(t,e,1),e=Qt(),t!==null&&(ll(t,1,e),fn(t,e))}function Ye(t,e,n){if(t.tag===3)iv(t,t,n);else for(;e!==null;){if(e.tag===3){iv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ci===null||!ci.has(r))){t=as(n,t),t=Mw(e,t,1),e=ui(e,t,1),t=Qt(),e!==null&&(ll(e,1,t),fn(e,t));break}}e=e.return}}function RC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(bt&n)===n&&(lt===4||lt===3&&(bt&130023424)===bt&&500>Ze()-b1?Yi(t,0):C1|=n),fn(t,e)}function tx(t,e){e===0&&(t.mode&1?(e=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):e=1);var n=Qt();t=Dr(t,e),t!==null&&(ll(t,e,n),fn(t,n))}function NC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tx(t,n)}function OC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),tx(t,n)}var nx;nx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ln=!1,yC(t,e,n);ln=!!(t.flags&131072)}else ln=!1,ze&&e.flags&1048576&&sw(e,nc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Cu(t,e),t=e.pendingProps;var i=rs(e,jt.current);Yo(e,n),i=x1(null,e,r,t,i,n);var o=E1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(r)?(o=!0,ec(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,m1(e),i.updater=Kc,e.stateNode=i,i._reactInternals=e,Ld(e,r,t,n),e=Vd(null,e,r,!0,o,n)):(e.tag=0,ze&&o&&u1(e),Yt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Cu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=DC(r),t=Vn(r,t),i){case 0:e=Bd(null,e,r,t,n);break e;case 1:e=Xm(null,e,r,t,n);break e;case 11:e=Gm(null,e,r,t,n);break e;case 14:e=Km(null,e,r,Vn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vn(r,i),Bd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vn(r,i),Xm(t,e,r,i,n);case 3:e:{if(Vw(e),t===null)throw Error(z(387));r=e.pendingProps,o=e.memoizedState,i=o.element,hw(t,e),oc(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=as(Error(z(423)),e),e=qm(t,e,r,n,i);break e}else if(r!==i){i=as(Error(z(424)),e),e=qm(t,e,r,n,i);break e}else for(gn=li(e.stateNode.containerInfo.firstChild),vn=e,ze=!0,jn=null,n=cw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(is(),r===i){e=kr(t,e,n);break e}Yt(t,e,r,n)}e=e.child}return e;case 5:return dw(e),t===null&&Dd(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,bd(r,i)?s=null:o!==null&&bd(r,o)&&(e.flags|=32),Bw(t,e),Yt(t,e,s,n),e.child;case 6:return t===null&&Dd(e),null;case 13:return Uw(t,e,n);case 4:return v1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=os(e,null,r,n):Yt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vn(r,i),Gm(t,e,r,i,n);case 7:return Yt(t,e,e.pendingProps,n),e.child;case 8:return Yt(t,e,e.pendingProps.children,n),e.child;case 12:return Yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Me(rc,r._currentValue),r._currentValue=s,o!==null)if(Xn(o.value,s)){if(o.children===i.children&&!un.current){e=kr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=br(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),kd(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(z(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),kd(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Yt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Yo(e,n),i=Pn(i),r=r(i),e.flags|=1,Yt(t,e,r,n),e.child;case 14:return r=e.type,i=Vn(r,e.pendingProps),i=Vn(r.type,i),Km(t,e,r,i,n);case 15:return Lw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vn(r,i),Cu(t,e),e.tag=1,cn(r)?(t=!0,ec(e)):t=!1,Yo(e,n),Dw(e,r,i),Ld(e,r,i,n),Vd(null,e,r,!0,t,n);case 19:return jw(t,e,n);case 22:return Fw(t,e,n)}throw Error(z(156,e.tag))};function rx(t,e){return N_(t,e)}function PC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,e,n,r){return new PC(t,e,n,r)}function P1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function DC(t){if(typeof t=="function")return P1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Q0)return 11;if(t===Z0)return 14}return 2}function hi(t,e){var n=t.alternate;return n===null?(n=Cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nu(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")P1(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Do:return Qi(n.children,i,o,e);case Y0:s=8,i|=8;break;case sd:return t=Cn(12,n,e,i|2),t.elementType=sd,t.lanes=o,t;case ad:return t=Cn(13,n,e,i),t.elementType=ad,t.lanes=o,t;case ld:return t=Cn(19,n,e,i),t.elementType=ld,t.lanes=o,t;case d_:return Yc(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case f_:s=10;break e;case h_:s=9;break e;case Q0:s=11;break e;case Z0:s=14;break e;case Xr:s=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Cn(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Qi(t,e,n,r){return t=Cn(7,t,r,e),t.lanes=n,t}function Yc(t,e,n,r){return t=Cn(22,t,r,e),t.elementType=d_,t.lanes=n,t.stateNode={isHidden:!1},t}function Sh(t,e,n){return t=Cn(6,t,null,e),t.lanes=n,t}function Ch(t,e,n){return e=Cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ah(0),this.expirationTimes=ah(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ah(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function D1(t,e,n,r,i,o,s,a,l){return t=new kC(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Cn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},m1(o),t}function MC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Po,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ix(t){if(!t)return wi;t=t._reactInternals;e:{if(po(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(cn(n))return iw(t,n,e)}return e}function ox(t,e,n,r,i,o,s,a,l){return t=D1(n,r,!0,t,i,o,s,a,l),t.context=ix(null),n=t.current,r=Qt(),i=fi(n),o=br(r,i),o.callback=e??null,ui(n,o,i),t.current.lanes=i,ll(t,i,r),fn(t,r),t}function Qc(t,e,n,r){var i=e.current,o=Qt(),s=fi(i);return n=ix(n),e.context===null?e.context=n:e.pendingContext=n,e=br(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ui(i,e,s),t!==null&&(Gn(t,i,s,o),Iu(t,i,s)),s}function dc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ov(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function k1(t,e){ov(t,e),(t=t.alternate)&&ov(t,e)}function LC(){return null}var sx=typeof reportError=="function"?reportError:function(t){console.error(t)};function M1(t){this._internalRoot=t}Zc.prototype.render=M1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Qc(t,e,null,null)};Zc.prototype.unmount=M1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;io(function(){Qc(null,t,null,null)}),e[Pr]=null}};function Zc(t){this._internalRoot=t}Zc.prototype.unstable_scheduleHydration=function(t){if(t){var e=F_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qr.length&&e!==0&&e<Qr[n].priority;n++);Qr.splice(n,0,t),n===0&&V_(t)}};function L1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sv(){}function FC(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=dc(s);o.call(u)}}var s=ox(e,r,t,0,null,!1,!1,"",sv);return t._reactRootContainer=s,t[Pr]=s.current,Ua(t.nodeType===8?t.parentNode:t),io(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=dc(l);a.call(u)}}var l=D1(t,0,!1,null,null,!1,!1,"",sv);return t._reactRootContainer=l,t[Pr]=l.current,Ua(t.nodeType===8?t.parentNode:t),io(function(){Qc(e,l,n,r)}),l}function ef(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=dc(s);a.call(l)}}Qc(e,s,t,i)}else s=FC(n,e,t,i,r);return dc(s)}M_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oa(e.pendingLanes);n!==0&&(t1(e,n|1),fn(e,Ze()),!(Ee&6)&&(ls=Ze()+500,Ri()))}break;case 13:io(function(){var r=Dr(t,1);if(r!==null){var i=Qt();Gn(r,t,1,i)}}),k1(t,1)}};n1=function(t){if(t.tag===13){var e=Dr(t,134217728);if(e!==null){var n=Qt();Gn(e,t,134217728,n)}k1(t,134217728)}};L_=function(t){if(t.tag===13){var e=fi(t),n=Dr(t,e);if(n!==null){var r=Qt();Gn(n,t,e,r)}k1(t,e)}};F_=function(){return Pe};B_=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};yd=function(t,e,n){switch(e){case"input":if(fd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Hc(r);if(!i)throw Error(z(90));g_(r),fd(r,i)}}}break;case"textarea":v_(t,n);break;case"select":e=n.value,e!=null&&Go(t,!!n.multiple,e,!1)}};I_=R1;T_=io;var BC={usingClientEntryPoint:!1,Events:[cl,Fo,Hc,E_,A_,R1]},Zs={findFiberByHostInstance:zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VC={bundleType:Zs.bundleType,version:Zs.version,rendererPackageName:Zs.rendererPackageName,rendererConfig:Zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=b_(t),t===null?null:t.stateNode},findFiberByHostInstance:Zs.findFiberByHostInstance||LC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{Uc=ou.inject(VC),or=ou}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BC;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!L1(e))throw Error(z(200));return MC(t,e,null,n)};_n.createRoot=function(t,e){if(!L1(t))throw Error(z(299));var n=!1,r="",i=sx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=D1(t,1,!1,null,null,n,!1,r,i),t[Pr]=e.current,Ua(t.nodeType===8?t.parentNode:t),new M1(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=b_(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return io(t)};_n.hydrate=function(t,e,n){if(!Jc(e))throw Error(z(200));return ef(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!L1(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=sx;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=ox(e,null,t,1,n??null,i,!1,o,s),t[Pr]=e.current,Ua(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Zc(e)};_n.render=function(t,e,n){if(!Jc(e))throw Error(z(200));return ef(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(z(40));return t._reactRootContainer?(io(function(){ef(null,null,t,!1,function(){t._reactRootContainer=null,t[Pr]=null})}),!0):!1};_n.unstable_batchedUpdates=R1;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return ef(t,e,n,!1,r)};_n.version="18.3.1-next-f1338f8080-20240426";function ax(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ax)}catch(t){console.error(t)}}ax(),a_.exports=_n;var UC=a_.exports,av=UC;id.createRoot=av.createRoot,id.hydrateRoot=av.hydrateRoot;var jC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const $C=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zC=(t,e)=>{const n=H.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,children:a,...l},u)=>H.createElement("svg",{ref:u,...jC,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:`lucide lucide-${$C(t)}`,...l},[...e.map(([c,h])=>H.createElement(c,h)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var gr=zC;const HC=gr("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),WC=gr("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),lv=gr("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),GC=gr("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),KC=gr("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),uv=gr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),XC=gr("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),qC=gr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),YC=gr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),lx=gr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function QC(t,e){var n=Object.setPrototypeOf;n?n(t,e):t.__proto__=e}function ZC(t,e){e===void 0&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}var JC=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},t(n,r)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),e3=function(t){JC(e,t);function e(n,r){var i=this.constructor,o=t.call(this,n,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),QC(o,i.prototype),ZC(o),o}return e}(Error),t3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hn=function(t){t3(e,t);function e(n){n===void 0&&(n=void 0);var r=t.call(this,n)||this;return r.message=n,r}return e.prototype.getKind=function(){var n=this.constructor;return n.kind},e.kind="Exception",e}(e3),n3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bn=function(t){n3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(hn),r3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oe=function(t){r3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(hn),i3=function(){function t(e){if(this.binarizer=e,e===null)throw new oe("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,n){return this.binarizer.getBlackRow(e,n)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,n,r,i){var o=this.binarizer.getLuminanceSource().crop(e,n,r,i);return new t(this.binarizer.createBinarizer(o))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),o3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mt=function(t){o3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(hn),s3=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Le=function(){function t(){}return t.arraycopy=function(e,n,r,i,o){for(;o--;)r[i++]=e[n++]},t.currentTimeMillis=function(){return Date.now()},t}(),a3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),F1=function(t){a3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(hn),l3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cv=function(t){l3(e,t);function e(n,r){n===void 0&&(n=void 0),r===void 0&&(r=void 0);var i=t.call(this,r)||this;return i.index=n,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(F1),u3=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},at=function(){function t(){}return t.fill=function(e,n){for(var r=0,i=e.length;r<i;r++)e[r]=n},t.fillWithin=function(e,n,r,i){t.rangeCheck(e.length,n,r);for(var o=n;o<r;o++)e[o]=i},t.rangeCheck=function(e,n,r){if(n>r)throw new oe("fromIndex("+n+") > toIndex("+r+")");if(n<0)throw new cv(n);if(r>e)throw new cv(r)},t.asList=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e},t.create=function(e,n,r){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:n}).fill(r)})},t.createInt32Array=function(e,n,r){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:n}).fill(r)})},t.equals=function(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==n[r])return!1;return!0},t.hashCode=function(e){var n,r;if(e===null)return 0;var i=1;try{for(var o=u3(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=31*i+a}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.fillUint8Array=function(e,n){for(var r=0;r!==e.length;r++)e[r]=n},t.copyOf=function(e,n){return e.slice(0,n)},t.copyOfUint8Array=function(e,n){if(e.length<=n){var r=new Uint8Array(n);return r.set(e),r}return e.slice(0,n)},t.copyOfRange=function(e,n,r){var i=r-n,o=new Int32Array(i);return Le.arraycopy(e,n,o,0,i),o},t.binarySearch=function(e,n,r){r===void 0&&(r=t.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,a=r(n,e[s]);if(a>0)i=s+1;else if(a<0)o=s-1;else return s}return-i-1},t.numberComparator=function(e,n){return e-n},t}(),ge=function(){function t(){}return t.numberOfTrailingZeros=function(e){var n;if(e===0)return 32;var r=31;return n=e<<16,n!==0&&(r-=16,e=n),n=e<<8,n!==0&&(r-=8,e=n),n=e<<4,n!==0&&(r-=4,e=n),n=e<<2,n!==0&&(r-=2,e=n),r-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,n){return Math.trunc(e/n)},t.parseInt=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),vt=function(){function t(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=t.makeArray(e):this.bits=n)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var n=t.makeArray(e);Le.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return n;o=r[i]}var a=i*32+ge.numberOfTrailingZeros(o);return a>n?n:a},t.prototype.getNextUnset=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return n;o=~r[i]}var a=i*32+ge.numberOfTrailingZeros(o);return a>n?n:a},t.prototype.setBulk=function(e,n){this.bits[Math.floor(e/32)]=n},t.prototype.setRange=function(e,n){if(n<e||e<0||n>this.size)throw new oe;if(n!==e){n--;for(var r=Math.floor(e/32),i=Math.floor(n/32),o=this.bits,s=r;s<=i;s++){var a=s>r?0:e&31,l=s<i?31:n&31,u=(2<<l)-(1<<a);o[s]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,n=this.bits,r=0;r<e;r++)n[r]=0},t.prototype.isRange=function(e,n,r){if(n<e||e<0||n>this.size)throw new oe;if(n===e)return!0;n--;for(var i=Math.floor(e/32),o=Math.floor(n/32),s=this.bits,a=i;a<=o;a++){var l=a>i?0:e&31,u=a<o?31:n&31,c=(2<<u)-(1<<l)&4294967295;if((s[a]&c)!==(r?c:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,n){if(n<0||n>32)throw new oe("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var r=n;r>0;r--)this.appendBit((e>>r-1&1)===1)},t.prototype.appendBitArray=function(e){var n=e.size;this.ensureCapacity(this.size+n);for(var r=0;r<n;r++)this.appendBit(e.get(r))},t.prototype.xor=function(e){if(this.size!==e.size)throw new oe("Sizes don't match");for(var n=this.bits,r=0,i=n.length;r<i;r++)n[r]^=e.bits[r]},t.prototype.toBytes=function(e,n,r,i){for(var o=0;o<i;o++){for(var s=0,a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;n[r+o]=s}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),r=n+1,i=this.bits,o=0;o<r;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[n-o]=s}if(this.size!==r*32){for(var a=r*32-this.size,l=e[0]>>>a,o=1;o<r;o++){var u=e[o];l|=u<<32-a,e[o-1]=l,l=u>>>a}e[r-1]=l}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.size===n.size&&at.equals(this.bits,n.bits)},t.prototype.hashCode=function(){return 31*this.size+at.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",n=0,r=this.size;n<r;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],n=0,r=this.size;n<r;n++)e.push(this.get(n));return e},t}(),Qd;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Qd||(Qd={}));const He=Qd;var c3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),G=function(t){c3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(hn),f3=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ne;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Ne||(Ne={}));var st=function(){function t(e,n,r){for(var i,o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];this.valueIdentifier=e,this.name=r,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=s,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(r,this);for(var l=this.values,u=0,c=l.length;u!==c;u++){var h=l[u];t.VALUES_TO_ECI.set(h,this)}try{for(var d=f3(s),p=d.next();!p.done;p=d.next()){var m=p.value;t.NAME_TO_ECI.set(m,this)}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new G("incorect value");var n=t.VALUES_TO_ECI.get(e);if(n===void 0)throw new G("incorect value");return n},t.getCharacterSetECIByName=function(e){var n=t.NAME_TO_ECI.get(e);if(n===void 0)throw new G("incorect value");return n},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.getName()===n.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Ne.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Ne.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Ne.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Ne.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Ne.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Ne.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Ne.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Ne.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Ne.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Ne.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Ne.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Ne.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Ne.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Ne.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Ne.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Ne.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Ne.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Ne.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Ne.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Ne.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Ne.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Ne.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Ne.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Ne.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Ne.Big5,28,"Big5"),t.GB18030=new t(Ne.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Ne.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),h3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ou=function(t){h3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(hn),Nn=function(){function t(){}return t.decode=function(e,n){var r=this.encodingName(n);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,n){var r=this.encodingName(n);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof st?e:st.getCharacterSetECIByName(e)},t.decodeFallback=function(e,n){var r=this.encodingCharacterSet(n);if(t.isDecodeFallbackSupported(r)){for(var i="",o=0,s=e.length;o<s;o++){var a=e[o].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(r.equals(st.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Ou("Encoding "+this.encodingName(n)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(st.UTF8)||e.equals(st.ISO8859_1)||e.equals(st.ASCII)},t.encodeFallback=function(e){for(var n=btoa(unescape(encodeURIComponent(e))),r=n.split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},t}(),we=function(){function t(){}return t.castAsNonUtf8Char=function(e,n){n===void 0&&(n=null);var r=n?n.getName():this.ISO88591;return Nn.decode(new Uint8Array([e]),r)},t.guessEncoding=function(e,n){if(n!=null&&n.get(He.CHARACTER_SET)!==void 0)return n.get(He.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,s=!0,a=0,l=0,u=0,c=0,h=0,d=0,p=0,m=0,w=0,I=0,y=0,v=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,x=0;x<r&&(i||o||s);x++){var T=e[x]&255;s&&(a>0?T&128?a--:s=!1:T&128&&(T&64?(a++,T&32?(a++,T&16?(a++,T&8?s=!1:c++):u++):l++):s=!1)),i&&(T>127&&T<160?i=!1:T>159&&(T<192||T===215||T===247)&&y++),o&&(h>0?T<64||T===127||T>252?o=!1:h--:T===128||T===160||T>239?o=!1:T>160&&T<224?(d++,m=0,p++,p>w&&(w=p)):T>127?(h++,p=0,m++,m>I&&(I=m)):(p=0,m=0))}return s&&a>0&&(s=!1),o&&h>0&&(o=!1),s&&(v||l+u+c>0)?t.UTF8:o&&(t.ASSUME_SHIFT_JIS||w>=3||I>=3)?t.SHIFT_JIS:i&&o?w===2&&d===2||y*10>=r?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:o?t.SHIFT_JIS:s?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=-1;function o(a,l,u,c,h,d){if(a==="%%")return"%";if(n[++i]!==void 0){a=c?parseInt(c.substr(1)):void 0;var p=h?parseInt(h.substr(1)):void 0,m;switch(d){case"s":m=n[i];break;case"c":m=n[i][0];break;case"f":m=parseFloat(n[i]).toFixed(a);break;case"p":m=parseFloat(n[i]).toPrecision(a);break;case"e":m=parseFloat(n[i]).toExponential(a);break;case"x":m=parseInt(n[i]).toString(p||16);break;case"d":m=parseFloat(parseInt(n[i],p||10).toPrecision(a)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(p);for(var w=parseInt(u),I=u&&u[0]+""=="0"?"0":" ";m.length<w;)m=l!==void 0?m+I:I+m;return m}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},t.getBytes=function(e,n){return Nn.encode(e,n)},t.getCharCode=function(e,n){return n===void 0&&(n=0),e.charCodeAt(n)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=st.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=st.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=st.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),de=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=we.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,n,r){for(var i=n;n<n+r;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)},t.prototype.substring=function(e,n){return this.value.substring(e,n)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,n){this.value=this.value.substring(0,e)+n+this.value.substring(e)},t}(),fr=function(){function t(e,n,r,i){if(this.width=e,this.height=n,this.rowSize=r,this.bits=i,n==null&&(n=e),this.height=n,e<1||n<1)throw new oe("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var n=e.length,r=e[0].length,i=new t(r,n),o=0;o<n;o++)for(var s=e[o],a=0;a<r;a++)s[a]&&i.set(a,o);return i},t.parseFromString=function(e,n,r){if(e===null)throw new oe("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,a=-1,l=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new oe("row lengths do not match");s=o,l++}u++}else if(e.substring(u,u+n.length)===n)u+=n.length,i[o]=!0,o++;else if(e.substring(u,u+r.length)===r)u+=r.length,i[o]=!1,o++;else throw new oe("illegal character encountered: "+e.substring(u));if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new oe("row lengths do not match");l++}for(var c=new t(a,l),h=0;h<o;h++)i[h]&&c.set(Math.floor(h%a),Math.floor(h/a));return c},t.prototype.get=function(e,n){var r=n*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},t.prototype.set=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new oe("input matrix dimensions do not match");for(var n=new vt(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var a=o*r,l=e.getRow(o,n).getBitArray(),u=0;u<r;u++)i[a+u]^=l[u]},t.prototype.clear=function(){for(var e=this.bits,n=e.length,r=0;r<n;r++)e[r]=0},t.prototype.setRegion=function(e,n,r,i){if(n<0||e<0)throw new oe("Left and top must be nonnegative");if(i<1||r<1)throw new oe("Height and width must be at least 1");var o=e+r,s=n+i;if(s>this.height||o>this.width)throw new oe("The region must fit inside the matrix");for(var a=this.rowSize,l=this.bits,u=n;u<s;u++)for(var c=u*a,h=e;h<o;h++)l[c+Math.floor(h/32)]|=1<<(h&31)&4294967295},t.prototype.getRow=function(e,n){n==null||n.getSize()<this.width?n=new vt(this.width):n.clear();for(var r=this.rowSize,i=this.bits,o=e*r,s=0;s<r;s++)n.setBulk(s*32,i[o+s]);return n},t.prototype.setRow=function(e,n){Le.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),n=this.getHeight(),r=new vt(e),i=new vt(e),o=0,s=Math.floor((n+1)/2);o<s;o++)r=this.getRow(o,r),i=this.getRow(n-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(n-1-o,r)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,n=this.height,r=this.rowSize,i=this.bits,o=e,s=n,a=-1,l=-1,u=0;u<n;u++)for(var c=0;c<r;c++){var h=i[u*r+c];if(h!==0){if(u<s&&(s=u),u>l&&(l=u),c*32<o){for(var d=0;!(h<<31-d&4294967295);)d++;c*32+d<o&&(o=c*32+d)}if(c*32+31>a){for(var d=31;!(h>>>d);)d--;c*32+d>a&&(a=c*32+d)}}}return a<o||l<s?null:Int32Array.from([o,s,a-o+1,l-s+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,n=this.bits,r=0;r<n.length&&n[r]===0;)r++;if(r===n.length)return null;for(var i=r/e,o=r%e*32,s=n[r],a=0;!(s<<31-a&4294967295);)a++;return o+=a,Int32Array.from([o,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,n=this.bits,r=n.length-1;r>=0&&n[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=Math.floor(r%e)*32,s=n[r],a=31;!(s>>>a);)a--;return o+=a,Int32Array.from([o,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&at.equals(this.bits,n.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+at.hashCode(this.bits),e},t.prototype.toString=function(e,n,r){return e===void 0&&(e="X "),n===void 0&&(n="  "),r===void 0&&(r=`
`),this.buildToString(e,n,r)},t.prototype.buildToString=function(e,n,r){for(var i=new de,o=0,s=this.height;o<s;o++){for(var a=0,l=this.width;a<l;a++)i.append(this.get(a,o)?e:n);i.append(r)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),d3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),V=function(t){d3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(hn),p3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),g3=function(t){p3(e,t);function e(n){var r=t.call(this,n)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(n,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new vt(o):r.clear(),this.initArrays(o);for(var s=i.getRow(n,this.luminances),a=this.buckets,l=0;l<o;l++)a[(s[l]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(a);if(o<3)for(var l=0;l<o;l++)(s[l]&255)<u&&r.set(l);else for(var c=s[0]&255,h=s[1]&255,l=1;l<o-1;l++){var d=s[l+1]&255;(h*4-c-d)/2<u&&r.set(l),c=h,h=d}return r},e.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight(),o=new fr(r,i);this.initArrays(r);for(var s=this.buckets,a=1;a<5;a++)for(var l=Math.floor(i*a/5),u=n.getRow(l,this.luminances),c=Math.floor(r*4/5),h=Math.floor(r/5);h<c;h++){var d=u[h]&255;s[d>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(s),m=n.getMatrix(),a=0;a<i;a++)for(var w=a*r,h=0;h<r;h++){var d=m[w+h]&255;d<p&&o.set(h,a)}return o},e.prototype.createBinarizer=function(n){return new e(n)},e.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(n){for(var r=n.length,i=0,o=0,s=0,a=0;a<r;a++)n[a]>s&&(o=a,s=n[a]),n[a]>i&&(i=n[a]);for(var l=0,u=0,a=0;a<r;a++){var c=a-o,h=n[a]*c*c;h>u&&(l=a,u=h)}if(o>l){var d=o;o=l,l=d}if(l-o<=r/16)throw new V;for(var p=l-1,m=-1,a=l-1;a>o;a--){var w=a-o,h=w*w*(l-a)*(i-n[a]);h>m&&(p=a,m=h)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(s3),m3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),v3=function(t){m3(e,t);function e(n){var r=t.call(this,n)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=n.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;r&e.BLOCK_SIZE_MASK&&s++;var a=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&a++;var l=e.calculateBlackPoints(o,s,a,r,i),u=new fr(r,i);e.calculateThresholdForBlock(o,s,a,r,i,l,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(n){return new e(n)},e.calculateThresholdForBlock=function(n,r,i,o,s,a,l){for(var u=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,h=0;h<i;h++){var d=h<<e.BLOCK_SIZE_POWER;d>u&&(d=u);for(var p=e.cap(h,2,i-3),m=0;m<r;m++){var w=m<<e.BLOCK_SIZE_POWER;w>c&&(w=c);for(var I=e.cap(m,2,r-3),y=0,v=-2;v<=2;v++){var x=a[p+v];y+=x[I-2]+x[I-1]+x[I]+x[I+1]+x[I+2]}var T=y/25;e.thresholdBlock(n,w,d,T,o,l)}}},e.cap=function(n,r,i){return n<r?r:n>i?i:n},e.thresholdBlock=function(n,r,i,o,s,a){for(var l=0,u=i*s+r;l<e.BLOCK_SIZE;l++,u+=s)for(var c=0;c<e.BLOCK_SIZE;c++)(n[u+c]&255)<=o&&a.set(r+c,i+l)},e.calculateBlackPoints=function(n,r,i,o,s){for(var a=s-e.BLOCK_SIZE,l=o-e.BLOCK_SIZE,u=new Array(i),c=0;c<i;c++){u[c]=new Int32Array(r);var h=c<<e.BLOCK_SIZE_POWER;h>a&&(h=a);for(var d=0;d<r;d++){var p=d<<e.BLOCK_SIZE_POWER;p>l&&(p=l);for(var m=0,w=255,I=0,y=0,v=h*o+p;y<e.BLOCK_SIZE;y++,v+=o){for(var x=0;x<e.BLOCK_SIZE;x++){var T=n[v+x]&255;m+=T,T<w&&(w=T),T>I&&(I=T)}if(I-w>e.MIN_DYNAMIC_RANGE)for(y++,v+=o;y<e.BLOCK_SIZE;y++,v+=o)for(var x=0;x<e.BLOCK_SIZE;x++)m+=n[v+x]&255}var P=m>>e.BLOCK_SIZE_POWER*2;if(I-w<=e.MIN_DYNAMIC_RANGE&&(P=w/2,c>0&&d>0)){var k=(u[c-1][d]+2*u[c][d-1]+u[c-1][d-1])/4;w<k&&(P=k)}u[c][d]=P}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(g3),tf=function(){function t(e,n){this.width=e,this.height=n}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,n,r,i){throw new Ou("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new Ou("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new Ou("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),n=new de,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var s=i[o]&255,a=void 0;s<64?a="#":s<128?a="+":s<192?a=".":a=" ",n.append(a)}n.append(`
`)}return n.toString()},t}(),y3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),B1=function(t){y3(e,t);function e(n){var r=t.call(this,n.getWidth(),n.getHeight())||this;return r.delegate=n,r}return e.prototype.getRow=function(n,r){for(var i=this.delegate.getRow(n,r),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(n[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(n,r,i,o){return new e(this.delegate.crop(n,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(tf),_3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),w3=function(t){_3(e,t);function e(n,r){r===void 0&&(r=!1);var i=t.call(this,n.width,n.height)||this;return i.canvas=n,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(n,r),i}return e.makeBufferFromCanvasImageData=function(n,r){r===void 0&&(r=!1);var i=n.getContext("2d").getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(i.data,n.width,n.height,r)},e.toGrayscaleBuffer=function(n,r,i,o){o===void 0&&(o=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var a=0,l=0,u=n.length;a<u;a+=4,l++){var c=void 0,h=n[a+3];if(h===0)c=255;else{var d=n[a],p=n[a+1],m=n[a+2];c=306*d+601*p+117*m+512>>10}s[l]=c}else for(var a=0,l=0,w=n.length;a<w;a+=4,l++){var c=void 0,h=n[a+3];if(h===0)c=255;else{var d=n[a],p=n[a+1],m=n[a+2];c=306*d+601*p+117*m+512>>10}s[l]=255-c}return s},e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new oe("Requested row is outside the image: "+n);var i=this.getWidth(),o=n*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return t.prototype.crop.call(this,n,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=n*e.DEGREE_TO_RADIANS,s=this.canvas.width,a=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*a),u=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*a);return r.width=l,r.height=u,i.translate(l/2,u/2),i.rotate(o),i.drawImage(this.canvas,s/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new B1(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(tf),x3=function(){function t(e,n,r){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=r||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Kt=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(h){s(h)}}function l(c){try{u(r.throw(c))}catch(h){s(h)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})},Xt=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},E3=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xs=function(){function t(e,n,r){n===void 0&&(n=500),this.reader=e,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Kt(this,void 0,void 0,function(){var e,n,r,i,o,s,a,l,u,c,h,d;return Xt(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),n=[];try{for(r=E3(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,l=o.label||"Video device "+(n.length+1),u=o.groupId,c={deviceId:a,label:l,kind:s,groupId:u},n.push(c))}catch(m){h={error:m}}finally{try{i&&!i.done&&(d=r.return)&&d.call(r)}finally{if(h)throw h.error}}return[2,n]}})})},t.prototype.getVideoInputDevices=function(){return Kt(this,void 0,void 0,function(){var e;return Xt(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=n.sent(),[2,e.map(function(r){return new x3(r.deviceId,r.label)})]}})})},t.prototype.findDeviceById=function(e){return Kt(this,void 0,void 0,function(){var n;return Xt(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return n=r.sent(),n?[2,n.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,n){return Kt(this,void 0,void 0,function(){return Xt(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,n)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,n){return Kt(this,void 0,void 0,function(){var r,i;return Xt(this,function(o){switch(o.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,n){return Kt(this,void 0,void 0,function(){var r;return Xt(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return Kt(this,void 0,void 0,function(){var r,i;return Xt(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return i=o.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,n,r){return Kt(this,void 0,void 0,function(){return Xt(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,n,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return Kt(this,void 0,void 0,function(){var i,o;return Xt(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,n,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return Kt(this,void 0,void 0,function(){var i;return Xt(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,n,r)];case 2:return[2,o.sent()]}})})},t.prototype.decodeFromStream=function(e,n,r){return Kt(this,void 0,void 0,function(){var i;return Xt(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,n){return Kt(this,void 0,void 0,function(){var r;return Xt(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(n),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},t.prototype.playVideoOnLoadAsync=function(e){var n=this;return new Promise(function(r,i){return n.playVideoOnLoad(e,function(){return r()})})},t.prototype.playVideoOnLoad=function(e,n){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Kt(this,void 0,void 0,function(){return Xt(this,function(n){switch(n.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[3,4];case 3:return n.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,n){var r=document.getElementById(e);if(!r)throw new Bn("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new Bn("element with id '"+e+"' must be an "+n+" element");return r},t.prototype.decodeFromImage=function(e,n){if(!e&&!n)throw new Bn("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,n){if(!e&&!n)throw new Bn("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,n,r){if(e===void 0&&n===void 0)throw new Bn("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,r):this.decodeFromVideoElementContinuously(e,r)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Bn("An image element must be provided.");this.reset();var n=this.prepareImageElement(e);this.imageElement=n;var r;return this.isImageLoaded(n)?r=this.decodeOnce(n,!1,!0):r=this._decodeOnLoadImage(n),r},t.prototype.decodeFromVideoElement=function(e){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)},t.prototype.decodeFromVideoElementContinuously=function(e,n){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,n)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Bn("A video element must be provided.");this.reset();var n=this.prepareVideoElement(e);return this.videoElement=n,n},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Bn("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var r=this._decodeOnLoadImage(n);return n.src=e,r},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Bn("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElement(n);return n.src=e,r},t.prototype.decodeFromVideoUrlContinuously=function(e,n){if(!e)throw new Bn("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,n);return r.src=e,i},t.prototype._decodeOnLoadImage=function(e){var n=this;return new Promise(function(r,i){n.imageLoadedListener=function(){return n.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",n.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Kt(this,void 0,void 0,function(){return Xt(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),[4,this.decodeOnce(e)];case 2:return[2,n.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,n){return Kt(this,void 0,void 0,function(){return Xt(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,n),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n},t.prototype.prepareVideoElement=function(e){var n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.prototype.decodeOnce=function(e,n,r){var i=this;n===void 0&&(n=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(s,a){if(i._stopAsyncDecode){a(new V("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(e);s(l)}catch(d){var u=n&&d instanceof V,c=d instanceof mt||d instanceof G,h=c&&r;if(u||h)return setTimeout(o,i._timeBetweenDecodingAttempts,s,a);a(d)}};return new Promise(function(s,a){return o(s,a)})},t.prototype.decodeContinuously=function(e,n){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(e);n(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(l){n(null,l);var s=l instanceof mt||l instanceof G,a=l instanceof V;(s||a)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var n=this.createBinaryBitmap(e);return this.decodeBitmap(n)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var n=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),n=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new w3(r,n),o=new v3(i);return new i3(o)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(e),r=void 0;try{r=n.getContext("2d",{willReadFrequently:!0})}catch{r=n.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.drawImageOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var n=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),n.style.width=r+"px",n.style.height=i+"px",n.width=r,n.height=i,n},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),zt=function(){function t(e,n,r,i,o,s){r===void 0&&(r=n==null?0:8*n.length),s===void 0&&(s=Le.currentTimeMillis()),this.text=e,this.rawBytes=n,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=n,r==null?this.numBits=n==null?0:8*n.length:this.numBits=r,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=Le.currentTimeMillis():this.timestamp=s}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(n.length+e.length);Le.arraycopy(n,0,r,0,n.length),Le.arraycopy(e,0,r,n.length,e.length),this.resultPoints=r}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),Zd;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Zd||(Zd={}));const ie=Zd;var Jd;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Jd||(Jd={}));const Ct=Jd;var nf=function(){function t(e,n,r,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=n,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),aa=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new oe;return this.logTable[e]},t.addOrSubtract=function(e,n){return e^n},t}(),di=function(){function t(e,n){if(n.length===0)throw new oe;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Le.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var n=this.coefficients,r;if(e===1){r=0;for(var i=0,o=n.length;i!==o;i++){var s=n[i];r=aa.addOrSubtract(r,s)}return r}r=n[0];for(var a=n.length,l=this.field,i=1;i<a;i++)r=aa.addOrSubtract(l.multiply(e,r),n[i]);return r},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new oe("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),s=r.length-n.length;Le.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=aa.addOrSubtract(n[a-s],r[a]);return new t(this.field,o)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new oe("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=this.field,l=0;l<r;l++)for(var u=n[l],c=0;c<o;c++)s[l+c]=aa.addOrSubtract(s[l+c],a.multiply(u,i[c]));return new t(a,s)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var n=this.coefficients.length,r=this.field,i=new Int32Array(n),o=this.coefficients,s=0;s<n;s++)i[s]=r.multiply(o[s],e);return new t(r,i)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new oe;if(n===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),s=this.field,a=0;a<i;a++)o[a]=s.multiply(r[a],n);return new t(s,o)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new oe("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new oe("Divide by 0");for(var n=this.field,r=n.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=n.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),l=n.multiply(i.getCoefficient(i.getDegree()),s),u=e.multiplyByMonomial(a,l),c=n.buildMonomial(a,l);r=r.addOrSubtract(c),i=i.addOrSubtract(u)}return[r,i]},t.prototype.toString=function(){for(var e="",n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),n===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e},t}(),A3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ux=function(t){A3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(hn),I3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sn=function(t){I3(e,t);function e(n,r,i){var o=t.call(this)||this;o.primitive=n,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),a=1,l=0;l<r;l++)s[l]=a,a*=2,a>=r&&(a^=n,a&=r-1);o.expTable=s;for(var u=new Int32Array(r),l=0;l<r-1;l++)u[s[l]]=l;return o.logTable=u,o.zero=new di(o,Int32Array.from([0])),o.one=new di(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new oe;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new di(this,i)},e.prototype.inverse=function(n){if(n===0)throw new ux;return this.expTable[this.size-this.logTable[n]-1]},e.prototype.multiply=function(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+ge.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(n){return n===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(aa),T3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),su=function(t){T3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(hn),S3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hl=function(t){S3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(hn),rf=function(){function t(e){this.field=e}return t.prototype.decode=function(e,n){for(var r=this.field,i=new di(r,e),o=new Int32Array(n),s=!0,a=0;a<n;a++){var l=i.evaluateAt(r.exp(a+r.getGeneratorBase()));o[o.length-1-a]=l,l!==0&&(s=!1)}if(!s)for(var u=new di(r,o),c=this.runEuclideanAlgorithm(r.buildMonomial(n,1),u,n),h=c[0],d=c[1],p=this.findErrorLocations(h),m=this.findErrorMagnitudes(d,p),a=0;a<p.length;a++){var w=e.length-1-r.log(p[a]);if(w<0)throw new su("Bad error location");e[w]=sn.addOrSubtract(e[w],m[a])}},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var o=this.field,s=e,a=n,l=o.getZero(),u=o.getOne();a.getDegree()>=(r/2|0);){var c=s,h=l;if(s=a,l=u,s.isZero())throw new su("r_{i-1} was zero");a=c;for(var d=o.getZero(),p=s.getCoefficient(s.getDegree()),m=o.inverse(p);a.getDegree()>=s.getDegree()&&!a.isZero();){var w=a.getDegree()-s.getDegree(),I=o.multiply(a.getCoefficient(a.getDegree()),m);d=d.addOrSubtract(o.buildMonomial(w,I)),a=a.addOrSubtract(s.multiplyByMonomial(w,I))}if(u=d.multiply(l).addOrSubtract(h),a.getDegree()>=s.getDegree())throw new hl("Division algorithm failed to reduce polynomial?")}var y=u.getCoefficient(0);if(y===0)throw new su("sigmaTilde(0) was zero");var v=o.inverse(y),x=u.multiplyScalar(v),T=a.multiplyScalar(v);return[x,T]},t.prototype.findErrorLocations=function(e){var n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(n),i=0,o=this.field,s=1;s<o.getSize()&&i<n;s++)e.evaluateAt(s)===0&&(r[i]=o.inverse(s),i++);if(i!==n)throw new su("Error locator degree does not match number of roots");return r},t.prototype.findErrorMagnitudes=function(e,n){for(var r=n.length,i=new Int32Array(r),o=this.field,s=0;s<r;s++){for(var a=o.inverse(n[s]),l=1,u=0;u<r;u++)if(s!==u){var c=o.multiply(n[u],a),h=c&1?c&-2:c|1;l=o.multiply(l,h)}i[s]=o.multiply(e.evaluateAt(a),o.inverse(l)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],a))}return i},t}(),Et;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(Et||(Et={}));var fv=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var n=e.getBits(),r=this.extractBits(n),i=this.correctBits(r),o=t.convertBoolArrayToByteArray(i),s=t.getEncodedData(i),a=new nf(o,s,null,null);return a.setNumBits(i.length),a},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var n=e.length,r=Et.UPPER,i=Et.UPPER,o="",s=0;s<n;)if(i===Et.BINARY){if(n-s<5)break;var a=t.readCode(e,s,5);if(s+=5,a===0){if(n-s<11)break;a=t.readCode(e,s,11)+31,s+=11}for(var l=0;l<a;l++){if(n-s<8){s=n;break}var u=t.readCode(e,s,8);o+=we.castAsNonUtf8Char(u),s+=8}i=r}else{var c=i===Et.DIGIT?4:5;if(n-s<c)break;var u=t.readCode(e,s,c);s+=c;var h=t.getCharacter(i,u);h.startsWith("CTRL_")?(r=i,i=t.getTable(h.charAt(5)),h.charAt(6)==="L"&&(r=i)):(o+=h,i=r)}return o},t.getTable=function(e){switch(e){case"L":return Et.LOWER;case"P":return Et.PUNCT;case"M":return Et.MIXED;case"D":return Et.DIGIT;case"B":return Et.BINARY;case"U":default:return Et.UPPER}},t.getCharacter=function(e,n){switch(e){case Et.UPPER:return t.UPPER_TABLE[n];case Et.LOWER:return t.LOWER_TABLE[n];case Et.MIXED:return t.MIXED_TABLE[n];case Et.PUNCT:return t.PUNCT_TABLE[n];case Et.DIGIT:return t.DIGIT_TABLE[n];default:throw new hl("Bad table")}},t.prototype.correctBits=function(e){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=sn.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=sn.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=sn.AZTEC_DATA_10):(r=12,n=sn.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new G;for(var s=e.length%r,a=new Int32Array(o),l=0;l<o;l++,s+=r)a[l]=t.readCode(e,s,r);try{var u=new rf(n);u.decode(a,o-i)}catch(I){throw new G(I)}for(var c=(1<<r)-1,h=0,l=0;l<i;l++){var d=a[l];if(d===0||d===c)throw new G;(d===1||d===c-1)&&h++}for(var p=new Array(i*r-h),m=0,l=0;l<i;l++){var d=a[l];if(d===1||d===c-1)p.fill(d>1,m,m+r-1),m+=r-1;else for(var w=r-1;w>=0;--w)p[m++]=(d&1<<w)!==0}return p},t.prototype.extractBits=function(e){var n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(n?11:14)+r*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,n));if(n)for(var a=0;a<o.length;a++)o[a]=a;else for(var l=i+1+2*ge.truncDivision(ge.truncDivision(i,2)-1,15),u=i/2,c=ge.truncDivision(l,2),a=0;a<u;a++){var h=a+ge.truncDivision(a,15);o[u-a-1]=c-h-1,o[u+a]=c+h+1}for(var a=0,d=0;a<r;a++){for(var p=(r-a)*4+(n?9:12),m=a*2,w=i-1-m,I=0;I<p;I++)for(var y=I*2,v=0;v<2;v++)s[d+y+v]=e.get(o[m+v],o[m+I]),s[d+2*p+y+v]=e.get(o[m+I],o[w-v]),s[d+4*p+y+v]=e.get(o[w-v],o[w-I]),s[d+6*p+y+v]=e.get(o[w-I],o[m+v]);d+=p*8}return s},t.readCode=function(e,n,r){for(var i=0,o=n;o<n+r;o++)i<<=1,e[o]&&(i|=1);return i},t.readByte=function(e,n){var r=e.length-n;return r>=8?t.readCode(e,n,8):t.readCode(e,n,r)<<8-r},t.convertBoolArrayToByteArray=function(e){for(var n=new Uint8Array((e.length+7)/8),r=0;r<n.length;r++)n[r]=t.readByte(e,8*r);return n},t.prototype.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),Ie=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,n,r,i){var o=e-r,s=n-i;return Math.sqrt(o*o+s*s)},t.sum=function(e){for(var n=0,r=0,i=e.length;r!==i;r++){var o=e[r];n+=o}return n},t}(),e0=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),ne=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var n=e;return this.x===n.x&&this.y===n.y}return!1},t.prototype.hashCode=function(){return 31*e0.floatToIntBits(this.x)+e0.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var n=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,a;if(r>=n&&r>=i?(s=e[0],o=e[1],a=e[2]):i>=r&&i>=n?(s=e[1],o=e[0],a=e[2]):(s=e[2],o=e[0],a=e[1]),this.crossProductZ(o,s,a)<0){var l=o;o=a,a=l}e[0]=o,e[1]=s,e[2]=a},t.distance=function(e,n){return Ie.distance(e.x,e.y,n.x,n.y)},t.crossProductZ=function(e,n,r){var i=n.x,o=n.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},t}(),V1=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),C3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),b3=function(t){C3(e,t);function e(n,r,i,o,s){var a=t.call(this,n,r)||this;return a.compact=i,a.nbDatablocks=o,a.nbLayers=s,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(V1),t0=function(){function t(e,n,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=t.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=n/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}return t.prototype.detect=function(){for(var e=this.leftInit,n=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,a=!1,l=!1,u=!1,c=!1,h=!1,d=this.width,p=this.height;s;){s=!1;for(var m=!0;(m||!l)&&n<d;)m=this.containsBlackPoint(r,i,n,!1),m?(n++,s=!0,l=!0):l||n++;if(n>=d){o=!0;break}for(var w=!0;(w||!u)&&i<p;)w=this.containsBlackPoint(e,n,i,!0),w?(i++,s=!0,u=!0):u||i++;if(i>=p){o=!0;break}for(var I=!0;(I||!c)&&e>=0;)I=this.containsBlackPoint(r,i,e,!1),I?(e--,s=!0,c=!0):c||e--;if(e<0){o=!0;break}for(var y=!0;(y||!h)&&r>=0;)y=this.containsBlackPoint(e,n,r,!0),y?(r--,s=!0,h=!0):h||r--;if(r<0){o=!0;break}s&&(a=!0)}if(!o&&a){for(var v=n-e,x=null,T=1;x===null&&T<v;T++)x=this.getBlackPointOnSegment(e,i-T,e+T,i);if(x==null)throw new V;for(var P=null,T=1;P===null&&T<v;T++)P=this.getBlackPointOnSegment(e,r+T,e+T,r);if(P==null)throw new V;for(var k=null,T=1;k===null&&T<v;T++)k=this.getBlackPointOnSegment(n,r+T,n-T,r);if(k==null)throw new V;for(var A=null,T=1;A===null&&T<v;T++)A=this.getBlackPointOnSegment(n,i-T,n-T,i);if(A==null)throw new V;return this.centerEdges(A,x,k,P)}else throw new V},t.prototype.getBlackPointOnSegment=function(e,n,r,i){for(var o=Ie.round(Ie.distance(e,n,r,i)),s=(r-e)/o,a=(i-n)/o,l=this.image,u=0;u<o;u++){var c=Ie.round(e+u*s),h=Ie.round(n+u*a);if(l.get(c,h))return new ne(c,h)}return null},t.prototype.centerEdges=function(e,n,r,i){var o=e.getX(),s=e.getY(),a=n.getX(),l=n.getY(),u=r.getX(),c=r.getY(),h=i.getX(),d=i.getY(),p=t.CORR;return o<this.width/2?[new ne(h-p,d+p),new ne(a+p,l+p),new ne(u-p,c-p),new ne(o+p,s-p)]:[new ne(h+p,d+p),new ne(a+p,l-p),new ne(u-p,c+p),new ne(o-p,s-p)]},t.prototype.containsBlackPoint=function(e,n,r,i){var o=this.image;if(i){for(var s=e;s<=n;s++)if(o.get(s,r))return!0}else for(var a=e;a<=n;a++)if(o.get(r,a))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),hv=function(){function t(){}return t.checkAndNudgePoints=function(e,n){for(var r=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<n.length&&o;s+=2){var a=Math.floor(n[s]),l=Math.floor(n[s+1]);if(a<-1||a>r||l<-1||l>i)throw new V;o=!1,a===-1?(n[s]=0,o=!0):a===r&&(n[s]=r-1,o=!0),l===-1?(n[s+1]=0,o=!0):l===i&&(n[s+1]=i-1,o=!0)}o=!0;for(var s=n.length-2;s>=0&&o;s-=2){var a=Math.floor(n[s]),l=Math.floor(n[s+1]);if(a<-1||a>r||l<-1||l>i)throw new V;o=!1,a===-1?(n[s]=0,o=!0):a===r&&(n[s]=r-1,o=!0),l===-1?(n[s+1]=0,o=!0):l===i&&(n[s+1]=i-1,o=!0)}},t}(),cx=function(){function t(e,n,r,i,o,s,a,l,u){this.a11=e,this.a21=n,this.a31=r,this.a12=i,this.a22=o,this.a32=s,this.a13=a,this.a23=l,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,n,r,i,o,s,a,l,u,c,h,d,p,m,w,I){var y=t.quadrilateralToSquare(e,n,r,i,o,s,a,l),v=t.squareToQuadrilateral(u,c,h,d,p,m,w,I);return v.times(y)},t.prototype.transformPoints=function(e){for(var n=e.length,r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,l=this.a23,u=this.a31,c=this.a32,h=this.a33,d=0;d<n;d+=2){var p=e[d],m=e[d+1],w=o*p+l*m+h;e[d]=(r*p+s*m+u)/w,e[d+1]=(i*p+a*m+c)/w}},t.prototype.transformPointsWithValues=function(e,n){for(var r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,l=this.a23,u=this.a31,c=this.a32,h=this.a33,d=e.length,p=0;p<d;p++){var m=e[p],w=n[p],I=o*m+l*w+h;e[p]=(r*m+s*w+u)/I,n[p]=(i*m+a*w+c)/I}},t.squareToQuadrilateral=function(e,n,r,i,o,s,a,l){var u=e-r+o-a,c=n-i+s-l;if(u===0&&c===0)return new t(r-e,o-r,e,i-n,s-i,n,0,0,1);var h=r-o,d=a-o,p=i-s,m=l-s,w=h*m-d*p,I=(u*m-d*c)/w,y=(h*c-u*p)/w;return new t(r-e+I*r,a-e+y*a,e,i-n+I*i,l-n+y*l,n,I,y,1)},t.quadrilateralToSquare=function(e,n,r,i,o,s,a,l){return t.squareToQuadrilateral(e,n,r,i,o,s,a,l).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),R3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),N3=function(t){R3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(n,r,i,o,s,a,l,u,c,h,d,p,m,w,I,y,v,x,T){var P=cx.quadrilateralToQuadrilateral(o,s,a,l,u,c,h,d,p,m,w,I,y,v,x,T);return this.sampleGridWithTransform(n,r,i,P)},e.prototype.sampleGridWithTransform=function(n,r,i,o){if(r<=0||i<=0)throw new V;for(var s=new fr(r,i),a=new Float32Array(2*r),l=0;l<i;l++){for(var u=a.length,c=l+.5,h=0;h<u;h+=2)a[h]=h/2+.5,a[h+1]=c;o.transformPoints(a),hv.checkAndNudgePoints(n,a);try{for(var h=0;h<u;h+=2)n.get(Math.floor(a[h]),Math.floor(a[h+1]))&&s.set(h/2,l)}catch{throw new V}}return s},e}(hv),U1=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new N3,t}(),nn=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.toResultPoint=function(){return new ne(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),O3=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var n=this.getMatrixCenter(),r=this.getBullsEyeCorners(n);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new b3(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new V;var n=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(r,n);for(var i=0,o=0;o<4;o++){var s=r[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},t.prototype.getRotation=function(e,n){var r=0;e.forEach(function(o,s,a){var l=(o>>n-2<<1)+(o&1);r=(r<<3)+l}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(ge.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new V},t.prototype.getCorrectedParameterData=function(e,n){var r,i;n?(r=7,i=2):(r=10,i=4);for(var o=r-i,s=new Int32Array(r),a=r-1;a>=0;--a)s[a]=e&15,e>>=4;try{var l=new rf(sn.AZTEC_PARAM);l.decode(s,o)}catch{throw new V}for(var u=0,a=0;a<i;a++)u=(u<<4)+s[a];return u},t.prototype.getBullsEyeCorners=function(e){var n=e,r=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(n,s,1,-1),l=this.getFirstDifferent(r,s,1,1),u=this.getFirstDifferent(i,s,-1,1),c=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var h=this.distancePoint(c,a)*this.nbCenterLayers/(this.distancePoint(o,n)*(this.nbCenterLayers+2));if(h<.75||h>1.25||!this.isWhiteOrBlackRectangle(a,l,u,c))break}n=a,r=l,i=u,o=c,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;var d=new ne(n.getX()+.5,n.getY()-.5),p=new ne(r.getX()+.5,r.getY()+.5),m=new ne(i.getX()-.5,i.getY()+.5),w=new ne(o.getX()-.5,o.getY()-.5);return this.expandSquare([d,p,m,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,n,r,i;try{var o=new t0(this.image).detect();e=o[0],n=o[1],r=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new nn(s+7,a-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new nn(s+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new nn(s-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new nn(s-7,a-7),!1,-1,-1).toResultPoint()}var l=Ie.round((e.getX()+i.getX()+n.getX()+r.getX())/4),u=Ie.round((e.getY()+i.getY()+n.getY()+r.getY())/4);try{var o=new t0(this.image,15,l,u).detect();e=o[0],n=o[1],r=o[2],i=o[3]}catch{e=this.getFirstDifferent(new nn(l+7,u-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new nn(l+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new nn(l-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new nn(l-7,u-7),!1,-1,-1).toResultPoint()}return l=Ie.round((e.getX()+i.getX()+n.getX()+r.getX())/4),u=Ie.round((e.getY()+i.getY()+n.getY()+r.getY())/4),new nn(l,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,n,r,i,o){var s=U1.getInstance(),a=this.getDimension(),l=a/2-this.nbCenterLayers,u=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,l,l,u,l,u,u,l,u,n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},t.prototype.sampleLine=function(e,n,r){for(var i=0,o=this.distanceResultPoint(e,n),s=o/r,a=e.getX(),l=e.getY(),u=s*(n.getX()-e.getX())/o,c=s*(n.getY()-e.getY())/o,h=0;h<r;h++)this.image.get(Ie.round(a+h*u),Ie.round(l+h*c))&&(i|=1<<r-h-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,n,r,i){var o=3;e=new nn(e.getX()-o,e.getY()+o),n=new nn(n.getX()-o,n.getY()-o),r=new nn(r.getX()+o,r.getY()-o),i=new nn(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var a=this.getColor(e,n);return a!==s||(a=this.getColor(n,r),a!==s)?!1:(a=this.getColor(r,i),a===s)},t.prototype.getColor=function(e,n){for(var r=this.distancePoint(e,n),i=(n.getX()-e.getX())/r,o=(n.getY()-e.getY())/r,s=0,a=e.getX(),l=e.getY(),u=this.image.get(e.getX(),e.getY()),c=Math.ceil(r),h=0;h<c;h++)a+=i,l+=o,this.image.get(Ie.round(a),Ie.round(l))!==u&&s++;var d=s/r;return d>.1&&d<.9?0:d<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,n,r,i){for(var o=e.getX()+r,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===n;)o+=r,s+=i;for(o-=r,s-=i;this.isValid(o,s)&&this.image.get(o,s)===n;)o+=r;for(o-=r;this.isValid(o,s)&&this.image.get(o,s)===n;)s+=i;return s-=i,new nn(o,s)},t.prototype.expandSquare=function(e,n,r){var i=r/(2*n),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,u=new ne(a+i*o,l+i*s),c=new ne(a-i*o,l-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var h=new ne(a+i*o,l+i*s),d=new ne(a-i*o,l-i*s),p=[u,h,c,d];return p},t.prototype.isValid=function(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()},t.prototype.isValidPoint=function(e){var n=Ie.round(e.getX()),r=Ie.round(e.getY());return this.isValid(n,r)},t.prototype.distancePoint=function(e,n){return Ie.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.distanceResultPoint=function(e,n){return Ie.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ge.truncDivision(this.nbLayers-4,8)+1)+15},t}(),n0=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=null,i=new O3(e.getBlackMatrix()),o=null,s=null;try{var a=i.detectMirror(!1);o=a.getPoints(),this.reportFoundResultPoints(n,o),s=new fv().decode(a)}catch(h){r=h}if(s==null)try{var a=i.detectMirror(!0);o=a.getPoints(),this.reportFoundResultPoints(n,o),s=new fv().decode(a)}catch(h){throw r??h}var l=new zt(s.getText(),s.getRawBytes(),s.getNumBits(),o,ie.AZTEC,Le.currentTimeMillis()),u=s.getByteSegments();u!=null&&l.putMetadata(Ct.BYTE_SEGMENTS,u);var c=s.getECLevel();return c!=null&&l.putMetadata(Ct.ERROR_CORRECTION_LEVEL,c),l},t.prototype.reportFoundResultPoints=function(e,n){if(e!=null){var r=e.get(He.NEED_RESULT_POINT_CALLBACK);r!=null&&n.forEach(function(i,o,s){r.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),P3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){P3(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new n0,n)||this}return e})(xs);var ut=function(){function t(){}return t.prototype.decode=function(e,n){try{return this.doDecode(e,n)}catch{var r=n&&n.get(He.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,n),s=o.getResultMetadata(),a=270;s!==null&&s.get(Ct.ORIENTATION)===!0&&(a=a+s.get(Ct.ORIENTATION)%360),o.putMetadata(Ct.ORIENTATION,a);var l=o.getResultPoints();if(l!==null)for(var u=i.getHeight(),c=0;c<l.length;c++)l[c]=new ne(u-l[c].getY()-1,l[c].getX());return o}else throw new V}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,n){var r=e.getWidth(),i=e.getHeight(),o=new vt(r),s=n&&n.get(He.TRY_HARDER)===!0,a=Math.max(1,i>>(s?8:5)),l;s?l=i:l=15;for(var u=Math.trunc(i/2),c=0;c<l;c++){var h=Math.trunc((c+1)/2),d=(c&1)===0,p=u+a*(d?h:-h);if(p<0||p>=i)break;try{o=e.getBlackRow(p,o)}catch{continue}for(var m=function(v){if(v===1&&(o.reverse(),n&&n.get(He.NEED_RESULT_POINT_CALLBACK)===!0)){var x=new Map;n.forEach(function(k,A){return x.set(A,k)}),x.delete(He.NEED_RESULT_POINT_CALLBACK),n=x}try{var T=w.decodeRow(p,o,n);if(v===1){T.putMetadata(Ct.ORIENTATION,180);var P=T.getResultPoints();P!==null&&(P[0]=new ne(r-P[0].getX()-1,P[0].getY()),P[1]=new ne(r-P[1].getX()-1,P[1].getY()))}return{value:T}}catch{}},w=this,I=0;I<2;I++){var y=m(I);if(typeof y=="object")return y.value}}throw new V},t.recordPattern=function(e,n,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var s=e.getSize();if(n>=s)throw new V;for(var a=!e.get(n),l=0,u=n;u<s;){if(e.get(u)!==a)r[l]++;else{if(++l===i)break;r[l]=1,a=!a}u++}if(!(l===i||l===i-1&&u===s))throw new V},t.recordPatternInReverse=function(e,n,r){for(var i=r.length,o=e.get(n);n>0&&i>=0;)e.get(--n)!==o&&(i--,o=!o);if(i>=0)throw new V;t.recordPattern(e,n+1,r)},t.patternMatchVariance=function(e,n,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=n[a];if(o<s)return Number.POSITIVE_INFINITY;var l=o/s;r*=l;for(var u=0,c=0;c<i;c++){var h=e[c],d=n[c]*l,p=h>d?h-d:d-h;if(p>r)return Number.POSITIVE_INFINITY;u+=p}return u/o},t}(),D3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dv=function(t){D3(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(n){for(var r=n.getSize(),i=n.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),a=i,l=!1,u=6,c=i;c<r;c++)if(n.get(c)!==l)s[o]++;else{if(o===u-1){for(var h=e.MAX_AVG_VARIANCE,d=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var m=ut.patternMatchVariance(s,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);m<h&&(h=m,d=p)}if(d>=0&&n.isRange(Math.max(0,a-(c-a)/2),a,!1))return Int32Array.from([a,c,d]);a+=s[0]+s[1],s=s.slice(2,s.length),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,l=!l}throw new V},e.decodeCode=function(n,r,i){ut.recordPattern(n,i,r);for(var o=e.MAX_AVG_VARIANCE,s=-1,a=0;a<e.CODE_PATTERNS.length;a++){var l=e.CODE_PATTERNS[a],u=this.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);u<o&&(o=u,s=a)}if(s>=0)return s;throw new V},e.prototype.decodeRow=function(n,r,i){var o=i&&i.get(He.ASSUME_GS1)===!0,s=e.findStartPattern(r),a=s[2],l=0,u=new Uint8Array(20);u[l++]=a;var c;switch(a){case e.CODE_START_A:c=e.CODE_CODE_A;break;case e.CODE_START_B:c=e.CODE_CODE_B;break;case e.CODE_START_C:c=e.CODE_CODE_C;break;default:throw new G}for(var h=!1,d=!1,p="",m=s[0],w=s[1],I=Int32Array.from([0,0,0,0,0,0]),y=0,v=0,x=a,T=0,P=!0,k=!1,A=!1;!h;){var E=d;switch(d=!1,y=v,v=e.decodeCode(r,I,w),u[l++]=v,v!==e.CODE_STOP&&(P=!0),v!==e.CODE_STOP&&(T++,x+=T*v),m=w,w+=I.reduce(function(X,j){return X+j},0),v){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new G}switch(c){case e.CODE_CODE_A:if(v<64)A===k?p+=String.fromCharCode(" ".charCodeAt(0)+v):p+=String.fromCharCode(" ".charCodeAt(0)+v+128),A=!1;else if(v<96)A===k?p+=String.fromCharCode(v-64):p+=String.fromCharCode(v+64),A=!1;else switch(v!==e.CODE_STOP&&(P=!1),v){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+=String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!k&&A?(k=!0,A=!1):k&&A?(k=!1,A=!1):A=!0;break;case e.CODE_SHIFT:d=!0,c=e.CODE_CODE_B;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_B:if(v<96)A===k?p+=String.fromCharCode(" ".charCodeAt(0)+v):p+=String.fromCharCode(" ".charCodeAt(0)+v+128),A=!1;else switch(v!==e.CODE_STOP&&(P=!1),v){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+=String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!k&&A?(k=!0,A=!1):k&&A?(k=!1,A=!1):A=!0;break;case e.CODE_SHIFT:d=!0,c=e.CODE_CODE_A;break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_C:if(v<100)v<10&&(p+="0"),p+=v;else switch(v!==e.CODE_STOP&&(P=!1),v){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+=String.fromCharCode(29));break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_STOP:h=!0;break}break}E&&(c=c===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var S=w-m;if(w=r.getNextUnset(w),!r.isRange(w,Math.min(r.getSize(),w+(w-m)/2),!1))throw new V;if(x-=T*y,x%103!==y)throw new mt;var b=p.length;if(b===0)throw new V;b>0&&P&&(c===e.CODE_CODE_C?p=p.substring(0,b-2):p=p.substring(0,b-1));for(var D=(s[1]+s[0])/2,M=m+S/2,O=u.length,he=new Uint8Array(O),te=0;te<O;te++)he[te]=u[te];var Y=[new ne(D,n),new ne(M,n)];return new zt(p,he,0,Y,ie.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(ut),k3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bh=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pv=function(t){k3(e,t);function e(n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var i=t.call(this)||this;return i.usingCheckDigit=n,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(n,r,i){var o,s,a,l,u=this.counters;u.fill(0),this.decodeRowResult="";var c=e.findAsteriskPattern(r,u),h=r.getNextSet(c[1]),d=r.getSize(),p,m;do{e.recordPattern(r,h,u);var w=e.toNarrowWidePattern(u);if(w<0)throw new V;p=e.patternToChar(w),this.decodeRowResult+=p,m=h;try{for(var I=(o=void 0,bh(u)),y=I.next();!y.done;y=I.next()){var v=y.value;h+=v}}catch(O){o={error:O}}finally{try{y&&!y.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}h=r.getNextSet(h)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var x=0;try{for(var T=bh(u),P=T.next();!P.done;P=T.next()){var v=P.value;x+=v}}catch(O){a={error:O}}finally{try{P&&!P.done&&(l=T.return)&&l.call(T)}finally{if(a)throw a.error}}var k=h-m-x;if(h!==d&&k*2<x)throw new V;if(this.usingCheckDigit){for(var A=this.decodeRowResult.length-1,E=0,S=0;S<A;S++)E+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(S));if(this.decodeRowResult.charAt(A)!==e.ALPHABET_STRING.charAt(E%43))throw new mt;this.decodeRowResult=this.decodeRowResult.substring(0,A)}if(this.decodeRowResult.length===0)throw new V;var b;this.extendedMode?b=e.decodeExtended(this.decodeRowResult):b=this.decodeRowResult;var D=(c[1]+c[0])/2,M=m+x/2;return new zt(b,null,0,[new ne(D,n),new ne(M,n)],ie.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(n,r){for(var i=n.getSize(),o=n.getNextSet(0),s=0,a=o,l=!1,u=r.length,c=o;c<i;c++)if(n.get(c)!==l)r[s]++;else{if(s===u-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&n.isRange(Math.max(0,a-Math.floor((c-a)/2)),a,!1))return[a,c];a+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,l=!l}throw new V},e.toNarrowWidePattern=function(n){var r,i,o=n.length,s=0,a;do{var l=2147483647;try{for(var u=(r=void 0,bh(n)),c=u.next();!c.done;c=u.next()){var h=c.value;h<l&&h>s&&(l=h)}}catch(w){r={error:w}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}s=l,a=0;for(var d=0,p=0,m=0;m<o;m++){var h=n[m];h>s&&(p|=1<<o-1-m,a++,d+=h)}if(a===3){for(var m=0;m<o&&a>0;m++){var h=n[m];if(h>s&&(a--,h*2>=d))return-1}return p}}while(a>3);return-1},e.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);if(n===e.ASTERISK_ENCODING)return"*";throw new V},e.decodeExtended=function(n){for(var r=n.length,i="",o=0;o<r;o++){var s=n.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var a=n.charAt(o+1),l="\0";switch(s){case"+":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)+32);else throw new G;break;case"$":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)-64);else throw new G;break;case"%":if(a>="A"&&a<="E")l=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")l=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")l=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")l="\0";else if(a==="V")l="@";else if(a==="W")l="`";else if(a==="X"||a==="Y"||a==="Z")l="";else throw new G;break;case"/":if(a>="A"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")l=":";else throw new G;break}i+=l,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(ut),M3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rh=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gv=function(t){M3(e,t);function e(){var n=t.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return e.prototype.decodeRow=function(n,r,i){var o,s,a,l,u=this.findAsteriskPattern(r),c=r.getNextSet(u[1]),h=r.getSize(),d=this.counters;d.fill(0),this.decodeRowResult="";var p,m;do{e.recordPattern(r,c,d);var w=this.toPattern(d);if(w<0)throw new V;p=this.patternToChar(w),this.decodeRowResult+=p,m=c;try{for(var I=(o=void 0,Rh(d)),y=I.next();!y.done;y=I.next()){var v=y.value;c+=v}}catch(S){o={error:S}}finally{try{y&&!y.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}c=r.getNextSet(c)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var x=0;try{for(var T=Rh(d),P=T.next();!P.done;P=T.next()){var v=P.value;x+=v}}catch(S){a={error:S}}finally{try{P&&!P.done&&(l=T.return)&&l.call(T)}finally{if(a)throw a.error}}if(c===h||!r.get(c))throw new V;if(this.decodeRowResult.length<2)throw new V;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var k=this.decodeExtended(this.decodeRowResult),A=(u[1]+u[0])/2,E=m+x/2;return new zt(k,null,0,[new ne(A,n),new ne(E,n)],ie.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(n){var r=n.getSize(),i=n.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,a=!1,l=o.length,u=0,c=i;c<r;c++)if(n.get(c)!==a)o[u]++;else{if(u===l-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,c]);s+=o[0]+o[1],o.copyWithin(0,2,2+u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,a=!a}throw new V},e.prototype.toPattern=function(n){var r,i,o=0;try{for(var s=Rh(n),a=s.next();!a.done;a=s.next()){var l=a.value;o+=l}}catch(m){r={error:m}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var u=0,c=n.length,h=0;h<c;h++){var d=Math.round(n[h]*9/o);if(d<1||d>4)return-1;if(h&1)u<<=d;else for(var p=0;p<d;p++)u=u<<1|1}return u},e.prototype.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);throw new V},e.prototype.decodeExtended=function(n){for(var r=n.length,i="",o=0;o<r;o++){var s=n.charAt(o);if(s>="a"&&s<="d"){if(o>=r-1)throw new G;var a=n.charAt(o+1),l="\0";switch(s){case"d":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)+32);else throw new G;break;case"a":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)-64);else throw new G;break;case"b":if(a>="A"&&a<="E")l=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")l=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")l=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")l="\0";else if(a==="V")l="@";else if(a==="W")l="`";else if(a>="X"&&a<="Z")l=String.fromCharCode(127);else throw new G;break;case"c":if(a>="A"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")l=":";else throw new G;break}i+=l,o++}else i+=s}return i},e.prototype.checkChecksums=function(n){var r=n.length;this.checkOneChecksum(n,r-2,20),this.checkOneChecksum(n,r-1,15)},e.prototype.checkOneChecksum=function(n,r,i){for(var o=1,s=0,a=r-1;a>=0;a--)s+=o*e.ALPHABET_STRING.indexOf(n.charAt(a)),++o>i&&(o=1);if(n.charAt(r)!==e.ALPHABET_STRING[s%47])throw new mt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(ut),L3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),F3=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mv=function(t){L3(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return e.prototype.decodeRow=function(n,r,i){var o,s,a=this.decodeStart(r),l=this.decodeEnd(r),u=new de;e.decodeMiddle(r,a[1],l[0],u);var c=u.toString(),h=null;i!=null&&(h=i.get(He.ALLOWED_LENGTHS)),h==null&&(h=e.DEFAULT_ALLOWED_LENGTHS);var d=c.length,p=!1,m=0;try{for(var w=F3(h),I=w.next();!I.done;I=w.next()){var y=I.value;if(d===y){p=!0;break}y>m&&(m=y)}}catch(T){o={error:T}}finally{try{I&&!I.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}if(!p&&d>m&&(p=!0),!p)throw new G;var v=[new ne(a[1],n),new ne(l[0],n)],x=new zt(c,null,0,v,ie.ITF,new Date().getTime());return x},e.decodeMiddle=function(n,r,i,o){var s=new Int32Array(10),a=new Int32Array(5),l=new Int32Array(5);for(s.fill(0),a.fill(0),l.fill(0);r<i;){ut.recordPattern(n,r,s);for(var u=0;u<5;u++){var c=2*u;a[u]=s[c],l[u]=s[c+1]}var h=e.decodeDigit(a);o.append(h.toString()),h=this.decodeDigit(l),o.append(h.toString()),s.forEach(function(d){r+=d})}},e.prototype.decodeStart=function(n){var r=e.skipWhiteSpace(n),i=e.findGuardPattern(n,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(n,i[0]),i},e.prototype.validateQuietZone=function(n,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!n.get(o);o--)i--;if(i!==0)throw new V},e.skipWhiteSpace=function(n){var r=n.getSize(),i=n.getNextSet(0);if(i===r)throw new V;return i},e.prototype.decodeEnd=function(n){n.reverse();try{var r=e.skipWhiteSpace(n),i=void 0;try{i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof V&&(i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,i[0]);var o=i[0];return i[0]=n.getSize()-i[1],i[1]=n.getSize()-o,i}finally{n.reverse()}},e.findGuardPattern=function(n,r,i){var o=i.length,s=new Int32Array(o),a=n.getSize(),l=!1,u=0,c=r;s.fill(0);for(var h=r;h<a;h++)if(n.get(h)!==l)s[u]++;else{if(u===o-1){if(ut.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[c,h];c+=s[0]+s[1],Le.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,l=!l}throw new V},e.decodeDigit=function(n){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var a=e.PATTERNS[s],l=ut.patternMatchVariance(n,a,e.MAX_INDIVIDUAL_VARIANCE);l<r?(r=l,i=s):l===r&&(i=-1)}if(i>=0)return i%10;throw new V},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(ut),B3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),us=function(t){B3(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return e.findStartGuardPattern=function(n){for(var r=!1,i,o=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(n,o,!1,this.START_END_PATTERN,s);var a=i[0];o=i[1];var l=a-(o-a);l>=0&&(r=n.isRange(l,a,!1))}return i},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,o=r-1;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(s<0||s>9)throw new G;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(s<0||s>9)throw new G;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(n,r,i,o){return this.findGuardPattern(n,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(n,r,i,o,s){var a=n.getSize();r=i?n.getNextUnset(r):n.getNextSet(r);for(var l=0,u=r,c=o.length,h=i,d=r;d<a;d++)if(n.get(d)!==h)s[l]++;else{if(l===c-1){if(ut.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,d]);u+=s[0]+s[1];for(var p=s.slice(2,s.length),m=0;m<l-1;m++)s[m]=p[m];s[l-1]=0,s[l]=0,l--}else l++;s[l]=1,h=!h}throw new V},e.decodeDigit=function(n,r,i,o){this.recordPattern(n,i,r);for(var s=this.MAX_AVG_VARIANCE,a=-1,l=o.length,u=0;u<l;u++){var c=o[u],h=ut.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);h<s&&(s=h,a=u)}if(a>=0)return a;throw new V},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(ut),V3=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},U3=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),s=i.toString(),a=t.parseExtensionString(s),l=[new ne((r[0]+r[1])/2,e),new ne(o,e)],u=new zt(s,null,0,l,ie.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u},t.prototype.decodeMiddle=function(e,n,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),l=n[1],u=0,c=0;c<5&&l<a;c++){var h=us.decodeDigit(e,s,l,us.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+h%10);try{for(var d=(i=void 0,V3(s)),p=d.next();!p.done;p=d.next()){var m=p.value;l+=m}}catch(I){i={error:I}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}h>=10&&(u|=1<<4-c),c!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(r.length!==5)throw new V;var w=this.determineCheckDigit(u);if(t.extensionChecksum(r.toString())!==w)throw new V;return l},t.extensionChecksum=function(e){for(var n=e.length,r=0,i=n-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);r*=3;for(var i=n-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-"0".charCodeAt(0);return r*=3,r%10},t.prototype.determineCheckDigit=function(e){for(var n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new V},t.parseExtensionString=function(e){if(e.length!==5)return null;var n=t.parseExtension5String(e);return n==null?null:new Map([[Ct.SUGGESTED_PRICE,n]])},t.parseExtension5String=function(e){var n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),o=r%100,s=o<10?"0"+o:o.toString();return n+i+"."+s},t}(),j3=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$3=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),s=i.toString(),a=t.parseExtensionString(s),l=[new ne((r[0]+r[1])/2,e),new ne(o,e)],u=new zt(s,null,0,l,ie.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u},t.prototype.decodeMiddle=function(e,n,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),l=n[1],u=0,c=0;c<2&&l<a;c++){var h=us.decodeDigit(e,s,l,us.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+h%10);try{for(var d=(i=void 0,j3(s)),p=d.next();!p.done;p=d.next()){var m=p.value;l+=m}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}h>=10&&(u|=1<<1-c),c!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(r.length!==2)throw new V;if(parseInt(r.toString())%4!==u)throw new V;return l},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Ct.ISSUE_NUMBER,parseInt(e)]])},t}(),z3=function(){function t(){}return t.decodeRow=function(e,n,r){var i=us.findGuardPattern(n,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new U3;return o.decodeRow(e,n,i)}catch{var s=new $3;return s.decodeRow(e,n,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),H3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ot=function(t){H3(e,t);function e(){var n=t.call(this)||this;n.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=o}return n}return e.prototype.decodeRow=function(n,r,i){var o=e.findStartGuardPattern(r),s=i==null?null:i.get(He.NEED_RESULT_POINT_CALLBACK);if(s!=null){var a=new ne((o[0]+o[1])/2,n);s.foundPossibleResultPoint(a)}var l=this.decodeMiddle(r,o,this.decodeRowStringBuffer),u=l.rowOffset,c=l.resultString;if(s!=null){var h=new ne(u,n);s.foundPossibleResultPoint(h)}var d=e.decodeEnd(r,u);if(s!=null){var p=new ne((d[0]+d[1])/2,n);s.foundPossibleResultPoint(p)}var m=d[1],w=m+(m-d[0]);if(w>=r.getSize()||!r.isRange(m,w,!1))throw new V;var I=c.toString();if(I.length<8)throw new G;if(!e.checkChecksum(I))throw new mt;var y=(o[1]+o[0])/2,v=(d[1]+d[0])/2,x=this.getBarcodeFormat(),T=[new ne(y,n),new ne(v,n)],P=new zt(I,null,0,T,x,new Date().getTime()),k=0;try{var A=z3.decodeRow(n,r,d[1]);P.putMetadata(Ct.UPC_EAN_EXTENSION,A.getText()),P.putAllMetadata(A.getResultMetadata()),P.addResultPoints(A.getResultPoints()),k=A.getText().length}catch{}var E=i==null?null:i.get(He.ALLOWED_EAN_EXTENSIONS);if(E!=null){var S=!1;for(var b in E)if(k.toString()===b){S=!0;break}if(!S)throw new V}return x===ie.EAN_13||ie.UPC_A,P},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,o=r-1;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(s<0||s>9)throw new G;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(s<0||s>9)throw new G;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(us),W3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vv=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r0=function(t){W3(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var o,s,a,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=n.getSize(),h=r[1],d=0,p=0;p<6&&h<c;p++){var m=ot.decodeDigit(n,u,h,ot.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+m%10);try{for(var w=(o=void 0,vv(u)),I=w.next();!I.done;I=w.next()){var y=I.value;h+=y}}catch(P){o={error:P}}finally{try{I&&!I.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}m>=10&&(d|=1<<5-p)}i=e.determineFirstDigit(i,d);var v=ot.findGuardPattern(n,h,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0));h=v[1];for(var p=0;p<6&&h<c;p++){var m=ot.decodeDigit(n,u,h,ot.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+m);try{for(var x=(a=void 0,vv(u)),T=x.next();!T.done;T=x.next()){var y=T.value;h+=y}}catch(A){a={error:A}}finally{try{T&&!T.done&&(l=x.return)&&l.call(x)}finally{if(a)throw a.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return ie.EAN_13},e.determineFirstDigit=function(n,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return n=String.fromCharCode("0".charCodeAt(0)+i)+n,n;throw new V},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(ot),G3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yv=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_v=function(t){G3(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var o,s,a,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=n.getSize(),h=r[1],d=0;d<4&&h<c;d++){var p=ot.decodeDigit(n,u,h,ot.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+p);try{for(var m=(o=void 0,yv(u)),w=m.next();!w.done;w=m.next()){var I=w.value;h+=I}}catch(T){o={error:T}}finally{try{w&&!w.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}}var y=ot.findGuardPattern(n,h,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0));h=y[1];for(var d=0;d<4&&h<c;d++){var p=ot.decodeDigit(n,u,h,ot.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+p);try{for(var v=(a=void 0,yv(u)),x=v.next();!x.done;x=v.next()){var I=x.value;h+=I}}catch(k){a={error:k}}finally{try{x&&!x.done&&(l=v.return)&&l.call(v)}finally{if(a)throw a.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return ie.EAN_8},e}(ot),K3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wv=function(t){K3(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ean13Reader=new r0,n}return e.prototype.getBarcodeFormat=function(){return ie.UPC_A},e.prototype.decode=function(n,r){return this.maybeReturnResult(this.ean13Reader.decode(n))},e.prototype.decodeRow=function(n,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,r,i))},e.prototype.decodeMiddle=function(n,r,i){return this.ean13Reader.decodeMiddle(n,r,i)},e.prototype.maybeReturnResult=function(n){var r=n.getText();if(r.charAt(0)==="0"){var i=new zt(r.substring(1),null,null,n.getResultPoints(),ie.UPC_A);return n.getResultMetadata()!=null&&i.putAllMetadata(n.getResultMetadata()),i}else throw new V},e.prototype.reset=function(){this.ean13Reader.reset()},e}(ot),X3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),q3=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xv=function(t){X3(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return e.prototype.decodeMiddle=function(n,r,i){var o,s,a=this.decodeMiddleCounters.map(function(I){return I});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var l=n.getSize(),u=r[1],c=0,h=0;h<6&&u<l;h++){var d=e.decodeDigit(n,a,u,e.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var p=(o=void 0,q3(a)),m=p.next();!m.done;m=p.next()){var w=m.value;u+=w}}catch(I){o={error:I}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}d>=10&&(c|=1<<5-h)}return e.determineNumSysAndCheckDigit(new de(i),c),u},e.prototype.decodeEnd=function(n,r){return e.findGuardPatternWithoutCounters(n,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(n){return ot.checkChecksum(e.convertUPCEtoUPCA(n))},e.determineNumSysAndCheckDigit=function(n,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){n.insert(0,"0"+i),n.append("0"+o);return}throw V.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return ie.UPC_E},e.convertUPCEtoUPCA=function(n){var r=n.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new de;i.append(n.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return n.length>=8&&i.append(n.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(ot),Y3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ev=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nh=function(t){Y3(e,t);function e(n){var r=t.call(this)||this,i=n==null?null:n.get(He.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(ie.EAN_13)>-1&&o.push(new r0),i.indexOf(ie.UPC_A)>-1&&o.push(new wv),i.indexOf(ie.EAN_8)>-1&&o.push(new _v),i.indexOf(ie.UPC_E)>-1&&o.push(new xv)),o.length===0&&(o.push(new r0),o.push(new wv),o.push(new _v),o.push(new xv)),r.readers=o,r}return e.prototype.decodeRow=function(n,r,i){var o,s;try{for(var a=Ev(this.readers),l=a.next();!l.done;l=a.next()){var u=l.value;try{var c=u.decodeRow(n,r,i),h=c.getBarcodeFormat()===ie.EAN_13&&c.getText().charAt(0)==="0",d=i==null?null:i.get(He.POSSIBLE_FORMATS),p=d==null||d.includes(ie.UPC_A);if(h&&p){var m=c.getRawBytes(),w=new zt(c.getText().substring(1),m,m?m.length:null,c.getResultPoints(),ie.UPC_A);return w.putAllMetadata(c.getResultMetadata()),w}return c}catch{}}}catch(I){o={error:I}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}throw new V},e.prototype.reset=function(){var n,r;try{for(var i=Ev(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e}(ut),Q3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Z3=function(t){Q3(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return e.prototype.decodeRow=function(n,r,i){var o=this.getValidRowData(r);if(!o)throw new V;var s=this.codaBarDecodeRow(o.row);if(!s)throw new V;return new zt(s,null,0,[new ne(o.left,n),new ne(o.right,n)],ie.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(n){var r=n.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;r=r.slice(i,o+1);for(var s=[],a=r[0],l=1,u=1;u<r.length;u++)r[u]===a?l++:(a=r[u],s.push(l),l=1);return s.push(l),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(n){for(var r=[],i=Math.ceil(n.reduce(function(l,u){return(l+u)/2},0));n.length>0;){var o=n.splice(0,8).splice(0,7),s=o.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var a=r.join("");return this.validCodaBarString(a)?a:null},e.prototype.validCodaBarString=function(n){var r=/^[A-D].{1,}[A-D]$/;return r.test(n)},e}(ut),J3=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),e4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ji=function(t){J3(e,t);function e(){var n=t.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(n,r){for(var i=0;i<r.length;i++)if(ut.patternMatchVariance(n,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new V},e.count=function(n){return Ie.sum(new Int32Array(n))},e.increment=function(n,r){for(var i=0,o=r[0],s=1;s<n.length;s++)r[s]>o&&(o=r[s],i=s);n[i]++},e.decrement=function(n,r){for(var i=0,o=r[0],s=1;s<n.length;s++)r[s]<o&&(o=r[s],i=s);n[i]--},e.isFinderPattern=function(n){var r,i,o=n[0]+n[1],s=o+n[2]+n[3],a=o/s;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var c=e4(n),h=c.next();!h.done;h=c.next()){var d=h.value;d>u&&(u=d),d<l&&(l=d)}}catch(p){r={error:p}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return u<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(ut),pc=function(){function t(e,n){this.value=e,this.checksumPortion=n}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),fx=function(){function t(e,n,r,i,o){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new ne(r,o)),this.resultPoints.push(new ne(i,o))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.hashCode=function(){return this.value},t}(),t4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ho=function(){function t(){}return t.getRSSvalue=function(e,n,r){var i,o,s=0;try{for(var a=t4(e),l=a.next();!l.done;l=a.next()){var u=l.value;s+=u}}catch(v){i={error:v}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}for(var c=0,h=0,d=e.length,p=0;p<d-1;p++){var m=void 0;for(m=1,h|=1<<p;m<e[p];m++,h&=~(1<<p)){var w=t.combins(s-m-1,d-p-2);if(r&&h===0&&s-m-(d-p-1)>=d-p-1&&(w-=t.combins(s-m-(d-p),d-p-2)),d-p-1>1){for(var I=0,y=s-m-(d-p-2);y>n;y--)I+=t.combins(s-m-y-1,d-p-3);w-=I*(d-1-p)}else s-m>n&&w--;c+=w}s-=m}return c},t.combins=function(e,n){var r,i;e-n>n?(i=n,r=e-n):(i=e-n,r=n);for(var o=1,s=1,a=e;a>r;a--)o*=a,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},t}(),n4=function(){function t(){}return t.buildBitArray=function(e){var n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);for(var r=12*n,i=new vt(r),o=0,s=e[0],a=s.getRightChar().getValue(),l=11;l>=0;--l)a&1<<l&&i.set(o),o++;for(var l=1;l<e.length;++l){for(var u=e[l],c=u.getLeftChar().getValue(),h=11;h>=0;--h)c&1<<h&&i.set(o),o++;if(u.getRightChar()!==null)for(var d=u.getRightChar().getValue(),h=11;h>=0;--h)d&1<<h&&i.set(o),o++}return i},t}(),Fi=function(){function t(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),j1=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),r4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fn=function(t){r4(e,t);function e(n,r){var i=t.call(this,n)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(j1),i4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bi=function(t){i4(e,t);function e(n,r,i){var o=t.call(this,n)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(j1),o4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ao=function(t){o4(e,t);function e(n,r,i){var o=t.call(this,n)||this;if(r<0||r>10||i<0||i>10)throw new G;return o.firstDigit=r,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(j1),au=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s4=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var n,r,i,o,s,a,l,u;if(!e)return null;if(e.length<2)throw new V;var c=e.substring(0,2);try{for(var h=au(t.TWO_DIGIT_DATA_LENGTH),d=h.next();!d.done;d=h.next()){var p=d.value;if(p[0]===c)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,p[2],e):t.processFixedAI(2,p[1],e)}}catch(k){n={error:k}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}if(e.length<3)throw new V;var m=e.substring(0,3);try{for(var w=au(t.THREE_DIGIT_DATA_LENGTH),I=w.next();!I.done;I=w.next()){var p=I.value;if(p[0]===m)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,p[2],e):t.processFixedAI(3,p[1],e)}}catch(k){i={error:k}}finally{try{I&&!I.done&&(o=w.return)&&o.call(w)}finally{if(i)throw i.error}}try{for(var y=au(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),v=y.next();!v.done;v=y.next()){var p=v.value;if(p[0]===m)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(k){s={error:k}}finally{try{v&&!v.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}if(e.length<4)throw new V;var x=e.substring(0,4);try{for(var T=au(t.FOUR_DIGIT_DATA_LENGTH),P=T.next();!P.done;P=T.next()){var p=P.value;if(p[0]===x)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(k){l={error:k}}finally{try{P&&!P.done&&(u=T.return)&&u.call(T)}finally{if(l)throw l.error}}throw new V},t.processFixedAI=function(e,n,r){if(r.length<e)throw new V;var i=r.substring(0,e);if(r.length<e+n)throw new V;var o=r.substring(e,e+n),s=r.substring(e+n),a="("+i+")"+o,l=t.parseFieldsInGeneralPurpose(s);return l==null?a:a+l},t.processVariableAI=function(e,n,r){var i=r.substring(0,e),o;r.length<e+n?o=r.length:o=e+n;var s=r.substring(e,o),a=r.substring(o),l="("+i+")"+s,u=t.parseFieldsInGeneralPurpose(a);return u==null?l:l+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),Pu=function(){function t(e){this.buffer=new de,this.information=e}return t.prototype.decodeAllCodes=function(e,n){var r=n,i=null;do{var o=this.decodeGeneralPurposeField(r,i),s=s4.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(e,4);return n===0?new Ao(this.information.getSize(),Ao.FNC1,Ao.FNC1):new Ao(this.information.getSize(),n-1,Ao.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,o=(r-8)%11;return new Ao(e+7,i,o)},t.prototype.extractNumericValueFromBitArray=function(e,n){return t.extractNumericValueFromBitArray(this.information,e,n)},t.extractNumericValueFromBitArray=function(e,n,r){for(var i=0,o=0;o<r;++o)e.get(n+o)&&(i|=1<<r-o-1);return i},t.prototype.decodeGeneralPurposeField=function(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Bi(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Bi(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,n;do{var r=this.current.getPosition();this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return n.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var n=void 0;return e.isSecondDigitFNC1()?n=new Bi(this.current.getPosition(),this.buffer.toString()):n=new Bi(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Fi(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var n=new Bi(this.current.getPosition(),this.buffer.toString());return new Fi(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Fi(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Bi(this.current.getPosition(),this.buffer.toString());return new Fi(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Fi(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Bi(this.current.getPosition(),this.buffer.toString());return new Fi(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Fi(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new Fn(e+5,Fn.FNC1);if(n>=5&&n<15)return new Fn(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Fn(e+7,""+(r+1));if(r>=90&&r<116)return new Fn(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new G}return new Fn(e+8,o)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},t.prototype.decodeAlphanumeric=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new Fn(e+5,Fn.FNC1);if(n>=5&&n<15)return new Fn(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Fn(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new hl("Decoding invalid alphanumeric value: "+r)}return new Fn(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0},t}(),hx=function(){function t(e){this.information=e,this.generalDecoder=new Pu(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),a4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$n=function(t){a4(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedGtin=function(n,r){n.append("(01)");var i=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(n,r,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);s/100===0&&n.append("0"),s/10===0&&n.append("0"),n.append(s)}e.appendCheckDigit(n,i)},e.appendCheckDigit=function(n,r){for(var i=0,o=0;o<13;o++){var s=n.charAt(o+r).charCodeAt(0)-"0".charCodeAt(0);i+=o&1?s:3*s}i=10-i%10,i===10&&(i=0),n.append(i)},e.GTIN_SIZE=40,e}(hx),l4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),u4=function(t){l4(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new de;n.append("(01)");var r=n.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return n.append(i),this.encodeCompressedGtinWithoutAI(n,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE+44)},e.HEADER_SIZE=1+1+2,e}($n),c4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),f4=function(t){c4(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new de;return this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE)},e.HEADER_SIZE=2+1+2,e}(hx),h4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Du=function(t){h4(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedWeight=function(n,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(n,o);for(var s=this.checkWeight(o),a=1e5,l=0;l<5;++l)s/a===0&&n.append("0"),a/=10;n.append(s)},e}($n),d4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dx=function(t){d4(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Du.GTIN_SIZE+e.WEIGHT_SIZE)throw new V;var n=new de;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+Du.GTIN_SIZE,e.WEIGHT_SIZE),n.toString()},e.HEADER_SIZE=4+1,e.WEIGHT_SIZE=15,e}(Du),p4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),g4=function(t){p4(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){n.append("(3103)")},e.prototype.checkWeight=function(n){return n},e}(dx),m4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),v4=function(t){m4(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){r<1e4?n.append("(3202)"):n.append("(3203)")},e.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},e}(dx),y4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_4=function(t){y4(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+$n.GTIN_SIZE)throw new V;var n=new de;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+$n.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(392"),n.append(r),n.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+$n.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return n.append(i.getNewString()),n.toString()},e.HEADER_SIZE=5+1+2,e.LAST_DIGIT_SIZE=2,e}($n),w4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),x4=function(t){w4(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+$n.GTIN_SIZE)throw new V;var n=new de;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+$n.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(393"),n.append(r),n.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+$n.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&n.append("0"),i/10===0&&n.append("0"),n.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+$n.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return n.append(o.getNewString()),n.toString()},e.HEADER_SIZE=5+1+2,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}($n),E4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wr=function(t){E4(e,t);function e(n,r,i){var o=t.call(this,n)||this;return o.dateCode=i,o.firstAIdigits=r,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new V;var n=new de;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(n,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),n.toString()},e.prototype.encodeCompressedDate=function(n,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){n.append("("),n.append(this.dateCode),n.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var a=i;a/10===0&&n.append("0"),n.append(a),s/10===0&&n.append("0"),n.append(s),o/10===0&&n.append("0"),n.append(o)}},e.prototype.addWeightCode=function(n,r){n.append("("),n.append(this.firstAIdigits),n.append(r/1e5),n.append(")")},e.prototype.checkWeight=function(n){return n%1e5},e.HEADER_SIZE=7+1,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Du);function A4(t){try{if(t.get(1))return new u4(t);if(!t.get(2))return new f4(t);var e=Pu.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new g4(t);case 5:return new v4(t)}var n=Pu.extractNumericValueFromBitArray(t,1,5);switch(n){case 12:return new _4(t);case 13:return new x4(t)}var r=Pu.extractNumericValueFromBitArray(t,1,7);switch(r){case 56:return new Wr(t,"310","11");case 57:return new Wr(t,"320","11");case 58:return new Wr(t,"310","13");case 59:return new Wr(t,"320","13");case 60:return new Wr(t,"310","15");case 61:return new Wr(t,"320","15");case 62:return new Wr(t,"310","17");case 63:return new Wr(t,"320","17")}}catch(i){throw console.log(i),new hl("unknown decoder: "+t)}}var Av=function(){function t(e,n,r,i){this.leftchar=e,this.rightchar=n,this.finderpattern=r,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,n){return e instanceof t?t.equalsOrNull(e.leftchar,n.leftchar)&&t.equalsOrNull(e.rightchar,n.rightchar)&&t.equalsOrNull(e.finderpattern,n.finderpattern):!1},t.equalsOrNull=function(e,n){return e===null?n===null:t.equals(e,n)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),I4=function(){function t(e,n,r){this.pairs=e,this.rowNumber=n,this.wasReversed=r}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,n){return e instanceof t?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1},t.prototype.checkEqualitity=function(e,n){if(!(!e||!n)){var r;return e.forEach(function(i,o){n.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},t}(),T4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gr=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S4=function(t){T4(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.pairs=new Array(e.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return e.prototype.decodeRow=function(n,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(n,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(n,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(n,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,n))}catch(a){if(a instanceof V){if(!this.pairs.length)throw new V;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(n,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new V},e.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return n&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(n,r){for(var i,o,s=r;s<this.rows.length;s++){var a=this.rows[s];this.pairs.length=0;try{for(var l=(i=void 0,Gr(n)),u=l.next();!u.done;u=l.next()){var c=u.value;this.pairs.push(c.getPairs())}}catch(d){i={error:d}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var h=new Array(n);h.push(a);try{return this.checkRows(h,s+1)}catch(d){console.log(d)}}}throw new V},e.isValidSequence=function(n){var r,i;try{for(var o=Gr(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var a=s.value;if(!(n.length>a.length)){for(var l=!0,u=0;u<n.length;u++)if(n[u].getFinderPattern().getValue()!==a[u]){l=!1;break}if(l)return!0}}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(n,r){for(var i=0,o=!1,s=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>n){s=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new I4(this.pairs,n,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(n,r){var i,o,s,a,l,u;try{for(var c=Gr(r),h=c.next();!h.done;h=c.next()){var d=h.value;if(d.getPairs().length!==n.length){var p=!0;try{for(var m=(s=void 0,Gr(d.getPairs())),w=m.next();!w.done;w=m.next()){var I=w.value,y=!1;try{for(var v=(l=void 0,Gr(n)),x=v.next();!x.done;x=v.next()){var T=x.value;if(Av.equals(I,T)){y=!0;break}}}catch(P){l={error:P}}finally{try{x&&!x.done&&(u=v.return)&&u.call(v)}finally{if(l)throw l.error}}y||(p=!1)}}catch(P){s={error:P}}finally{try{w&&!w.done&&(a=m.return)&&a.call(m)}finally{if(s)throw s.error}}}}}catch(P){i={error:P}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}},e.isPartialRow=function(n,r){var i,o,s,a,l,u;try{for(var c=Gr(r),h=c.next();!h.done;h=c.next()){var d=h.value,p=!0;try{for(var m=(s=void 0,Gr(n)),w=m.next();!w.done;w=m.next()){var I=w.value,y=!1;try{for(var v=(l=void 0,Gr(d.getPairs())),x=v.next();!x.done;x=v.next()){var T=x.value;if(I.equals(T)){y=!0;break}}}catch(P){l={error:P}}finally{try{x&&!x.done&&(u=v.return)&&u.call(v)}finally{if(l)throw l.error}}if(!y){p=!1;break}}}catch(P){s={error:P}}finally{try{w&&!w.done&&(a=m.return)&&a.call(m)}finally{if(s)throw s.error}}if(p)return!0}}catch(P){i={error:P}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(n){var r=n4.buildBitArray(n),i=A4(r),o=i.parseInformation(),s=n[0].getFinderPattern().getResultPoints(),a=n[n.length-1].getFinderPattern().getResultPoints(),l=[s[0],s[1],a[0],a[1]];return new zt(o,null,null,l,ie.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var n=this.pairs.get(0),r=n.getLeftChar(),i=n.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,a=1;a<this.pairs.size();++a){var l=this.pairs.get(a);o+=l.getLeftChar().getChecksumPortion(),s++;var u=l.getRightChar();u!=null&&(o+=u.getChecksumPortion(),s++)}o%=211;var c=211*(s-4)+o;return c===r.getValue()},e.getNextSecondBar=function(n,r){var i;return n.get(r)?(i=n.getNextUnset(r),i=n.getNextSet(i)):(i=n.getNextSet(r),i=n.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(n,r,i){var o=r.length%2===0;this.startFromEven&&(o=!o);var s,a=!0,l=-1;do this.findNextPair(n,r,l),s=this.parseFoundFinderPattern(n,i,o),s===null?l=e.getNextSecondBar(n,this.startEnd[0]):a=!1;while(a);var u=this.decodeDataCharacter(n,s,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new V;var c;try{c=this.decodeDataCharacter(n,s,o,!1)}catch(h){c=null,console.log(h)}return new Av(u,c,s,!0)},e.prototype.isEmptyPair=function(n){return n.length===0},e.prototype.findNextPair=function(n,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=n.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(r))a=0;else{var l=r[r.length-1];a=l.getFinderPattern().getStartEnd()[1]}var u=r.length%2!==0;this.startFromEven&&(u=!u);for(var c=!1;a<s&&(c=!n.get(a),!!c);)a++;for(var h=0,d=a,p=a;p<s;p++)if(n.get(p)!==c)o[h]++;else{if(h===3){if(u&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=d,this.startEnd[1]=p;return}u&&e.reverseCounters(o),d+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,h--}else h++;o[h]=1,c=!c}throw new V},e.reverseCounters=function(n){for(var r=n.length,i=0;i<r/2;++i){var o=n[i];n[i]=n[r-i-1],n[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(n,r,i){var o,s,a;if(i){for(var l=this.startEnd[0]-1;l>=0&&!n.get(l);)l--;l++,o=this.startEnd[0]-l,s=l,a=this.startEnd[1]}else s=this.startEnd[0],a=n.getNextUnset(this.startEnd[1]+1),o=a-this.startEnd[1];var u=this.getDecodeFinderCounters();Le.arraycopy(u,0,u,1,u.length-1),u[0]=o;var c;try{c=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new fx(c,[s,a],s,a,r)},e.prototype.decodeDataCharacter=function(n,r,i,o){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(o)e.recordPatternInReverse(n,r.getStartEnd()[0],s);else{e.recordPattern(n,r.getStartEnd()[1],s);for(var l=0,u=s.length-1;l<u;l++,u--){var c=s[l];s[l]=s[u],s[u]=c}}var h=17,d=Ie.sum(new Int32Array(s))/h,p=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(d-p)/p>.3)throw new V;for(var m=this.getOddCounts(),w=this.getEvenCounts(),I=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var v=1*s[l]/d,x=v+.5;if(x<1){if(v<.3)throw new V;x=1}else if(x>8){if(v>8.7)throw new V;x=8}var T=l/2;l&1?(w[T]=x,y[T]=v-x):(m[T]=x,I[T]=v-x)}this.adjustOddEvenCounts(h);for(var P=4*r.getValue()+(i?0:2)+(o?0:1)-1,k=0,A=0,l=m.length-1;l>=0;l--){if(e.isNotA1left(r,i,o)){var E=e.WEIGHTS[P][2*l];A+=m[l]*E}k+=m[l]}for(var S=0,l=w.length-1;l>=0;l--)if(e.isNotA1left(r,i,o)){var E=e.WEIGHTS[P][2*l+1];S+=w[l]*E}var b=A+S;if(k&1||k>13||k<4)throw new V;var D=(13-k)/2,M=e.SYMBOL_WIDEST[D],O=9-M,he=Ho.getRSSvalue(m,M,!0),te=Ho.getRSSvalue(w,O,!1),Y=e.EVEN_TOTAL_SUBSET[D],X=e.GSUM[D],j=he*Y+te+X;return new pc(j,b)},e.isNotA1left=function(n,r,i){return!(n.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(n){var r=Ie.sum(new Int32Array(this.getOddCounts())),i=Ie.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var a=!1,l=!1;i>13?l=!0:i<4&&(a=!0);var u=r+i-n,c=(r&1)===1,h=(i&1)===0;if(u===1)if(c){if(h)throw new V;s=!0}else{if(!h)throw new V;l=!0}else if(u===-1)if(c){if(h)throw new V;o=!0}else{if(!h)throw new V;a=!0}else if(u===0){if(c){if(!h)throw new V;r<i?(o=!0,l=!0):(s=!0,a=!0)}else if(h)throw new V}else throw new V;if(o){if(s)throw new V;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(l)throw new V;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(ji),C4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),b4=function(t){C4(e,t);function e(n,r,i){var o=t.call(this,n,r)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(pc),R4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oh=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Iv=function(t){R4(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return e.prototype.decodeRow=function(n,r,i){var o,s,a,l,u=this.decodePair(r,!1,n,i);e.addOrTally(this.possibleLeftPairs,u),r.reverse();var c=this.decodePair(r,!0,n,i);e.addOrTally(this.possibleRightPairs,c),r.reverse();try{for(var h=Oh(this.possibleLeftPairs),d=h.next();!d.done;d=h.next()){var p=d.value;if(p.getCount()>1)try{for(var m=(a=void 0,Oh(this.possibleRightPairs)),w=m.next();!w.done;w=m.next()){var I=w.value;if(I.getCount()>1&&e.checkChecksum(p,I))return e.constructResult(p,I)}}catch(y){a={error:y}}finally{try{w&&!w.done&&(l=m.return)&&l.call(m)}finally{if(a)throw a.error}}}}catch(y){o={error:y}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}throw new V},e.addOrTally=function(n,r){var i,o;if(r!=null){var s=!1;try{for(var a=Oh(n),l=a.next();!l.done;l=a.next()){var u=l.value;if(u.getValue()===r.getValue()){u.incrementCount(),s=!0;break}}}catch(c){i={error:c}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}s||n.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(n,r){for(var i=4537077*n.getValue()+r.getValue(),o=new String(i).toString(),s=new de,a=13-o.length;a>0;a--)s.append("0");s.append(o);for(var l=0,a=0;a<13;a++){var u=s.charAt(a).charCodeAt(0)-"0".charCodeAt(0);l+=a&1?u:3*u}l=10-l%10,l===10&&(l=0),s.append(l.toString());var c=n.getFinderPattern().getResultPoints(),h=r.getFinderPattern().getResultPoints();return new zt(s.toString(),null,0,[c[0],c[1],h[0],h[1]],ie.RSS_14,new Date().getTime())},e.checkChecksum=function(n,r){var i=(n.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*n.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(n,r,i,o){try{var s=this.findFinderPattern(n,r),a=this.parseFoundFinderPattern(n,i,r,s),l=o==null?null:o.get(He.NEED_RESULT_POINT_CALLBACK);if(l!=null){var u=(s[0]+s[1])/2;r&&(u=n.getSize()-1-u),l.foundPossibleResultPoint(new ne(u,i))}var c=this.decodeDataCharacter(n,a,!0),h=this.decodeDataCharacter(n,a,!1);return new b4(1597*c.getValue()+h.getValue(),c.getChecksumPortion()+4*h.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(n,r,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)ut.recordPatternInReverse(n,r.getStartEnd()[0],o);else{ut.recordPattern(n,r.getStartEnd()[1]+1,o);for(var a=0,l=o.length-1;a<l;a++,l--){var u=o[a];o[a]=o[l],o[l]=u}}for(var c=i?16:15,h=Ie.sum(new Int32Array(o))/c,d=this.getOddCounts(),p=this.getEvenCounts(),m=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors(),a=0;a<o.length;a++){var I=o[a]/h,y=Math.floor(I+.5);y<1?y=1:y>8&&(y=8);var v=Math.floor(a/2);a&1?(p[v]=y,w[v]=I-y):(d[v]=y,m[v]=I-y)}this.adjustOddEvenCounts(i,c);for(var x=0,T=0,a=d.length-1;a>=0;a--)T*=9,T+=d[a],x+=d[a];for(var P=0,k=0,a=p.length-1;a>=0;a--)P*=9,P+=p[a],k+=p[a];var A=T+3*P;if(i){if(x&1||x>12||x<4)throw new V;var E=(12-x)/2,S=e.OUTSIDE_ODD_WIDEST[E],b=9-S,D=Ho.getRSSvalue(d,S,!1),M=Ho.getRSSvalue(p,b,!0),O=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],he=e.OUTSIDE_GSUM[E];return new pc(D*O+M+he,A)}else{if(k&1||k>10||k<4)throw new V;var E=(10-k)/2,S=e.INSIDE_ODD_WIDEST[E],b=9-S,D=Ho.getRSSvalue(d,S,!0),M=Ho.getRSSvalue(p,b,!1),te=e.INSIDE_ODD_TOTAL_SUBSET[E],he=e.INSIDE_GSUM[E];return new pc(M*te+D+he,A)}},e.prototype.findFinderPattern=function(n,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=n.getSize(),s=!1,a=0;a<o&&(s=!n.get(a),r!==s);)a++;for(var l=0,u=a,c=a;c<o;c++)if(n.get(c)!==s)i[l]++;else{if(l===3){if(ji.isFinderPattern(i))return[u,c];u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,s=!s}throw new V},e.prototype.parseFoundFinderPattern=function(n,r,i,o){for(var s=n.get(o[0]),a=o[0]-1;a>=0&&s!==n.get(a);)a--;a++;var l=o[0]-a,u=this.getDecodeFinderCounters(),c=new Int32Array(u.length);Le.arraycopy(u,0,c,1,u.length-1),c[0]=l;var h=this.parseFinderValue(c,e.FINDER_PATTERNS),d=a,p=o[1];return i&&(d=n.getSize()-1-d,p=n.getSize()-1-p),new fx(h,[a,o[1]],d,p,r)},e.prototype.adjustOddEvenCounts=function(n,r){var i=Ie.sum(new Int32Array(this.getOddCounts())),o=Ie.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1,l=!1,u=!1;n?(i>12?a=!0:i<4&&(s=!0),o>12?u=!0:o<4&&(l=!0)):(i>11?a=!0:i<5&&(s=!0),o>10?u=!0:o<4&&(l=!0));var c=i+o-r,h=(i&1)===(n?1:0),d=(o&1)===1;if(c===1)if(h){if(d)throw new V;a=!0}else{if(!d)throw new V;u=!0}else if(c===-1)if(h){if(d)throw new V;s=!0}else{if(!d)throw new V;l=!0}else if(c===0){if(h){if(!d)throw new V;i<o?(s=!0,u=!0):(a=!0,l=!0)}else if(d)throw new V}else throw new V;if(s){if(a)throw new V;ji.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&ji.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(u)throw new V;ji.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&ji.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(ji),N4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),la=function(t){N4(e,t);function e(n){var r=t.call(this)||this;r.readers=[];var i=n?n.get(He.POSSIBLE_FORMATS):null,o=n&&n.get(He.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=n&&n.get(He.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(ie.EAN_13)||i.includes(ie.UPC_A)||i.includes(ie.EAN_8)||i.includes(ie.UPC_E))&&r.readers.push(new Nh(n)),i.includes(ie.CODE_39)&&r.readers.push(new pv(o,s)),i.includes(ie.CODE_93)&&r.readers.push(new gv),i.includes(ie.CODE_128)&&r.readers.push(new dv),i.includes(ie.ITF)&&r.readers.push(new mv),i.includes(ie.CODABAR)&&r.readers.push(new Z3),i.includes(ie.RSS_14)&&r.readers.push(new Iv),i.includes(ie.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new S4))),r.readers.length===0&&(r.readers.push(new Nh(n)),r.readers.push(new pv),r.readers.push(new gv),r.readers.push(new Nh(n)),r.readers.push(new dv),r.readers.push(new mv),r.readers.push(new Iv)),r}return e.prototype.decodeRow=function(n,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(n,r,i)}catch{}throw new V},e.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},e}(ut),O4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){O4(e,t);function e(n,r){return n===void 0&&(n=500),t.call(this,new la(r),n,r)||this}return e})(xs);var Tv=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},be=function(){function t(e,n,r){this.ecCodewords=e,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Te=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),P4=function(){function t(e,n,r,i,o,s){var a,l;this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var u=0,c=s.getECCodewords(),h=s.getECBlocks();try{for(var d=Tv(h),p=d.next();!p.done;p=d.next()){var m=p.value;u+=m.getCount()*(m.getDataCodewords()+c)}}catch(w){a={error:w}}finally{try{p&&!p.done&&(l=d.return)&&l.call(d)}finally{if(a)throw a.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,n){var r,i;if(e&1||n&1)throw new G;try{for(var o=Tv(t.VERSIONS),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===n)return a}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new G},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new be(5,new Te(1,3))),new t(2,12,12,10,10,new be(7,new Te(1,5))),new t(3,14,14,12,12,new be(10,new Te(1,8))),new t(4,16,16,14,14,new be(12,new Te(1,12))),new t(5,18,18,16,16,new be(14,new Te(1,18))),new t(6,20,20,18,18,new be(18,new Te(1,22))),new t(7,22,22,20,20,new be(20,new Te(1,30))),new t(8,24,24,22,22,new be(24,new Te(1,36))),new t(9,26,26,24,24,new be(28,new Te(1,44))),new t(10,32,32,14,14,new be(36,new Te(1,62))),new t(11,36,36,16,16,new be(42,new Te(1,86))),new t(12,40,40,18,18,new be(48,new Te(1,114))),new t(13,44,44,20,20,new be(56,new Te(1,144))),new t(14,48,48,22,22,new be(68,new Te(1,174))),new t(15,52,52,24,24,new be(42,new Te(2,102))),new t(16,64,64,14,14,new be(56,new Te(2,140))),new t(17,72,72,16,16,new be(36,new Te(4,92))),new t(18,80,80,18,18,new be(48,new Te(4,114))),new t(19,88,88,20,20,new be(56,new Te(4,144))),new t(20,96,96,22,22,new be(68,new Te(4,174))),new t(21,104,104,24,24,new be(56,new Te(6,136))),new t(22,120,120,18,18,new be(68,new Te(6,175))),new t(23,132,132,20,20,new be(62,new Te(8,163))),new t(24,144,144,22,22,new be(62,new Te(8,156),new Te(2,155))),new t(25,8,18,6,16,new be(7,new Te(1,5))),new t(26,8,32,6,14,new be(11,new Te(1,10))),new t(27,12,26,10,24,new be(14,new Te(1,16))),new t(28,12,36,10,16,new be(18,new Te(1,22))),new t(29,16,36,14,16,new be(24,new Te(1,32))),new t(30,16,48,14,22,new be(28,new Te(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),D4=function(){function t(e){var n=e.getHeight();if(n<8||n>144||n&1)throw new G;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new fr(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var n=e.getHeight(),r=e.getWidth();return P4.getVersionForDimensions(n,r)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),n=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),a=!1,l=!1,u=!1,c=!1;do if(r===o&&i===0&&!a)e[n++]=this.readCorner1(o,s)&255,r-=2,i+=2,a=!0;else if(r===o-2&&i===0&&s&3&&!l)e[n++]=this.readCorner2(o,s)&255,r-=2,i+=2,l=!0;else if(r===o+4&&i===2&&!(s&7)&&!u)e[n++]=this.readCorner3(o,s)&255,r-=2,i+=2,u=!0;else if(r===o-2&&i===0&&(s&7)===4&&!c)e[n++]=this.readCorner4(o,s)&255,r-=2,i+=2,c=!0;else{do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,o,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,o,s)&255),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}while(r<o||i<s);if(n!==this.version.getTotalCodewords())throw new G;return e},t.prototype.readModule=function(e,n,r,i){return e<0&&(e+=r,n+=4-(r+4&7)),n<0&&(n+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)},t.prototype.readUtah=function(e,n,r,i){var o=0;return this.readModule(e-2,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n,r,i)&&(o|=1),o<<=1,this.readModule(e,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e,n,r,i)&&(o|=1),o},t.prototype.readCorner1=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,1,e,n)&&(r|=1),r<<=1,this.readModule(e-1,2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.readCorner2=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-4,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner3=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-3,e,n)&&(r|=1),r<<=1,this.readModule(1,n-2,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner4=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.extractDataRegion=function(e){var n=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new oe("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=n/i|0,a=r/o|0,l=s*i,u=a*o,c=new fr(u,l),h=0;h<s;++h)for(var d=h*i,p=0;p<a;++p)for(var m=p*o,w=0;w<i;++w)for(var I=h*(i+2)+1+w,y=d+w,v=0;v<o;++v){var x=p*(o+2)+1+v;if(e.get(x,I)){var T=m+v;c.set(T,y)}}return c},t}(),Sv=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k4=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n){var r,i,o,s,a=n.getECBlocks(),l=0,u=a.getECBlocks();try{for(var c=Sv(u),h=c.next();!h.done;h=c.next()){var d=h.value;l+=d.getCount()}}catch(he){r={error:he}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}var p=new Array(l),m=0;try{for(var w=Sv(u),I=w.next();!I.done;I=w.next())for(var d=I.value,y=0;y<d.getCount();y++){var v=d.getDataCodewords(),x=a.getECCodewords()+v;p[m++]=new t(v,new Uint8Array(x))}}catch(he){o={error:he}}finally{try{I&&!I.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}for(var T=p[0].codewords.length,P=T-a.getECCodewords(),k=P-1,A=0,y=0;y<k;y++)for(var E=0;E<m;E++)p[E].codewords[y]=e[A++];for(var S=n.getVersionNumber()===24,b=S?8:m,E=0;E<b;E++)p[E].codewords[P-1]=e[A++];for(var D=p[0].codewords.length,y=P;y<D;y++)for(var E=0;E<m;E++){var M=S?(E+8)%m:E,O=S&&M>7?y-1:y;p[M].codewords[O]=e[A++]}if(A!==e.length)throw new oe;return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),px=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new oe(""+e);var n=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var s=8-r,a=e<s?e:s,l=s-a,u=255>>8-a<<l;n=(o[i]&u)>>l,e-=a,r+=a,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)n=n<<8|o[i]&255,i++,e-=8;if(e>0){var l=8-e,u=255>>l<<l;n=n<<e|(o[i]&u)>>l,r+=e}}return this.bitOffset=r,this.byteOffset=i,n},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),nt;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(nt||(nt={}));var M4=function(){function t(){}return t.decode=function(e){var n=new px(e),r=new de,i=new de,o=new Array,s=nt.ASCII_ENCODE;do if(s===nt.ASCII_ENCODE)s=this.decodeAsciiSegment(n,r,i);else{switch(s){case nt.C40_ENCODE:this.decodeC40Segment(n,r);break;case nt.TEXT_ENCODE:this.decodeTextSegment(n,r);break;case nt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,r);break;case nt.EDIFACT_ENCODE:this.decodeEdifactSegment(n,r);break;case nt.BASE256_ENCODE:this.decodeBase256Segment(n,r,o);break;default:throw new G}s=nt.ASCII_ENCODE}while(s!==nt.PAD_ENCODE&&n.available()>0);return i.length()>0&&r.append(i.toString()),new nf(e,r.toString(),o.length===0?null:o,null)},t.decodeAsciiSegment=function(e,n,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new G;if(o<=128)return i&&(o+=128),n.append(String.fromCharCode(o-1)),nt.ASCII_ENCODE;if(o===129)return nt.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&n.append("0"),n.append(""+s)}else switch(o){case 230:return nt.C40_ENCODE;case 231:return nt.BASE256_ENCODE;case 232:n.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:i=!0;break;case 236:n.append("[)>05"),r.insert(0,"");break;case 237:n.append("[)>06"),r.insert(0,"");break;case 238:return nt.ANSIX12_ENCODE;case 239:return nt.TEXT_ENCODE;case 240:return nt.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new G;break}}while(e.available()>0);return nt.ASCII_ENCODE},t.decodeC40Segment=function(e,n){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var l=i[a];switch(o){case 0:if(l<3)o=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u)}else throw new G;break;case 1:r?(n.append(String.fromCharCode(l+128)),r=!1):n.append(String.fromCharCode(l)),o=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u)}else switch(l){case 27:n.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new G}o=0;break;case 3:r?(n.append(String.fromCharCode(l+224)),r=!1):n.append(String.fromCharCode(l+96)),o=0;break;default:throw new G}}}while(e.available()>0)},t.decodeTextSegment=function(e,n){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var l=i[a];switch(o){case 0:if(l<3)o=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u)}else throw new G;break;case 1:r?(n.append(String.fromCharCode(l+128)),r=!1):n.append(String.fromCharCode(l)),o=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u)}else switch(l){case 27:n.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new G}o=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u),o=0}else throw new G;break;default:throw new G}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,n){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(s){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(s<14)n.append(String.fromCharCode(s+44));else if(s<40)n.append(String.fromCharCode(s+51));else throw new G;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,n,r){var i=(e<<8)+n-1,o=Math.floor(i/1600);r[0]=o,i-=o*1600,o=Math.floor(i/40),r[1]=o,r[2]=i-o*40},t.decodeEdifactSegment=function(e,n){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}i&32||(i|=64),n.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,n,r){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new G;for(var a=new Uint8Array(s),l=0;l<s;l++){if(e.available()<8)throw new G;a[l]=this.unrandomize255State(e.readBits(8),i++)}r.push(a);try{n.append(Nn.decode(a,we.ISO88591))}catch(u){throw new hl("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,n){var r=149*n%255+1,i=e-r;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],t}(),L4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F4=function(){function t(){this.rsDecoder=new rf(sn.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var n,r,i=new D4(e),o=i.getVersion(),s=i.readCodewords(),a=k4.getDataBlocks(s,o),l=0;try{for(var u=L4(a),c=u.next();!c.done;c=u.next()){var h=c.value;l+=h.getNumDataCodewords()}}catch(x){n={error:x}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}for(var d=new Uint8Array(l),p=a.length,m=0;m<p;m++){var w=a[m],I=w.getCodewords(),y=w.getNumDataCodewords();this.correctErrors(I,y);for(var v=0;v<y;v++)d[v*p+m]=I[v]}return M4.decode(d)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new mt}for(var i=0;i<n;i++)e[i]=r[i]},t}(),B4=function(){function t(e){this.image=e,this.rectangleDetector=new t0(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new V;n=this.shiftToModuleCenter(n);var r=n[0],i=n[1],o=n[2],s=n[3],a=this.transitionsBetween(r,s)+1,l=this.transitionsBetween(o,s)+1;(a&1)===1&&(a+=1),(l&1)===1&&(l+=1),4*a<7*l&&4*l<7*a&&(a=l=Math.max(a,l));var u=t.sampleGrid(this.image,r,i,o,s,a,l);return new V1(u,[r,i,o,s])},t.shiftPoint=function(e,n,r){var i=(n.getX()-e.getX())/(r+1),o=(n.getY()-e.getY())/(r+1);return new ne(e.getX()+i,e.getY()+o)},t.moveAway=function(e,n,r){var i=e.getX(),o=e.getY();return i<n?i-=1:i+=1,o<r?o-=1:o+=1,new ne(i,o)},t.prototype.detectSolid1=function(e){var n=e[0],r=e[1],i=e[3],o=e[2],s=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),l=this.transitionsBetween(i,o),u=this.transitionsBetween(o,n),c=s,h=[o,n,r,i];return c>a&&(c=a,h[0]=n,h[1]=r,h[2]=i,h[3]=o),c>l&&(c=l,h[0]=r,h[1]=i,h[2]=o,h[3]=n),c>u&&(h[0]=i,h[1]=o,h[2]=n,h[3]=r),h},t.prototype.detectSolid2=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o),a=t.shiftPoint(r,i,(s+1)*4),l=t.shiftPoint(i,r,(s+1)*4),u=this.transitionsBetween(a,n),c=this.transitionsBetween(l,o);return u<c?(e[0]=n,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=n),e},t.prototype.correctTopRight=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o),a=this.transitionsBetween(r,o),l=t.shiftPoint(n,r,(a+1)*4),u=t.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(l,o),a=this.transitionsBetween(u,o);var c=new ne(o.getX()+(i.getX()-r.getX())/(s+1),o.getY()+(i.getY()-r.getY())/(s+1)),h=new ne(o.getX()+(n.getX()-r.getX())/(a+1),o.getY()+(n.getY()-r.getY())/(a+1));if(!this.isValid(c))return this.isValid(h)?h:null;if(!this.isValid(h))return c;var d=this.transitionsBetween(l,c)+this.transitionsBetween(u,c),p=this.transitionsBetween(l,h)+this.transitionsBetween(u,h);return d>p?c:h},t.prototype.shiftToModuleCenter=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o)+1,a=this.transitionsBetween(i,o)+1,l=t.shiftPoint(n,r,a*4),u=t.shiftPoint(i,r,s*4);s=this.transitionsBetween(l,o)+1,a=this.transitionsBetween(u,o)+1,(s&1)===1&&(s+=1),(a&1)===1&&(a+=1);var c=(n.getX()+r.getX()+i.getX()+o.getX())/4,h=(n.getY()+r.getY()+i.getY()+o.getY())/4;n=t.moveAway(n,c,h),r=t.moveAway(r,c,h),i=t.moveAway(i,c,h),o=t.moveAway(o,c,h);var d,p;return l=t.shiftPoint(n,r,a*4),l=t.shiftPoint(l,o,s*4),d=t.shiftPoint(r,n,a*4),d=t.shiftPoint(d,i,s*4),u=t.shiftPoint(i,o,a*4),u=t.shiftPoint(u,r,s*4),p=t.shiftPoint(o,i,a*4),p=t.shiftPoint(p,n,s*4),[l,d,u,p]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,n,r,i,o,s,a){var l=U1.getInstance();return l.sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,n.getX(),n.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},t.prototype.transitionsBetween=function(e,n){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(n.getX()),s=Math.trunc(n.getY()),a=Math.abs(s-i)>Math.abs(o-r);if(a){var l=r;r=i,i=l,l=o,o=s,s=l}for(var u=Math.abs(o-r),c=Math.abs(s-i),h=-u/2,d=i<s?1:-1,p=r<o?1:-1,m=0,w=this.image.get(a?i:r,a?r:i),I=r,y=i;I!==o;I+=p){var v=this.image.get(a?y:I,a?I:y);if(v!==w&&(m++,w=v),h+=c,h>0){if(y===s)break;y+=d,h-=u}}return m},t}(),i0=function(){function t(){this.decoder=new F4}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r,i;if(n!=null&&n.has(He.PURE_BARCODE)){var o=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=t.NO_POINTS}else{var s=new B4(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var a=r.getRawBytes(),l=new zt(r.getText(),a,8*a.length,i,ie.DATA_MATRIX,Le.currentTimeMillis()),u=r.getByteSegments();u!=null&&l.putMetadata(Ct.BYTE_SEGMENTS,u);var c=r.getECLevel();return c!=null&&l.putMetadata(Ct.ERROR_CORRECTION_LEVEL,c),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n==null||r==null)throw new V;var i=this.moduleSize(n,e),o=n[1],s=r[1],a=n[0],l=r[0],u=(l-a+1)/i,c=(s-o+1)/i;if(u<=0||c<=0)throw new V;var h=i/2;o+=h,a+=h;for(var d=new fr(u,c),p=0;p<c;p++)for(var m=o+p*i,w=0;w<u;w++)e.get(a+w*i,m)&&d.set(w,p);return d},t.moduleSize=function(e,n){for(var r=n.getWidth(),i=e[0],o=e[1];i<r&&n.get(i,o);)i++;if(i===r)throw new V;var s=i-e[0];if(s===0)throw new V;return s},t.NO_POINTS=[],t}(),V4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){V4(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new i0,n)||this}return e})(xs);var Wo;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Wo||(Wo={}));var U4=function(){function t(e,n,r){this.value=e,this.stringValue=n,this.bits=r,t.FOR_BITS.set(r,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Bn(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new oe;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Wo.L,"L",1),t.M=new t(Wo.M,"M",0),t.Q=new t(Wo.Q,"Q",3),t.H=new t(Wo.H,"H",2),t}(),j4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gx=function(){function t(e){this.errorCorrectionLevel=U4.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,n){return ge.bitCount(e^n)},t.decodeFormatInformation=function(e,n){var r=t.doDecodeFormatInformation(e,n);return r!==null?r:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,n^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,n){var r,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var a=j4(t.FORMAT_INFO_DECODE_LOOKUP),l=a.next();!l.done;l=a.next()){var u=l.value,c=u[0];if(c===e||c===n)return new t(u[1]);var h=t.numBitsDiffering(e,c);h<o&&(s=u[1],o=h),e!==n&&(h=t.numBitsDiffering(n,c),h<o&&(s=u[1],o=h))}}catch(d){r={error:d}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o<=3?new t(s):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),$4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F=function(){function t(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=n}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,n,r=0,i=this.ecBlocks;try{for(var o=$4(i),s=o.next();!s.done;s=o.next()){var a=s.value;r+=a.getCount()}}catch(l){e={error:l}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),R=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),z4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zi=function(){function t(e,n){for(var r,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=o;var a=0,l=o[0].getECCodewordsPerBlock(),u=o[0].getECBlocks();try{for(var c=z4(u),h=c.next();!h.done;h=c.next()){var d=h.value;a+=d.getCount()*(d.getDataCodewords()+l)}}catch(p){r={error:p}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}this.totalCodewords=a}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new G;try{return this.getVersionForNumber((e-17)/4)}catch{throw new G}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new oe;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var n=Number.MAX_SAFE_INTEGER,r=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var o=t.VERSION_DECODE_INFO[i];if(o===e)return t.getVersionForNumber(i+7);var s=gx.numBitsDiffering(e,o);s<n&&(r=i+7,n=s)}return n<=3?t.getVersionForNumber(r):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),n=new fr(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||n.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new F(7,new R(1,19)),new F(10,new R(1,16)),new F(13,new R(1,13)),new F(17,new R(1,9))),new t(2,Int32Array.from([6,18]),new F(10,new R(1,34)),new F(16,new R(1,28)),new F(22,new R(1,22)),new F(28,new R(1,16))),new t(3,Int32Array.from([6,22]),new F(15,new R(1,55)),new F(26,new R(1,44)),new F(18,new R(2,17)),new F(22,new R(2,13))),new t(4,Int32Array.from([6,26]),new F(20,new R(1,80)),new F(18,new R(2,32)),new F(26,new R(2,24)),new F(16,new R(4,9))),new t(5,Int32Array.from([6,30]),new F(26,new R(1,108)),new F(24,new R(2,43)),new F(18,new R(2,15),new R(2,16)),new F(22,new R(2,11),new R(2,12))),new t(6,Int32Array.from([6,34]),new F(18,new R(2,68)),new F(16,new R(4,27)),new F(24,new R(4,19)),new F(28,new R(4,15))),new t(7,Int32Array.from([6,22,38]),new F(20,new R(2,78)),new F(18,new R(4,31)),new F(18,new R(2,14),new R(4,15)),new F(26,new R(4,13),new R(1,14))),new t(8,Int32Array.from([6,24,42]),new F(24,new R(2,97)),new F(22,new R(2,38),new R(2,39)),new F(22,new R(4,18),new R(2,19)),new F(26,new R(4,14),new R(2,15))),new t(9,Int32Array.from([6,26,46]),new F(30,new R(2,116)),new F(22,new R(3,36),new R(2,37)),new F(20,new R(4,16),new R(4,17)),new F(24,new R(4,12),new R(4,13))),new t(10,Int32Array.from([6,28,50]),new F(18,new R(2,68),new R(2,69)),new F(26,new R(4,43),new R(1,44)),new F(24,new R(6,19),new R(2,20)),new F(28,new R(6,15),new R(2,16))),new t(11,Int32Array.from([6,30,54]),new F(20,new R(4,81)),new F(30,new R(1,50),new R(4,51)),new F(28,new R(4,22),new R(4,23)),new F(24,new R(3,12),new R(8,13))),new t(12,Int32Array.from([6,32,58]),new F(24,new R(2,92),new R(2,93)),new F(22,new R(6,36),new R(2,37)),new F(26,new R(4,20),new R(6,21)),new F(28,new R(7,14),new R(4,15))),new t(13,Int32Array.from([6,34,62]),new F(26,new R(4,107)),new F(22,new R(8,37),new R(1,38)),new F(24,new R(8,20),new R(4,21)),new F(22,new R(12,11),new R(4,12))),new t(14,Int32Array.from([6,26,46,66]),new F(30,new R(3,115),new R(1,116)),new F(24,new R(4,40),new R(5,41)),new F(20,new R(11,16),new R(5,17)),new F(24,new R(11,12),new R(5,13))),new t(15,Int32Array.from([6,26,48,70]),new F(22,new R(5,87),new R(1,88)),new F(24,new R(5,41),new R(5,42)),new F(30,new R(5,24),new R(7,25)),new F(24,new R(11,12),new R(7,13))),new t(16,Int32Array.from([6,26,50,74]),new F(24,new R(5,98),new R(1,99)),new F(28,new R(7,45),new R(3,46)),new F(24,new R(15,19),new R(2,20)),new F(30,new R(3,15),new R(13,16))),new t(17,Int32Array.from([6,30,54,78]),new F(28,new R(1,107),new R(5,108)),new F(28,new R(10,46),new R(1,47)),new F(28,new R(1,22),new R(15,23)),new F(28,new R(2,14),new R(17,15))),new t(18,Int32Array.from([6,30,56,82]),new F(30,new R(5,120),new R(1,121)),new F(26,new R(9,43),new R(4,44)),new F(28,new R(17,22),new R(1,23)),new F(28,new R(2,14),new R(19,15))),new t(19,Int32Array.from([6,30,58,86]),new F(28,new R(3,113),new R(4,114)),new F(26,new R(3,44),new R(11,45)),new F(26,new R(17,21),new R(4,22)),new F(26,new R(9,13),new R(16,14))),new t(20,Int32Array.from([6,34,62,90]),new F(28,new R(3,107),new R(5,108)),new F(26,new R(3,41),new R(13,42)),new F(30,new R(15,24),new R(5,25)),new F(28,new R(15,15),new R(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new F(28,new R(4,116),new R(4,117)),new F(26,new R(17,42)),new F(28,new R(17,22),new R(6,23)),new F(30,new R(19,16),new R(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new F(28,new R(2,111),new R(7,112)),new F(28,new R(17,46)),new F(30,new R(7,24),new R(16,25)),new F(24,new R(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new F(30,new R(4,121),new R(5,122)),new F(28,new R(4,47),new R(14,48)),new F(30,new R(11,24),new R(14,25)),new F(30,new R(16,15),new R(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new F(30,new R(6,117),new R(4,118)),new F(28,new R(6,45),new R(14,46)),new F(30,new R(11,24),new R(16,25)),new F(30,new R(30,16),new R(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new F(26,new R(8,106),new R(4,107)),new F(28,new R(8,47),new R(13,48)),new F(30,new R(7,24),new R(22,25)),new F(30,new R(22,15),new R(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new F(28,new R(10,114),new R(2,115)),new F(28,new R(19,46),new R(4,47)),new F(28,new R(28,22),new R(6,23)),new F(30,new R(33,16),new R(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new F(30,new R(8,122),new R(4,123)),new F(28,new R(22,45),new R(3,46)),new F(30,new R(8,23),new R(26,24)),new F(30,new R(12,15),new R(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new R(3,117),new R(10,118)),new F(28,new R(3,45),new R(23,46)),new F(30,new R(4,24),new R(31,25)),new F(30,new R(11,15),new R(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new R(7,116),new R(7,117)),new F(28,new R(21,45),new R(7,46)),new F(30,new R(1,23),new R(37,24)),new F(30,new R(19,15),new R(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new R(5,115),new R(10,116)),new F(28,new R(19,47),new R(10,48)),new F(30,new R(15,24),new R(25,25)),new F(30,new R(23,15),new R(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new R(13,115),new R(3,116)),new F(28,new R(2,46),new R(29,47)),new F(30,new R(42,24),new R(1,25)),new F(30,new R(23,15),new R(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new R(17,115)),new F(28,new R(10,46),new R(23,47)),new F(30,new R(10,24),new R(35,25)),new F(30,new R(19,15),new R(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new R(17,115),new R(1,116)),new F(28,new R(14,46),new R(21,47)),new F(30,new R(29,24),new R(19,25)),new F(30,new R(11,15),new R(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new R(13,115),new R(6,116)),new F(28,new R(14,46),new R(23,47)),new F(30,new R(44,24),new R(7,25)),new F(30,new R(59,16),new R(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new R(12,121),new R(7,122)),new F(28,new R(12,47),new R(26,48)),new F(30,new R(39,24),new R(14,25)),new F(30,new R(22,15),new R(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new R(6,121),new R(14,122)),new F(28,new R(6,47),new R(34,48)),new F(30,new R(46,24),new R(10,25)),new F(30,new R(2,15),new R(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new R(17,122),new R(4,123)),new F(28,new R(29,46),new R(14,47)),new F(30,new R(49,24),new R(10,25)),new F(30,new R(24,15),new R(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new R(4,122),new R(18,123)),new F(28,new R(13,46),new R(32,47)),new F(30,new R(48,24),new R(14,25)),new F(30,new R(42,15),new R(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new R(20,117),new R(4,118)),new F(28,new R(40,47),new R(7,48)),new F(30,new R(43,24),new R(22,25)),new F(30,new R(10,15),new R(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new R(19,118),new R(6,119)),new F(28,new R(18,47),new R(31,48)),new F(30,new R(34,24),new R(34,25)),new F(30,new R(20,15),new R(61,16)))],t}(),ht;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(ht||(ht={}));var Cv=function(){function t(e,n){this.value=e,this.isMasked=n}return t.prototype.unmaskBitMatrix=function(e,n){for(var r=0;r<n;r++)for(var i=0;i<n;i++)this.isMasked(r,i)&&e.flip(i,r)},t.values=new Map([[ht.DATA_MASK_000,new t(ht.DATA_MASK_000,function(e,n){return(e+n&1)===0})],[ht.DATA_MASK_001,new t(ht.DATA_MASK_001,function(e,n){return(e&1)===0})],[ht.DATA_MASK_010,new t(ht.DATA_MASK_010,function(e,n){return n%3===0})],[ht.DATA_MASK_011,new t(ht.DATA_MASK_011,function(e,n){return(e+n)%3===0})],[ht.DATA_MASK_100,new t(ht.DATA_MASK_100,function(e,n){return(Math.floor(e/2)+Math.floor(n/3)&1)===0})],[ht.DATA_MASK_101,new t(ht.DATA_MASK_101,function(e,n){return e*n%6===0})],[ht.DATA_MASK_110,new t(ht.DATA_MASK_110,function(e,n){return e*n%6<3})],[ht.DATA_MASK_111,new t(ht.DATA_MASK_111,function(e,n){return(e+n+e*n%3&1)===0})]]),t}(),H4=function(){function t(e){var n=e.getHeight();if(n<21||(n&3)!==1)throw new G;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,n=0;n<6;n++)e=this.copyBit(n,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,r=i-1;r>=s;r--)o=this.copyBit(8,r,o);for(var n=i-8;n<i;n++)o=this.copyBit(n,8,o);if(this.parsedFormatInfo=gx.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new G},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Zi.getVersionForNumber(n);for(var r=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,o,r);var a=Zi.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(s,o,r);if(a=Zi.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new G},t.prototype.copyBit=function(e,n,r){var i=this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n);return i?r<<1|1:r<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),n=this.readVersion(),r=Cv.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=n.buildFunctionPattern(),s=!0,a=new Uint8Array(n.getTotalCodewords()),l=0,u=0,c=0,h=i-1;h>0;h-=2){h===6&&h--;for(var d=0;d<i;d++)for(var p=s?i-1-d:d,m=0;m<2;m++)o.get(h-m,p)||(c++,u<<=1,this.bitMatrix.get(h-m,p)&&(u|=1),c===8&&(a[l++]=u,c=0,u=0));s=!s}if(l!==n.getTotalCodewords())throw new G;return a},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Cv.values.get(this.parsedFormatInfo.getDataMask()),n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,n=0,r=e.getWidth();n<r;n++)for(var i=n+1,o=e.getHeight();i<o;i++)e.get(n,i)!==e.get(i,n)&&(e.flip(i,n),e.flip(n,i))},t}(),bv=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W4=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n,r){var i,o,s,a;if(e.length!==n.getTotalCodewords())throw new oe;var l=n.getECBlocksForLevel(r),u=0,c=l.getECBlocks();try{for(var h=bv(c),d=h.next();!d.done;d=h.next()){var p=d.value;u+=p.getCount()}}catch(O){i={error:O}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}var m=new Array(u),w=0;try{for(var I=bv(c),y=I.next();!y.done;y=I.next())for(var p=y.value,v=0;v<p.getCount();v++){var x=p.getDataCodewords(),T=l.getECCodewordsPerBlock()+x;m[w++]=new t(x,new Uint8Array(T))}}catch(O){s={error:O}}finally{try{y&&!y.done&&(a=I.return)&&a.call(I)}finally{if(s)throw s.error}}for(var P=m[0].codewords.length,k=m.length-1;k>=0;){var A=m[k].codewords.length;if(A===P)break;k--}k++;for(var E=P-l.getECCodewordsPerBlock(),S=0,v=0;v<E;v++)for(var b=0;b<w;b++)m[b].codewords[v]=e[S++];for(var b=k;b<w;b++)m[b].codewords[E]=e[S++];for(var D=m[0].codewords.length,v=E;v<D;v++)for(var b=0;b<w;b++){var M=b<k?v:v+1;m[b].codewords[M]=e[S++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),An;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(An||(An={}));var Ue=function(){function t(e,n,r,i){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var n=t.FOR_BITS.get(e);if(n===void 0)throw new oe;return n},t.prototype.getCharacterCountBits=function(e){var n=e.getVersionNumber(),r;return n<=9?r=0:n<=26?r=1:r=2,this.characterCountBitsForVersions[r]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(An.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(An.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(An.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(An.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(An.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(An.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(An.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(An.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(An.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(An.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),G4=function(){function t(){}return t.decode=function(e,n,r,i){var o=new px(e),s=new de,a=new Array,l=-1,u=-1;try{var c=null,h=!1,d=void 0;do{if(o.available()<4)d=Ue.TERMINATOR;else{var p=o.readBits(4);d=Ue.forBits(p)}switch(d){case Ue.TERMINATOR:break;case Ue.FNC1_FIRST_POSITION:case Ue.FNC1_SECOND_POSITION:h=!0;break;case Ue.STRUCTURED_APPEND:if(o.available()<16)throw new G;l=o.readBits(8),u=o.readBits(8);break;case Ue.ECI:var m=t.parseECIValue(o);if(c=st.getCharacterSetECIByValue(m),c===null)throw new G;break;case Ue.HANZI:var w=o.readBits(4),I=o.readBits(d.getCharacterCountBits(n));w===t.GB2312_SUBSET&&t.decodeHanziSegment(o,s,I);break;default:var y=o.readBits(d.getCharacterCountBits(n));switch(d){case Ue.NUMERIC:t.decodeNumericSegment(o,s,y);break;case Ue.ALPHANUMERIC:t.decodeAlphanumericSegment(o,s,y,h);break;case Ue.BYTE:t.decodeByteSegment(o,s,y,c,a,i);break;case Ue.KANJI:t.decodeKanjiSegment(o,s,y);break;default:throw new G}break}}while(d!==Ue.TERMINATOR)}catch{throw new G}return new nf(e,s.toString(),a.length===0?null:a,r===null?null:r.toString(),l,u)},t.decodeHanziSegment=function(e,n,r){if(r*13>e.available())throw new G;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,i[o]=a>>8&255,i[o+1]=a&255,o+=2,r--}try{n.append(Nn.decode(i,we.GB2312))}catch(l){throw new G(l)}},t.decodeKanjiSegment=function(e,n,r){if(r*13>e.available())throw new G;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,i[o]=a>>8,i[o+1]=a,o+=2,r--}try{n.append(Nn.decode(i,we.SHIFT_JIS))}catch(l){throw new G(l)}},t.decodeByteSegment=function(e,n,r,i,o,s){if(8*r>e.available())throw new G;for(var a=new Uint8Array(r),l=0;l<r;l++)a[l]=e.readBits(8);var u;i===null?u=we.guessEncoding(a,s):u=i.getName();try{n.append(Nn.decode(a,u))}catch(c){throw new G(c)}o.push(a)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new G;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,n,r,i){for(var o=n.length();r>1;){if(e.available()<11)throw new G;var s=e.readBits(11);n.append(t.toAlphaNumericChar(Math.floor(s/45))),n.append(t.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new G;n.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=o;a<n.length();a++)n.charAt(a)==="%"&&(a<n.length()-1&&n.charAt(a+1)==="%"?n.deleteCharAt(a+1):n.setCharAt(a,String.fromCharCode(29)))},t.decodeNumericSegment=function(e,n,r){for(;r>=3;){if(e.available()<10)throw new G;var i=e.readBits(10);if(i>=1e3)throw new G;n.append(t.toAlphaNumericChar(Math.floor(i/100))),n.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(t.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new G;var o=e.readBits(7);if(o>=100)throw new G;n.append(t.toAlphaNumericChar(Math.floor(o/10))),n.append(t.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new G;var s=e.readBits(4);if(s>=10)throw new G;n.append(t.toAlphaNumericChar(s))}},t.parseECIValue=function(e){var n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){var r=e.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){var i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new G},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),mx=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var n=e[0];e[0]=e[2],e[2]=n}},t}(),Rv=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K4=function(){function t(){this.rsDecoder=new rf(sn.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,n){return this.decodeBitMatrix(fr.parseFromBooleanArray(e),n)},t.prototype.decodeBitMatrix=function(e,n){var r=new H4(e),i=null;try{return this.decodeBitMatrixParser(r,n)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,n);return o.setOther(new mx(!0)),o}catch(s){throw i!==null?i:s}},t.prototype.decodeBitMatrixParser=function(e,n){var r,i,o,s,a=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),c=W4.getDataBlocks(u,a,l),h=0;try{for(var d=Rv(c),p=d.next();!p.done;p=d.next()){var m=p.value;h+=m.getNumDataCodewords()}}catch(k){r={error:k}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var w=new Uint8Array(h),I=0;try{for(var y=Rv(c),v=y.next();!v.done;v=y.next()){var m=v.value,x=m.getCodewords(),T=m.getNumDataCodewords();this.correctErrors(x,T);for(var P=0;P<T;P++)w[I++]=x[P]}}catch(k){o={error:k}}finally{try{v&&!v.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}return G4.decode(w,a,l,n)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new mt}for(var i=0;i<n;i++)e[i]=r[i]},t}(),X4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),q4=function(t){X4(e,t);function e(n,r,i){var o=t.call(this,n,r)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var o=Math.abs(n-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var o=(this.getX()+r)/2,s=(this.getY()+n)/2,a=(this.estimatedModuleSize+i)/2;return new e(o,s,a)},e}(ne),Y4=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q4=function(){function t(e,n,r,i,o,s,a){this.image=e,this.startX=n,this.startY=r,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,n=this.height,r=this.width,i=e+r,o=this.startY+n/2,s=new Int32Array(3),a=this.image,l=0;l<n;l++){var u=o+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var c=e;c<i&&!a.get(c,u);)c++;for(var h=0;c<i;){if(a.get(c,u))if(h===1)s[1]++;else if(h===2){if(this.foundPatternCross(s)){var d=this.handlePossibleCenter(s,u,c);if(d!==null)return d}s[0]=s[2],s[1]=1,s[2]=0,h=1}else s[++h]++;else h===1&&h++,s[h]++;c++}if(this.foundPatternCross(s)){var d=this.handlePossibleCenter(s,u,i);if(d!==null)return d}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V},t.centerFromEnd=function(e,n){return n-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var n=this.moduleSize,r=n/2,i=0;i<3;i++)if(Math.abs(n-e[i])>=r)return!1;return!0},t.prototype.crossCheckVertical=function(e,n,r,i){var o=this.image,s=o.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var l=e;l>=0&&o.get(n,l)&&a[1]<=r;)a[1]++,l--;if(l<0||a[1]>r)return NaN;for(;l>=0&&!o.get(n,l)&&a[0]<=r;)a[0]++,l--;if(a[0]>r)return NaN;for(l=e+1;l<s&&o.get(n,l)&&a[1]<=r;)a[1]++,l++;if(l===s||a[1]>r)return NaN;for(;l<s&&!o.get(n,l)&&a[2]<=r;)a[2]++,l++;if(a[2]>r)return NaN;var u=a[0]+a[1]+a[2];return 5*Math.abs(u-i)>=2*i?NaN:this.foundPatternCross(a)?t.centerFromEnd(a,l):NaN},t.prototype.handlePossibleCenter=function(e,n,r){var i,o,s=e[0]+e[1]+e[2],a=t.centerFromEnd(e,r),l=this.crossCheckVertical(n,a,2*e[1],s);if(!isNaN(l)){var u=(e[0]+e[1]+e[2])/3;try{for(var c=Y4(this.possibleCenters),h=c.next();!h.done;h=c.next()){var d=h.value;if(d.aboutEquals(u,l,a))return d.combineEstimate(l,a,u)}}catch(m){i={error:m}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}var p=new q4(a,l,u);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},t}(),Z4=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),J4=function(t){Z4(e,t);function e(n,r,i,o){var s=t.call(this,n,r)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var o=Math.abs(n-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var o=this.count+1,s=(this.count*this.getX()+r)/o,a=(this.count*this.getY()+n)/o,l=(this.count*this.estimatedModuleSize+i)/o;return new e(s,a,l,o)},e}(ne),e8=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),Js=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t8=function(){function t(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var n=e!=null&&e.get(He.TRY_HARDER)!==void 0,r=e!=null&&e.get(He.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),a=Math.floor(3*o/(4*t.MAX_MODULES));(a<t.MIN_SKIP||n)&&(a=t.MIN_SKIP);for(var l=!1,u=new Int32Array(5),c=a-1;c<o&&!l;c+=a){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var h=0,d=0;d<s;d++)if(i.get(d,c))(h&1)===1&&h++,u[h]++;else if(h&1)u[h]++;else if(h===4)if(t.foundPatternCross(u)){var p=this.handlePossibleCenter(u,c,d,r);if(p===!0)if(a=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(c+=m-u[2]-a,d=s-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,h=3;continue}h=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,h=3;else u[++h]++;if(t.foundPatternCross(u)){var p=this.handlePossibleCenter(u,c,s,r);p===!0&&(a=u[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var w=this.selectBestPatterns();return ne.orderBestPatterns(w),new e8(w)},t.centerFromEnd=function(e,n){return n-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var n=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;n+=i}if(n<7)return!1;var o=n/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,n,r,i){for(var o=this.getCrossCheckStateCount(),s=0,a=this.image;e>=s&&n>=s&&a.get(n-s,e-s);)o[2]++,s++;if(e<s||n<s)return!1;for(;e>=s&&n>=s&&!a.get(n-s,e-s)&&o[1]<=r;)o[1]++,s++;if(e<s||n<s||o[1]>r)return!1;for(;e>=s&&n>=s&&a.get(n-s,e-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;var l=a.getHeight(),u=a.getWidth();for(s=1;e+s<l&&n+s<u&&a.get(n+s,e+s);)o[2]++,s++;if(e+s>=l||n+s>=u)return!1;for(;e+s<l&&n+s<u&&!a.get(n+s,e+s)&&o[3]<r;)o[3]++,s++;if(e+s>=l||n+s>=u||o[3]>=r)return!1;for(;e+s<l&&n+s<u&&a.get(n+s,e+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;var c=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(c-i)<2*i&&t.foundPatternCross(o)},t.prototype.crossCheckVertical=function(e,n,r,i){for(var o=this.image,s=o.getHeight(),a=this.getCrossCheckStateCount(),l=e;l>=0&&o.get(n,l);)a[2]++,l--;if(l<0)return NaN;for(;l>=0&&!o.get(n,l)&&a[1]<=r;)a[1]++,l--;if(l<0||a[1]>r)return NaN;for(;l>=0&&o.get(n,l)&&a[0]<=r;)a[0]++,l--;if(a[0]>r)return NaN;for(l=e+1;l<s&&o.get(n,l);)a[2]++,l++;if(l===s)return NaN;for(;l<s&&!o.get(n,l)&&a[3]<r;)a[3]++,l++;if(l===s||a[3]>=r)return NaN;for(;l<s&&o.get(n,l)&&a[4]<r;)a[4]++,l++;if(a[4]>=r)return NaN;var u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-i)>=2*i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,l):NaN},t.prototype.crossCheckHorizontal=function(e,n,r,i){for(var o=this.image,s=o.getWidth(),a=this.getCrossCheckStateCount(),l=e;l>=0&&o.get(l,n);)a[2]++,l--;if(l<0)return NaN;for(;l>=0&&!o.get(l,n)&&a[1]<=r;)a[1]++,l--;if(l<0||a[1]>r)return NaN;for(;l>=0&&o.get(l,n)&&a[0]<=r;)a[0]++,l--;if(a[0]>r)return NaN;for(l=e+1;l<s&&o.get(l,n);)a[2]++,l++;if(l===s)return NaN;for(;l<s&&!o.get(l,n)&&a[3]<r;)a[3]++,l++;if(l===s||a[3]>=r)return NaN;for(;l<s&&o.get(l,n)&&a[4]<r;)a[4]++,l++;if(a[4]>=r)return NaN;var u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-i)>=i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,l):NaN},t.prototype.handlePossibleCenter=function(e,n,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=t.centerFromEnd(e,r),a=this.crossCheckVertical(n,Math.floor(s),e[2],o);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],o)))){for(var l=o/7,u=!1,c=this.possibleCenters,h=0,d=c.length;h<d;h++){var p=c[h];if(p.aboutEquals(l,a,s)){c[h]=p.combineEstimate(a,s,l),u=!0;break}}if(!u){var m=new J4(s,a,l);c.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,n,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var o=Js(this.possibleCenters),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.getCount()>=t.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(l){e={error:l}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,n,r,i,o=0,s=0,a=this.possibleCenters.length;try{for(var l=Js(this.possibleCenters),u=l.next();!u.done;u=l.next()){var c=u.value;c.getCount()>=t.CENTER_QUORUM&&(o++,s+=c.getEstimatedModuleSize())}}catch(w){e={error:w}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}if(o<3)return!1;var h=s/a,d=0;try{for(var p=Js(this.possibleCenters),m=p.next();!m.done;m=p.next()){var c=m.value;d+=Math.abs(c.getEstimatedModuleSize()-h)}}catch(w){r={error:w}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return d<=.05*s},t.prototype.selectBestPatterns=function(){var e,n,r,i,o=this.possibleCenters.length;if(o<3)throw new V;var s=this.possibleCenters,a;if(o>3){var l=0,u=0;try{for(var c=Js(this.possibleCenters),h=c.next();!h.done;h=c.next()){var d=h.value,p=d.getEstimatedModuleSize();l+=p,u+=p*p}}catch(P){e={error:P}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}a=l/o;var m=Math.sqrt(u/o-a*a);s.sort(function(P,k){var A=Math.abs(k.getEstimatedModuleSize()-a),E=Math.abs(P.getEstimatedModuleSize()-a);return A<E?-1:A>E?1:0});for(var w=Math.max(.2*a,m),I=0;I<s.length&&s.length>3;I++){var y=s[I];Math.abs(y.getEstimatedModuleSize()-a)>w&&(s.splice(I,1),I--)}}if(s.length>3){var l=0;try{for(var v=Js(s),x=v.next();!x.done;x=v.next()){var T=x.value;l+=T.getEstimatedModuleSize()}}catch(k){r={error:k}}finally{try{x&&!x.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}a=l/s.length,s.sort(function(k,A){if(A.getCount()===k.getCount()){var E=Math.abs(A.getEstimatedModuleSize()-a),S=Math.abs(k.getEstimatedModuleSize()-a);return E<S?1:E>S?-1:0}else return A.getCount()-k.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),n8=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(He.NEED_RESULT_POINT_CALLBACK);var n=new t8(this.image,this.resultPointCallback),r=n.find(e);return this.processFinderPatternInfo(r)},t.prototype.processFinderPatternInfo=function(e){var n=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(n,r,i);if(o<1)throw new V("No pattern found in proccess finder.");var s=t.computeDimension(n,r,i,o),a=Zi.getProvisionalVersionForDimension(s),l=a.getDimensionForVersion()-7,u=null;if(a.getAlignmentPatternCenters().length>0)for(var c=r.getX()-n.getX()+i.getX(),h=r.getY()-n.getY()+i.getY(),d=1-3/l,p=Math.floor(n.getX()+d*(c-n.getX())),m=Math.floor(n.getY()+d*(h-n.getY())),w=4;w<=16;w<<=1)try{u=this.findAlignmentInRegion(o,p,m,w);break}catch(x){if(!(x instanceof V))throw x}var I=t.createTransform(n,r,i,u,s),y=t.sampleGrid(this.image,I,s),v;return u===null?v=[i,n,r]:v=[i,n,r,u],new V1(y,v)},t.createTransform=function(e,n,r,i,o){var s=o-3.5,a,l,u,c;return i!==null?(a=i.getX(),l=i.getY(),u=s-3,c=u):(a=n.getX()-e.getX()+r.getX(),l=n.getY()-e.getY()+r.getY(),u=s,c=s),cx.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,u,c,3.5,s,e.getX(),e.getY(),n.getX(),n.getY(),a,l,r.getX(),r.getY())},t.sampleGrid=function(e,n,r){var i=U1.getInstance();return i.sampleGridWithTransform(e,r,r,n)},t.computeDimension=function(e,n,r,i){var o=Ie.round(ne.distance(e,n)/i),s=Ie.round(ne.distance(e,r)/i),a=Math.floor((o+s)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new V("Dimensions could be not found.")}return a},t.prototype.calculateModuleSize=function(e,n,r){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,r))/2},t.prototype.calculateModuleSizeOneWay=function(e,n){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,n,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,n,r,i),s=1,a=e-(r-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var l=Math.floor(n-(i-n)*s);return s=1,l<0?(s=n/(n-l),l=0):l>=this.image.getHeight()&&(s=(this.image.getHeight()-1-n)/(l-n),l=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,n,a,l),o-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,n,r,i){var o=Math.abs(i-n)>Math.abs(r-e);if(o){var s=e;e=n,n=s,s=r,r=i,i=s}for(var a=Math.abs(r-e),l=Math.abs(i-n),u=-a/2,c=e<r?1:-1,h=n<i?1:-1,d=0,p=r+c,m=e,w=n;m!==p;m+=c){var I=o?w:m,y=o?m:w;if(d===1===this.image.get(I,y)){if(d===2)return Ie.distance(m,w,e,n);d++}if(u+=l,u>0){if(w===i)break;w+=h,u-=a}}return d===2?Ie.distance(r+c,i,e,n):NaN},t.prototype.findAlignmentInRegion=function(e,n,r,i){var o=Math.floor(i*e),s=Math.max(0,n-o),a=Math.min(this.image.getWidth()-1,n+o);if(a-s<e*3)throw new V("Alignment top exceeds estimated module size.");var l=Math.max(0,r-o),u=Math.min(this.image.getHeight()-1,r+o);if(u-l<e*3)throw new V("Alignment bottom exceeds estimated module size.");var c=new Q4(this.image,s,l,a-s,u-l,e,this.resultPointCallback);return c.find()},t}(),o0=function(){function t(){this.decoder=new K4}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,n){var r,i;if(n!=null&&n.get(He.PURE_BARCODE)!==void 0){var o=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,n),i=t.NO_POINTS}else{var s=new n8(e.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(s.getBits(),n),i=s.getPoints()}r.getOther()instanceof mx&&r.getOther().applyMirroredCorrection(i);var a=new zt(r.getText(),r.getRawBytes(),void 0,i,ie.QR_CODE,void 0),l=r.getByteSegments();l!==null&&a.putMetadata(Ct.BYTE_SEGMENTS,l);var u=r.getECLevel();return u!==null&&a.putMetadata(Ct.ERROR_CORRECTION_LEVEL,u),r.hasStructuredAppend()&&(a.putMetadata(Ct.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(Ct.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n===null||r===null)throw new V;var i=this.moduleSize(n,e),o=n[1],s=r[1],a=n[0],l=r[0];if(a>=l||o>=s)throw new V;if(s-o!==l-a&&(l=a+(s-o),l>=e.getWidth()))throw new V;var u=Math.round((l-a+1)/i),c=Math.round((s-o+1)/i);if(u<=0||c<=0)throw new V;if(c!==u)throw new V;var h=Math.floor(i/2);o+=h,a+=h;var d=a+Math.floor((u-1)*i)-l;if(d>0){if(d>h)throw new V;a-=d}var p=o+Math.floor((c-1)*i)-s;if(p>0){if(p>h)throw new V;o-=p}for(var m=new fr(u,c),w=0;w<c;w++)for(var I=o+Math.floor(w*i),y=0;y<u;y++)e.get(a+Math.floor(y*i),I)&&m.set(y,w);return m},t.moduleSize=function(e,n){for(var r=n.getHeight(),i=n.getWidth(),o=e[0],s=e[1],a=!0,l=0;o<i&&s<r;){if(a!==n.get(o,s)){if(++l===5)break;a=!a}o++,s++}if(o===i||s===r)throw new V;return(o-e[0])/7},t.NO_POINTS=new Array,t}(),r8=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xe=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Ie.sum(e)},t.toIntArray=function(e){var n,r;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=r8(e),a=s.next();!a.done;a=s.next()){var l=a.value;i[o++]=l}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},t.getCodeword=function(e){var n=at.binarySearch(t.SYMBOL_TABLE,e&262143);return n<0?-1:(t.CODEWORD_TABLE[n]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),i8=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),o8=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s8=function(){function t(){}return t.detectMultiple=function(e,n,r){var i=e.getBlackMatrix(),o=t.detect(r,i);return o.length||(i=i.clone(),i.rotate180(),o=t.detect(r,i)),new i8(i,o)},t.detect=function(e,n){for(var r,i,o=new Array,s=0,a=0,l=!1;s<n.getHeight();){var u=t.findVertices(n,s,a);if(u[0]==null&&u[3]==null){if(!l)break;l=!1,a=0;try{for(var c=(r=void 0,o8(o)),h=c.next();!h.done;h=c.next()){var d=h.value;d[1]!=null&&(s=Math.trunc(Math.max(s,d[1].getY()))),d[3]!=null&&(s=Math.max(s,Math.trunc(d[3].getY())))}}catch(p){r={error:p}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}s+=t.ROW_STEP;continue}if(l=!0,o.push(u),!e)break;u[2]!=null?(a=Math.trunc(u[2].getX()),s=Math.trunc(u[2].getY())):(a=Math.trunc(u[4].getX()),s=Math.trunc(u[4].getY()))}return o},t.findVertices=function(e,n,r){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return t.copyToResult(s,t.findRowsWithPattern(e,i,o,n,r,t.START_PATTERN),t.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),n=Math.trunc(s[4].getY())),t.copyToResult(s,t.findRowsWithPattern(e,i,o,n,r,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),s},t.copyToResult=function(e,n,r){for(var i=0;i<r.length;i++)e[r[i]]=n[i]},t.findRowsWithPattern=function(e,n,r,i,o,s){for(var a=new Array(4),l=!1,u=new Int32Array(s.length);i<n;i+=t.ROW_STEP){var c=t.findGuardPattern(e,o,i,r,!1,s,u);if(c!=null){for(;i>0;){var h=t.findGuardPattern(e,o,--i,r,!1,s,u);if(h!=null)c=h;else{i++;break}}a[0]=new ne(c[0],i),a[1]=new ne(c[1],i),l=!0;break}}var d=i+1;if(l){for(var p=0,h=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);d<n;d++){var c=t.findGuardPattern(e,h[0],d,r,!1,s,u);if(c!=null&&Math.abs(h[0]-c[0])<t.MAX_PATTERN_DRIFT&&Math.abs(h[1]-c[1])<t.MAX_PATTERN_DRIFT)h=c,p=0;else{if(p>t.SKIPPED_ROW_COUNT_MAX)break;p++}}d-=p+1,a[2]=new ne(h[0],d),a[3]=new ne(h[1],d)}return d-i<t.BARCODE_MIN_HEIGHT&&at.fill(a,null),a},t.findGuardPattern=function(e,n,r,i,o,s,a){at.fillWithin(a,0,a.length,0);for(var l=n,u=0;e.get(l,r)&&l>0&&u++<t.MAX_PIXEL_DRIFT;)l--;for(var c=l,h=0,d=s.length,p=o;c<i;c++){var m=e.get(c,r);if(m!==p)a[h]++;else{if(h===d-1){if(t.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([l,c]);l+=a[0]+a[1],Le.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,p=!p}}return h===d-1&&t.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([l,c-1]):null},t.patternMatchVariance=function(e,n,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=n[a];if(o<s)return 1/0;var l=o/s;r*=l;for(var u=0,c=0;c<i;c++){var h=e[c],d=n[c]*l,p=h>d?h-d:d-h;if(p>r)return 1/0;u+=p}return u/o},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),a8=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gi=function(){function t(e,n){if(n.length===0)throw new oe;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Le.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var n,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=a8(this.coefficients),s=o.next();!s.done;s=o.next()){var a=s.value;i=this.field.add(i,a)}}catch(h){n={error:h}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}for(var l=this.coefficients[0],u=this.coefficients.length,c=1;c<u;c++)l=this.field.add(this.field.multiply(e,l),this.coefficients[c]);return l},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new oe("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),s=r.length-n.length;Le.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=this.field.add(n[a-s],r[a]);return new t(this.field,o)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new oe("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new oe("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=0;a<r;a++)for(var l=n[a],u=0;u<o;u++)s[a+u]=this.field.add(s[a+u],this.field.multiply(l,i[u]));return new t(this.field,s)},t.prototype.negative=function(){for(var e=this.coefficients.length,n=new Int32Array(e),r=0;r<e;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new t(this.field,n)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var n=this.coefficients.length,r=new Int32Array(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,r)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new oe;if(n===0)return new t(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],n);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new de,n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(n===0||r!==1)&&e.append(r),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()},t}(),l8=function(){function t(){}return t.prototype.add=function(e,n){return(e+n)%this.modulus},t.prototype.subtract=function(e,n){return(this.modulus+e-n)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new oe;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new ux;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),u8=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),c8=function(t){u8(e,t);function e(n,r){var i=t.call(this)||this;i.modulus=n,i.expTable=new Int32Array(n),i.logTable=new Int32Array(n);for(var o=1,s=0;s<n;s++)i.expTable[s]=o,o=o*r%n;for(var s=0;s<n-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Gi(i,new Int32Array([0])),i.one=new Gi(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new oe;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new Gi(this,i)},e.PDF417_GF=new e(xe.NUMBER_OF_CODEWORDS,3),e}(l8),f8=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h8=function(){function t(){this.field=c8.PDF417_GF}return t.prototype.decode=function(e,n,r){for(var i,o,s=new Gi(this.field,e),a=new Int32Array(n),l=!1,u=n;u>0;u--){var c=s.evaluateAt(this.field.exp(u));a[n-u]=c,c!==0&&(l=!0)}if(!l)return 0;var h=this.field.getOne();if(r!=null)try{for(var d=f8(r),p=d.next();!p.done;p=d.next()){var m=p.value,w=this.field.exp(e.length-1-m),I=new Gi(this.field,new Int32Array([this.field.subtract(0,w),1]));h=h.multiply(I)}}catch(E){i={error:E}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}for(var y=new Gi(this.field,a),v=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),y,n),x=v[0],T=v[1],P=this.findErrorLocations(x),k=this.findErrorMagnitudes(T,x,P),u=0;u<P.length;u++){var A=e.length-1-this.field.log(P[u]);if(A<0)throw mt.getChecksumInstance();e[A]=this.field.subtract(e[A],k[u])}return P.length},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var o=e,s=n,a=this.field.getZero(),l=this.field.getOne();s.getDegree()>=Math.round(r/2);){var u=o,c=a;if(o=s,a=l,o.isZero())throw mt.getChecksumInstance();s=u;for(var h=this.field.getZero(),d=o.getCoefficient(o.getDegree()),p=this.field.inverse(d);s.getDegree()>=o.getDegree()&&!s.isZero();){var m=s.getDegree()-o.getDegree(),w=this.field.multiply(s.getCoefficient(s.getDegree()),p);h=h.add(this.field.buildMonomial(m,w)),s=s.subtract(o.multiplyByMonomial(m,w))}l=h.multiply(a).subtract(c).negative()}var I=l.getCoefficient(0);if(I===0)throw mt.getChecksumInstance();var y=this.field.inverse(I),v=l.multiply(y),x=s.multiply(y);return[v,x]},t.prototype.findErrorLocations=function(e){for(var n=e.getDegree(),r=new Int32Array(n),i=0,o=1;o<this.field.getSize()&&i<n;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==n)throw mt.getChecksumInstance();return r},t.prototype.findErrorMagnitudes=function(e,n,r){for(var i=n.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,n.getCoefficient(s));for(var a=new Gi(this.field,o),l=r.length,u=new Int32Array(l),s=0;s<l;s++){var c=this.field.inverse(r[s]),h=this.field.subtract(0,e.evaluateAt(c)),d=this.field.inverse(a.evaluateAt(c));u[s]=this.field.multiply(h,d)}return u},t}(),s0=function(){function t(e,n,r,i,o){e instanceof t?this.constructor_2(e):this.constructor_1(e,n,r,i,o)}return t.prototype.constructor_1=function(e,n,r,i,o){var s=n==null||r==null,a=i==null||o==null;if(s&&a)throw new V;s?(n=new ne(0,i.getY()),r=new ne(0,o.getY())):a&&(i=new ne(e.getWidth()-1,n.getY()),o=new ne(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=n,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(n.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(n.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,n){return e==null?n:n==null?e:new t(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)},t.prototype.addMissingRows=function(e,n,r){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){var l=r?this.topLeft:this.topRight,u=Math.trunc(l.getY()-e);u<0&&(u=0);var c=new ne(l.getX(),u);r?i=c:s=c}if(n>0){var h=r?this.bottomLeft:this.bottomRight,d=Math.trunc(h.getY()+n);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var p=new ne(h.getX(),d);r?o=p:a=p}return new t(this.image,i,o,s,a)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),d8=function(){function t(e,n,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),$1=function(){function t(){this.buffer=""}return t.form=function(e,n){var r=-1;function i(s,a,l,u,c,h){if(s==="%%")return"%";if(n[++r]!==void 0){s=u?parseInt(u.substr(1)):void 0;var d=c?parseInt(c.substr(1)):void 0,p;switch(h){case"s":p=n[r];break;case"c":p=n[r][0];break;case"f":p=parseFloat(n[r]).toFixed(s);break;case"p":p=parseFloat(n[r]).toPrecision(s);break;case"e":p=parseFloat(n[r]).toExponential(s);break;case"x":p=parseInt(n[r]).toString(d||16);break;case"d":p=parseFloat(parseInt(n[r],d||10).toPrecision(s)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(d);for(var m=parseInt(l),w=l&&l[0]+""=="0"?"0":" ";p.length<m;)p=a!==void 0?p+w:w+p;return p}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},t.prototype.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=t.form(e,n)},t.prototype.toString=function(){return this.buffer},t}(),p8=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vx=function(){function t(e){this.boundingBox=new s0(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var n=this.getCodeword(e);if(n!=null)return n;for(var r=1;r<t.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(n=this.codewords[i],n!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(n=this.codewords[i],n!=null)))return n}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,n,r=new $1,i=0;try{for(var o=p8(this.codewords),s=o.next();!s.done;s=o.next()){var a=s.value;if(a==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(l){e={error:l}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),g8=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m8=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},ua=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)},t.prototype.getValue=function(){var e,n,r=-1,i=new Array,o=function(h,d){var p={getKey:function(){return h},getValue:function(){return d}};p.getValue()>r?(r=p.getValue(),i=[],i.push(p.getKey())):p.getValue()===r&&i.push(p.getKey())};try{for(var s=g8(this.values.entries()),a=s.next();!a.done;a=s.next()){var l=m8(a.value,2),u=l[0],c=l[1];o(u,c)}}catch(h){e={error:h}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return xe.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),v8=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ph=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nv=function(t){v8(e,t);function e(n,r){var i=t.call(this,n)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var n,r;try{for(var i=Ph(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,n);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),u=-1,c=1,h=0,d=a;d<l;d++)if(r[d]!=null){var p=r[d],m=p.getRowNumber()-u;if(m===0)h++;else if(m===1)c=Math.max(c,h),h=1,u=p.getRowNumber();else if(m<0||p.getRowNumber()>=n.getRowCount()||m>d)r[d]=null;else{var w=void 0;c>2?w=(c-2)*m:w=m;for(var I=w>=d,y=1;y<=w&&!I;y++)I=r[d-y]!=null;I?r[d]=null:(u=p.getRowNumber(),h=1)}}},e.prototype.getRowHeights=function(){var n,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=Ph(this.getCodewords()),a=s.next();!a.done;a=s.next()){var l=a.value;if(l!=null){var u=l.getRowNumber();if(u>=o.length)continue;o[u]++}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),l=this.getCodewords(),u=-1,c=s;c<a;c++)if(l[c]!=null){var h=l[c];h.setRowNumberAsRowIndicatorColumn();var d=h.getRowNumber()-u;d===0||(d===1?u=h.getRowNumber():h.getRowNumber()>=n.getRowCount()?l[c]=null:u=h.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var n,r,i=this.getCodewords(),o=new ua,s=new ua,a=new ua,l=new ua;try{for(var u=Ph(i),c=u.next();!c.done;c=u.next()){var h=c.value;if(h!=null){h.setRowNumberAsRowIndicatorColumn();var d=h.getValue()%30,p=h.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:s.setValue(d*3+1);break;case 1:l.setValue(d/3),a.setValue(d%3);break;case 2:o.setValue(d+1);break}}}}catch(w){n={error:w}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(o.getValue().length===0||s.getValue().length===0||a.getValue().length===0||l.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<xe.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>xe.MAX_ROWS_IN_BARCODE)return null;var m=new d8(o.getValue()[0],s.getValue()[0],a.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,m),m},e.prototype.removeIncorrectCodewords=function(n,r){for(var i=0;i<n.length;i++){var o=n[i];if(n[i]!=null){var s=o.getValue()%30,a=o.getRowNumber();if(a>r.getRowCount()){n[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(n[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(n[i]=null);break;case 2:s+1!==r.getColumnCount()&&(n[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(vx),y8=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_8=function(){function t(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=xe.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var r=this.detectionResultColumns[n].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(n,i,r));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&n[r]!=null&&e[r].getRowNumber()===n[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=t.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=t.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,n,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),n=0):++n),n},t.prototype.adjustRowNumbers=function(e,n,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=r[n],a=this.detectionResultColumns[e-1].getCodewords(),l=a;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=a[n],u[3]=l[n],n>0&&(u[0]=r[n-1],u[4]=a[n-1],u[5]=l[n-1]),n>1&&(u[8]=r[n-2],u[10]=a[n-2],u[11]=l[n-2]),n<r.length-1&&(u[1]=r[n+1],u[6]=a[n+1],u[7]=l[n+1]),n<r.length-2&&(u[9]=r[n+2],u[12]=a[n+2],u[13]=l[n+2]);try{for(var c=y8(u),h=c.next();!h.done;h=c.next()){var d=h.value;if(t.adjustRowNumber(s,d))return}}catch(p){i={error:p}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,n){this.detectionResultColumns[e]=n},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new $1,r=0;r<e.getCodewords().length;r++){n.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){n.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[r];if(o==null){n.format("    |   ");continue}n.format(" %3d|%3d",o.getRowNumber(),o.getValue())}n.format("%n")}return n.toString()},t}(),w8=function(){function t(e,n,r,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),x8=function(){function t(){}return t.initialize=function(){for(var e=0;e<xe.SYMBOL_TABLE.length;e++)for(var n=xe.SYMBOL_TABLE[e],r=n&1,i=0;i<xe.BARS_IN_MODULE;i++){for(var o=0;(n&1)===r;)o+=1,n>>=1;r=n&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(xe.BARS_IN_MODULE)),t.RATIOS_TABLE[e][xe.BARS_IN_MODULE-i-1]=Math.fround(o/xe.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var n=t.getDecodedCodewordValue(t.sampleBitCounts(e));return n!==-1?n:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var n=Ie.sum(e),r=new Int32Array(xe.BARS_IN_MODULE),i=0,o=0,s=0;s<xe.MODULES_IN_CODEWORD;s++){var a=n/(2*xe.MODULES_IN_CODEWORD)+s*n/xe.MODULES_IN_CODEWORD;o+e[i]<=a&&(o+=e[i],i++),r[i]++}return r},t.getDecodedCodewordValue=function(e){var n=t.getBitValue(e);return xe.getCodeword(n)===-1?-1:n},t.getBitValue=function(e){for(var n=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)n=n<<1|(r%2===0?1:0);return Math.trunc(n)},t.getClosestDecodedValue=function(e){var n=Ie.sum(e),r=new Array(xe.BARS_IN_MODULE);if(n>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/n);var o=e0.MAX_VALUE,s=-1;this.bSymbolTableReady||t.initialize();for(var a=0;a<t.RATIOS_TABLE.length;a++){for(var l=0,u=t.RATIOS_TABLE[a],c=0;c<xe.BARS_IN_MODULE;c++){var h=Math.fround(u[c]-r[c]);if(l+=Math.fround(h*h),l>=o)break}l<o&&(o=l,s=xe.SYMBOL_TABLE[a])}return s},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(xe.SYMBOL_TABLE.length).map(function(e){return new Array(xe.BARS_IN_MODULE)}),t}(),E8=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),Ov=function(){function t(){}return t.parseLong=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t}(),A8=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),I8=function(t){A8(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(hn),T8=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,n,r){if(e==null)throw new I8;if(n<0||n>e.length||r<0||n+r>e.length||n+r<0)throw new F1;if(r===0)return;for(var i=0;i<r;i++)this.write(e[n+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),S8=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),C8=function(t){S8(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(hn),b8=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),R8=function(t){b8(e,t);function e(n){n===void 0&&(n=32);var r=t.call(this)||this;if(r.count=0,n<0)throw new oe("Negative initial size: "+n);return r.buf=new Uint8Array(n),r}return e.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},e.prototype.grow=function(n){var r=this.buf.length,i=r<<1;if(i-n<0&&(i=n),i<0){if(n<0)throw new C8;i=ge.MAX_VALUE}this.buf=at.copyOfUint8Array(this.buf,i)},e.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},e.prototype.writeBytesOffset=function(n,r,i){if(r<0||r>n.length||i<0||r+i-n.length>0)throw new F1;this.ensureCapacity(this.count+i),Le.arraycopy(n,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return at.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(n){return new String(this.buf).toString()},e.prototype.toString_number=function(n){return new String(this.buf).toString()},e.prototype.close=function(){},e}(T8),De;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(De||(De={}));function yx(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var lu;function Yr(t){if(typeof lu>"u"&&(lu=yx()),lu===null)throw new Error("BigInt is not supported!");return lu(t)}function N8(){var t=[];t[0]=Yr(1);var e=Yr(900);t[1]=e;for(var n=2;n<16;n++)t[n]=t[n-1]*e;return t}var O8=function(){function t(){}return t.decode=function(e,n){var r=new de(""),i=st.ISO8859_1;r.enableDecoding(i);for(var o=1,s=e[o++],a=new E8;o<e[0];){switch(s){case t.TEXT_COMPACTION_MODE_LATCH:o=t.textCompaction(e,o,r);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:o=t.byteCompaction(s,e,i,o,r);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:o=t.numericCompaction(e,o,r);break;case t.ECI_CHARSET:st.getCharacterSetECIByValue(e[o++]);break;case t.ECI_GENERAL_PURPOSE:o+=2;break;case t.ECI_USER_DEFINED:o++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=t.decodeMacroBlock(e,o,a);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new G;default:o--,o=t.textCompaction(e,o,r);break}if(o<e.length)s=e[o++];else throw G.getFormatInstance()}if(r.length()===0)throw G.getFormatInstance();var l=new nf(null,r.toString(),null,n);return l.setOther(a),l},t.decodeMacroBlock=function(e,n,r){if(n+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw G.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<t.NUMBER_OF_SEQUENCE_CODEWORDS;o++,n++)i[o]=e[n];r.setSegmentIndex(ge.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new de;n=t.textCompaction(e,n,s),r.setFileId(s.toString());var a=-1;for(e[n]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=n+1);n<e[0];)switch(e[n]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new de;n=t.textCompaction(e,n+1,l),r.setFileName(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new de;n=t.textCompaction(e,n+1,u),r.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new de;n=t.textCompaction(e,n+1,c),r.setAddressee(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var h=new de;n=t.numericCompaction(e,n+1,h),r.setSegmentCount(ge.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new de;n=t.numericCompaction(e,n+1,d),r.setTimestamp(Ov.parseLong(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new de;n=t.numericCompaction(e,n+1,p),r.setChecksum(ge.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new de;n=t.numericCompaction(e,n+1,m),r.setFileSize(Ov.parseLong(m.toString()));break;default:throw G.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw G.getFormatInstance()}if(a!==-1){var w=n-a;r.isLastSegment()&&w--,r.setOptionalData(at.copyOfRange(e,a,a+w))}return n},t.textCompaction=function(e,n,r){for(var i=new Int32Array((e[0]-n)*2),o=new Int32Array((e[0]-n)*2),s=0,a=!1;n<e[0]&&!a;){var l=e[n++];if(l<t.TEXT_COMPACTION_MODE_LATCH)i[s]=l/30,i[s+1]=l%30,s+=2;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:i[s++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,a=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[n++],o[s]=l,s++;break}}return t.decodeTextCompaction(i,o,s,r),n},t.decodeTextCompaction=function(e,n,r,i){for(var o=De.ALPHA,s=De.ALPHA,a=0;a<r;){var l=e[a],u="";switch(o){case De.ALPHA:if(l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.LL:o=De.LOWER;break;case t.ML:o=De.MIXED;break;case t.PS:s=o,o=De.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=De.ALPHA;break}break;case De.LOWER:if(l<26)u=String.fromCharCode(97+l);else switch(l){case 26:u=" ";break;case t.AS:s=o,o=De.ALPHA_SHIFT;break;case t.ML:o=De.MIXED;break;case t.PS:s=o,o=De.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=De.ALPHA;break}break;case De.MIXED:if(l<t.PL)u=t.MIXED_CHARS[l];else switch(l){case t.PL:o=De.PUNCT;break;case 26:u=" ";break;case t.LL:o=De.LOWER;break;case t.AL:o=De.ALPHA;break;case t.PS:s=o,o=De.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=De.ALPHA;break}break;case De.PUNCT:if(l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:o=De.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=De.ALPHA;break}break;case De.ALPHA_SHIFT:if(o=s,l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:o=De.ALPHA;break}break;case De.PUNCT_SHIFT:if(o=s,l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:o=De.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=De.ALPHA;break}break}u!==""&&i.append(u),a++}},t.byteCompaction=function(e,n,r,i,o){var s=new R8,a=0,l=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),h=n[i++];i<n[0]&&!u;)switch(c[a++]=h,l=900*l+h,h=n[i++],h){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,u=!0;break;default:if(a%5===0&&a>0){for(var d=0;d<6;++d)s.write(Number(Yr(l)>>Yr(8*(5-d))));l=0,a=0}break}i===n[0]&&h<t.TEXT_COMPACTION_MODE_LATCH&&(c[a++]=h);for(var p=0;p<a;p++)s.write(c[p]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<n[0]&&!u;){var m=n[i++];if(m<t.TEXT_COMPACTION_MODE_LATCH)a++,l=900*l+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,u=!0;break}if(a%5===0&&a>0){for(var d=0;d<6;++d)s.write(Number(Yr(l)>>Yr(8*(5-d))));l=0,a=0}}break}return o.append(Nn.decode(s.toByteArray(),r)),i},t.numericCompaction=function(e,n,r){for(var i=0,o=!1,s=new Int32Array(t.MAX_NUMERIC_CODEWORDS);n<e[0]&&!o;){var a=e[n++];if(n===e[0]&&(o=!0),a<t.TEXT_COMPACTION_MODE_LATCH)s[i]=a,i++;else switch(a){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,o=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||a===t.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(t.decodeBase900toBase10(s,i)),i=0)}return n},t.decodeBase900toBase10=function(e,n){for(var r=Yr(0),i=0;i<n;i++)r+=t.EXP900[n-i-1]*Yr(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new G;return o.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=yx()?N8():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),ea=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P8=function(){function t(){}return t.decode=function(e,n,r,i,o,s,a){for(var l=new s0(e,n,r,i,o),u=null,c=null,h,d=!0;;d=!1){if(n!=null&&(u=t.getRowIndicatorColumn(e,l,n,!0,s,a)),i!=null&&(c=t.getRowIndicatorColumn(e,l,i,!1,s,a)),h=t.merge(u,c),h==null)throw V.getNotFoundInstance();var p=h.getBoundingBox();if(d&&p!=null&&(p.getMinY()<l.getMinY()||p.getMaxY()>l.getMaxY()))l=p;else break}h.setBoundingBox(l);var m=h.getBarcodeColumnCount()+1;h.setDetectionResultColumn(0,u),h.setDetectionResultColumn(m,c);for(var w=u!=null,I=1;I<=m;I++){var y=w?I:m-I;if(h.getDetectionResultColumn(y)===void 0){var v=void 0;y===0||y===m?v=new Nv(l,y===0):v=new vx(l),h.setDetectionResultColumn(y,v);for(var x=-1,T=x,P=l.getMinY();P<=l.getMaxY();P++){if(x=t.getStartColumn(h,y,P,w),x<0||x>l.getMaxX()){if(T===-1)continue;x=T}var k=t.detectCodeword(e,l.getMinX(),l.getMaxX(),w,x,P,s,a);k!=null&&(v.setCodeword(P,k),T=x,s=Math.min(s,k.getWidth()),a=Math.max(a,k.getWidth()))}}}return t.createDecoderResult(h)},t.merge=function(e,n){if(e==null&&n==null)return null;var r=t.getBarcodeMetadata(e,n);if(r==null)return null;var i=s0.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(n));return new _8(r,i)},t.adjustBoundingBox=function(e){var n,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=t.getMax(i),s=0;try{for(var a=ea(i),l=a.next();!l.done;l=a.next()){var u=l.value;if(s+=o-u,u>0)break}}catch(p){n={error:p}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}for(var c=e.getCodewords(),h=0;s>0&&c[h]==null;h++)s--;for(var d=0,h=i.length-1;h>=0&&(d+=o-i[h],!(i[h]>0));h--);for(var h=c.length-1;d>0&&c[h]==null;h--)d--;return e.getBoundingBox().addMissingRows(s,d,e.isLeft())},t.getMax=function(e){var n,r,i=-1;try{for(var o=ea(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=Math.max(i,a)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.getBarcodeMetadata=function(e,n){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();var i;return n==null||(i=n.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},t.getRowIndicatorColumn=function(e,n,r,i,o,s){for(var a=new Nv(n,i),l=0;l<2;l++)for(var u=l===0?1:-1,c=Math.trunc(Math.trunc(r.getX())),h=Math.trunc(Math.trunc(r.getY()));h<=n.getMaxY()&&h>=n.getMinY();h+=u){var d=t.detectCodeword(e,0,e.getWidth(),i,c,h,o,s);d!=null&&(a.setCodeword(h,d),i?c=d.getStartX():c=d.getEndX())}return a},t.adjustCodewordCount=function(e,n){var r=n[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>xe.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},t.createDecoderResult=function(e){var n=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,n);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var l=0;l<e.getBarcodeColumnCount();l++){var u=n[a][l+1].getValue(),c=a*e.getBarcodeColumnCount()+l;u.length===0?r.push(c):u.length===1?i[c]=u[0]:(s.push(c),o.push(u))}for(var h=new Array(o.length),d=0;d<h.length;d++)h[d]=o[d];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,xe.toIntArray(r),xe.toIntArray(s),h)},t.createDecoderResultFromAmbiguousValues=function(e,n,r,i,o){for(var s=new Int32Array(i.length),a=100;a-- >0;){for(var l=0;l<s.length;l++)n[i[l]]=o[l][s[l]];try{return t.decodeCodewords(n,e,r)}catch(c){var u=c instanceof mt;if(!u)throw c}if(s.length===0)throw mt.getChecksumInstance();for(var l=0;l<s.length;l++)if(s[l]<o[l].length-1){s[l]++;break}else if(s[l]=0,l===s.length-1)throw mt.getChecksumInstance()}throw mt.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var n,r,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<s.length;a++)for(var l=0;l<s[a].length;l++)s[a][l]=new ua;var u=0;try{for(var c=ea(e.getDetectionResultColumns()),h=c.next();!h.done;h=c.next()){var d=h.value;if(d!=null)try{for(var p=(i=void 0,ea(d.getCodewords())),m=p.next();!m.done;m=p.next()){var w=m.value;if(w!=null){var I=w.getRowNumber();if(I>=0){if(I>=s.length)continue;s[I][u].setValue(w.getValue())}}}}catch(y){i={error:y}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}u++}}catch(y){n={error:y}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return s},t.isValidBarcodeColumn=function(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,n,r,i){var o,s,a=i?1:-1,l=null;if(t.isValidBarcodeColumn(e,n-a)&&(l=e.getDetectionResultColumn(n-a).getCodeword(r)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(n).getCodewordNearby(r),l!=null)return i?l.getStartX():l.getEndX();if(t.isValidBarcodeColumn(e,n-a)&&(l=e.getDetectionResultColumn(n-a).getCodewordNearby(r)),l!=null)return i?l.getEndX():l.getStartX();for(var u=0;t.isValidBarcodeColumn(e,n-a);){n-=a;try{for(var c=(o=void 0,ea(e.getDetectionResultColumn(n).getCodewords())),h=c.next();!h.done;h=c.next()){var d=h.value;if(d!=null)return(i?d.getEndX():d.getStartX())+a*u*(d.getEndX()-d.getStartX())}}catch(p){o={error:p}}finally{try{h&&!h.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,n,r,i,o,s,a,l){o=t.adjustCodewordStartColumn(e,n,r,i,o,s);var u=t.getModuleBitCount(e,n,r,i,o,s);if(u==null)return null;var c,h=Ie.sum(u);if(i)c=o+h;else{for(var d=0;d<u.length/2;d++){var p=u[d];u[d]=u[u.length-1-d],u[u.length-1-d]=p}c=o,o=c-h}if(!t.checkCodewordSkew(h,a,l))return null;var m=x8.getDecodedValue(u),w=xe.getCodeword(m);return w===-1?null:new w8(o,c,t.getCodewordBucketNumber(m),w)},t.getModuleBitCount=function(e,n,r,i,o,s){for(var a=o,l=new Int32Array(8),u=0,c=i?1:-1,h=i;(i?a<r:a>=n)&&u<l.length;)e.get(a,s)===h?(l[u]++,a+=c):(u++,h=!h);return u===l.length||a===(i?r:n)&&u===l.length-1?l:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,n,r,i,o,s){for(var a=o,l=i?-1:1,u=0;u<2;u++){for(;(i?a>=n:a<r)&&i===e.get(a,s);){if(Math.abs(o-a)>t.CODEWORD_SKEW_SIZE)return o;a+=l}l=-l,i=!i}return a},t.checkCodewordSkew=function(e,n,r){return n-t.CODEWORD_SKEW_SIZE<=e&&e<=r+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,n,r){if(e.length===0)throw G.getFormatInstance();var i=1<<n+1,o=t.correctErrors(e,r,i);t.verifyCodewordCount(e,i);var s=O8.decode(e,""+n);return s.setErrorsCorrected(o),s.setErasures(r.length),s},t.correctErrors=function(e,n,r){if(n!=null&&n.length>r/2+t.MAX_ERRORS||r<0||r>t.MAX_EC_CODEWORDS)throw mt.getChecksumInstance();return t.errorCorrection.decode(e,r,n)},t.verifyCodewordCount=function(e,n){if(e.length<4)throw G.getFormatInstance();var r=e[0];if(r>e.length)throw G.getFormatInstance();if(r===0)if(n<e.length)e[0]=e.length-n;else throw G.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var n=new Int32Array(8),r=0,i=n.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)n[i]++,e>>=1;return n},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var n=new $1,r=0;r<e.length;r++){n.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}n.format("%n")}return n.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new h8,t}(),D8=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a0=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=t.decode(e,n,!1);if(r==null||r.length===0||r[0]==null)throw V.getNotFoundInstance();return r[0]},t.prototype.decodeMultiple=function(e,n){n===void 0&&(n=null);try{return t.decode(e,n,!0)}catch(r){throw r instanceof G||r instanceof mt?V.getNotFoundInstance():r}},t.decode=function(e,n,r){var i,o,s=new Array,a=s8.detectMultiple(e,n,r);try{for(var l=D8(a.getPoints()),u=l.next();!u.done;u=l.next()){var c=u.value,h=P8.decode(a.getBits(),c[4],c[5],c[6],c[7],t.getMinCodewordWidth(c),t.getMaxCodewordWidth(c)),d=new zt(h.getText(),h.getRawBytes(),void 0,c,ie.PDF_417);d.putMetadata(Ct.ERROR_CORRECTION_LEVEL,h.getECLevel());var p=h.getOther();p!=null&&d.putMetadata(Ct.PDF417_EXTRA_METADATA,p),s.push(d)}}catch(m){i={error:m}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return s.map(function(m){return m})},t.getMaxWidth=function(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMinWidth=function(e,n){return e==null||n==null?ge.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),k8=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pv=function(t){k8(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(hn),Dv=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M8=function(){function t(){}return t.prototype.decode=function(e,n){return this.setHints(n),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var n=e!=null&&e.get(He.TRY_HARDER)!==void 0,r=e==null?null:e.get(He.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(s){return s===ie.UPC_A||s===ie.UPC_E||s===ie.EAN_13||s===ie.EAN_8||s===ie.CODABAR||s===ie.CODE_39||s===ie.CODE_93||s===ie.CODE_128||s===ie.ITF||s===ie.RSS_14||s===ie.RSS_EXPANDED});o&&!n&&i.push(new la(e)),r.includes(ie.QR_CODE)&&i.push(new o0),r.includes(ie.DATA_MATRIX)&&i.push(new i0),r.includes(ie.AZTEC)&&i.push(new n0),r.includes(ie.PDF_417)&&i.push(new a0),o&&n&&i.push(new la(e))}i.length===0&&(n||i.push(new la(e)),i.push(new o0),i.push(new i0),i.push(new n0),i.push(new a0),n&&i.push(new la(e))),this.readers=i},t.prototype.reset=function(){var e,n;if(this.readers!==null)try{for(var r=Dv(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var n,r;if(this.readers===null)throw new Pv("No readers where selected, nothing can be read.");try{for(var i=Dv(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(a){if(a instanceof Pv)continue}}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}throw new V("No MultiFormat Readers were able to detect the code.")},t}(),L8=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),F8=function(t){L8(e,t);function e(n,r){n===void 0&&(n=null),r===void 0&&(r=500);var i=this,o=new M8;return o.setHints(n),i=t.call(this,o,r)||this,i}return e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e}(xs),B8=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){B8(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new a0,n)||this}return e})(xs);var V8=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){V8(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new o0,n)||this}return e})(xs);var l0;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(l0||(l0={}));const uu=l0;var _x=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new di(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var n=this.cachedGenerators;if(e>=n.length)for(var r=n[n.length-1],i=this.field,o=n.length;o<=e;o++){var s=r.multiply(new di(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));n.push(s),r=s}return n[e]},t.prototype.encode=function(e,n){if(n===0)throw new oe("No error correction bytes");var r=e.length-n;if(r<=0)throw new oe("No data bytes provided");var i=this.buildGenerator(n),o=new Int32Array(r);Le.arraycopy(e,0,o,0,r);var s=new di(this.field,o);s=s.multiplyByMonomial(n,1);for(var a=s.divide(i)[1],l=a.getCoefficients(),u=n-l.length,c=0;c<u;c++)e[r+c]=0;Le.arraycopy(l,0,e,r+u,l.length)},t}(),ca=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var a=r[s],l=0;l<i-1;l++){var u=a[l];u===a[l+1]&&u===r[s+1][l]&&u===r[s+1][l+1]&&n++}return t.N2*n},t.applyMaskPenaltyRule3=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=0;a<i;a++){var l=r[s];a+6<i&&l[a]===1&&l[a+1]===0&&l[a+2]===1&&l[a+3]===1&&l[a+4]===1&&l[a+5]===0&&l[a+6]===1&&(t.isWhiteHorizontal(l,a-4,a)||t.isWhiteHorizontal(l,a+7,a+11))&&n++,s+6<o&&r[s][a]===1&&r[s+1][a]===0&&r[s+2][a]===1&&r[s+3][a]===1&&r[s+4][a]===1&&r[s+5][a]===0&&r[s+6][a]===1&&(t.isWhiteVertical(r,a,s-4,s)||t.isWhiteVertical(r,a,s+7,s+11))&&n++}return n*t.N3},t.isWhiteHorizontal=function(e,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var i=n;i<r;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,n,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][n]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=r[s],l=0;l<i;l++)a[l]===1&&n++;var u=e.getHeight()*e.getWidth(),c=Math.floor(Math.abs(n*2-u)*10/u);return c*t.N4},t.getDataMaskBit=function(e,n,r){var i,o;switch(e){case 0:i=r+n&1;break;case 1:i=r&1;break;case 2:i=n%3;break;case 3:i=(r+n)%3;break;case 4:i=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:o=r*n,i=(o&1)+o%3;break;case 6:o=r*n,i=(o&1)+o%3&1;break;case 7:o=r*n,i=o%3+(r+n&1)&1;break;default:throw new oe("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,n){for(var r=0,i=n?e.getHeight():e.getWidth(),o=n?e.getWidth():e.getHeight(),s=e.getArray(),a=0;a<i;a++){for(var l=0,u=-1,c=0;c<o;c++){var h=n?s[a][c]:s[c][a];h===u?l++:(l>=5&&(r+=t.N1+(l-5)),l=1,u=h)}l>=5&&(r+=t.N1+(l-5))}return r},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),U8=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j8=function(){function t(e,n){this.width=e,this.height=n;for(var r=new Array(n),i=0;i!==n;i++)r[i]=new Uint8Array(e);this.bytes=r}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,n){return this.bytes[n][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,n,r){this.bytes[n][e]=r},t.prototype.setBoolean=function(e,n,r){this.bytes[n][e]=r?1:0},t.prototype.clear=function(e){var n,r;try{for(var i=U8(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;at.fill(s,e)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],s=n.bytes[r],a=0,l=this.width;a<l;++a)if(o[a]!==s[a])return!1;return!0},t.prototype.toString=function(){for(var e=new de,n=0,r=this.height;n<r;++n){for(var i=this.bytes[n],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),u0=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new de;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),$8=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ve=function(t){$8(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(hn),kv=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,n,r,i,o){t.clearMatrix(o),t.embedBasicPatterns(r,o),t.embedTypeInfo(n,i,o),t.maybeEmbedVersionInfo(r,o),t.embedDataBits(e,i,o)},t.embedBasicPatterns=function(e,n){t.embedPositionDetectionPatternsAndSeparators(n),t.embedDarkDotAtLeftBottomCorner(n),t.maybeEmbedPositionAdjustmentPatterns(e,n),t.embedTimingPatterns(n)},t.embedTypeInfo=function(e,n,r){var i=new vt;t.makeTypeInfoBits(e,n,i);for(var o=0,s=i.getSize();o<s;++o){var a=i.get(i.getSize()-1-o),l=t.TYPE_INFO_COORDINATES[o],u=l[0],c=l[1];if(r.setBoolean(u,c,a),o<8){var h=r.getWidth()-o-1,d=8;r.setBoolean(h,d,a)}else{var h=8,d=r.getHeight()-7+(o-8);r.setBoolean(h,d,a)}}},t.maybeEmbedVersionInfo=function(e,n){if(!(e.getVersionNumber()<7)){var r=new vt;t.makeVersionInfoBits(e,r);for(var i=6*3-1,o=0;o<6;++o)for(var s=0;s<3;++s){var a=r.get(i);i--,n.setBoolean(o,n.getHeight()-11+s,a),n.setBoolean(n.getHeight()-11+s,o,a)}}},t.embedDataBits=function(e,n,r){for(var i=0,o=-1,s=r.getWidth()-1,a=r.getHeight()-1;s>0;){for(s===6&&(s-=1);a>=0&&a<r.getHeight();){for(var l=0;l<2;++l){var u=s-l;if(t.isEmpty(r.get(u,a))){var c=void 0;i<e.getSize()?(c=e.get(i),++i):c=!1,n!==255&&ca.getDataMaskBit(n,u,a)&&(c=!c),r.setBoolean(u,a,c)}}a+=o}o=-o,a+=o,s-=2}if(i!==e.getSize())throw new Ve("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-ge.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,n){if(n===0)throw new oe("0 polynomial");var r=t.findMSBSet(n);for(e<<=r-1;t.findMSBSet(e)>=r;)e^=n<<t.findMSBSet(e)-r;return e},t.makeTypeInfoBits=function(e,n,r){if(!u0.isValidMaskPattern(n))throw new Ve("Invalid mask pattern");var i=e.getBits()<<3|n;r.appendBits(i,5);var o=t.calculateBCHCode(i,t.TYPE_INFO_POLY);r.appendBits(o,10);var s=new vt;if(s.appendBits(t.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new Ve("should not happen but we got: "+r.getSize())},t.makeVersionInfoBits=function(e,n){n.appendBits(e.getVersionNumber(),6);var r=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(n.appendBits(r,12),n.getSize()!==18)throw new Ve("should not happen but we got: "+n.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var n=8;n<e.getWidth()-8;++n){var r=(n+1)%2;t.isEmpty(e.get(n,6))&&e.setNumber(n,6,r),t.isEmpty(e.get(6,n))&&e.setNumber(6,n,r)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Ve;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,n,r){for(var i=0;i<8;++i){if(!t.isEmpty(r.get(e+i,n)))throw new Ve;r.setNumber(e+i,n,0)}},t.embedVerticalSeparationPattern=function(e,n,r){for(var i=0;i<7;++i){if(!t.isEmpty(r.get(e,n+i)))throw new Ve;r.setNumber(e,n+i,0)}},t.embedPositionAdjustmentPattern=function(e,n,r){for(var i=0;i<5;++i)for(var o=t.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,n+i,o[s])},t.embedPositionDetectionPattern=function(e,n,r){for(var i=0;i<7;++i)for(var o=t.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,n+i,o[s])},t.embedPositionDetectionPatternsAndSeparators=function(e){var n=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-n,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-n,e);var r=8;t.embedHorizontalSeparationPattern(0,r-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,n){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,s=i.length;o!==s;o++){var a=i[o];if(a>=0)for(var l=0;l!==s;l++){var u=i[l];u>=0&&t.isEmpty(n.get(u,a))&&t.embedPositionAdjustmentPattern(u-2,a-2,n)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),z8=function(){function t(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),Mv=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return ca.applyMaskPenaltyRule1(e)+ca.applyMaskPenaltyRule2(e)+ca.applyMaskPenaltyRule3(e)+ca.applyMaskPenaltyRule4(e)},t.encode=function(e,n,r){r===void 0&&(r=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,o=r!==null&&r.get(uu.CHARACTER_SET)!==void 0;o&&(i=r.get(uu.CHARACTER_SET).toString());var s=this.chooseMode(e,i),a=new vt;if(s===Ue.BYTE&&(o||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=st.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,a)}this.appendModeInfo(s,a);var u=new vt;this.appendBytes(e,s,u,i);var c;if(r!==null&&r.get(uu.QR_VERSION)!==void 0){var h=Number.parseInt(r.get(uu.QR_VERSION).toString(),10);c=Zi.getVersionForNumber(h);var d=this.calculateBitsNeeded(s,a,u,c);if(!this.willFit(d,c,n))throw new Ve("Data too big for requested version")}else c=this.recommendVersion(n,s,a,u);var p=new vt;p.appendBitArray(a);var m=s===Ue.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,c,s,p),p.appendBitArray(u);var w=c.getECBlocksForLevel(n),I=c.getTotalCodewords()-w.getTotalECCodewords();this.terminateBits(I,p);var y=this.interleaveWithECBytes(p,c.getTotalCodewords(),I,w.getNumBlocks()),v=new u0;v.setECLevel(n),v.setMode(s),v.setVersion(c);var x=c.getDimensionForVersion(),T=new j8(x,x),P=this.chooseMaskPattern(y,n,c,T);return v.setMaskPattern(P),kv.buildMatrix(y,n,c,P,T),v.setMatrix(T),v},t.recommendVersion=function(e,n,r,i){var o=this.calculateBitsNeeded(n,r,i,Zi.getVersionForNumber(1)),s=this.chooseVersion(o,e),a=this.calculateBitsNeeded(n,r,i,s);return this.chooseVersion(a,e)},t.calculateBitsNeeded=function(e,n,r,i){return n.getSize()+e.getCharacterCountBits(i)+r.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,n){if(n===void 0&&(n=null),st.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return Ue.KANJI;for(var r=!1,i=!1,o=0,s=e.length;o<s;++o){var a=e.charAt(o);if(t.isDigit(a))r=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return Ue.BYTE}return i?Ue.ALPHANUMERIC:r?Ue.NUMERIC:Ue.BYTE},t.isOnlyDoubleByteKanji=function(e){var n;try{n=Nn.encode(e,st.SJIS)}catch{return!1}var r=n.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var o=n[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},t.chooseMaskPattern=function(e,n,r,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,a=0;a<u0.NUM_MASK_PATTERNS;a++){kv.buildMatrix(e,n,r,a,i);var l=this.calculateMaskPenalty(i);l<o&&(o=l,s=a)}return s},t.chooseVersion=function(e,n){for(var r=1;r<=40;r++){var i=Zi.getVersionForNumber(r);if(t.willFit(e,i,n))return i}throw new Ve("Data too big")},t.willFit=function(e,n,r){var i=n.getTotalCodewords(),o=n.getECBlocksForLevel(r),s=o.getTotalECCodewords(),a=i-s,l=(e+7)/8;return a>=l},t.terminateBits=function(e,n){var r=e*8;if(n.getSize()>r)throw new Ve("data bits cannot fit in the QR Code"+n.getSize()+" > "+r);for(var i=0;i<4&&n.getSize()<r;++i)n.appendBit(!1);var o=n.getSize()&7;if(o>0)for(var i=o;i<8;i++)n.appendBit(!1);for(var s=e-n.getSizeInBytes(),i=0;i<s;++i)n.appendBits(i&1?17:236,8);if(n.getSize()!==r)throw new Ve("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,n,r,i,o,s){if(i>=r)throw new Ve("Block ID too large");var a=e%r,l=r-a,u=Math.floor(e/r),c=u+1,h=Math.floor(n/r),d=h+1,p=u-h,m=c-d;if(p!==m)throw new Ve("EC bytes mismatch");if(r!==l+a)throw new Ve("RS blocks mismatch");if(e!==(h+p)*l+(d+m)*a)throw new Ve("Total bytes mismatch");i<l?(o[0]=h,s[0]=p):(o[0]=d,s[0]=m)},t.interleaveWithECBytes=function(e,n,r,i){var o,s,a,l;if(e.getSizeInBytes()!==r)throw new Ve("Number of bits and data bytes does not match");for(var u=0,c=0,h=0,d=new Array,p=0;p<i;++p){var m=new Int32Array(1),w=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(n,r,i,p,m,w);var I=m[0],y=new Uint8Array(I);e.toBytes(8*u,y,0,I);var v=t.generateECBytes(y,w[0]);d.push(new z8(y,v)),c=Math.max(c,I),h=Math.max(h,v.length),u+=m[0]}if(r!==u)throw new Ve("Data bytes does not match offset");for(var x=new vt,p=0;p<c;++p)try{for(var T=(o=void 0,Mv(d)),P=T.next();!P.done;P=T.next()){var k=P.value,y=k.getDataBytes();p<y.length&&x.appendBits(y[p],8)}}catch(b){o={error:b}}finally{try{P&&!P.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}for(var p=0;p<h;++p)try{for(var A=(a=void 0,Mv(d)),E=A.next();!E.done;E=A.next()){var k=E.value,v=k.getErrorCorrectionBytes();p<v.length&&x.appendBits(v[p],8)}}catch(b){a={error:b}}finally{try{E&&!E.done&&(l=A.return)&&l.call(A)}finally{if(a)throw a.error}}if(n!==x.getSizeInBytes())throw new Ve("Interleaving error: "+n+" and "+x.getSizeInBytes()+" differ.");return x},t.generateECBytes=function(e,n){for(var r=e.length,i=new Int32Array(r+n),o=0;o<r;o++)i[o]=e[o]&255;new _x(sn.QR_CODE_FIELD_256).encode(i,n);for(var s=new Uint8Array(n),o=0;o<n;o++)s[o]=i[r+o];return s},t.appendModeInfo=function(e,n){n.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,n,r,i){var o=r.getCharacterCountBits(n);if(e>=1<<o)throw new Ve(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},t.appendBytes=function(e,n,r,i){switch(n){case Ue.NUMERIC:t.appendNumericBytes(e,r);break;case Ue.ALPHANUMERIC:t.appendAlphanumericBytes(e,r);break;case Ue.BYTE:t.append8BitBytes(e,r,i);break;case Ue.KANJI:t.appendKanjiBytes(e,r);break;default:throw new Ve("Invalid mode: "+n)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var n=t.getDigit(e);return n>=0&&n<=9},t.appendNumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var o=t.getDigit(e.charAt(i));if(i+2<r){var s=t.getDigit(e.charAt(i+1)),a=t.getDigit(e.charAt(i+2));n.appendBits(o*100+s*10+a,10),i+=3}else if(i+1<r){var s=t.getDigit(e.charAt(i+1));n.appendBits(o*10+s,7),i+=2}else n.appendBits(o,4),i++}},t.appendAlphanumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var o=t.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new Ve;if(i+1<r){var s=t.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new Ve;n.appendBits(o*45+s,11),i+=2}else n.appendBits(o,6),i++}},t.append8BitBytes=function(e,n,r){var i;try{i=Nn.encode(e,r)}catch(l){throw new Ve(l)}for(var o=0,s=i.length;o!==s;o++){var a=i[o];n.appendBits(a,8)}},t.appendKanjiBytes=function(e,n){var r;try{r=Nn.encode(e,st.SJIS)}catch(h){throw new Ve(h)}for(var i=r.length,o=0;o<i;o+=2){var s=r[o]&255,a=r[o+1]&255,l=s<<8&4294967295|a,u=-1;if(l>=33088&&l<=40956?u=l-33088:l>=57408&&l<=60351&&(u=l-49472),u===-1)throw new Ve("Invalid byte sequence");var c=(u>>8)*192+(u&255);n.appendBits(c,13)}},t.appendECI=function(e,n){n.appendBits(Ue.ECI.getBits(),4),n.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=st.UTF8.getName(),t})();var H8=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){H8(e,t);function e(n,r,i,o,s,a,l,u){var c=t.call(this,a,l)||this;if(c.yuvData=n,c.dataWidth=r,c.dataHeight=i,c.left=o,c.top=s,o+a>r||s+l>i)throw new oe("Crop rectangle does not fit within image data.");return u&&c.reverseHorizontal(a,l),c}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new oe("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(n+this.top)*this.dataWidth+this.left;return Le.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=n*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Le.arraycopy(this.yuvData,s,o,0,i),o;for(var a=0;a<r;a++){var l=a*n;Le.arraycopy(this.yuvData,s,o,l,n),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var n=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(n*r),o=this.yuvData,s=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var l=a*n,u=0;u<n;u++){var c=o[s+u*e.THUMBNAIL_SCALE_FACTOR]&255;i[l+u]=4278190080|c*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(n,r){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<r;o++,s+=this.dataWidth)for(var a=s+n/2,l=s,u=s+n-1;l<a;l++,u--){var c=i[l];i[l]=i[u],i[u]=c}},e.prototype.invert=function(){return new B1(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(tf);var W8=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){W8(e,t);function e(n,r,i,o,s,a,l){var u=t.call(this,r,i)||this;if(u.dataWidth=o,u.dataHeight=s,u.left=a,u.top=l,n.BYTES_PER_ELEMENT===4){for(var c=r*i,h=new Uint8ClampedArray(c),d=0;d<c;d++){var p=n[d],m=p>>16&255,w=p>>7&510,I=p&255;h[d]=(m+w+I)/4&255}u.luminances=h}else u.luminances=n;if(o===void 0&&(u.dataWidth=r),s===void 0&&(u.dataHeight=i),a===void 0&&(u.left=0),l===void 0&&(u.top=0),u.left+r>u.dataWidth||u.top+i>u.dataHeight)throw new oe("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new oe("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(n+this.top)*this.dataWidth+this.left;return Le.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=n*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Le.arraycopy(this.luminances,s,o,0,i),o;for(var a=0;a<r;a++){var l=a*n;Le.arraycopy(this.luminances,s,o,l,n),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+n,this.top+r)},e.prototype.invert=function(){return new B1(this)},e})(tf);var G8=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),K8=function(t){G8(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(n){return this.getCharacterSetECIByName(n)},e}(st),X8=function(){function t(){}return t.ISO_8859_1=st.ISO8859_1,t}(),c0,q8=301,Y8=function(t,e){for(var n=1,r=0;r<255;r++)e[r]=n,t[n]=r,n*=2,n>=256&&(n^=q8);return{LOG:t,ALOG:e}};c0=Y8([],[]),c0.LOG;c0.ALOG;var Lv;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Lv||(Lv={}));var Fv=129,wx=230,Q8=231,Z8=235,J8=236,e6=237,t6=238,n6=239,r6=240,Dh=254,i6=254,Bv="[)>05",Vv="[)>06",Uv="",Oe=0,At=1,qt=2,rt=3,dt=4,Ft=5,o6=function(){function t(){}return t.prototype.getEncodingMode=function(){return Oe},t.prototype.encode=function(e){var n=zn.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(n>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=zn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Ft:e.writeCodeword(Q8),e.signalEncoderChange(Ft);return;case At:e.writeCodeword(wx),e.signalEncoderChange(At);return;case rt:e.writeCodeword(t6),e.signalEncoderChange(rt);break;case qt:e.writeCodeword(n6),e.signalEncoderChange(qt);break;case dt:e.writeCodeword(r6),e.signalEncoderChange(dt);break;default:throw new Error("Illegal mode: "+i)}else zn.isExtendedASCII(r)?(e.writeCodeword(Z8),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,n){if(zn.isDigit(e)&&zn.isDigit(n)){var r=(e-48)*10+(n-48);return r+130}throw new Error("not digits: "+e+n)},t}(),s6=function(){function t(){}return t.prototype.getEncodingMode=function(){return Ft},t.prototype.encode=function(e){var n=new de;for(n.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();n.append(r),e.pos++;var i=zn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Oe);break}}var o=n.length()-1,s=1,a=e.getCodewordCount()+o+s;e.updateSymbolInfo(a);var l=e.getSymbolInfo().getDataCapacity()-a>0;if(e.hasMoreCharacters()||l)if(o<=249)n.setCharAt(0,we.getCharAt(o));else if(o<=1555)n.setCharAt(0,we.getCharAt(Math.floor(o/250)+249)),n.insert(1,we.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var u=0,r=n.length();u<r;u++)e.writeCodeword(this.randomize255State(n.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,n){var r=149*n%255+1,i=e+r;return i<=255?i:i-256},t}(),z1=function(){function t(){}return t.prototype.getEncodingMode=function(){return At},t.prototype.encodeMaximal=function(e){for(var n=new de,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,n),n.length()%3===0&&(i=e.pos,o=n.length())}if(o!==n.length()){var a=Math.floor(n.length()/3*2),l=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(l);var u=e.getSymbolInfo().getDataCapacity()-l,c=Math.floor(n.length()%3);(c===2&&u!==2||c===1&&(r>3||u!==1))&&(e.pos=i)}n.length()>0&&e.writeCodeword(wx),this.handleEOD(e,n)},t.prototype.encode=function(e){for(var n=new de;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,n),o=Math.floor(n.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var a=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var l=new de;for(n.length()%3===2&&a!==2&&(i=this.backtrackOneCharacter(e,n,l,i));n.length()%3===1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,n,l,i);break}var u=n.length();if(u%3===0){var c=zn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(c!==this.getEncodingMode()){e.signalEncoderChange(Oe);break}}}this.handleEOD(e,n)},t.prototype.backtrackOneCharacter=function(e,n,r,i){var o=n.length(),s=n.toString().substring(0,o-i);n.setLengthToZero(),n.append(s),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,r),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,n){e.writeCodewords(this.encodeToCodewords(n.toString()));var r=n.toString().substring(3);n.setLengthToZero(),n.append(r)},t.prototype.handleEOD=function(e,n){var r=Math.floor(n.length()/3*2),i=n.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(Dh)}else if(s===1&&i===1){for(;n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(Dh),e.pos--}else if(i===0){for(;n.length()>=3;)this.writeNextTriplet(e,n);(s>0||e.hasMoreCharacters())&&e.writeCodeword(Dh)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Oe)},t.prototype.encodeChar=function(e,n){if(e===" ".charCodeAt(0))return n.append(3),1;if(e>="0".charCodeAt(0)&&e<="9".charCodeAt(0))return n.append(e-48+4),1;if(e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0))return n.append(e-65+14),1;if(e<" ".charCodeAt(0))return n.append(0),n.append(e),2;if(e<="/".charCodeAt(0))return n.append(1),n.append(e-33),2;if(e<="@".charCodeAt(0))return n.append(1),n.append(e-58+15),2;if(e<="_".charCodeAt(0))return n.append(1),n.append(e-91+22),2;if(e<=127)return n.append(2),n.append(e-96),2;n.append("1");var r=2;return r+=this.encodeChar(e-128,n),r},t.prototype.encodeToCodewords=function(e){var n=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=n/256,i=n%256,o=new de;return o.append(r),o.append(i),o.toString()},t}(),a6=function(){function t(){}return t.prototype.getEncodingMode=function(){return dt},t.prototype.encode=function(e){for(var n=new de;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,n),e.pos++;var i=n.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(n.toString()));var o=n.toString().substring(4);n.setLengthToZero(),n.append(o);var s=zn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(Oe);break}}}n.append(we.getCharAt(31)),this.handleEOD(e,n)},t.prototype.handleEOD=function(e,n){try{var r=n.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,a=this.encodeToCodewords(n.toString()),l=!e.hasMoreCharacters(),u=l&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))}u?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(a)}finally{e.signalEncoderChange(Oe)}},t.prototype.encodeChar=function(e,n){e>=" ".charCodeAt(0)&&e<="?".charCodeAt(0)?n.append(e):e>="@".charCodeAt(0)&&e<="^".charCodeAt(0)?n.append(we.getCharAt(e-64)):zn.illegalCharacter(we.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var n=e.length;if(n===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=n>=2?e.charAt(1).charCodeAt(0):0,o=n>=3?e.charAt(2).charCodeAt(0):0,s=n>=4?e.charAt(3).charCodeAt(0):0,a=(r<<18)+(i<<12)+(o<<6)+s,l=a>>16&255,u=a>>8&255,c=a&255,h=new de;return h.append(l),n>=2&&h.append(u),n>=3&&h.append(c),h.toString()},t}(),l6=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),u6=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Se=function(){function t(e,n,r,i,o,s,a,l){a===void 0&&(a=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=n,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=a,this.rsBlockError=l}return t.lookup=function(e,n,r,i,o){var s,a;n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var l=u6(f6),u=l.next();!u.done;u=l.next()){var c=u.value;if(!(n===1&&c.rectangular)&&!(n===2&&!c.rectangular)&&!(r!=null&&(c.getSymbolWidth()<r.getWidth()||c.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(c.getSymbolWidth()>i.getWidth()||c.getSymbolHeight()>i.getHeight()))&&e<=c.dataCapacity)return c}}catch(h){s={error:h}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),c6=function(t){l6(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},e}(Se),f6=[new Se(!1,3,5,8,8,1),new Se(!1,5,7,10,10,1),new Se(!0,5,7,16,6,1),new Se(!1,8,10,12,12,1),new Se(!0,10,11,14,6,2),new Se(!1,12,12,14,14,1),new Se(!0,16,14,24,10,1),new Se(!1,18,14,16,16,1),new Se(!1,22,18,18,18,1),new Se(!0,22,18,16,10,2),new Se(!1,30,20,20,20,1),new Se(!0,32,24,16,14,2),new Se(!1,36,24,22,22,1),new Se(!1,44,28,24,24,1),new Se(!0,49,28,22,14,2),new Se(!1,62,36,14,14,4),new Se(!1,86,42,16,16,4),new Se(!1,114,48,18,18,4),new Se(!1,144,56,20,20,4),new Se(!1,174,68,22,22,4),new Se(!1,204,84,24,24,4,102,42),new Se(!1,280,112,14,14,16,140,56),new Se(!1,368,144,16,16,16,92,36),new Se(!1,456,192,18,18,16,114,48),new Se(!1,576,224,20,20,16,144,56),new Se(!1,696,272,22,22,16,174,68),new Se(!1,816,336,24,24,16,136,56),new Se(!1,1050,408,18,18,36,175,68),new Se(!1,1304,496,20,20,36,163,62),new c6],h6=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var n=e.split("").map(function(a){return a.charCodeAt(0)}),r=new de,i=0,o=n.length;i<o;i++){var s=String.fromCharCode(n[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new de,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,n){this.minSize=e,this.maxSize=n},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Se.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),d6=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),p6=function(t){d6(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return rt},e.prototype.encode=function(n){for(var r=new de;n.hasMoreCharacters();){var i=n.getCurrentChar();n.pos++,this.encodeChar(i,r);var o=r.length();if(o%3===0){this.writeNextTriplet(n,r);var s=zn.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){n.signalEncoderChange(Oe);break}}}this.handleEOD(n,r)},e.prototype.encodeChar=function(n,r){switch(n){case 13:r.append(0);break;case"*".charCodeAt(0):r.append(1);break;case">".charCodeAt(0):r.append(2);break;case" ".charCodeAt(0):r.append(3);break;default:n>="0".charCodeAt(0)&&n<="9".charCodeAt(0)?r.append(n-48+4):n>="A".charCodeAt(0)&&n<="Z".charCodeAt(0)?r.append(n-65+14):zn.illegalCharacter(we.getCharAt(n));break}return 1},e.prototype.handleEOD=function(n,r){n.updateSymbolInfo();var i=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),o=r.length();n.pos-=o,(n.getRemainingCharacters()>1||i>1||n.getRemainingCharacters()!==i)&&n.writeCodeword(i6),n.getNewEncoding()<0&&n.signalEncoderChange(Oe)},e}(z1),g6=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),m6=function(t){g6(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return qt},e.prototype.encodeChar=function(n,r){if(n===" ".charCodeAt(0))return r.append(3),1;if(n>="0".charCodeAt(0)&&n<="9".charCodeAt(0))return r.append(n-48+4),1;if(n>="a".charCodeAt(0)&&n<="z".charCodeAt(0))return r.append(n-97+14),1;if(n<" ".charCodeAt(0))return r.append(0),r.append(n),2;if(n<="/".charCodeAt(0))return r.append(1),r.append(n-33),2;if(n<="@".charCodeAt(0))return r.append(1),r.append(n-58+15),2;if(n>="[".charCodeAt(0)&&n<="_".charCodeAt(0))return r.append(1),r.append(n-91+22),2;if(n==="`".charCodeAt(0))return r.append(2),r.append(0),2;if(n<="Z".charCodeAt(0))return r.append(2),r.append(n-65+1),2;if(n<=127)return r.append(2),r.append(n-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(n-128,r),i},e}(z1),v6=function(){function t(){}return t.randomize253State=function(e){var n=149*e%253+1,r=Fv+n;return r<=254?r:r-254},t.encodeHighLevel=function(e,n,r,i,o){n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new z1,a=[new o6,s,new m6,new p6,new a6,new s6],l=new h6(e);l.setSymbolShape(n),l.setSizeConstraints(r,i),e.startsWith(Bv)&&e.endsWith(Uv)?(l.writeCodeword(J8),l.setSkipAtEnd(2),l.pos+=Bv.length):e.startsWith(Vv)&&e.endsWith(Uv)&&(l.writeCodeword(e6),l.setSkipAtEnd(2),l.pos+=Vv.length);var u=Oe;for(o&&(s.encodeMaximal(l),u=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)a[u].encode(l),l.getNewEncoding()>=0&&(u=l.getNewEncoding(),l.resetEncoderSignal());var c=l.getCodewordCount();l.updateSymbolInfo();var h=l.getSymbolInfo().getDataCapacity();c<h&&u!==Oe&&u!==Ft&&u!==dt&&l.writeCodeword("");var d=l.getCodewords();for(d.length()<h&&d.append(Fv);d.length()<h;)d.append(this.randomize253State(d.length()+1));return l.getCodewords().toString()},t.lookAheadTest=function(e,n,r){var i=this.lookAheadTestIntern(e,n,r);if(r===rt&&i===rt){for(var o=Math.min(n+3,e.length),s=n;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return Oe}else if(r===dt&&i===dt){for(var o=Math.min(n+4,e.length),s=n;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return Oe}return i},t.lookAheadTestIntern=function(e,n,r){if(n>=e.length)return r;var i;r===Oe?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var o=0,s=new Uint8Array(6),a=[];;){if(n+o===e.length){at.fill(s,0),at.fill(a,0);var l=this.findMinimums(i,a,ge.MAX_VALUE,s),u=this.getMinimumCount(s);if(a[Oe]===l)return Oe;if(u===1){if(s[Ft]>0)return Ft;if(s[dt]>0)return dt;if(s[qt]>0)return qt;if(s[rt]>0)return rt}return At}var c=e.charCodeAt(n+o);if(o++,this.isDigit(c)?i[Oe]+=.5:this.isExtendedASCII(c)?(i[Oe]=Math.ceil(i[Oe]),i[Oe]+=2):(i[Oe]=Math.ceil(i[Oe]),i[Oe]++),this.isNativeC40(c)?i[At]+=2/3:this.isExtendedASCII(c)?i[At]+=8/3:i[At]+=4/3,this.isNativeText(c)?i[qt]+=2/3:this.isExtendedASCII(c)?i[qt]+=8/3:i[qt]+=4/3,this.isNativeX12(c)?i[rt]+=2/3:this.isExtendedASCII(c)?i[rt]+=13/3:i[rt]+=10/3,this.isNativeEDIFACT(c)?i[dt]+=3/4:this.isExtendedASCII(c)?i[dt]+=17/4:i[dt]+=13/4,this.isSpecialB256(c)?i[Ft]+=4:i[Ft]++,o>=4){if(at.fill(s,0),at.fill(a,0),this.findMinimums(i,a,ge.MAX_VALUE,s),a[Oe]<this.min(a[Ft],a[At],a[qt],a[rt],a[dt]))return Oe;if(a[Ft]<a[Oe]||a[Ft]+1<this.min(a[At],a[qt],a[rt],a[dt]))return Ft;if(a[dt]+1<this.min(a[Ft],a[At],a[qt],a[rt],a[Oe]))return dt;if(a[qt]+1<this.min(a[Ft],a[At],a[dt],a[rt],a[Oe]))return qt;if(a[rt]+1<this.min(a[Ft],a[At],a[dt],a[qt],a[Oe]))return rt;if(a[At]+1<this.min(a[Oe],a[Ft],a[dt],a[qt])){if(a[At]<a[rt])return At;if(a[At]===a[rt]){for(var h=n+o+1;h<e.length;){var d=e.charCodeAt(h);if(this.isX12TermSep(d))return rt;if(!this.isNativeX12(d))break;h++}return At}}}}},t.min=function(e,n,r,i,o){var s=Math.min(e,Math.min(n,Math.min(r,i)));return o===void 0?s:Math.min(s,o)},t.findMinimums=function(e,n,r,i){for(var o=0;o<6;o++){var s=n[o]=Math.ceil(e[o]);r>s&&(r=s,at.fill(i,0)),r===s&&(i[o]=i[o]+1)}return r},t.getMinimumCount=function(e){for(var n=0,r=0;r<6;r++)n+=e[r];return n||0},t.isDigit=function(e){return e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},t.isNativeText=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="a".charCodeAt(0)&&e<="z".charCodeAt(0)},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},t.isX12TermSep=function(e){return e===13||e==="*".charCodeAt(0)||e===">".charCodeAt(0)},t.isNativeEDIFACT=function(e){return e>=" ".charCodeAt(0)&&e<="^".charCodeAt(0)},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,n){n===void 0&&(n=0);for(var r=e.length,i=n;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-n},t.illegalCharacter=function(e){var n=ge.toHexString(e.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+e+" (0x"+n+")")},t}();const zn=v6;var kh=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jv=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Nn.encode(e,this.charset)!=null}catch{return!1}},t}(),y6=function(){function t(e,n,r){var i,o,s,a,l,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(S){return new jv(K8.forName(S))}),this.encoders=[];var c=[];c.push(new jv(X8.ISO_8859_1));for(var h=n!=null&&n.name.startsWith("UTF"),d=0;d<e.length;d++){var p=!1;try{for(var m=(i=void 0,kh(c)),w=m.next();!w.done;w=m.next()){var I=w.value,y=e.charAt(d),v=y.charCodeAt(0);if(v===r||I.canEncode(y)){p=!0;break}}}catch(S){i={error:S}}finally{try{w&&!w.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}if(!p)try{for(var x=(s=void 0,kh(this.ENCODERS)),T=x.next();!T.done;T=x.next()){var I=T.value;if(I.canEncode(e.charAt(d))){c.push(I),p=!0;break}}}catch(S){s={error:S}}finally{try{T&&!T.done&&(a=x.return)&&a.call(x)}finally{if(s)throw s.error}}p||(h=!0)}if(c.length===1&&!h)this.encoders=[c[0]];else{this.encoders=[];var P=0;try{for(var k=kh(c),A=k.next();!A.done;A=k.next()){var I=A.value;this.encoders[P++]=I}}catch(S){l={error:S}}finally{try{A&&!A.done&&(u=k.return)&&u.call(k)}finally{if(l)throw l.error}}}var E=-1;if(n!=null){for(var d=0;d<this.encoders.length;d++)if(this.encoders[d]!=null&&n.name===this.encoders[d].name){E=d;break}}this.priorityEncoderIndex=E}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return Nn.encode(we.getCharAt(e),this.encoders[n].name)},t}(),_6=3,w6=function(){function t(e,n,r){this.fnc1=r;var i=new y6(e,n,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,n){if(e+n-1>=this.bytes.length)return!1;for(var r=0;r<n;r++)if(this.isECI(e+r))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,n){if(e<0||e>n||n>this.length())throw new Error(""+e);for(var r=new de,i=e;i<n;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,n,r){(e[n][r.encoderIndex]==null||e[n][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[n][r.encoderIndex]=r)},t.prototype.addEdges=function(e,n,r,i,o,s){var a=e.charAt(i).charCodeAt(0),l=0,u=n.length();n.getPriorityEncoderIndex()>=0&&(a===s||n.canEncode(a,n.getPriorityEncoderIndex()))&&(l=n.getPriorityEncoderIndex(),u=l+1);for(var c=l;c<u;c++)(a===s||n.canEncode(a,c))&&this.addEdge(r,i+1,new $v(a,n,c,o,s))},t.prototype.encodeMinimally=function(e,n,r){var i=e.length,o=new $v[i+1][n.length()];this.addEdges(e,n,o,0,null,r);for(var s=1;s<=i;s++){for(var a=0;a<n.length();a++)o[s][a]!=null&&s<i&&this.addEdges(e,n,o,s,o[s][a],r);for(var a=0;a<n.length();a++)o[s-1][a]=null}for(var l=-1,u=ge.MAX_VALUE,a=0;a<n.length();a++)if(o[i][a]!=null){var c=o[i][a];c.cachedTotalSize<u&&(u=c.cachedTotalSize,l=a)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var h=[],d=o[i][l];d!=null;){if(d.isFNC1())h.unshift(1e3);else for(var p=n.encode(d.c,d.encoderIndex),s=p.length-1;s>=0;s--)h.unshift(p[s]&255);var m=d.previous===null?0:d.previous.encoderIndex;m!==d.encoderIndex&&h.unshift(256+n.getECIValue(d.encoderIndex)),d=d.previous}for(var w=[],s=0;s<w.length;s++)w[s]=h[s];return w},t}(),$v=function(){function t(e,n,r,i,o){this.c=e,this.encoderSet=n,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:n.encode(e,r).length,a=i===null?0:i.encoderIndex;a!==r&&(s+=_6),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),x6=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();globalThis&&globalThis.__values;var E6=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o};globalThis&&globalThis.__spread;var zv;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(zv||(zv={}));(function(t){x6(e,t);function e(n,r,i,o,s){var a=t.call(this,n,r,i)||this;return a.shape=o,a.macroId=s,a}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(w6);var A6=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),Hv=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,n){return e.sort(n)[0]},t}(),I6=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),T6=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),H1=function(t){T6(e,t);function e(n,r,i){var o=t.call(this,n)||this;return o.value=r,o.bitCount=i,o}return e.prototype.appendTo=function(n,r){n.appendBits(this.value,this.bitCount)},e.prototype.add=function(n,r){return new e(this,n,r)},e.prototype.addBinaryShift=function(n,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,n,r)},e.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+ge.toBinaryString(n|1<<this.bitCount).substring(1)+">"},e}(I6),S6=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),C6=function(t){S6(e,t);function e(n,r,i){var o=t.call(this,n,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(n,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):i===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(n,r){return new e(this,n,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(H1);function b6(t,e,n){return new C6(t,e,n)}function ta(t,e,n){return new H1(t,e,n)}var R6=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],pi=0,gc=1,bn=2,xx=3,rr=4,N6=new H1(null,0,0),Mh=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,917504+14336+928+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,655360+928+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,655360+992+28,655360+992+30,655360+992+29,0])],O6=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function P6(t){var e,n;try{for(var r=O6(t),i=r.next();!i.done;i=r.next()){var o=i.value;at.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return t[pi][rr]=0,t[gc][rr]=0,t[gc][pi]=28,t[xx][rr]=0,t[bn][rr]=0,t[bn][pi]=15,t}var Ex=P6(at.createInt32Array(6,6)),D6=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k6=function(){function t(e,n,r,i){this.token=e,this.mode=n,this.binaryShiftByteCount=r,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,n){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=Mh[this.mode][e];i=ta(i,o&65535,o>>16),r+=o>>16}var s=e===bn?4:5;return i=ta(i,n,s),new t(i,e,0,r+s)},t.prototype.shiftAndAppend=function(e,n){var r=this.token,i=this.mode===bn?4:5;return r=ta(r,Ex[this.mode][e],i),r=ta(r,n,5),new t(r,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var n=this.token,r=this.mode,i=this.bitCount;if(this.mode===rr||this.mode===bn){var o=Mh[r][pi];n=ta(n,o&65535,o>>16),i+=o>>16,r=pi}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new t(n,r,this.binaryShiftByteCount+1,i+s);return a.binaryShiftByteCount===2047+31&&(a=a.endBinaryShift(e+1)),a},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var n=this.token;return n=b6(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(n,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var n=this.bitCount+(Mh[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount},t.prototype.toBitArray=function(e){for(var n,r,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new vt;try{for(var a=D6(i),l=a.next();!l.done;l=a.next()){var u=l.value;u.appendTo(s,e)}}catch(c){n={error:c}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return s},t.prototype.toString=function(){return we.format("%s bits=%d bytes=%d",R6[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(N6,pi,0,0),t}();function M6(t){var e=we.getCharCode(" "),n=we.getCharCode("."),r=we.getCharCode(",");t[pi][e]=1;for(var i=we.getCharCode("Z"),o=we.getCharCode("A"),s=o;s<=i;s++)t[pi][s]=s-o+2;t[gc][e]=1;for(var a=we.getCharCode("z"),l=we.getCharCode("a"),s=l;s<=a;s++)t[gc][s]=s-l+2;t[bn][e]=1;for(var u=we.getCharCode("9"),c=we.getCharCode("0"),s=c;s<=u;s++)t[bn][s]=s-c+2;t[bn][r]=12,t[bn][n]=13;for(var h=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],d=0;d<h.length;d++)t[xx][we.getCharCode(h[d])]=d;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<p.length;d++)we.getCharCode(p[d])>0&&(t[rr][we.getCharCode(p[d])]=d);return t}var Lh=M6(at.createInt32Array(5,256)),cu=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L6=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=we.getCharCode(" "),n=we.getCharCode(`
`),r=Hv.singletonList(k6.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case we.getCharCode("\r"):o=s===n?2:0;break;case we.getCharCode("."):o=s===e?3:0;break;case we.getCharCode(","):o=s===e?4:0;break;case we.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(r=t.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var a=Hv.min(r,function(l,u){return l.getBitCount()-u.getBitCount()});return a.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,n){var r,i,o=[];try{for(var s=cu(e),a=s.next();!a.done;a=s.next()){var l=a.value;this.updateStateForChar(l,n,o)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return t.simplifyStates(o)},t.prototype.updateStateForChar=function(e,n,r){for(var i=this.text[n]&255,o=Lh[e.getMode()][i]>0,s=null,a=0;a<=rr;a++){var l=Lh[a][i];if(l>0){if(s==null&&(s=e.endBinaryShift(n)),!o||a===e.getMode()||a===bn){var u=s.latchAndAppend(a,l);r.push(u)}if(!o&&Ex[e.getMode()][a]>=0){var c=s.shiftAndAppend(a,l);r.push(c)}}}if(e.getBinaryShiftByteCount()>0||Lh[e.getMode()][i]===0){var h=e.addBinaryShiftChar(n);r.push(h)}},t.updateStateListForPair=function(e,n,r){var i,o,s=[];try{for(var a=cu(e),l=a.next();!l.done;l=a.next()){var u=l.value;this.updateStateForPair(u,n,r,s)}}catch(c){i={error:c}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(s)},t.updateStateForPair=function(e,n,r,i){var o=e.endBinaryShift(n);if(i.push(o.latchAndAppend(rr,r)),e.getMode()!==rr&&i.push(o.shiftAndAppend(rr,r)),r===3||r===4){var s=o.latchAndAppend(bn,16-r).latchAndAppend(bn,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);i.push(a)}},t.simplifyStates=function(e){var n,r,i,o,s=[];try{for(var a=cu(e),l=a.next();!l.done;l=a.next()){var u=l.value,c=!0,h=function(I){if(I.isBetterThanOrEqualTo(u))return c=!1,"break";u.isBetterThanOrEqualTo(I)&&(s=s.filter(function(y){return y!==I}))};try{for(var d=(i=void 0,cu(s)),p=d.next();!p.done;p=d.next()){var m=p.value,w=h(m);if(w==="break")break}}catch(I){i={error:I}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}c&&s.push(u)}}catch(I){n={error:I}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return s},t}(),F6=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,n,r){var i=new L6(e).encode(),o=ge.truncDivision(i.getSize()*n,100)+11,s=i.getSize()+o,a,l,u,c,h;if(r!==t.DEFAULT_AZTEC_LAYERS){if(a=r<0,l=Math.abs(r),l>(a?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new oe(we.format("Illegal value %s for layers",r));u=t.totalBitsInLayer(l,a),c=t.WORD_SIZE[l];var d=u-u%c;if(h=t.stuffBits(i,c),h.getSize()+o>d)throw new oe("Data to large for user specified layer");if(a&&h.getSize()>c*64)throw new oe("Data to large for user specified layer")}else{c=0,h=null;for(var p=0;;p++){if(p>t.MAX_NB_BITS)throw new oe("Data too large for an Aztec code");if(a=p<=3,l=a?p+1:p,u=t.totalBitsInLayer(l,a),!(s>u)){(h==null||c!==t.WORD_SIZE[l])&&(c=t.WORD_SIZE[l],h=t.stuffBits(i,c));var d=u-u%c;if(!(a&&h.getSize()>c*64)&&h.getSize()+o<=d)break}}}var m=t.generateCheckWords(h,u,c),w=h.getSize()/c,I=t.generateModeMessage(a,l,w),y=(a?11:14)+l*4,v=new Int32Array(y),x;if(a){x=y;for(var p=0;p<v.length;p++)v[p]=p}else{x=y+1+2*ge.truncDivision(ge.truncDivision(y,2)-1,15);for(var T=ge.truncDivision(y,2),P=ge.truncDivision(x,2),p=0;p<T;p++){var k=p+ge.truncDivision(p,15);v[T-p-1]=P-k-1,v[T+p]=P+k+1}}for(var A=new fr(x),p=0,E=0;p<l;p++){for(var S=(l-p)*4+(a?9:12),b=0;b<S;b++)for(var D=b*2,M=0;M<2;M++)m.get(E+D+M)&&A.set(v[p*2+M],v[p*2+b]),m.get(E+S*2+D+M)&&A.set(v[p*2+b],v[y-1-p*2-M]),m.get(E+S*4+D+M)&&A.set(v[y-1-p*2-M],v[y-1-p*2-b]),m.get(E+S*6+D+M)&&A.set(v[y-1-p*2-b],v[p*2+M]);E+=S*8}if(t.drawModeMessage(A,a,x,I),a)t.drawBullsEye(A,ge.truncDivision(x,2),5);else{t.drawBullsEye(A,ge.truncDivision(x,2),7);for(var p=0,b=0;p<ge.truncDivision(y,2)-1;p+=15,b+=16)for(var M=ge.truncDivision(x,2)&1;M<x;M+=2)A.set(ge.truncDivision(x,2)-b,M),A.set(ge.truncDivision(x,2)+b,M),A.set(M,ge.truncDivision(x,2)-b),A.set(M,ge.truncDivision(x,2)+b)}var O=new A6;return O.setCompact(a),O.setSize(x),O.setLayers(l),O.setCodeWords(w),O.setMatrix(A),O},t.drawBullsEye=function(e,n,r){for(var i=0;i<r;i+=2)for(var o=n-i;o<=n+i;o++)e.set(o,n-i),e.set(o,n+i),e.set(n-i,o),e.set(n+i,o);e.set(n-r,n-r),e.set(n-r+1,n-r),e.set(n-r,n-r+1),e.set(n+r,n-r),e.set(n+r,n-r+1),e.set(n+r,n+r-1)},t.generateModeMessage=function(e,n,r){var i=new vt;return e?(i.appendBits(n-1,2),i.appendBits(r-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(n-1,5),i.appendBits(r-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,n,r,i){var o=ge.truncDivision(r,2);if(n)for(var s=0;s<7;s++){var a=o-3+s;i.get(s)&&e.set(a,o-5),i.get(s+7)&&e.set(o+5,a),i.get(20-s)&&e.set(a,o+5),i.get(27-s)&&e.set(o-5,a)}else for(var s=0;s<10;s++){var a=o-5+s+ge.truncDivision(s,5);i.get(s)&&e.set(a,o-7),i.get(s+10)&&e.set(o+7,a),i.get(29-s)&&e.set(a,o+7),i.get(39-s)&&e.set(o-7,a)}},t.generateCheckWords=function(e,n,r){var i,o,s=e.getSize()/r,a=new _x(t.getGF(r)),l=ge.truncDivision(n,r),u=t.bitsToWords(e,r,l);a.encode(u,l-s);var c=n%r,h=new vt;h.appendBits(0,c);try{for(var d=F6(Array.from(u)),p=d.next();!p.done;p=d.next()){var m=p.value;h.appendBits(m,r)}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return h},t.bitsToWords=function(e,n,r){var i=new Int32Array(r),o,s;for(o=0,s=e.getSize()/n;o<s;o++){for(var a=0,l=0;l<n;l++)a|=e.get(o*n+l)?1<<n-l-1:0;i[o]=a}return i},t.getGF=function(e){switch(e){case 4:return sn.AZTEC_PARAM;case 6:return sn.AZTEC_DATA_6;case 8:return sn.AZTEC_DATA_8;case 10:return sn.AZTEC_DATA_10;case 12:return sn.AZTEC_DATA_12;default:throw new oe("Unsupported word size "+e)}},t.stuffBits=function(e,n){for(var r=new vt,i=e.getSize(),o=(1<<n)-2,s=0;s<i;s+=n){for(var a=0,l=0;l<n;l++)(s+l>=i||e.get(s+l))&&(a|=1<<n-1-l);(a&o)===o?(r.appendBits(a&o,n),s--):a&o?r.appendBits(a,n):(r.appendBits(a|1,n),s--)}return r},t.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();const B6=(t,e,n,r)=>{var o,s,a,l;const i=[n,{code:e,...r||{}}];if((s=(o=t==null?void 0:t.services)==null?void 0:o.logger)!=null&&s.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);Ji(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(l=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&l.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},Wv={},f0=(t,e,n,r)=>{Ji(n)&&Wv[n]||(Ji(n)&&(Wv[n]=new Date),B6(t,e,n,r))},Ax=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},h0=(t,e,n)=>{t.loadNamespaces(e,Ax(t,n))},Gv=(t,e,n,r)=>{if(Ji(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return h0(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,Ax(t,r))},V6=(t,e,n={})=>!e.languages||!e.languages.length?(f0(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{var o;if(((o=n.bindI18n)==null?void 0:o.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),Ji=t=>typeof t=="string",U6=t=>typeof t=="object"&&t!==null,j6=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,$6={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},z6=t=>$6[t],H6=t=>t.replace(j6,z6);let d0={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:H6};const W6=(t={})=>{d0={...d0,...t}},G6=()=>d0;let Ix;const K6=t=>{Ix=t},X6=()=>Ix,q6={type:"3rdParty",init(t){W6(t.options.react),K6(t)}},Y6=H.createContext();class Q6{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Z6=(t,e)=>{const n=H.useRef();return H.useEffect(()=>{n.current=e?n.current:t},[t,e]),n.current},Tx=(t,e,n,r)=>t.getFixedT(e,n,r),J6=(t,e,n,r)=>H.useCallback(Tx(t,e,n,r),[t,e,n,r]),kn=(t,e={})=>{var T,P,k,A;const{i18n:n}=e,{i18n:r,defaultNS:i}=H.useContext(Y6)||{},o=n||r||X6();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new Q6),!o){f0(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const E=(b,D)=>Ji(D)?D:U6(D)&&Ji(D.defaultValue)?D.defaultValue:Array.isArray(b)?b[b.length-1]:b,S=[E,{},!1];return S.t=E,S.i18n={},S.ready=!1,S}(T=o.options.react)!=null&&T.wait&&f0(o,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...G6(),...o.options.react,...e},{useSuspense:a,keyPrefix:l}=s;let u=t||i||((P=o.options)==null?void 0:P.defaultNS);u=Ji(u)?[u]:u||["translation"],(A=(k=o.reportNamespaces).addUsedNamespaces)==null||A.call(k,u);const c=(o.isInitialized||o.initializedStoreOnce)&&u.every(E=>V6(E,o,s)),h=J6(o,e.lng||null,s.nsMode==="fallback"?u:u[0],l),d=()=>h,p=()=>Tx(o,e.lng||null,s.nsMode==="fallback"?u:u[0],l),[m,w]=H.useState(d);let I=u.join();e.lng&&(I=`${e.lng}${I}`);const y=Z6(I),v=H.useRef(!0);H.useEffect(()=>{const{bindI18n:E,bindI18nStore:S}=s;v.current=!0,!c&&!a&&(e.lng?Gv(o,e.lng,u,()=>{v.current&&w(p)}):h0(o,u,()=>{v.current&&w(p)})),c&&y&&y!==I&&v.current&&w(p);const b=()=>{v.current&&w(p)};return E&&(o==null||o.on(E,b)),S&&(o==null||o.store.on(S,b)),()=>{v.current=!1,o&&(E==null||E.split(" ").forEach(D=>o.off(D,b))),S&&o&&S.split(" ").forEach(D=>o.store.off(D,b))}},[o,I]),H.useEffect(()=>{v.current&&c&&w(d)},[o,l,c]);const x=[m,o,c];if(x.t=m,x.i18n=o,x.ready=c,c||!c&&!a)return x;throw new Promise(E=>{e.lng?Gv(o,e.lng,u,()=>E()):h0(o,u,()=>E())})},eb=({onBarcodeSubmit:t})=>{const[e,n]=H.useState(""),[r,i]=H.useState(!1),[o,s]=H.useState(!1),[a,l]=H.useState(null),u=H.useRef(null),c=H.useRef(null),h=H.useRef(null),{t:d}=kn(),p=()=>{e.trim()&&(t(e.trim()),n(""))},m=y=>{y.key==="Enter"&&p()},w=async()=>{try{if(l(null),i(!0),s(!0),await new Promise(y=>setTimeout(y,100)),!u.current)throw new Error("Video element not available");c.current=new F8;try{const y=await c.current.listVideoInputDevices();if(console.log("Available cameras:",y),y.length===0)throw new Error("No camera devices found");const v=y.find(x=>x.label.toLowerCase().includes("back")||x.label.toLowerCase().includes("environment"))||y[0];console.log("Selected camera:",v),await c.current.decodeFromVideoDevice(v.deviceId,u.current,(x,T)=>{if(x){const P=x.getText();n(P),I(),alert(`Barcode detected: ${P}`)}T&&!(T instanceof V)&&console.error("Scan error:",T)})}catch(y){console.log("Device enumeration failed, trying with constraints:",y);const v={video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}}},x=await navigator.mediaDevices.getUserMedia(v);u.current.srcObject=x,h.current=x,await new Promise(T=>{u.current.onloadedmetadata=()=>T(void 0)}),c.current.decodeFromVideoElement(u.current).then(T=>{const P=T.getText();n(P),I(),alert(`Barcode detected: ${P}`)}).catch(T=>{T instanceof V||console.error("Scan error:",T)})}}catch(y){y instanceof Error?(console.error("Error accessing camera:",y),l(`Unable to access camera: ${y.message}. Please ensure you have granted camera permissions.`)):(console.error("Error accessing camera:",y),l("Unable to access camera: Unknown error. Please ensure you have granted camera permissions.")),i(!1),s(!1)}},I=()=>{c.current&&(c.current.reset(),c.current=null),h.current&&(h.current.getTracks().forEach(y=>y.stop()),h.current=null),u.current&&(u.current.srcObject=null),i(!1),s(!1),l(null)};return H.useEffect(()=>()=>{I()},[]),N.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4",children:[N.jsxs("div",{className:"space-y-3",children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700",children:d("general.enterBarcode")}),N.jsxs("div",{className:"flex flex-wrap gap-2",children:[N.jsx("input",{type:"text",value:e,onChange:y=>n(y.target.value),onKeyDown:m,placeholder:d("general.enterBarcodePlaceholder"),className:"min-w-0 flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),N.jsx("button",{onClick:p,disabled:!e.trim(),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:d("buttons.add")}),N.jsx("button",{onClick:w,disabled:r,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",title:d("general.scanCameraTitle"),children:N.jsx(WC,{className:"w-4 h-4"})})]})]}),r&&N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:N.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-lg w-full mx-4",children:[N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsx("h3",{className:"text-lg font-semibold",children:d("general.scanBarcode")}),N.jsx("button",{onClick:I,className:"p-2 hover:bg-gray-100 rounded-full",children:N.jsx(lx,{className:"w-5 h-5"})})]}),a&&N.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:a}),N.jsxs("div",{className:"relative",children:[N.jsx("video",{ref:u,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full rounded-lg",style:{maxHeight:"300px"}}),N.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:N.jsx("div",{className:"border-2 border-red-500 w-48 h-24 bg-transparent"})}),o&&N.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full flex items-center gap-2",children:[N.jsx(XC,{className:"w-4 h-4 animate-pulse"}),N.jsx("span",{className:"text-sm",children:d("general.scanning")})]})]}),N.jsx("div",{className:"mt-4 text-sm text-gray-600 text-center",children:d("general.scanningInstructions")})]})})]})},tb=({searchTerm:t,setSearchTerm:e,filter:n,setFilter:r,items:i})=>{const o=i.filter(l=>l.amountInStock>0).length,s=i.filter(l=>l.amountInStock===0).length,{t:a}=kn();return N.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4",children:N.jsxs("div",{className:"space-y-3",children:[N.jsxs("div",{className:"relative",children:[N.jsx(qC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),N.jsx("input",{type:"text",value:t,onChange:l=>e(l.target.value),placeholder:a("search.searchPlaceholder"),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),N.jsxs("div",{className:"flex gap-2",children:[N.jsxs("button",{onClick:()=>r("all"),className:`px-3 py-1 rounded-full text-sm ${n==="all"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"}`,children:[a("search.all")," (",i.length,")"]}),N.jsxs("button",{onClick:()=>r("inStock"),className:`px-3 py-1 rounded-full text-sm ${n==="inStock"?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,children:[a("search.inStock")," (",o,")"]}),N.jsxs("button",{onClick:()=>r("outOfStock"),className:`px-3 py-1 rounded-full text-sm ${n==="outOfStock"?"bg-red-500 text-white":"bg-gray-200 text-gray-700"}`,children:[a("search.outOfStock")," (",s,")"]})]})]})})},nb=(t,e,n=80)=>{const[r,i]=H.useState(null),[o,s]=H.useState(0),[a,l]=H.useState(!1),u=H.useRef(null),c=T=>{i({x:T.targetTouches[0].clientX,y:T.targetTouches[0].clientY}),l(!0)},h=T=>{if(!r)return;const P=T.targetTouches[0].clientX,k=T.targetTouches[0].clientY,A=P-r.x,E=k-r.y;if(Math.abs(A)>Math.abs(E)){T.preventDefault();const S=120,b=Math.max(-S,Math.min(S,A));s(b)}},d=()=>{if(!r)return;Math.abs(o)>n&&(o>0?e():t()),s(0),l(!1),i(null)},p=T=>{i({x:T.clientX,y:T.clientY}),l(!0)},m=T=>{if(!r||!a)return;const P=T.clientX-r.x,k=T.clientY-r.y;if(Math.abs(P)>Math.abs(k)){const E=Math.max(-120,Math.min(120,P));s(E)}},w=()=>{if(!r)return;Math.abs(o)>n&&(o>0?e():t()),s(0),l(!1),i(null)},I=()=>{const T=Math.min(Math.abs(o)/n,1),P=o>0;return{opacity:T,backgroundColor:P?"#10b981":"#ef4444",transform:`translateX(${o}px)`}},y=()=>({transform:`translateX(${o}px)`,transition:a?"none":"transform 0.3s ease-out",zIndex:a?10:1}),v=()=>Math.abs(o)<20?null:o>0?"+1":"-1",x=Math.abs(o)>10;return{handleTouchStart:c,handleTouchMove:h,handleTouchEnd:d,handleMouseDown:p,handleMouseMove:m,handleMouseUp:w,dragOffset:o,isDragging:a,getRowStyle:y,getBackgroundStyle:I,getActionIcon:v,showBackground:x,elementRef:u}},rb=({item:t,onIncrease:e,onDecrease:n,onEdit:r,onRemove:i})=>{const{handleTouchStart:o,handleTouchMove:s,handleTouchEnd:a,handleMouseDown:l,handleMouseMove:u,handleMouseUp:c,getRowStyle:h,getBackgroundStyle:d,getActionIcon:p,showBackground:m,isDragging:w}=nb(()=>n(t.id),()=>e(t.id)),{t:I}=kn();return N.jsxs("div",{className:"relative overflow-hidden rounded-lg shadow-sm mb-2",children:[m&&N.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white font-bold text-2xl rounded-lg",style:d(),children:N.jsx("div",{className:"flex items-center space-x-2",children:p()==="+1"?N.jsxs(N.Fragment,{children:[N.jsx(uv,{className:"w-6 h-6"}),N.jsx("span",{className:"drop-shadow-lg",children:"+1"})]}):N.jsxs(N.Fragment,{children:[N.jsx(lv,{className:"w-6 h-6"}),N.jsx("span",{className:"drop-shadow-lg",children:"-1"})]})})}),N.jsxs("div",{className:`relative bg-white rounded-lg p-4 touch-manipulation ${w?"shadow-lg":""}`,style:h(),onTouchStart:o,onTouchMove:s,onTouchEnd:a,onMouseDown:l,onMouseMove:u,onMouseUp:c,onMouseLeave:c,children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[t.icon.startsWith("http")?N.jsx("img",{src:t.icon,alt:"icon",className:"w-8 h-8 inline-block"}):N.jsx("span",{className:"text-2xl",children:t.icon}),N.jsxs("div",{className:"flex-1 min-w-0",children:[N.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:t.name}),N.jsxs("p",{className:"text-sm text-gray-500",children:["#",t.barcode]})]})]}),N.jsxs("div",{className:"flex items-center space-x-2",children:[N.jsxs("div",{className:"flex items-center space-x-1",children:[N.jsx("button",{onClick:()=>n(t.id),disabled:t.amountInStock===0,className:"w-8 h-8 rounded-full bg-red-100 text-red-600 hover:bg-red-200 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed flex items-center justify-center transition-colors",children:N.jsx(lv,{className:"w-4 h-4"})}),N.jsx("span",{className:`w-8 text-center font-semibold ${t.amountInStock===0?"text-red-500":"text-green-600"}`,children:t.amountInStock}),N.jsx("button",{onClick:()=>e(t.id),disabled:t.amountInStock===20,className:"w-8 h-8 rounded-full bg-green-100 text-green-600 hover:bg-green-200 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed flex items-center justify-center transition-colors",children:N.jsx(uv,{className:"w-4 h-4"})})]}),N.jsx("button",{onClick:()=>r(t.id),className:"w-8 h-8 rounded-full bg-yellow-100 text-yellow-600 hover:bg-yellow-200 flex items-center justify-center transition-colors",children:N.jsx(KC,{className:"w-4 h-4"})}),N.jsx("button",{onClick:()=>i(t.id),className:"w-8 h-8 rounded-full bg-red-100 text-red-600 hover:bg-red-200 flex items-center justify-center transition-colors",children:N.jsx(YC,{className:"w-4 h-4"})})]})]}),N.jsx("div",{className:`mt-2 text-xs text-center transition-opacity ${w?"opacity-50":"text-gray-400"}`,children:I(w?"itemRow.releaseSwipeText":"itemRow.swipeText")})]})]})},ib=({items:t,totalItems:e,onIncrease:n,onDecrease:r,onEdit:i,onRemove:o})=>{const{t:s}=kn();return t.length===0?N.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[N.jsx(GC,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),N.jsx("p",{className:"text-gray-500",children:s(e===0?"itemRow.noItemsYet":"itemRow.noItemsMatch")})]}):(console.log("items list",{items:t}),N.jsx("div",{className:"space-y-2",children:t.map(a=>N.jsx(rb,{item:a,onIncrease:n,onDecrease:r,onEdit:i,onRemove:o},a.barcode))}))};async function ob(t){try{const n=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${t}.json`)).json();if(n.status!==1)return null;const r=n.product;return{name:r.product_name||"Unknown product",category:r.categories||"Unknown category",brand:r.brands||"Unknown brand",imageUrl:r.image_url||""}}catch(e){return console.error("Error fetching product info:",e),null}}const ue=t=>typeof t=="string",na=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},Kv=t=>t==null?"":""+t,sb=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},ab=/###/g,Xv=t=>t&&t.indexOf("###")>-1?t.replace(ab,"."):t,qv=t=>!t||ue(t),Ta=(t,e,n)=>{const r=ue(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(qv(t))return{};const o=Xv(r[i]);!t[o]&&n&&(t[o]=new n),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++i}return qv(t)?{}:{obj:t,k:Xv(r[i])}},Yv=(t,e,n)=>{const{obj:r,k:i}=Ta(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let o=e[e.length-1],s=e.slice(0,e.length-1),a=Ta(t,s,Object);for(;a.obj===void 0&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=Ta(t,s,Object),a!=null&&a.obj&&typeof a.obj[`${a.k}.${o}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=n},lb=(t,e,n,r)=>{const{obj:i,k:o}=Ta(t,e,Object);i[o]=i[o]||[],i[o].push(n)},mc=(t,e)=>{const{obj:n,k:r}=Ta(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},ub=(t,e,n)=>{const r=mc(t,n);return r!==void 0?r:mc(e,n)},Sx=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ue(t[r])||t[r]instanceof String||ue(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):Sx(t[r],e[r],n):t[r]=e[r]);return t},Io=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var cb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const fb=t=>ue(t)?t.replace(/[&<>"'\/]/g,e=>cb[e]):t;class hb{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const db=[" ",",","?","!",";"],pb=new hb(20),gb=(t,e,n)=>{e=e||"",n=n||"";const r=db.filter(s=>e.indexOf(s)<0&&n.indexOf(s)<0);if(r.length===0)return!0;const i=pb.getRegExp(`(${r.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!i.test(t);if(!o){const s=t.indexOf(n);s>0&&!i.test(t.substring(0,s))&&(o=!0)}return o},p0=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let o=0;o<r.length;){if(!i||typeof i!="object")return;let s,a="";for(let l=o;l<r.length;++l)if(l!==o&&(a+=n),a+=r[l],s=i[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&l<r.length-1)continue;o+=l-o+1;break}i=s}return i},qa=t=>t==null?void 0:t.replace("_","-"),mb={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};let vb=class g0{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||mb,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(ue(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new g0(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new g0(this.logger,e)}};var ir=new vb;class of{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,o])=>{for(let s=0;s<o;s++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,o])=>{for(let s=0;s<o;s++)i.apply(i,[e,...n])})}}class Qv extends of{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,i={}){var u,c;const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,s=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):ue(r)&&o?a.push(...r.split(o)):a.push(r)));const l=mc(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!s||!ue(r)?l:p0((c=(u=this.data)==null?void 0:u[e])==null?void 0:c[n],r,o)}addResource(e,n,r,i,o={silent:!1}){const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(s?r.split(s):r)),e.indexOf(".")>-1&&(a=e.split("."),i=n,n=a[1]),this.addNamespaces(n),Yv(this.data,a,i),o.silent||this.emit("added",e,n,r,i)}addResources(e,n,r,i={silent:!1}){for(const o in r)(ue(r[o])||Array.isArray(r[o]))&&this.addResource(e,n,o,r[o],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,o,s={silent:!1,skipCopy:!1}){let a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let l=mc(this.data,a)||{};s.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?Sx(l,r,o):l={...l,...r},Yv(this.data,a,l),s.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var Cx={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(o=>{var s;e=((s=this.processors[o])==null?void 0:s.process(e,n,r,i))??e}),e}};const Zv={},Jv=t=>!ue(t)&&typeof t!="boolean"&&typeof t!="number";class vc extends of{constructor(e,n={}){super(),sb(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ir.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const i=this.resolve(e,r);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const s=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!gb(e,r,i);if(s&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:ue(o)?[o]:o};const u=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(u[0])>-1)&&(o=u.shift()),e=u.join(i)}return{key:e,namespaces:ue(o)?[o]:o}}translate(e,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(i={...i}),i||(i={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const o=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:a,namespaces:l}=this.extractFromKey(e[e.length-1],i),u=l[l.length-1];let c=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;c===void 0&&(c=":");const h=i.lng||this.language,d=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode")return d?o?{res:`${u}${c}${a}`,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(i)}:`${u}${c}${a}`:o?{res:a,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(i)}:a;const p=this.resolve(e,i);let m=p==null?void 0:p.res;const w=(p==null?void 0:p.usedKey)||a,I=(p==null?void 0:p.exactUsedKey)||a,y=["[object Number]","[object Function]","[object RegExp]"],v=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject,T=i.count!==void 0&&!ue(i.count),P=vc.hasDefaultValue(i),k=T?this.pluralResolver.getSuffix(h,i.count,i):"",A=i.ordinal&&T?this.pluralResolver.getSuffix(h,i.count,{ordinal:!1}):"",E=T&&!i.ordinal&&i.count===0,S=E&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${k}`]||i[`defaultValue${A}`]||i.defaultValue;let b=m;x&&!m&&P&&(b=S);const D=Jv(b),M=Object.prototype.toString.apply(b);if(x&&b&&D&&y.indexOf(M)<0&&!(ue(v)&&Array.isArray(b))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const O=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,b,{...i,ns:l}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(p.res=O,p.usedParams=this.getUsedParamsDetails(i),p):O}if(s){const O=Array.isArray(b),he=O?[]:{},te=O?I:w;for(const Y in b)if(Object.prototype.hasOwnProperty.call(b,Y)){const X=`${te}${s}${Y}`;P&&!m?he[Y]=this.translate(X,{...i,defaultValue:Jv(S)?S[Y]:void 0,joinArrays:!1,ns:l}):he[Y]=this.translate(X,{...i,joinArrays:!1,ns:l}),he[Y]===X&&(he[Y]=b[Y])}m=he}}else if(x&&ue(v)&&Array.isArray(m))m=m.join(v),m&&(m=this.extendTranslation(m,e,i,r));else{let O=!1,he=!1;!this.isValidLookup(m)&&P&&(O=!0,m=S),this.isValidLookup(m)||(he=!0,m=a);const Y=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&he?void 0:m,X=P&&S!==m&&this.options.updateMissing;if(he||O||X){if(this.logger.log(X?"updateKey":"missingKey",h,u,a,X?S:m),s){const q=this.resolve(a,{...i,keySeparator:!1});q&&q.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let j=[];const W=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&W&&W[0])for(let q=0;q<W.length;q++)j.push(W[q]);else this.options.saveMissingTo==="all"?j=this.languageUtils.toResolveHierarchy(i.lng||this.language):j.push(i.lng||this.language);const Z=(q,le,Ce)=>{var En;const xn=P&&Ce!==m?Ce:Y;this.options.missingKeyHandler?this.options.missingKeyHandler(q,u,le,xn,X,i):(En=this.backendConnector)!=null&&En.saveMissing&&this.backendConnector.saveMissing(q,u,le,xn,X,i),this.emit("missingKey",q,u,le,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?j.forEach(q=>{const le=this.pluralResolver.getSuffixes(q,i);E&&i[`defaultValue${this.options.pluralSeparator}zero`]&&le.indexOf(`${this.options.pluralSeparator}zero`)<0&&le.push(`${this.options.pluralSeparator}zero`),le.forEach(Ce=>{Z([q],a+Ce,i[`defaultValue${Ce}`]||S)})}):Z(j,a,S))}m=this.extendTranslation(m,e,i,p,r),he&&m===a&&this.options.appendNamespaceToMissingKey&&(m=`${u}${c}${a}`),(he||O)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${c}${a}`:a,O?m:void 0,i))}return o?(p.res=m,p.usedParams=this.getUsedParamsDetails(i),p):m}extendTranslation(e,n,r,i,o){var l,u;if((l=this.i18nFormat)!=null&&l.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=ue(e)&&(((u=r==null?void 0:r.interpolation)==null?void 0:u.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(c){const p=e.match(this.interpolator.nestingRegexp);h=p&&p.length}let d=r.replace&&!ue(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language||i.usedLng,r),c){const p=e.match(this.interpolator.nestingRegexp),m=p&&p.length;h<m&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>(o==null?void 0:o[0])===p[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${n[0]}`),null):this.translate(...p,n),r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,a=ue(s)?[s]:s;return e!=null&&(a!=null&&a.length)&&r.applyPostProcessor!==!1&&(e=Cx.handle(a,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,i,o,s,a;return ue(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),c=u.key;i=c;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const d=n.count!==void 0&&!ue(n.count),p=d&&!n.ordinal&&n.count===0,m=n.context!==void 0&&(ue(n.context)||typeof n.context=="number")&&n.context!=="",w=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(I=>{var y,v;this.isValidLookup(r)||(a=I,!Zv[`${w[0]}-${I}`]&&((y=this.utils)!=null&&y.hasLoadedNamespace)&&!((v=this.utils)!=null&&v.hasLoadedNamespace(a))&&(Zv[`${w[0]}-${I}`]=!0,this.logger.warn(`key "${i}" for languages "${w.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(x=>{var k;if(this.isValidLookup(r))return;s=x;const T=[c];if((k=this.i18nFormat)!=null&&k.addLookupKeys)this.i18nFormat.addLookupKeys(T,c,x,I,n);else{let A;d&&(A=this.pluralResolver.getSuffix(x,n.count,n));const E=`${this.options.pluralSeparator}zero`,S=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(T.push(c+A),n.ordinal&&A.indexOf(S)===0&&T.push(c+A.replace(S,this.options.pluralSeparator)),p&&T.push(c+E)),m){const b=`${c}${this.options.contextSeparator}${n.context}`;T.push(b),d&&(T.push(b+A),n.ordinal&&A.indexOf(S)===0&&T.push(b+A.replace(S,this.options.pluralSeparator)),p&&T.push(b+E))}}let P;for(;P=T.pop();)this.isValidLookup(r)||(o=P,r=this.getResource(x,I,P,n))}))})}),{res:r,usedKey:i,exactUsedKey:o,usedLng:s,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,i={}){var o;return(o=this.i18nFormat)!=null&&o.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ue(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const o of n)delete i[o]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class ey{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ir.create("languageUtils")}getScriptPartFromCode(e){if(e=qa(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=qa(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(ue(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),ue(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],o=s=>{s&&(this.isSupportedCode(s)?i.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return ue(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):ue(e)&&o(this.formatLanguageCode(e)),r.forEach(s=>{i.indexOf(s)<0&&o(this.formatLanguageCode(s))}),i}}const ty={zero:0,one:1,two:2,few:3,many:4,other:5},ny={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class yb{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=ir.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=qa(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let s;try{s=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),ny;if(!e.match(/-|_/))return ny;const l=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(l,n)}return this.pluralRulesCache[o]=s,s}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,o)=>ty[i]-ty[o]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const ry=(t,e,n,r=".",i=!0)=>{let o=ub(t,e,n);return!o&&i&&ue(n)&&(o=p0(t,n,r),o===void 0&&(o=p0(e,n,r))),o},Fh=t=>t.replace(/\$/g,"$$$$");class _b{constructor(e={}){var n;this.logger=ir.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:o,prefixEscaped:s,suffix:a,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:h,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:m,nestingSuffixEscaped:w,nestingOptionsSeparator:I,maxReplaces:y,alwaysFormat:v}=e.interpolation;this.escape=n!==void 0?n:fb,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?Io(o):s||"{{",this.suffix=a?Io(a):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?Io(d):p||Io("$t("),this.nestingSuffix=m?Io(m):w||Io(")"),this.nestingOptionsSeparator=I||",",this.maxReplaces=y||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,i){var p;let o,s,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=m=>{if(m.indexOf(this.formatSeparator)<0){const v=ry(n,l,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(v,void 0,r,{...i,...n,interpolationkey:m}):v}const w=m.split(this.formatSeparator),I=w.shift().trim(),y=w.join(this.formatSeparator).trim();return this.format(ry(n,l,I,this.options.keySeparator,this.options.ignoreJSONStructure),y,r,{...i,...n,interpolationkey:I})};this.resetRegExp();const c=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((p=i==null?void 0:i.interpolation)==null?void 0:p.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>Fh(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?Fh(this.escape(m)):Fh(m)}].forEach(m=>{for(a=0;o=m.regex.exec(e);){const w=o[1].trim();if(s=u(w),s===void 0)if(typeof c=="function"){const y=c(e,o,i);s=ue(y)?y:""}else if(i&&Object.prototype.hasOwnProperty.call(i,w))s="";else if(h){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${e}`),s="";else!ue(s)&&!this.useRawValueToEscape&&(s=Kv(s));const I=m.safeValue(s);if(e=e.replace(o[0],I),h?(m.regex.lastIndex+=s.length,m.regex.lastIndex-=o[0].length):m.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n,r={}){let i,o,s;const a=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const h=l.split(new RegExp(`${c}[ ]*{`));let d=`{${h[1]}`;l=h[0],d=this.interpolate(d,s);const p=d.match(/'/g),m=d.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!m||m.length%2!==0)&&(d=d.replace(/'/g,'"'));try{s=JSON.parse(d),u&&(s={...u,...s})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,w),`${l}${c}${d}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,l};for(;i=this.nestingRegexp.exec(e);){let l=[];s={...r},s=s.replace&&!ue(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let u=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const c=i[1].split(this.formatSeparator).map(h=>h.trim());i[1]=c.shift(),l=c,u=!0}if(o=n(a.call(this,i[1].trim(),s),s),o&&i[0]===e&&!ue(o))return o;ue(o)||(o=Kv(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),o=""),u&&(o=l.reduce((c,h)=>this.format(c,h,r.lng,{...r,interpolationkey:i[1].trim()}),o.trim())),e=e.replace(i[0],o),this.regexp.lastIndex=0}return e}}const wb=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(s=>{if(s){const[a,...l]=s.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=a.trim();n[c]||(n[c]=u),u==="false"&&(n[c]=!1),u==="true"&&(n[c]=!0),isNaN(u)||(n[c]=parseInt(u,10))}})}return{formatName:e,formatOptions:n}},iy=t=>{const e={};return(n,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const s=r+JSON.stringify(o);let a=e[s];return a||(a=t(qa(r),i),e[s]=a),a(n)}},xb=t=>(e,n,r)=>t(qa(n),r)(e);class Eb{constructor(e={}){this.logger=ir.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?iy:xb;this.formats={number:r((i,o)=>{const s=new Intl.NumberFormat(i,{...o});return a=>s.format(a)}),currency:r((i,o)=>{const s=new Intl.NumberFormat(i,{...o,style:"currency"});return a=>s.format(a)}),datetime:r((i,o)=>{const s=new Intl.DateTimeFormat(i,{...o});return a=>s.format(a)}),relativetime:r((i,o)=>{const s=new Intl.RelativeTimeFormat(i,{...o});return a=>s.format(a,o.range||"day")}),list:r((i,o)=>{const s=new Intl.ListFormat(i,{...o});return a=>s.format(a)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=iy(n)}format(e,n,r,i={}){const o=n.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(a=>a.indexOf(")")>-1)){const a=o.findIndex(l=>l.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,a)].join(this.formatSeparator)}return o.reduce((a,l)=>{var h;const{formatName:u,formatOptions:c}=wb(l);if(this.formats[u]){let d=a;try{const p=((h=i==null?void 0:i.formatParams)==null?void 0:h[i.interpolationkey])||{},m=p.locale||p.lng||i.locale||i.lng||r;d=this.formats[u](a,m,{...c,...i,...p})}catch(p){this.logger.warn(p)}return d}else this.logger.warn(`there was no format function for ${u}`);return a},e)}}const Ab=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Ib extends of{constructor(e,n,r,i={}){var o,s;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=ir.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(s=(o=this.backend)==null?void 0:o.init)==null||s.call(o,r,i.backend,i)}queueLoad(e,n,r,i){const o={},s={},a={},l={};return e.forEach(u=>{let c=!0;n.forEach(h=>{const d=`${u}|${h}`;!r.reload&&this.store.hasResourceBundle(u,h)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?s[d]===void 0&&(s[d]=!0):(this.state[d]=1,c=!1,s[d]===void 0&&(s[d]=!0),o[d]===void 0&&(o[d]=!0),l[h]===void 0&&(l[h]=!0)))}),c||(a[u]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const i=e.split("|"),o=i[0],s=i[1];n&&this.emit("failedLoading",o,s,n),!n&&r&&this.store.addResourceBundle(o,s,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(l=>{lb(l.loaded,[o],s),Ab(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{a[u]||(a[u]={});const c=l.loaded[u];c.length&&c.forEach(h=>{a[u][h]===void 0&&(a[u][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r,i=0,o=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:o,callback:s});return}this.readingCalls++;const a=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&c&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,o*2,s)},o);return}s(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,n);u&&typeof u.then=="function"?u.then(c=>a(null,c)).catch(a):a(null,u)}catch(u){a(u)}return}return l(e,n,a)}prepareLoading(e,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();ue(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ue(n)&&(n=[n]);const o=this.queueLoad(e,n,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${n}loading namespace ${o} for language ${i} failed`,s),!s&&a&&this.logger.log(`${n}loaded namespace ${o} for language ${i}`,a),this.loaded(e,s,a)})}saveMissing(e,n,r,i,o,s={},a=()=>{}){var l,u,c,h,d;if((u=(l=this.services)==null?void 0:l.utils)!=null&&u.hasLoadedNamespace&&!((h=(c=this.services)==null?void 0:c.utils)!=null&&h.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((d=this.backend)!=null&&d.create){const p={...s,isUpdate:o},m=this.backend.create.bind(this.backend);if(m.length<6)try{let w;m.length===5?w=m(e,n,r,i,p):w=m(e,n,r,i),w&&typeof w.then=="function"?w.then(I=>a(null,I)).catch(a):a(null,w)}catch(w){a(w)}else m(e,n,r,i,a,p)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const oy=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ue(t[1])&&(e.defaultValue=t[1]),ue(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),sy=t=>{var e,n;return ue(t.ns)&&(t.ns=[t.ns]),ue(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ue(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},fu=()=>{},Tb=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Ya extends of{constructor(e={},n){if(super(),this.options=sy(e),this.services={},this.logger=ir,this.modules={external:[]},Tb(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(ue(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=oy();this.options={...r,...this.options,...sy(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?ir.init(i(this.modules.logger),this.options):ir.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=Eb;const c=new ey(this.options);this.store=new Qv(this.options.resources,this.options);const h=this.services;h.logger=ir,h.resourceStore=this.store,h.languageUtils=c,h.pluralResolver=new yb(c,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(h.formatter=i(u),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new _b(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new Ib(i(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(d,...p)=>{this.emit(d,...p)}),this.modules.languageDetector&&(h.languageDetector=i(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=i(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new vc(this.services,this.options),this.translator.on("*",(d,...p)=>{this.emit(d,...p)}),this.modules.external.forEach(d=>{d.init&&d.init(this)})}if(this.format=this.options.interpolation.format,n||(n=fu),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...c)=>this.store[u](...c)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...c)=>(this.store[u](...c),this)});const a=na(),l=()=>{const u=(c,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(h),n(c,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),a}loadResources(e,n=fu){var o,s;let r=n;const i=ue(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(h=>{h!=="cimode"&&a.indexOf(h)<0&&a.push(h)})};i?l(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>l(c)),(s=(o=this.options.preload)==null?void 0:o.forEach)==null||s.call(o,u=>l(u)),this.services.backendConnector.load(a,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(e,n,r){const i=na();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=fu),this.services.backendConnector.reload(e,n,o=>{i.resolve(),r(o)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Cx.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=na();this.emit("languageChanging",e);const i=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},o=(a,l)=>{l?this.isLanguageChangingTo===e&&(i(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),n&&n(a,(...u)=>this.t(...u))},s=a=>{var c,h;!e&&!a&&this.services.languageDetector&&(a=[]);const l=ue(a)?a:a&&a[0],u=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(ue(a)?[a]:a);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),(h=(c=this.services.languageDetector)==null?void 0:c.cacheUserLanguage)==null||h.call(c,u)),this.loadResources(u,d=>{o(d,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),r}getFixedT(e,n,r){const i=(o,s,...a)=>{let l;typeof s!="object"?l=this.options.overloadTranslationOptionHandler([o,s].concat(a)):l={...s},l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||i.keyPrefix);const u=this.options.keySeparator||".";let c;return l.keyPrefix&&Array.isArray(o)?c=o.map(h=>`${l.keyPrefix}${u}${h}`):c=l.keyPrefix?`${l.keyPrefix}${u}${o}`:o,this.t(c,l)};return ue(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const s=(a,l)=>{const u=this.services.backendConnector.state[`${a}|${l}`];return u===-1||u===0||u===2};if(n.precheck){const a=n.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(r,e)&&(!i||s(o,e)))}loadNamespaces(e,n){const r=na();return this.options.ns?(ue(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=na();ue(e)&&(e=[e]);const i=this.options.preload||[],o=e.filter(s=>i.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return o.length?(this.options.preload=i.concat(o),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}dir(e){var i,o;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((o=this.services)==null?void 0:o.languageUtils)||new ey(oy());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new Ya(e,n)}cloneInstance(e={},n=fu){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},o=new Ya(i);if((e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r){const a=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},l[u]=Object.keys(l[u]).reduce((c,h)=>(c[h]={...l[u][h]},c),l[u]),l),{});o.store=new Qv(a,i),o.services.resourceStore=o.store}return o.translator=new vc(o.services,i),o.translator.on("*",(a,...l)=>{o.emit(a,...l)}),o.init(i,n),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ht=Ya.createInstance();Ht.createInstance=Ya.createInstance;Ht.createInstance;Ht.dir;Ht.init;Ht.loadResources;Ht.reloadResources;Ht.use;Ht.changeLanguage;Ht.getFixedT;Ht.t;Ht.exists;Ht.setDefaultNamespace;Ht.hasLoadedNamespace;Ht.loadNamespaces;Ht.loadLanguages;const{slice:Sb,forEach:Cb}=[];function bb(t){return Cb.call(Sb.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function Rb(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const ay=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Nb=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let o=`${t}=${i}`;if(r.maxAge>0){const s=r.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(s)}`}if(r.domain){if(!ay.test(r.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${r.domain}`}if(r.path){if(!ay.test(r.path))throw new TypeError("option path is invalid");o+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(o+="; Partitioned"),o},ly={create(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=Nb(t,e,i)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var Ob={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return ly.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:o}=e;n&&typeof document<"u"&&ly.create(n,t,r,i,o)}},Pb={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const s=i.substring(1).split("&");for(let a=0;a<s.length;a++){const l=s[a].indexOf("=");l>0&&s[a].substring(0,l)===e&&(n=s[a].substring(l+1))}}return n}},Db={name:"hash",lookup(t){var i;let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:o}=window.location;if(o&&o.length>2){const s=o.substring(1);if(e){const a=s.split("&");for(let l=0;l<a.length;l++){const u=a[l].indexOf("=");u>0&&a[l].substring(0,u)===e&&(r=a[l].substring(u+1))}}if(r)return r;if(!r&&n>-1){const a=o.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?(i=a[typeof n=="number"?n:0])==null?void 0:i.replace("/",""):void 0}}}return r}};let To=null;const uy=()=>{if(To!==null)return To;try{if(To=typeof window<"u"&&window.localStorage!==null,!To)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{To=!1}return To};var kb={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&uy())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&uy()&&window.localStorage.setItem(n,t)}};let So=null;const cy=()=>{if(So!==null)return So;try{if(So=typeof window<"u"&&window.sessionStorage!==null,!So)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{So=!1}return So};var Mb={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&cy())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&cy()&&window.sessionStorage.setItem(n,t)}},Lb={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let o=0;o<n.length;o++)e.push(n[o]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},Fb={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},Bb={name:"path",lookup(t){var i;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},Vb={name:"subdomain",lookup(t){var i,o;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((o=(i=window.location)==null?void 0:i.hostname)==null?void 0:o.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let bx=!1;try{document.cookie,bx=!0}catch{}const Rx=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];bx||Rx.splice(1,1);const Ub=()=>({order:Rx,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class Nx{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=bb(n,this.options||{},Ub()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Ob),this.addDetector(Pb),this.addDetector(kb),this.addDetector(Mb),this.addDetector(Lb),this.addDetector(Fb),this.addDetector(Bb),this.addDetector(Vb),this.addDetector(Db)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.filter(r=>r!=null&&!Rb(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}Nx.type="languageDetector";const jb={appTitle:"My stock",home:"Home",log:"Log",scheduled:"Scheduled",medicines:"Medicines",username:"Username",settings:"Settings",manageMedicines:"Manage Medicines",manageUsers:"Manage Users",switchUser:"Switch User",enterUsername:"Enter username",about:"About"},$b={description:"Manage Home Inventory",version:"Version",developer:"Developer:",developerName:"Yossi Hauser",contact:"Contact",appNameLabel:"App Name",emailLabel:"Email"},zb={welcome:"Welcome!",welcomeTo:"Welcome to ",signInText:"Sign in to continue to your family dashboard",googleSignIn:"Sign in with your Google account to continue",signingAgreement:"By signing in, you agree to our terms of service and privacy policy",signing:"Signing in...",continueWithGoogle:"Continue with Google",createFamily:"Create New Family",creating:"Creating...",joinFamily:"Join Existing Family",noAccount:`We couldn't find an account associated with {{email}}.
Would you like to create a new family or join an existing one?`,signInFail:"Sign in failed",familyName:"Family Name",familyNamePlaceholder:"Enter family name",yourUsername:"Your Username",familyID:"Family ID",enterFamilyID:"Enter family ID",joining:"Joining...",loading:"Loading..."},Hb={guest:"Guest",barcode:"Barcode",category:"Category",brand:"Brand",itemName:"Item Name",pic:"Icon",add:"Add",addItemTitle:"Add New Item",productIcon:"Product Icon",productImageTitle:"Use product image",enterBarcode:"Enter Barcode Number",enterBarcodePlaceholder:"Type barcode number...",enterCategory:"Enter category",enterBrand:"Enter brand",productFound:"Product found and loaded",productNotFound:"No data was found for this product",scanCameraTitle:"Scan barcode with camera",scanBarcode:"Scan Barcode",scanning:"Scanning...",scanningInstructions:"Position the barcode within the red rectangle to scan",editItemTitle:"Edit Item",enterItemName:"Enter item name",optionalIcon:"Optical icons"},Wb={cancel:"Cancel",remove:"Remove",add:"Add",addItem:"Add item",save:"Save",close:"Close",backIcon:"",back:"Back",create:"Create",join:"Join Family",retry:"Retry"},Gb={remove:"Remove Item",removeWarning:"Are you sure you want to remove this item from your inventory? This action cannot be undone."},Kb={searchPlaceholder:"Search items...",all:"All",inStock:"In Stock",outOfStock:"Out of Stock"},Xb={releaseSwipeText:"Release to confirm action  Swipe back to cancel",swipeText:"Swipe right to increase  Swipe left to decrease",noItemsYet:"No items yet. Add your first item!",noitemsMatch:"No items match your search"},qb={title:"Settings",loading:"Loading...",userInfo:"User info",username:"User name",email:"email",familyInfo:"Family info",familyId:"Family ID",familyName:"Family name",familyMembers:"Family members",currentUser:"(You)",noMembers:"No family members found"},Yb={header:jb,about:$b,login:zb,general:Hb,buttons:Wb,remove:Gb,search:Kb,itemRow:Xb,settings:qb},Qb={appTitle:" ",home:"",log:"",username:" ",settings:"",manageUsers:" ",switchUser:" ",enterUsername:"  ",about:""},Zb={description:" ",version:"",developer:":",developerName:" ",contact:" ",appNameLabel:" ",emailLabel:""},Jb={welcome:" ",welcomeTo:"  ",signInText:"    ",googleSignIn:"   ",signingAgreement:"       ",signing:"...",continueWithGoogle:"  ",createFamily:"  ",joinFamily:" ",noAccount:`     {{email}}.
      ?`,signInFail:" ",familyName:" ",familyNamePlaceholder:"  ...",yourUsername:"  ",familyID:"   ",enterFamilyID:"    ",joining:"...",loading:"..."},eR={guest:"",barcode:"",category:"",brand:"",itemName:" ",pic:"",add:"",addItemTitle:"  ",productIcon:"",productImageTitle:" ",enterBarcode:"  ",enterBarcodePlaceholder:" ...",enterCategory:" ",enterBrand:" ",productFound:"  ",productNotFound:"    ",scanCameraTitle:"   ",scanBarcode:" ",scanning:"...",scanningInstructions:"      ",editItemTitle:" ",enterItemName:"  ",optionalIcon:"  "},tR={cancel:"",remove:"",add:"",addItem:" ",save:"",close:"",backIcon:"",back:"",create:"",join:"",retry:" "},nR={remove:" ",removeWarning:`   ? 
 (  )`},rR={searchPlaceholder:"...",all:"",inStock:"",outOfStock:" "},iR={releaseSwipeText:"     ",swipeText:"       ",noItemsYet:"  .   !",noitemsMatch:"   "},oR={title:"",loading:"...",userInfo:" ",username:" ",email:"",familyInfo:" ",familyId:" ",familyName:" ",familyMembers:" ",currentUser:"(/)",noMembers:"   "},sR={header:Qb,about:Zb,login:Jb,general:eR,buttons:tR,remove:nR,search:rR,itemRow:iR,settings:oR},aR={en:{translation:Yb},he:{translation:sR}};Ht.use(Nx).use(q6).init({resources:aR,fallbackLng:"he",debug:!1,interpolation:{escapeValue:!1},react:{useSuspense:!1}});const lR=({isOpen:t,onClose:e,onAdd:n,onEdit:r,barcode:i,editItem:o=null})=>{const[s,a]=H.useState(""),[l,u]=H.useState(""),[c,h]=H.useState(""),[d,p]=H.useState(""),[m,w]=H.useState(null),[I,y]=H.useState(!1),v=["","","","","","","","","",""],{t:x}=kn(),T=o!==null;H.useEffect(()=>{T&&o?(a(o.name||""),u(o.category||""),h(o.brand||""),p(o.icon||""),o.icon&&(o.icon.startsWith("http")||o.icon.startsWith("data:"))&&y(!0)):i&&!T&&ob(i).then(S=>{w(S),S&&(a(S.name||""),u(S.category||""),h(S.brand||""),S.imageUrl&&(y(!0),p(S.imageUrl)))})},[i,o,T]);const P=()=>{s.trim()&&(T&&r&&o?r(o.barcode,s.trim(),d,l.trim(),c.trim()):n(s.trim(),d,l.trim(),c.trim()),k())},k=()=>{a(""),p(""),u(""),h(""),w(null),y(!1)},A=()=>{k(),e()},E=S=>{p(S),y(!1)};return t?N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:N.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm",children:[N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsx("h2",{className:"text-lg font-semibold",children:x(T?"general.editItemTitle":"general.addItemTitle")}),N.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600",children:N.jsx(lx,{className:"w-5 h-5"})})]}),N.jsxs("div",{className:"space-y-4",children:[N.jsx("div",{children:N.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[x("general.barcode"),": ",T?o==null?void 0:o.barcode:i]})}),N.jsxs("div",{children:[N.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[x("general.itemName"),":"]}),N.jsx("input",{type:"text",value:s,onChange:S=>a(S.target.value),placeholder:x("general.enterItemName"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),N.jsxs("div",{children:[N.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[x("general.pic"),":"]}),d&&N.jsx("div",{className:"mb-2",children:N.jsx("div",{className:"w-12 h-12 rounded-md border-2 border-blue-500 bg-blue-50 flex items-center justify-center overflow-hidden",children:d.startsWith("http")?N.jsx("img",{src:d,alt:"icon",className:"w-full h-full object-contain"}):N.jsx("span",{className:"text-2xl",children:d})})}),N.jsx("p",{className:"text-xs text-gray-500 mt-1",children:x("general.optionalIcon")}),N.jsx("div",{className:"grid grid-cols-5 gap-2",children:v.map(S=>N.jsx("button",{onClick:()=>E(S),className:`w-10 h-10 rounded-md border-2 flex items-center justify-center text-xl ${d===S&&!I?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:S},S))})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:x("general.category")}),N.jsx("input",{type:"text",value:l,onChange:S=>u(S.target.value),placeholder:x("general.enterCategory"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:x("general.brand")}),N.jsx("input",{type:"text",value:c,onChange:S=>h(S.target.value),placeholder:x("general.enterBrand"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),!T&&m&&N.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:N.jsx("p",{className:"text-sm text-gray-600",children:x(m?"general.productFound":"general.productNotFound")})}),N.jsxs("div",{className:"flex gap-2 pt-2",children:[N.jsx("button",{onClick:A,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:x("buttons.cancel")}),N.jsx("button",{onClick:P,disabled:!s.trim(),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:x(T?"buttons.save":"buttons.addItem")})]})]})]})}):null},uR=({isOpen:t,onClose:e,onConfirm:n})=>{if(!t)return null;const{t:r}=kn();return N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:N.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm",children:[N.jsxs("div",{className:"flex items-center mb-4",children:[N.jsx(HC,{className:"w-6 h-6 text-red-500 mr-2"}),N.jsx("h2",{className:"text-lg font-semibold",children:r("remove.remove")})]}),N.jsx("p",{className:"text-gray-600 mb-6",children:r("remove.removeWarning")}),N.jsxs("div",{className:"flex gap-2",children:[N.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:r("buttons.cancel")}),N.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",children:r("buttons.remove")})]})]})})};const cR="inventory-app",fR="0.3.5",hR="module",dR={dev:"vite",build:"tsc && vite build",lint:"eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",preview:"vite preview",deploy:"vite build && gh-pages -d dist"},pR={"@types/uuid":"^10.0.0","@zxing/library":"^0.21.3",firebase:"^11.9.1","i18next-browser-languagedetector":"^8.2.0","lucide-react":"^0.263.1",react:"^18.2.0","react-dom":"^18.2.0","react-i18next":"^15.5.3",uuid:"^11.1.0","vite-plugin-gh-pages":"^1.0.1"},gR={"@types/node":"^24.0.3","@types/react":"^18.2.15","@types/react-dom":"^18.2.7","@typescript-eslint/eslint-plugin":"^8.34.0","@typescript-eslint/parser":"^8.34.0","@vitejs/plugin-react":"^4.0.3",autoprefixer:"^10.4.14",eslint:"^8.45.0","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-react-refresh":"^0.4.3","gh-pages":"^6.3.0",postcss:"^8.4.27",tailwindcss:"^3.3.3",typescript:"^5.0.2","typescript-eslint":"^8.34.0",vite:"^4.4.5"},mR={name:cR,private:!0,version:fR,type:hR,scripts:dR,dependencies:pR,devDependencies:gR},vR=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Px={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=o>>2,h=(o&3)<<4|a>>4;let d=(a&15)<<2|u>>6,p=u&63;l||(p=64,s||(d=64)),r.push(n[c],n[h],n[d],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ox(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||u==null||h==null)throw new _R;const d=o<<2|a>>4;if(r.push(d),u!==64){const p=a<<4&240|u>>2;if(r.push(p),h!==64){const m=u<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _R extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wR=function(t){const e=Ox(t);return Px.encodeByteArray(e,!0)},yc=function(t){return wR(t).replace(/\./g,"")},Dx=function(t){try{return Px.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=()=>xR().__FIREBASE_DEFAULTS__,AR=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},IR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Dx(t[1]);return e&&JSON.parse(e)},sf=()=>{try{return vR()||ER()||AR()||IR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kx=t=>{var e,n;return(n=(e=sf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},TR=t=>{const e=kx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Mx=()=>{var t;return(t=sf())===null||t===void 0?void 0:t.config},Lx=t=>{var e;return(e=sf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t){return t.endsWith(".cloudworkstations.dev")}async function Fx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[yc(JSON.stringify(n)),yc(JSON.stringify(s)),a].join(".")}const Sa={};function bR(){const t={prod:[],emulator:[]};for(const e of Object.keys(Sa))Sa[e]?t.emulator.push(e):t.prod.push(e);return t}function RR(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let fy=!1;function Bx(t,e){if(typeof window>"u"||typeof document>"u"||!Es(window.location.host)||Sa[t]===e||Sa[t]||fy)return;Sa[t]=e;function n(d){return`__firebase__banner__${d}`}const r="__firebase__banner",o=bR().prod.length>0;function s(){const d=document.getElementById(r);d&&d.remove()}function a(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{fy=!0,s()},d}function c(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=RR(r),p=n("text"),m=document.getElementById(p)||document.createElement("span"),w=n("learnmore"),I=document.getElementById(w)||document.createElement("a"),y=n("preprendIcon"),v=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const x=d.element;a(x),c(I,w);const T=u();l(v,y),x.append(v,m,I,T),document.body.appendChild(x)}o?(m.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function OR(){var t;const e=(t=sf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MR(){const t=$t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function LR(){return!OR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vx(){try{return typeof indexedDB=="object"}catch{return!1}}function Ux(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function FR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="FirebaseError";class mr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BR,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,go.prototype.create)}}class go{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?VR(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new mr(i,a,r)}}function VR(t,e){return t.replace(UR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const UR=/\{\$([^}]+)}/g;function jR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function oo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(hy(o)&&hy(s)){if(!oo(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $R(t,e){const n=new zR(t,e);return n.subscribe.bind(n)}class zR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Bh),i.error===void 0&&(i.error=Bh),i.complete===void 0&&(i.complete=Bh);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t){return t&&t._delegate?t._delegate:t}class qn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new SR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KR(e))try{this.getOrInitializeService({instanceIdentifier:$i})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=$i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$i){return this.instances.has(e)}getOptions(e=$i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$i){return this.component?this.component.multipleInstances?e:$i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GR(t){return t===$i?void 0:t}function KR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const qR={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},YR=ve.INFO,QR={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},ZR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=QR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class W1{constructor(e){this.name=e,this._logLevel=YR,this._logHandler=ZR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const JR=(t,e)=>e.some(n=>t instanceof n);let dy,py;function eN(){return dy||(dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tN(){return py||(py=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jx=new WeakMap,m0=new WeakMap,$x=new WeakMap,Vh=new WeakMap,G1=new WeakMap;function nN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Rr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&jx.set(n,t)}).catch(()=>{}),G1.set(e,t),e}function rN(t){if(m0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});m0.set(t,e)}let v0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return m0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$x.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iN(t){v0=t(v0)}function oN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Uh(this),e,...n);return $x.set(r,e.sort?e.sort():[e]),Rr(r)}:tN().includes(t)?function(...e){return t.apply(Uh(this),e),Rr(jx.get(this))}:function(...e){return Rr(t.apply(Uh(this),e))}}function sN(t){return typeof t=="function"?oN(t):(t instanceof IDBTransaction&&rN(t),JR(t,eN())?new Proxy(t,v0):t)}function Rr(t){if(t instanceof IDBRequest)return nN(t);if(Vh.has(t))return Vh.get(t);const e=sN(t);return e!==t&&(Vh.set(t,e),G1.set(e,t)),e}const Uh=t=>G1.get(t);function af(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Rr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Rr(s.result),l.oldVersion,l.newVersion,Rr(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function jh(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Rr(n).then(()=>{})}const aN=["get","getKey","getAll","getAllKeys","count"],lN=["put","add","delete","clear"],$h=new Map;function gy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($h.get(e))return $h.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=lN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aN.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return $h.set(e,o),o}iN(t=>({...t,get:(e,n,r)=>gy(e,n)||t.get(e,n,r),has:(e,n)=>!!gy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const y0="@firebase/app",my="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new W1("@firebase/app"),fN="@firebase/app-compat",hN="@firebase/analytics-compat",dN="@firebase/analytics",pN="@firebase/app-check-compat",gN="@firebase/app-check",mN="@firebase/auth",vN="@firebase/auth-compat",yN="@firebase/database",_N="@firebase/data-connect",wN="@firebase/database-compat",xN="@firebase/functions",EN="@firebase/functions-compat",AN="@firebase/installations",IN="@firebase/installations-compat",TN="@firebase/messaging",SN="@firebase/messaging-compat",CN="@firebase/performance",bN="@firebase/performance-compat",RN="@firebase/remote-config",NN="@firebase/remote-config-compat",ON="@firebase/storage",PN="@firebase/storage-compat",DN="@firebase/firestore",kN="@firebase/ai",MN="@firebase/firestore-compat",LN="firebase",FN="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="[DEFAULT]",BN={[y0]:"fire-core",[fN]:"fire-core-compat",[dN]:"fire-analytics",[hN]:"fire-analytics-compat",[gN]:"fire-app-check",[pN]:"fire-app-check-compat",[mN]:"fire-auth",[vN]:"fire-auth-compat",[yN]:"fire-rtdb",[_N]:"fire-data-connect",[wN]:"fire-rtdb-compat",[xN]:"fire-fn",[EN]:"fire-fn-compat",[AN]:"fire-iid",[IN]:"fire-iid-compat",[TN]:"fire-fcm",[SN]:"fire-fcm-compat",[CN]:"fire-perf",[bN]:"fire-perf-compat",[RN]:"fire-rc",[NN]:"fire-rc-compat",[ON]:"fire-gcs",[PN]:"fire-gcs-compat",[DN]:"fire-fst",[MN]:"fire-fst-compat",[kN]:"fire-vertex","fire-js":"fire-js",[LN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new Map,VN=new Map,w0=new Map;function vy(t,e){try{t.container.addComponent(e)}catch(n){Mr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hr(t){const e=t.name;if(w0.has(e))return Mr.debug(`There were multiple attempts to register component ${e}.`),!1;w0.set(e,t);for(const n of _c.values())vy(n,t);for(const n of VN.values())vy(n,t);return!0}function As(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Sn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gi=new go("app","Firebase",UN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=FN;function zx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:_0,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw gi.create("bad-app-name",{appName:String(i)});if(n||(n=Mx()),!n)throw gi.create("no-options");const o=_c.get(i);if(o){if(oo(n,o.options)&&oo(r,o.config))return o;throw gi.create("duplicate-app",{appName:i})}const s=new XR(i);for(const l of w0.values())s.addComponent(l);const a=new jN(n,r,s);return _c.set(i,a),a}function K1(t=_0){const e=_c.get(t);if(!e&&t===_0&&Mx())return zx();if(!e)throw gi.create("no-app",{appName:t});return e}function On(t,e,n){var r;let i=(r=BN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mr.warn(a.join(" "));return}hr(new qn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="firebase-heartbeat-database",zN=1,Qa="firebase-heartbeat-store";let zh=null;function Hx(){return zh||(zh=af($N,zN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qa)}catch(n){console.warn(n)}}}}).catch(t=>{throw gi.create("idb-open",{originalErrorMessage:t.message})})),zh}async function HN(t){try{const n=(await Hx()).transaction(Qa),r=await n.objectStore(Qa).get(Wx(t));return await n.done,r}catch(e){if(e instanceof mr)Mr.warn(e.message);else{const n=gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mr.warn(n.message)}}}async function yy(t,e){try{const r=(await Hx()).transaction(Qa,"readwrite");await r.objectStore(Qa).put(e,Wx(t)),await r.done}catch(n){if(n instanceof mr)Mr.warn(n.message);else{const r=gi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mr.warn(r.message)}}}function Wx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=1024,GN=30;class KN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=_y();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>GN){const s=YN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Mr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_y(),{heartbeatsToSend:r,unsentEntries:i}=XN(this._heartbeatsCache.heartbeats),o=yc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Mr.warn(n),""}}}function _y(){return new Date().toISOString().substring(0,10)}function XN(t,e=WN){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),wy(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),wy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vx()?Ux().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function wy(t){return yc(JSON.stringify({version:2,heartbeats:t})).length}function YN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t){hr(new qn("platform-logger",e=>new uN(e),"PRIVATE")),hr(new qn("heartbeat",e=>new KN(e),"PRIVATE")),On(y0,my,t),On(y0,my,"esm2017"),On("fire-js","")}QN("");var xy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mi,Gx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,E){function S(){}S.prototype=E.prototype,A.D=E.prototype,A.prototype=new S,A.prototype.constructor=A,A.C=function(b,D,M){for(var O=Array(arguments.length-2),he=2;he<arguments.length;he++)O[he-2]=arguments[he];return E.prototype[D].apply(b,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,E,S){S||(S=0);var b=Array(16);if(typeof E=="string")for(var D=0;16>D;++D)b[D]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(D=0;16>D;++D)b[D]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=A.g[0],S=A.g[1],D=A.g[2];var M=A.g[3],O=E+(M^S&(D^M))+b[0]+3614090360&4294967295;E=S+(O<<7&4294967295|O>>>25),O=M+(D^E&(S^D))+b[1]+3905402710&4294967295,M=E+(O<<12&4294967295|O>>>20),O=D+(S^M&(E^S))+b[2]+606105819&4294967295,D=M+(O<<17&4294967295|O>>>15),O=S+(E^D&(M^E))+b[3]+3250441966&4294967295,S=D+(O<<22&4294967295|O>>>10),O=E+(M^S&(D^M))+b[4]+4118548399&4294967295,E=S+(O<<7&4294967295|O>>>25),O=M+(D^E&(S^D))+b[5]+1200080426&4294967295,M=E+(O<<12&4294967295|O>>>20),O=D+(S^M&(E^S))+b[6]+2821735955&4294967295,D=M+(O<<17&4294967295|O>>>15),O=S+(E^D&(M^E))+b[7]+4249261313&4294967295,S=D+(O<<22&4294967295|O>>>10),O=E+(M^S&(D^M))+b[8]+1770035416&4294967295,E=S+(O<<7&4294967295|O>>>25),O=M+(D^E&(S^D))+b[9]+2336552879&4294967295,M=E+(O<<12&4294967295|O>>>20),O=D+(S^M&(E^S))+b[10]+4294925233&4294967295,D=M+(O<<17&4294967295|O>>>15),O=S+(E^D&(M^E))+b[11]+2304563134&4294967295,S=D+(O<<22&4294967295|O>>>10),O=E+(M^S&(D^M))+b[12]+1804603682&4294967295,E=S+(O<<7&4294967295|O>>>25),O=M+(D^E&(S^D))+b[13]+4254626195&4294967295,M=E+(O<<12&4294967295|O>>>20),O=D+(S^M&(E^S))+b[14]+2792965006&4294967295,D=M+(O<<17&4294967295|O>>>15),O=S+(E^D&(M^E))+b[15]+1236535329&4294967295,S=D+(O<<22&4294967295|O>>>10),O=E+(D^M&(S^D))+b[1]+4129170786&4294967295,E=S+(O<<5&4294967295|O>>>27),O=M+(S^D&(E^S))+b[6]+3225465664&4294967295,M=E+(O<<9&4294967295|O>>>23),O=D+(E^S&(M^E))+b[11]+643717713&4294967295,D=M+(O<<14&4294967295|O>>>18),O=S+(M^E&(D^M))+b[0]+3921069994&4294967295,S=D+(O<<20&4294967295|O>>>12),O=E+(D^M&(S^D))+b[5]+3593408605&4294967295,E=S+(O<<5&4294967295|O>>>27),O=M+(S^D&(E^S))+b[10]+38016083&4294967295,M=E+(O<<9&4294967295|O>>>23),O=D+(E^S&(M^E))+b[15]+3634488961&4294967295,D=M+(O<<14&4294967295|O>>>18),O=S+(M^E&(D^M))+b[4]+3889429448&4294967295,S=D+(O<<20&4294967295|O>>>12),O=E+(D^M&(S^D))+b[9]+568446438&4294967295,E=S+(O<<5&4294967295|O>>>27),O=M+(S^D&(E^S))+b[14]+3275163606&4294967295,M=E+(O<<9&4294967295|O>>>23),O=D+(E^S&(M^E))+b[3]+4107603335&4294967295,D=M+(O<<14&4294967295|O>>>18),O=S+(M^E&(D^M))+b[8]+1163531501&4294967295,S=D+(O<<20&4294967295|O>>>12),O=E+(D^M&(S^D))+b[13]+2850285829&4294967295,E=S+(O<<5&4294967295|O>>>27),O=M+(S^D&(E^S))+b[2]+4243563512&4294967295,M=E+(O<<9&4294967295|O>>>23),O=D+(E^S&(M^E))+b[7]+1735328473&4294967295,D=M+(O<<14&4294967295|O>>>18),O=S+(M^E&(D^M))+b[12]+2368359562&4294967295,S=D+(O<<20&4294967295|O>>>12),O=E+(S^D^M)+b[5]+4294588738&4294967295,E=S+(O<<4&4294967295|O>>>28),O=M+(E^S^D)+b[8]+2272392833&4294967295,M=E+(O<<11&4294967295|O>>>21),O=D+(M^E^S)+b[11]+1839030562&4294967295,D=M+(O<<16&4294967295|O>>>16),O=S+(D^M^E)+b[14]+4259657740&4294967295,S=D+(O<<23&4294967295|O>>>9),O=E+(S^D^M)+b[1]+2763975236&4294967295,E=S+(O<<4&4294967295|O>>>28),O=M+(E^S^D)+b[4]+1272893353&4294967295,M=E+(O<<11&4294967295|O>>>21),O=D+(M^E^S)+b[7]+4139469664&4294967295,D=M+(O<<16&4294967295|O>>>16),O=S+(D^M^E)+b[10]+3200236656&4294967295,S=D+(O<<23&4294967295|O>>>9),O=E+(S^D^M)+b[13]+681279174&4294967295,E=S+(O<<4&4294967295|O>>>28),O=M+(E^S^D)+b[0]+3936430074&4294967295,M=E+(O<<11&4294967295|O>>>21),O=D+(M^E^S)+b[3]+3572445317&4294967295,D=M+(O<<16&4294967295|O>>>16),O=S+(D^M^E)+b[6]+76029189&4294967295,S=D+(O<<23&4294967295|O>>>9),O=E+(S^D^M)+b[9]+3654602809&4294967295,E=S+(O<<4&4294967295|O>>>28),O=M+(E^S^D)+b[12]+3873151461&4294967295,M=E+(O<<11&4294967295|O>>>21),O=D+(M^E^S)+b[15]+530742520&4294967295,D=M+(O<<16&4294967295|O>>>16),O=S+(D^M^E)+b[2]+3299628645&4294967295,S=D+(O<<23&4294967295|O>>>9),O=E+(D^(S|~M))+b[0]+4096336452&4294967295,E=S+(O<<6&4294967295|O>>>26),O=M+(S^(E|~D))+b[7]+1126891415&4294967295,M=E+(O<<10&4294967295|O>>>22),O=D+(E^(M|~S))+b[14]+2878612391&4294967295,D=M+(O<<15&4294967295|O>>>17),O=S+(M^(D|~E))+b[5]+4237533241&4294967295,S=D+(O<<21&4294967295|O>>>11),O=E+(D^(S|~M))+b[12]+1700485571&4294967295,E=S+(O<<6&4294967295|O>>>26),O=M+(S^(E|~D))+b[3]+2399980690&4294967295,M=E+(O<<10&4294967295|O>>>22),O=D+(E^(M|~S))+b[10]+4293915773&4294967295,D=M+(O<<15&4294967295|O>>>17),O=S+(M^(D|~E))+b[1]+2240044497&4294967295,S=D+(O<<21&4294967295|O>>>11),O=E+(D^(S|~M))+b[8]+1873313359&4294967295,E=S+(O<<6&4294967295|O>>>26),O=M+(S^(E|~D))+b[15]+4264355552&4294967295,M=E+(O<<10&4294967295|O>>>22),O=D+(E^(M|~S))+b[6]+2734768916&4294967295,D=M+(O<<15&4294967295|O>>>17),O=S+(M^(D|~E))+b[13]+1309151649&4294967295,S=D+(O<<21&4294967295|O>>>11),O=E+(D^(S|~M))+b[4]+4149444226&4294967295,E=S+(O<<6&4294967295|O>>>26),O=M+(S^(E|~D))+b[11]+3174756917&4294967295,M=E+(O<<10&4294967295|O>>>22),O=D+(E^(M|~S))+b[2]+718787259&4294967295,D=M+(O<<15&4294967295|O>>>17),O=S+(M^(D|~E))+b[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(D+(O<<21&4294967295|O>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+M&4294967295}r.prototype.u=function(A,E){E===void 0&&(E=A.length);for(var S=E-this.blockSize,b=this.B,D=this.h,M=0;M<E;){if(D==0)for(;M<=S;)i(this,A,M),M+=this.blockSize;if(typeof A=="string"){for(;M<E;)if(b[D++]=A.charCodeAt(M++),D==this.blockSize){i(this,b),D=0;break}}else for(;M<E;)if(b[D++]=A[M++],D==this.blockSize){i(this,b),D=0;break}}this.h=D,this.o+=E},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;var S=8*this.o;for(E=A.length-8;E<A.length;++E)A[E]=S&255,S/=256;for(this.u(A),A=Array(16),E=S=0;4>E;++E)for(var b=0;32>b;b+=8)A[S++]=this.g[E]>>>b&255;return A};function o(A,E){var S=a;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=E(A)}function s(A,E){this.h=E;for(var S=[],b=!0,D=A.length-1;0<=D;D--){var M=A[D]|0;b&&M==E||(S[D]=M,b=!1)}this.g=S}var a={};function l(A){return-128<=A&&128>A?o(A,function(E){return new s([E|0],0>E?-1:0)}):new s([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return h;if(0>A)return I(u(-A));for(var E=[],S=1,b=0;A>=S;b++)E[b]=A/S|0,S*=4294967296;return new s(E,0)}function c(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return I(c(A.substring(1),E));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(E,8)),b=h,D=0;D<A.length;D+=8){var M=Math.min(8,A.length-D),O=parseInt(A.substring(D,D+M),E);8>M?(M=u(Math.pow(E,M)),b=b.j(M).add(u(O))):(b=b.j(S),b=b.add(u(O)))}return b}var h=l(0),d=l(1),p=l(16777216);t=s.prototype,t.m=function(){if(w(this))return-I(this).m();for(var A=0,E=1,S=0;S<this.g.length;S++){var b=this.i(S);A+=(0<=b?b:4294967296+b)*E,E*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(m(this))return"0";if(w(this))return"-"+I(this).toString(A);for(var E=u(Math.pow(A,6)),S=this,b="";;){var D=T(S,E).g;S=y(S,D.j(E));var M=((0<S.g.length?S.g[0]:S.h)>>>0).toString(A);if(S=D,m(S))return M+b;for(;6>M.length;)M="0"+M;b=M+b}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function m(A){if(A.h!=0)return!1;for(var E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function w(A){return A.h==-1}t.l=function(A){return A=y(this,A),w(A)?-1:m(A)?0:1};function I(A){for(var E=A.g.length,S=[],b=0;b<E;b++)S[b]=~A.g[b];return new s(S,~A.h).add(d)}t.abs=function(){return w(this)?I(this):this},t.add=function(A){for(var E=Math.max(this.g.length,A.g.length),S=[],b=0,D=0;D<=E;D++){var M=b+(this.i(D)&65535)+(A.i(D)&65535),O=(M>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);b=O>>>16,M&=65535,O&=65535,S[D]=O<<16|M}return new s(S,S[S.length-1]&-2147483648?-1:0)};function y(A,E){return A.add(I(E))}t.j=function(A){if(m(this)||m(A))return h;if(w(this))return w(A)?I(this).j(I(A)):I(I(this).j(A));if(w(A))return I(this.j(I(A)));if(0>this.l(p)&&0>A.l(p))return u(this.m()*A.m());for(var E=this.g.length+A.g.length,S=[],b=0;b<2*E;b++)S[b]=0;for(b=0;b<this.g.length;b++)for(var D=0;D<A.g.length;D++){var M=this.i(b)>>>16,O=this.i(b)&65535,he=A.i(D)>>>16,te=A.i(D)&65535;S[2*b+2*D]+=O*te,v(S,2*b+2*D),S[2*b+2*D+1]+=M*te,v(S,2*b+2*D+1),S[2*b+2*D+1]+=O*he,v(S,2*b+2*D+1),S[2*b+2*D+2]+=M*he,v(S,2*b+2*D+2)}for(b=0;b<E;b++)S[b]=S[2*b+1]<<16|S[2*b];for(b=E;b<2*E;b++)S[b]=0;return new s(S,0)};function v(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function x(A,E){this.g=A,this.h=E}function T(A,E){if(m(E))throw Error("division by zero");if(m(A))return new x(h,h);if(w(A))return E=T(I(A),E),new x(I(E.g),I(E.h));if(w(E))return E=T(A,I(E)),new x(I(E.g),E.h);if(30<A.g.length){if(w(A)||w(E))throw Error("slowDivide_ only works with positive integers.");for(var S=d,b=E;0>=b.l(A);)S=P(S),b=P(b);var D=k(S,1),M=k(b,1);for(b=k(b,2),S=k(S,2);!m(b);){var O=M.add(b);0>=O.l(A)&&(D=D.add(S),M=O),b=k(b,1),S=k(S,1)}return E=y(A,D.j(E)),new x(D,E)}for(D=h;0<=A.l(E);){for(S=Math.max(1,Math.floor(A.m()/E.m())),b=Math.ceil(Math.log(S)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),M=u(S),O=M.j(E);w(O)||0<O.l(A);)S-=b,M=u(S),O=M.j(E);m(M)&&(M=d),D=D.add(M),A=y(A,O)}return new x(D,A)}t.A=function(A){return T(this,A).h},t.and=function(A){for(var E=Math.max(this.g.length,A.g.length),S=[],b=0;b<E;b++)S[b]=this.i(b)&A.i(b);return new s(S,this.h&A.h)},t.or=function(A){for(var E=Math.max(this.g.length,A.g.length),S=[],b=0;b<E;b++)S[b]=this.i(b)|A.i(b);return new s(S,this.h|A.h)},t.xor=function(A){for(var E=Math.max(this.g.length,A.g.length),S=[],b=0;b<E;b++)S[b]=this.i(b)^A.i(b);return new s(S,this.h^A.h)};function P(A){for(var E=A.g.length+1,S=[],b=0;b<E;b++)S[b]=A.i(b)<<1|A.i(b-1)>>>31;return new s(S,A.h)}function k(A,E){var S=E>>5;E%=32;for(var b=A.g.length-S,D=[],M=0;M<b;M++)D[M]=0<E?A.i(M+S)>>>E|A.i(M+S+1)<<32-E:A.i(M+S);return new s(D,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Gx=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=c,mi=s}).apply(typeof xy<"u"?xy:typeof self<"u"?self:typeof window<"u"?window:{});var hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kx,fa,Xx,ku,x0,qx,Yx,Qx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,g,_){return f==Array.prototype||f==Object.prototype||(f[g]=_.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof hu=="object"&&hu];for(var g=0;g<f.length;++g){var _=f[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(f,g){if(g)e:{var _=r;f=f.split(".");for(var C=0;C<f.length-1;C++){var L=f[C];if(!(L in _))break e;_=_[L]}f=f[f.length-1],C=_[f],g=g(C),g!=C&&g!=null&&e(_,f,{configurable:!0,writable:!0,value:g})}}function o(f,g){f instanceof String&&(f+="");var _=0,C=!1,L={next:function(){if(!C&&_<f.length){var B=_++;return{value:g(B,f[B]),done:!1}}return C=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(f){return f||function(){return o(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(f){var g=typeof f;return g=g!="object"?g:f?Array.isArray(f)?"array":g:"null",g=="array"||g=="object"&&typeof f.length=="number"}function u(f){var g=typeof f;return g=="object"&&f!=null||g=="function"}function c(f,g,_){return f.call.apply(f.bind,arguments)}function h(f,g,_){if(!f)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,C),f.apply(g,L)}}return function(){return f.apply(g,arguments)}}function d(f,g,_){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:h,d.apply(null,arguments)}function p(f,g){var _=Array.prototype.slice.call(arguments,1);return function(){var C=_.slice();return C.push.apply(C,arguments),f.apply(this,C)}}function m(f,g){function _(){}_.prototype=g.prototype,f.aa=g.prototype,f.prototype=new _,f.prototype.constructor=f,f.Qb=function(C,L,B){for(var K=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)K[ke-2]=arguments[ke];return g.prototype[L].apply(C,K)}}function w(f){const g=f.length;if(0<g){const _=Array(g);for(let C=0;C<g;C++)_[C]=f[C];return _}return[]}function I(f,g){for(let _=1;_<arguments.length;_++){const C=arguments[_];if(l(C)){const L=f.length||0,B=C.length||0;f.length=L+B;for(let K=0;K<B;K++)f[L+K]=C[K]}else f.push(C)}}class y{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(f){return/^[\s\xa0]*$/.test(f)}function x(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function T(f){return T[" "](f),f}T[" "]=function(){};var P=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function k(f,g,_){for(const C in f)g.call(_,f[C],C,f)}function A(f,g){for(const _ in f)g.call(void 0,f[_],_,f)}function E(f){const g={};for(const _ in f)g[_]=f[_];return g}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(f,g){let _,C;for(let L=1;L<arguments.length;L++){C=arguments[L];for(_ in C)f[_]=C[_];for(let B=0;B<S.length;B++)_=S[B],Object.prototype.hasOwnProperty.call(C,_)&&(f[_]=C[_])}}function D(f){var g=1;f=f.split(":");const _=[];for(;0<g&&f.length;)_.push(f.shift()),g--;return f.length&&_.push(f.join(":")),_}function M(f){a.setTimeout(()=>{throw f},0)}function O(){var f=W;let g=null;return f.g&&(g=f.g,f.g=f.g.next,f.g||(f.h=null),g.next=null),g}class he{constructor(){this.h=this.g=null}add(g,_){const C=te.get();C.set(g,_),this.h?this.h.next=C:this.g=C,this.h=C}}var te=new y(()=>new Y,f=>f.reset());class Y{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let X,j=!1,W=new he,Z=()=>{const f=a.Promise.resolve(void 0);X=()=>{f.then(q)}};var q=()=>{for(var f;f=O();){try{f.h.call(f.g)}catch(_){M(_)}var g=te;g.j(f),100>g.h&&(g.h++,f.next=g.g,g.g=f)}j=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(f,g){this.type=f,this.g=this.target=g,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var xn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,g=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const _=()=>{};a.addEventListener("test",_,g),a.removeEventListener("test",_,g)}catch{}return f}();function En(f,g){if(Ce.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var _=this.type=f.type,C=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=g,g=f.relatedTarget){if(P){e:{try{T(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else _=="mouseover"?g=f.fromElement:_=="mouseout"&&(g=f.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:vr[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&En.aa.h.call(this)}}m(En,Ce);var vr={2:"touch",3:"pen",4:"mouse"};En.prototype.h=function(){En.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Zn="closure_listenable_"+(1e6*Math.random()|0),FI=0;function BI(f,g,_,C,L){this.listener=f,this.proxy=null,this.src=g,this.type=_,this.capture=!!C,this.ha=L,this.key=++FI,this.da=this.fa=!1}function Tl(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Sl(f){this.src=f,this.g={},this.h=0}Sl.prototype.add=function(f,g,_,C,L){var B=f.toString();f=this.g[B],f||(f=this.g[B]=[],this.h++);var K=Df(f,g,C,L);return-1<K?(g=f[K],_||(g.fa=!1)):(g=new BI(g,this.src,B,!!C,L),g.fa=_,f.push(g)),g};function Pf(f,g){var _=g.type;if(_ in f.g){var C=f.g[_],L=Array.prototype.indexOf.call(C,g,void 0),B;(B=0<=L)&&Array.prototype.splice.call(C,L,1),B&&(Tl(g),f.g[_].length==0&&(delete f.g[_],f.h--))}}function Df(f,g,_,C){for(var L=0;L<f.length;++L){var B=f[L];if(!B.da&&B.listener==g&&B.capture==!!_&&B.ha==C)return L}return-1}var kf="closure_lm_"+(1e6*Math.random()|0),Mf={};function Jp(f,g,_,C,L){if(C&&C.once)return tg(f,g,_,C,L);if(Array.isArray(g)){for(var B=0;B<g.length;B++)Jp(f,g[B],_,C,L);return null}return _=Vf(_),f&&f[Zn]?f.K(g,_,u(C)?!!C.capture:!!C,L):eg(f,g,_,!1,C,L)}function eg(f,g,_,C,L,B){if(!g)throw Error("Invalid event type");var K=u(L)?!!L.capture:!!L,ke=Ff(f);if(ke||(f[kf]=ke=new Sl(f)),_=ke.add(g,_,C,K,B),_.proxy)return _;if(C=VI(),_.proxy=C,C.src=f,C.listener=_,f.addEventListener)xn||(L=K),L===void 0&&(L=!1),f.addEventListener(g.toString(),C,L);else if(f.attachEvent)f.attachEvent(rg(g.toString()),C);else if(f.addListener&&f.removeListener)f.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return _}function VI(){function f(_){return g.call(f.src,f.listener,_)}const g=UI;return f}function tg(f,g,_,C,L){if(Array.isArray(g)){for(var B=0;B<g.length;B++)tg(f,g[B],_,C,L);return null}return _=Vf(_),f&&f[Zn]?f.L(g,_,u(C)?!!C.capture:!!C,L):eg(f,g,_,!0,C,L)}function ng(f,g,_,C,L){if(Array.isArray(g))for(var B=0;B<g.length;B++)ng(f,g[B],_,C,L);else C=u(C)?!!C.capture:!!C,_=Vf(_),f&&f[Zn]?(f=f.i,g=String(g).toString(),g in f.g&&(B=f.g[g],_=Df(B,_,C,L),-1<_&&(Tl(B[_]),Array.prototype.splice.call(B,_,1),B.length==0&&(delete f.g[g],f.h--)))):f&&(f=Ff(f))&&(g=f.g[g.toString()],f=-1,g&&(f=Df(g,_,C,L)),(_=-1<f?g[f]:null)&&Lf(_))}function Lf(f){if(typeof f!="number"&&f&&!f.da){var g=f.src;if(g&&g[Zn])Pf(g.i,f);else{var _=f.type,C=f.proxy;g.removeEventListener?g.removeEventListener(_,C,f.capture):g.detachEvent?g.detachEvent(rg(_),C):g.addListener&&g.removeListener&&g.removeListener(C),(_=Ff(g))?(Pf(_,f),_.h==0&&(_.src=null,g[kf]=null)):Tl(f)}}}function rg(f){return f in Mf?Mf[f]:Mf[f]="on"+f}function UI(f,g){if(f.da)f=!0;else{g=new En(g,this);var _=f.listener,C=f.ha||f.src;f.fa&&Lf(f),f=_.call(C,g)}return f}function Ff(f){return f=f[kf],f instanceof Sl?f:null}var Bf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vf(f){return typeof f=="function"?f:(f[Bf]||(f[Bf]=function(g){return f.handleEvent(g)}),f[Bf])}function Ot(){le.call(this),this.i=new Sl(this),this.M=this,this.F=null}m(Ot,le),Ot.prototype[Zn]=!0,Ot.prototype.removeEventListener=function(f,g,_,C){ng(this,f,g,_,C)};function Wt(f,g){var _,C=f.F;if(C)for(_=[];C;C=C.F)_.push(C);if(f=f.M,C=g.type||g,typeof g=="string")g=new Ce(g,f);else if(g instanceof Ce)g.target=g.target||f;else{var L=g;g=new Ce(C,f),b(g,L)}if(L=!0,_)for(var B=_.length-1;0<=B;B--){var K=g.g=_[B];L=Cl(K,C,!0,g)&&L}if(K=g.g=f,L=Cl(K,C,!0,g)&&L,L=Cl(K,C,!1,g)&&L,_)for(B=0;B<_.length;B++)K=g.g=_[B],L=Cl(K,C,!1,g)&&L}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var f=this.i,g;for(g in f.g){for(var _=f.g[g],C=0;C<_.length;C++)Tl(_[C]);delete f.g[g],f.h--}}this.F=null},Ot.prototype.K=function(f,g,_,C){return this.i.add(String(f),g,!1,_,C)},Ot.prototype.L=function(f,g,_,C){return this.i.add(String(f),g,!0,_,C)};function Cl(f,g,_,C){if(g=f.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,B=0;B<g.length;++B){var K=g[B];if(K&&!K.da&&K.capture==_){var ke=K.listener,wt=K.ha||K.src;K.fa&&Pf(f.i,K),L=ke.call(wt,C)!==!1&&L}}return L&&!C.defaultPrevented}function ig(f,g,_){if(typeof f=="function")_&&(f=d(f,_));else if(f&&typeof f.handleEvent=="function")f=d(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(f,g||0)}function og(f){f.g=ig(()=>{f.g=null,f.i&&(f.i=!1,og(f))},f.l);const g=f.h;f.h=null,f.m.apply(null,g)}class jI extends le{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:og(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ps(f){le.call(this),this.h=f,this.g={}}m(Ps,le);var sg=[];function ag(f){k(f.g,function(g,_){this.g.hasOwnProperty(_)&&Lf(g)},f),f.g={}}Ps.prototype.N=function(){Ps.aa.N.call(this),ag(this)},Ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Uf=a.JSON.stringify,$I=a.JSON.parse,zI=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function jf(){}jf.prototype.h=null;function lg(f){return f.h||(f.h=f.i())}function ug(){}var Ds={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $f(){Ce.call(this,"d")}m($f,Ce);function zf(){Ce.call(this,"c")}m(zf,Ce);var Di={},cg=null;function bl(){return cg=cg||new Ot}Di.La="serverreachability";function fg(f){Ce.call(this,Di.La,f)}m(fg,Ce);function ks(f){const g=bl();Wt(g,new fg(g))}Di.STAT_EVENT="statevent";function hg(f,g){Ce.call(this,Di.STAT_EVENT,f),this.stat=g}m(hg,Ce);function Gt(f){const g=bl();Wt(g,new hg(g,f))}Di.Ma="timingevent";function dg(f,g){Ce.call(this,Di.Ma,f),this.size=g}m(dg,Ce);function Ms(f,g){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},g)}function Ls(){this.g=!0}Ls.prototype.xa=function(){this.g=!1};function HI(f,g,_,C,L,B){f.info(function(){if(f.g)if(B)for(var K="",ke=B.split("&"),wt=0;wt<ke.length;wt++){var Ae=ke[wt].split("=");if(1<Ae.length){var Pt=Ae[0];Ae=Ae[1];var Dt=Pt.split("_");K=2<=Dt.length&&Dt[1]=="type"?K+(Pt+"="+Ae+"&"):K+(Pt+"=redacted&")}}else K=null;else K=B;return"XMLHTTP REQ ("+C+") [attempt "+L+"]: "+g+`
`+_+`
`+K})}function WI(f,g,_,C,L,B,K){f.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+L+"]: "+g+`
`+_+`
`+B+" "+K})}function yo(f,g,_,C){f.info(function(){return"XMLHTTP TEXT ("+g+"): "+KI(f,_)+(C?" "+C:"")})}function GI(f,g){f.info(function(){return"TIMEOUT: "+g})}Ls.prototype.info=function(){};function KI(f,g){if(!f.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(f=0;f<_.length;f++)if(Array.isArray(_[f])){var C=_[f];if(!(2>C.length)){var L=C[1];if(Array.isArray(L)&&!(1>L.length)){var B=L[0];if(B!="noop"&&B!="stop"&&B!="close")for(var K=1;K<L.length;K++)L[K]=""}}}}return Uf(_)}catch{return g}}var Rl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hf;function Nl(){}m(Nl,jf),Nl.prototype.g=function(){return new XMLHttpRequest},Nl.prototype.i=function(){return{}},Hf=new Nl;function jr(f,g,_,C){this.j=f,this.i=g,this.l=_,this.R=C||1,this.U=new Ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gg}function gg(){this.i=null,this.g="",this.h=!1}var mg={},Wf={};function Gf(f,g,_){f.L=1,f.v=kl(yr(g)),f.m=_,f.P=!0,vg(f,null)}function vg(f,g){f.F=Date.now(),Ol(f),f.A=yr(f.v);var _=f.A,C=f.R;Array.isArray(C)||(C=[String(C)]),Og(_.i,"t",C),f.C=0,_=f.j.J,f.h=new gg,f.g=qg(f.j,_?g:null,!f.m),0<f.O&&(f.M=new jI(d(f.Y,f,f.g),f.O)),g=f.U,_=f.g,C=f.ca;var L="readystatechange";Array.isArray(L)||(L&&(sg[0]=L.toString()),L=sg);for(var B=0;B<L.length;B++){var K=Jp(_,L[B],C||g.handleEvent,!1,g.h||g);if(!K)break;g.g[K.key]=K}g=f.H?E(f.H):{},f.m?(f.u||(f.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,g)):(f.u="GET",f.g.ea(f.A,f.u,null,g)),ks(),HI(f.i,f.u,f.A,f.l,f.R,f.m)}jr.prototype.ca=function(f){f=f.target;const g=this.M;g&&_r(f)==3?g.j():this.Y(f)},jr.prototype.Y=function(f){try{if(f==this.g)e:{const Dt=_r(this.g);var g=this.g.Ba();const xo=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||Bg(this.g)))){this.J||Dt!=4||g==7||(g==8||0>=xo?ks(3):ks(2)),Kf(this);var _=this.g.Z();this.X=_;t:if(yg(this)){var C=Bg(this.g);f="";var L=C.length,B=_r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ki(this),Fs(this);var K="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,f+=this.h.i.decode(C[g],{stream:!(B&&g==L-1)});C.length=0,this.h.g+=f,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=_==200,WI(this.i,this.u,this.A,this.l,this.R,Dt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,wt=this.g;if((ke=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ke)){var Ae=ke;break t}}Ae=null}if(_=Ae)yo(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xf(this,_);else{this.o=!1,this.s=3,Gt(12),ki(this),Fs(this);break e}}if(this.P){_=!0;let Mn;for(;!this.J&&this.C<K.length;)if(Mn=XI(this,K),Mn==Wf){Dt==4&&(this.s=4,Gt(14),_=!1),yo(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==mg){this.s=4,Gt(15),yo(this.i,this.l,K,"[Invalid Chunk]"),_=!1;break}else yo(this.i,this.l,Mn,null),Xf(this,Mn);if(yg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||K.length!=0||this.h.h||(this.s=1,Gt(16),_=!1),this.o=this.o&&_,!_)yo(this.i,this.l,K,"[Invalid Chunked Response]"),ki(this),Fs(this);else if(0<K.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),eh(Pt),Pt.M=!0,Gt(11))}}else yo(this.i,this.l,K,null),Xf(this,K);Dt==4&&ki(this),this.o&&!this.J&&(Dt==4?Wg(this.j,this):(this.o=!1,Ol(this)))}else fT(this.g),_==400&&0<K.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),ki(this),Fs(this)}}}catch{}finally{}};function yg(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function XI(f,g){var _=f.C,C=g.indexOf(`
`,_);return C==-1?Wf:(_=Number(g.substring(_,C)),isNaN(_)?mg:(C+=1,C+_>g.length?Wf:(g=g.slice(C,C+_),f.C=C+_,g)))}jr.prototype.cancel=function(){this.J=!0,ki(this)};function Ol(f){f.S=Date.now()+f.I,_g(f,f.I)}function _g(f,g){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ms(d(f.ba,f),g)}function Kf(f){f.B&&(a.clearTimeout(f.B),f.B=null)}jr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(GI(this.i,this.A),this.L!=2&&(ks(),Gt(17)),ki(this),this.s=2,Fs(this)):_g(this,this.S-f)};function Fs(f){f.j.G==0||f.J||Wg(f.j,f)}function ki(f){Kf(f);var g=f.M;g&&typeof g.ma=="function"&&g.ma(),f.M=null,ag(f.U),f.g&&(g=f.g,f.g=null,g.abort(),g.ma())}function Xf(f,g){try{var _=f.j;if(_.G!=0&&(_.g==f||qf(_.h,f))){if(!f.K&&qf(_.h,f)&&_.G==3){try{var C=_.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var L=C;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<f.F)Ul(_),Bl(_);else break e;Jf(_),Gt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=Ms(d(_.Za,_),6e3));if(1>=Eg(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Li(_,11)}else if((f.K||_.g==f)&&Ul(_),!v(g))for(L=_.Da.g.parse(g),g=0;g<L.length;g++){let Ae=L[g];if(_.T=Ae[0],Ae=Ae[1],_.G==2)if(Ae[0]=="c"){_.K=Ae[1],_.ia=Ae[2];const Pt=Ae[3];Pt!=null&&(_.la=Pt,_.j.info("VER="+_.la));const Dt=Ae[4];Dt!=null&&(_.Aa=Dt,_.j.info("SVER="+_.Aa));const xo=Ae[5];xo!=null&&typeof xo=="number"&&0<xo&&(C=1.5*xo,_.L=C,_.j.info("backChannelRequestTimeoutMs_="+C)),C=_;const Mn=f.g;if(Mn){const $l=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($l){var B=C.h;B.g||$l.indexOf("spdy")==-1&&$l.indexOf("quic")==-1&&$l.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Yf(B,B.h),B.h=null))}if(C.D){const th=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;th&&(C.ya=th,Fe(C.I,C.D,th))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-f.F,_.j.info("Handshake RTT: "+_.R+"ms")),C=_;var K=f;if(C.qa=Xg(C,C.J?C.ia:null,C.W),K.K){Ag(C.h,K);var ke=K,wt=C.L;wt&&(ke.I=wt),ke.B&&(Kf(ke),Ol(ke)),C.g=K}else zg(C);0<_.i.length&&Vl(_)}else Ae[0]!="stop"&&Ae[0]!="close"||Li(_,7);else _.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Li(_,7):Zf(_):Ae[0]!="noop"&&_.l&&_.l.ta(Ae),_.v=0)}}ks(4)}catch{}}var qI=class{constructor(f,g){this.g=f,this.map=g}};function wg(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xg(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Eg(f){return f.h?1:f.g?f.g.size:0}function qf(f,g){return f.h?f.h==g:f.g?f.g.has(g):!1}function Yf(f,g){f.g?f.g.add(g):f.h=g}function Ag(f,g){f.h&&f.h==g?f.h=null:f.g&&f.g.has(g)&&f.g.delete(g)}wg.prototype.cancel=function(){if(this.i=Ig(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Ig(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let g=f.i;for(const _ of f.g.values())g=g.concat(_.D);return g}return w(f.i)}function YI(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var g=[],_=f.length,C=0;C<_;C++)g.push(f[C]);return g}g=[],_=0;for(C in f)g[_++]=f[C];return g}function QI(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var g=[];f=f.length;for(var _=0;_<f;_++)g.push(_);return g}g=[],_=0;for(const C in f)g[_++]=C;return g}}}function Tg(f,g){if(f.forEach&&typeof f.forEach=="function")f.forEach(g,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,g,void 0);else for(var _=QI(f),C=YI(f),L=C.length,B=0;B<L;B++)g.call(void 0,C[B],_&&_[B],f)}var Sg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZI(f,g){if(f){f=f.split("&");for(var _=0;_<f.length;_++){var C=f[_].indexOf("="),L=null;if(0<=C){var B=f[_].substring(0,C);L=f[_].substring(C+1)}else B=f[_];g(B,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Mi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Mi){this.h=f.h,Pl(this,f.j),this.o=f.o,this.g=f.g,Dl(this,f.s),this.l=f.l;var g=f.i,_=new Us;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Cg(this,_),this.m=f.m}else f&&(g=String(f).match(Sg))?(this.h=!1,Pl(this,g[1]||"",!0),this.o=Bs(g[2]||""),this.g=Bs(g[3]||"",!0),Dl(this,g[4]),this.l=Bs(g[5]||"",!0),Cg(this,g[6]||"",!0),this.m=Bs(g[7]||"")):(this.h=!1,this.i=new Us(null,this.h))}Mi.prototype.toString=function(){var f=[],g=this.j;g&&f.push(Vs(g,bg,!0),":");var _=this.g;return(_||g=="file")&&(f.push("//"),(g=this.o)&&f.push(Vs(g,bg,!0),"@"),f.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&f.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&f.push("/"),f.push(Vs(_,_.charAt(0)=="/"?tT:eT,!0))),(_=this.i.toString())&&f.push("?",_),(_=this.m)&&f.push("#",Vs(_,rT)),f.join("")};function yr(f){return new Mi(f)}function Pl(f,g,_){f.j=_?Bs(g,!0):g,f.j&&(f.j=f.j.replace(/:$/,""))}function Dl(f,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);f.s=g}else f.s=null}function Cg(f,g,_){g instanceof Us?(f.i=g,iT(f.i,f.h)):(_||(g=Vs(g,nT)),f.i=new Us(g,f.h))}function Fe(f,g,_){f.i.set(g,_)}function kl(f){return Fe(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Bs(f,g){return f?g?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Vs(f,g,_){return typeof f=="string"?(f=encodeURI(f).replace(g,JI),_&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function JI(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var bg=/[#\/\?@]/g,eT=/[#\?:]/g,tT=/[#\?]/g,nT=/[#\?@]/g,rT=/#/g;function Us(f,g){this.h=this.g=null,this.i=f||null,this.j=!!g}function $r(f){f.g||(f.g=new Map,f.h=0,f.i&&ZI(f.i,function(g,_){f.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}t=Us.prototype,t.add=function(f,g){$r(this),this.i=null,f=_o(this,f);var _=this.g.get(f);return _||this.g.set(f,_=[]),_.push(g),this.h+=1,this};function Rg(f,g){$r(f),g=_o(f,g),f.g.has(g)&&(f.i=null,f.h-=f.g.get(g).length,f.g.delete(g))}function Ng(f,g){return $r(f),g=_o(f,g),f.g.has(g)}t.forEach=function(f,g){$r(this),this.g.forEach(function(_,C){_.forEach(function(L){f.call(g,L,C,this)},this)},this)},t.na=function(){$r(this);const f=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let C=0;C<g.length;C++){const L=f[C];for(let B=0;B<L.length;B++)_.push(g[C])}return _},t.V=function(f){$r(this);let g=[];if(typeof f=="string")Ng(this,f)&&(g=g.concat(this.g.get(_o(this,f))));else{f=Array.from(this.g.values());for(let _=0;_<f.length;_++)g=g.concat(f[_])}return g},t.set=function(f,g){return $r(this),this.i=null,f=_o(this,f),Ng(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[g]),this.h+=1,this},t.get=function(f,g){return f?(f=this.V(f),0<f.length?String(f[0]):g):g};function Og(f,g,_){Rg(f,g),0<_.length&&(f.i=null,f.g.set(_o(f,g),w(_)),f.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var C=g[_];const B=encodeURIComponent(String(C)),K=this.V(C);for(C=0;C<K.length;C++){var L=B;K[C]!==""&&(L+="="+encodeURIComponent(String(K[C]))),f.push(L)}}return this.i=f.join("&")};function _o(f,g){return g=String(g),f.j&&(g=g.toLowerCase()),g}function iT(f,g){g&&!f.j&&($r(f),f.i=null,f.g.forEach(function(_,C){var L=C.toLowerCase();C!=L&&(Rg(this,C),Og(this,L,_))},f)),f.j=g}function oT(f,g){const _=new Ls;if(a.Image){const C=new Image;C.onload=p(zr,_,"TestLoadImage: loaded",!0,g,C),C.onerror=p(zr,_,"TestLoadImage: error",!1,g,C),C.onabort=p(zr,_,"TestLoadImage: abort",!1,g,C),C.ontimeout=p(zr,_,"TestLoadImage: timeout",!1,g,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=f}else g(!1)}function sT(f,g){const _=new Ls,C=new AbortController,L=setTimeout(()=>{C.abort(),zr(_,"TestPingServer: timeout",!1,g)},1e4);fetch(f,{signal:C.signal}).then(B=>{clearTimeout(L),B.ok?zr(_,"TestPingServer: ok",!0,g):zr(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),zr(_,"TestPingServer: error",!1,g)})}function zr(f,g,_,C,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),C(_)}catch{}}function aT(){this.g=new zI}function lT(f,g,_){const C=_||"";try{Tg(f,function(L,B){let K=L;u(L)&&(K=Uf(L)),g.push(C+B+"="+encodeURIComponent(K))})}catch(L){throw g.push(C+"type="+encodeURIComponent("_badmap")),L}}function Ml(f){this.l=f.Ub||null,this.j=f.eb||!1}m(Ml,jf),Ml.prototype.g=function(){return new Ll(this.l,this.j)},Ml.prototype.i=function(f){return function(){return f}}({});function Ll(f,g){Ot.call(this),this.D=f,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Ll,Ot),t=Ll.prototype,t.open=function(f,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=g,this.readyState=1,$s(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(g.body=f),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,js(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,$s(this)),this.g&&(this.readyState=3,$s(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pg(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pg(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var g=f.value?f.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!f.done}))&&(this.response=this.responseText+=g)}f.done?js(this):$s(this),this.readyState==3&&Pg(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,js(this))},t.Qa=function(f){this.g&&(this.response=f,js(this))},t.ga=function(){this.g&&js(this)};function js(f){f.readyState=4,f.l=null,f.j=null,f.v=null,$s(f)}t.setRequestHeader=function(f,g){this.u.append(f,g)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,f.push(_[0]+": "+_[1]),_=g.next();return f.join(`\r
`)};function $s(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Dg(f){let g="";return k(f,function(_,C){g+=C,g+=":",g+=_,g+=`\r
`}),g}function Qf(f,g,_){e:{for(C in _){var C=!1;break e}C=!0}C||(_=Dg(_),typeof f=="string"?_!=null&&encodeURIComponent(String(_)):Fe(f,g,_))}function qe(f){Ot.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(qe,Ot);var uT=/^https?$/i,cT=["POST","PUT"];t=qe.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,g,_,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);g=g?g.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hf.g(),this.v=this.o?lg(this.o):lg(Hf),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(g,String(f),!0),this.B=!1}catch(B){kg(this,B);return}if(f=_||"",_=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var L in C)_.set(L,C[L]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const B of C.keys())_.set(B,C.get(B));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(_.keys()).find(B=>B.toLowerCase()=="content-type"),L=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(cT,g,void 0))||C||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,K]of _)this.g.setRequestHeader(B,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fg(this),this.u=!0,this.g.send(f),this.u=!1}catch(B){kg(this,B)}};function kg(f,g){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=g,f.m=5,Mg(f),Fl(f)}function Mg(f){f.A||(f.A=!0,Wt(f,"complete"),Wt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Wt(this,"complete"),Wt(this,"abort"),Fl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fl(this,!0)),qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Lg(this):this.bb())},t.bb=function(){Lg(this)};function Lg(f){if(f.h&&typeof s<"u"&&(!f.v[1]||_r(f)!=4||f.Z()!=2)){if(f.u&&_r(f)==4)ig(f.Ea,0,f);else if(Wt(f,"readystatechange"),_r(f)==4){f.h=!1;try{const K=f.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var C;if(C=K===0){var L=String(f.D).match(Sg)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),C=!uT.test(L?L.toLowerCase():"")}_=C}if(_)Wt(f,"complete"),Wt(f,"success");else{f.m=6;try{var B=2<_r(f)?f.g.statusText:""}catch{B=""}f.l=B+" ["+f.Z()+"]",Mg(f)}}finally{Fl(f)}}}}function Fl(f,g){if(f.g){Fg(f);const _=f.g,C=f.v[0]?()=>{}:null;f.g=null,f.v=null,g||Wt(f,"ready");try{_.onreadystatechange=C}catch{}}}function Fg(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function _r(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<_r(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var g=this.g.responseText;return f&&g.indexOf(f)==0&&(g=g.substring(f.length)),$I(g)}};function Bg(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function fT(f){const g={};f=(f.g&&2<=_r(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<f.length;C++){if(v(f[C]))continue;var _=D(f[C]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const B=g[L]||[];g[L]=B,B.push(_)}A(g,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zs(f,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[f]||g}function Vg(f){this.Aa=0,this.i=[],this.j=new Ls,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zs("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zs("baseRetryDelayMs",5e3,f),this.cb=zs("retryDelaySeedMs",1e4,f),this.Wa=zs("forwardChannelMaxRetries",2,f),this.wa=zs("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new wg(f&&f.concurrentRequestLimit),this.Da=new aT,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Vg.prototype,t.la=8,t.G=1,t.connect=function(f,g,_,C){Gt(0),this.W=f,this.H=g||{},_&&C!==void 0&&(this.H.OSID=_,this.H.OAID=C),this.F=this.X,this.I=Xg(this,null,this.W),Vl(this)};function Zf(f){if(Ug(f),f.G==3){var g=f.U++,_=yr(f.I);if(Fe(_,"SID",f.K),Fe(_,"RID",g),Fe(_,"TYPE","terminate"),Hs(f,_),g=new jr(f,f.j,g),g.L=2,g.v=kl(yr(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=g.v,_=!0),_||(g.g=qg(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ol(g)}Kg(f)}function Bl(f){f.g&&(eh(f),f.g.cancel(),f.g=null)}function Ug(f){Bl(f),f.u&&(a.clearTimeout(f.u),f.u=null),Ul(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function Vl(f){if(!xg(f.h)&&!f.s){f.s=!0;var g=f.Ga;X||Z(),j||(X(),j=!0),W.add(g,f),f.B=0}}function hT(f,g){return Eg(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=g.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ms(d(f.Ga,f,g),Gg(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const L=new jr(this,this.j,f);let B=this.o;if(this.S&&(B?(B=E(B),b(B,this.S)):B=this.S),this.m!==null||this.O||(L.H=B,B=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var C=this.i[_];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=$g(this,L,g),_=yr(this.I),Fe(_,"RID",f),Fe(_,"CVER",22),this.D&&Fe(_,"X-HTTP-Session-Id",this.D),Hs(this,_),B&&(this.O?g="headers="+encodeURIComponent(String(Dg(B)))+"&"+g:this.m&&Qf(_,this.m,B)),Yf(this.h,L),this.Ua&&Fe(_,"TYPE","init"),this.P?(Fe(_,"$req",g),Fe(_,"SID","null"),L.T=!0,Gf(L,_,null)):Gf(L,_,g),this.G=2}}else this.G==3&&(f?jg(this,f):this.i.length==0||xg(this.h)||jg(this))};function jg(f,g){var _;g?_=g.l:_=f.U++;const C=yr(f.I);Fe(C,"SID",f.K),Fe(C,"RID",_),Fe(C,"AID",f.T),Hs(f,C),f.m&&f.o&&Qf(C,f.m,f.o),_=new jr(f,f.j,_,f.B+1),f.m===null&&(_.H=f.o),g&&(f.i=g.D.concat(f.i)),g=$g(f,_,1e3),_.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Yf(f.h,_),Gf(_,C,g)}function Hs(f,g){f.H&&k(f.H,function(_,C){Fe(g,C,_)}),f.l&&Tg({},function(_,C){Fe(g,C,_)})}function $g(f,g,_){_=Math.min(f.i.length,_);var C=f.l?d(f.l.Na,f.l,f):null;e:{var L=f.i;let B=-1;for(;;){const K=["count="+_];B==-1?0<_?(B=L[0].g,K.push("ofs="+B)):B=0:K.push("ofs="+B);let ke=!0;for(let wt=0;wt<_;wt++){let Ae=L[wt].g;const Pt=L[wt].map;if(Ae-=B,0>Ae)B=Math.max(0,L[wt].g-100),ke=!1;else try{lT(Pt,K,"req"+Ae+"_")}catch{C&&C(Pt)}}if(ke){C=K.join("&");break e}}}return f=f.i.splice(0,_),g.D=f,C}function zg(f){if(!f.g&&!f.u){f.Y=1;var g=f.Fa;X||Z(),j||(X(),j=!0),W.add(g,f),f.v=0}}function Jf(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ms(d(f.Fa,f),Gg(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,Hg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ms(d(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),Bl(this),Hg(this))};function eh(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function Hg(f){f.g=new jr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var g=yr(f.qa);Fe(g,"RID","rpc"),Fe(g,"SID",f.K),Fe(g,"AID",f.T),Fe(g,"CI",f.F?"0":"1"),!f.F&&f.ja&&Fe(g,"TO",f.ja),Fe(g,"TYPE","xmlhttp"),Hs(f,g),f.m&&f.o&&Qf(g,f.m,f.o),f.L&&(f.g.I=f.L);var _=f.g;f=f.ia,_.L=1,_.v=kl(yr(g)),_.m=null,_.P=!0,vg(_,f)}t.Za=function(){this.C!=null&&(this.C=null,Bl(this),Jf(this),Gt(19))};function Ul(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function Wg(f,g){var _=null;if(f.g==g){Ul(f),eh(f),f.g=null;var C=2}else if(qf(f.h,g))_=g.D,Ag(f.h,g),C=1;else return;if(f.G!=0){if(g.o)if(C==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var L=f.B;C=bl(),Wt(C,new dg(C,_)),Vl(f)}else zg(f);else if(L=g.s,L==3||L==0&&0<g.X||!(C==1&&hT(f,g)||C==2&&Jf(f)))switch(_&&0<_.length&&(g=f.h,g.i=g.i.concat(_)),L){case 1:Li(f,5);break;case 4:Li(f,10);break;case 3:Li(f,6);break;default:Li(f,2)}}}function Gg(f,g){let _=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(_*=2),_*g}function Li(f,g){if(f.j.info("Error code "+g),g==2){var _=d(f.fb,f),C=f.Xa;const L=!C;C=new Mi(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Pl(C,"https"),kl(C),L?oT(C.toString(),_):sT(C.toString(),_)}else Gt(2);f.G=0,f.l&&f.l.sa(g),Kg(f),Ug(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function Kg(f){if(f.G=0,f.ka=[],f.l){const g=Ig(f.h);(g.length!=0||f.i.length!=0)&&(I(f.ka,g),I(f.ka,f.i),f.h.i.length=0,w(f.i),f.i.length=0),f.l.ra()}}function Xg(f,g,_){var C=_ instanceof Mi?yr(_):new Mi(_);if(C.g!="")g&&(C.g=g+"."+C.g),Dl(C,C.s);else{var L=a.location;C=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var B=new Mi(null);C&&Pl(B,C),g&&(B.g=g),L&&Dl(B,L),_&&(B.l=_),C=B}return _=f.D,g=f.ya,_&&g&&Fe(C,_,g),Fe(C,"VER",f.la),Hs(f,C),C}function qg(f,g,_){if(g&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=f.Ca&&!f.pa?new qe(new Ml({eb:_})):new qe(f.pa),g.Ha(f.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yg(){}t=Yg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function jl(){}jl.prototype.g=function(f,g){return new dn(f,g)};function dn(f,g){Ot.call(this),this.g=new Vg(g),this.l=f,this.h=g&&g.messageUrlParams||null,f=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(f?f["X-WebChannel-Content-Type"]=g.messageContentType:f={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(f?f["X-WebChannel-Client-Profile"]=g.va:f={"X-WebChannel-Client-Profile":g.va}),this.g.S=f,(f=g&&g.Sb)&&!v(f)&&(this.g.m=f),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!v(g)&&(this.g.D=g,f=this.h,f!==null&&g in f&&(f=this.h,g in f&&delete f[g])),this.j=new wo(this)}m(dn,Ot),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Zf(this.g)},dn.prototype.o=function(f){var g=this.g;if(typeof f=="string"){var _={};_.__data__=f,f=_}else this.u&&(_={},_.__data__=Uf(f),f=_);g.i.push(new qI(g.Ya++,f)),g.G==3&&Vl(g)},dn.prototype.N=function(){this.g.l=null,delete this.j,Zf(this.g),delete this.g,dn.aa.N.call(this)};function Qg(f){$f.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var g=f.__sm__;if(g){e:{for(const _ in g){f=_;break e}f=void 0}(this.i=f)&&(f=this.i,g=g!==null&&f in g?g[f]:void 0),this.data=g}else this.data=f}m(Qg,$f);function Zg(){zf.call(this),this.status=1}m(Zg,zf);function wo(f){this.g=f}m(wo,Yg),wo.prototype.ua=function(){Wt(this.g,"a")},wo.prototype.ta=function(f){Wt(this.g,new Qg(f))},wo.prototype.sa=function(f){Wt(this.g,new Zg)},wo.prototype.ra=function(){Wt(this.g,"b")},jl.prototype.createWebChannel=jl.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,Qx=function(){return new jl},Yx=function(){return bl()},qx=Di,x0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rl.NO_ERROR=0,Rl.TIMEOUT=8,Rl.HTTP_ERROR=6,ku=Rl,pg.COMPLETE="complete",Xx=pg,ug.EventType=Ds,Ds.OPEN="a",Ds.CLOSE="b",Ds.ERROR="c",Ds.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,fa=ug,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,Kx=qe}).apply(typeof hu<"u"?hu:typeof self<"u"?self:typeof window<"u"?window:{});const Ey="@firebase/firestore",Ay="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ts="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new W1("@firebase/firestore");function bo(){return so.logLevel}function Q(t,...e){if(so.logLevel<=ve.DEBUG){const n=e.map(X1);so.debug(`Firestore (${Ts}): ${t}`,...n)}}function Lr(t,...e){if(so.logLevel<=ve.ERROR){const n=e.map(X1);so.error(`Firestore (${Ts}): ${t}`,...n)}}function cs(t,...e){if(so.logLevel<=ve.WARN){const n=e.map(X1);so.warn(`Firestore (${Ts}): ${t}`,...n)}}function X1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Zx(t,r,n)}function Zx(t,e,n){let r=`FIRESTORE (${Ts}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Lr(r),new Error(r)}function Re(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Zx(e,i,r)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends mr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Bt.UNAUTHENTICATED))}shutdown(){}}class JN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eO{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Nr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Nr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string",31837,{l:r}),new Jx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new Bt(e)}}class tO{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nO{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new tO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Iy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Re(this.o===void 0,3512);const r=o=>{o.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,Q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Iy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Iy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=iO(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function E0(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return pe(r,i);{const o=eE(),s=oO(o.encode(Ty(t,n)),o.encode(Ty(e,n)));return s!==0?s:pe(r,i)}}n+=r>65535?2:1}return pe(t.length,e.length)}function Ty(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function oO(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return pe(t[n],e[n]);return pe(t.length,e.length)}function fs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=-62135596800,Cy=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Cy);return new ct(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Sy)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cy}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Sy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{static fromTimestamp(e){return new ce(e)}static min(){return new ce(new ct(0,0))}static max(){return new ce(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="__name__";class tr{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return tr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=tr.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return pe(e.length,n.length)}static compareSegments(e,n){const r=tr.isNumericId(e),i=tr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?tr.extractNumericId(e).compare(tr.extractNumericId(n)):E0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mi.fromString(e.substring(4,e.length-2))}}class je extends tr{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new je(n)}static emptyPath(){return new je([])}}const sO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends tr{construct(e,n,r){return new St(e,n,r)}static isValidIdentifier(e){return sO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===by}static keyField(){return new St([by])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ee($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ee($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(je.fromString(e))}static fromName(e){return new re(je.fromString(e).popFirst(5))}static empty(){return new re(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new je(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=-1;function aO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new ct(n+1,0):new ct(n,r));return new xi(i,re.empty(),e)}function lO(t){return new xi(t.readTime,t.key,Za)}class xi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xi(ce.min(),re.empty(),Za)}static max(){return new xi(ce.max(),re.empty(),Za)}}function uO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ss(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==cO)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const u=l;n(e[u]).next(c=>{s[u]=c,++a,a===o&&r(s)},c=>i(c))}})}static doWhile(e,n){return new U((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function hO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}lf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=-1;function uf(t){return t==null}function wc(t){return t===0&&1/t==-1/0}function dO(t){return typeof t=="number"&&Number.isInteger(t)&&!wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="";function pO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ry(e)),e=gO(t.get(n),e);return Ry(e)}function gO(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case nE:n+="";break;default:n+=o}}return n}function Ry(t){return t+nE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ni(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new du(this.root,e,this.comparator,!1)}getReverseIterator(){return new du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new du(this.root,e,this.comparator,!0)}}class du{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Tt.RED,this.left=i??Tt.EMPTY,this.right=o??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Tt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Tt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Oy(this.data.getIterator())}getIteratorFrom(e){return new Oy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class Oy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new mn([])}unionWith(e){let n=new ft(St.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new iE("Invalid base64 string: "+o):o}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const mO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(t){if(Re(!!t,39018),typeof t=="string"){let e=0;const n=mO.exec(t);if(Re(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ai(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="server_timestamp",sE="__type__",aE="__previous_value__",lE="__local_write_time__";function Y1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[sE])===null||n===void 0?void 0:n.stringValue)===oE}function cf(t){const e=t.mapValue.fields[aE];return Y1(e)?cf(e):e}function Ja(t){const e=Ei(t.mapValue.fields[lE].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,n,r,i,o,s,a,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const xc="(default)";class el{constructor(e,n){this.projectId=e,this.database=n||xc}static empty(){return new el("","")}get isDefaultDatabase(){return this.database===xc}isEqual(e){return e instanceof el&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="__type__",cE="__max__",pu={mapValue:{fields:{__type__:{stringValue:cE}}}},fE="__vector__",Ec="value";function Ii(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Y1(t)?4:_O(t)?9007199254740991:yO(t)?10:11:se(28295,{value:t})}function dr(t,e){if(t===e)return!0;const n=Ii(t);if(n!==Ii(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ja(t).isEqual(Ja(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Ei(i.timestampValue),a=Ei(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Ai(i.bytesValue).isEqual(Ai(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Qe(i.geoPointValue.latitude)===Qe(o.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Qe(i.integerValue)===Qe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Qe(i.doubleValue),a=Qe(o.doubleValue);return s===a?wc(s)===wc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return fs(t.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Ny(s)!==Ny(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!dr(s[l],a[l])))return!1;return!0}(t,e);default:return se(52216,{left:t})}}function tl(t,e){return(t.values||[]).find(n=>dr(n,e))!==void 0}function hs(t,e){if(t===e)return 0;const n=Ii(t),r=Ii(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Qe(o.integerValue||o.doubleValue),l=Qe(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Py(t.timestampValue,e.timestampValue);case 4:return Py(Ja(t),Ja(e));case 5:return E0(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Ai(o),l=Ai(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=pe(a[u],l[u]);if(c!==0)return c}return pe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=pe(Qe(o.latitude),Qe(s.latitude));return a!==0?a:pe(Qe(o.longitude),Qe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Dy(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,u,c;const h=o.fields||{},d=s.fields||{},p=(a=h[Ec])===null||a===void 0?void 0:a.arrayValue,m=(l=d[Ec])===null||l===void 0?void 0:l.arrayValue,w=pe(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0);return w!==0?w:Dy(p,m)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===pu.mapValue&&s===pu.mapValue)return 0;if(o===pu.mapValue)return 1;if(s===pu.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),u=s.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const d=E0(l[h],c[h]);if(d!==0)return d;const p=hs(a[l[h]],u[c[h]]);if(p!==0)return p}return pe(l.length,c.length)}(t.mapValue,e.mapValue);default:throw se(23264,{Pe:n})}}function Py(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=Ei(t),r=Ei(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function Dy(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=hs(n[i],r[i]);if(o)return o}return pe(n.length,r.length)}function ds(t){return A0(t)}function A0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ei(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ai(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=A0(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${A0(n.fields[s])}`;return i+"}"}(t.mapValue):se(61005,{value:t})}function Mu(t){switch(Ii(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cf(t);return e?16+Mu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ai(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Mu(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ni(r.fields,(o,s)=>{i+=o.length+Mu(s)}),i}(t.mapValue);default:throw se(13486,{value:t})}}function ky(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function I0(t){return!!t&&"integerValue"in t}function Q1(t){return!!t&&"arrayValue"in t}function My(t){return!!t&&"nullValue"in t}function Ly(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lu(t){return!!t&&"mapValue"in t}function yO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[uE])===null||n===void 0?void 0:n.stringValue)===fE}function Ca(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ni(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ca(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ca(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _O(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ca(n)}setAll(e){let n=St.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Ca(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Lu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ni(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new an(Ca(this.value))}}function hE(t){const e=[];return Ni(t.fields,(n,r)=>{const i=new St([n]);if(Lu(r)){const o=hE(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Ut(e,0,ce.min(),ce.min(),ce.min(),an.empty(),0)}static newFoundDocument(e,n,r,i){return new Ut(e,1,n,ce.min(),r,i,0)}static newNoDocument(e,n){return new Ut(e,2,n,ce.min(),ce.min(),an.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,ce.min(),ce.min(),an.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.position=e,this.inclusive=n}}function Fy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=re.comparator(re.fromName(s.referenceValue),n.key):r=hs(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function By(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!dr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n="asc"){this.field=e,this.dir=n}}function wO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{}class tt extends dE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new EO(e,n,r):n==="array-contains"?new TO(e,r):n==="in"?new SO(e,r):n==="not-in"?new CO(e,r):n==="array-contains-any"?new bO(e,r):new tt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new AO(e,r):new IO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(hs(n,this.value)):n!==null&&Ii(this.value)===Ii(n)&&this.matchesComparison(hs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends dE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Yn(e,n)}matches(e){return pE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function pE(t){return t.op==="and"}function gE(t){return xO(t)&&pE(t)}function xO(t){for(const e of t.filters)if(e instanceof Yn)return!1;return!0}function T0(t){if(t instanceof tt)return t.field.canonicalString()+t.op.toString()+ds(t.value);if(gE(t))return t.filters.map(e=>T0(e)).join(",");{const e=t.filters.map(n=>T0(n)).join(",");return`${t.op}(${e})`}}function mE(t,e){return t instanceof tt?function(r,i){return i instanceof tt&&r.op===i.op&&r.field.isEqual(i.field)&&dr(r.value,i.value)}(t,e):t instanceof Yn?function(r,i){return i instanceof Yn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&mE(s,i.filters[a]),!0):!1}(t,e):void se(19439)}function vE(t){return t instanceof tt?function(n){return`${n.field.canonicalString()} ${n.op} ${ds(n.value)}`}(t):t instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(vE).join(" ,")+"}"}(t):"Filter"}class EO extends tt{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class AO extends tt{constructor(e,n){super(e,"in",n),this.keys=yE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class IO extends tt{constructor(e,n){super(e,"not-in",n),this.keys=yE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class TO extends tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Q1(n)&&tl(n.arrayValue,this.value)}}class SO extends tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tl(this.value.arrayValue,n)}}class CO extends tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!tl(this.value.arrayValue,n)}}class bO extends tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Q1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}}function Vy(t,e=null,n=[],r=[],i=null,o=null,s=null){return new RO(t,e,n,r,i,o,s)}function Z1(t){const e=fe(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>T0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),uf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ds(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ds(r)).join(",")),e.Ie=n}return e.Ie}function J1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!By(t.startAt,e.startAt)&&By(t.endAt,e.endAt)}function S0(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function NO(t,e,n,r,i,o,s,a){return new pl(t,e,n,r,i,o,s,a)}function ep(t){return new pl(t)}function Uy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _E(t){return t.collectionGroup!==null}function ba(t){const e=fe(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ft(St.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Ic(o,r))}),n.has(St.keyField().canonicalString())||e.Ee.push(new Ic(St.keyField(),r))}return e.Ee}function ar(t){const e=fe(t);return e.de||(e.de=OO(e,ba(t))),e.de}function OO(t,e){if(t.limitType==="F")return Vy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ic(i.field,o)});const n=t.endAt?new Ac(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ac(t.startAt.position,t.startAt.inclusive):null;return Vy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function C0(t,e){const n=t.filters.concat([e]);return new pl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function b0(t,e,n){return new pl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ff(t,e){return J1(ar(t),ar(e))&&t.limitType===e.limitType}function wE(t){return`${Z1(ar(t))}|lt:${t.limitType}`}function Ro(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>vE(i)).join(", ")}]`),uf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ds(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ds(i)).join(",")),`Target(${r})`}(ar(t))}; limitType=${t.limitType})`}function hf(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):re.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of ba(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const u=Fy(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,ba(r),i)||r.endAt&&!function(s,a,l){const u=Fy(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,ba(r),i))}(t,e)}function PO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xE(t){return(e,n)=>{let r=!1;for(const i of ba(t)){const o=DO(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function DO(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?hs(l,u):se(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ni(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return rE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=new Xe(re.comparator);function Fr(){return kO}const EE=new Xe(re.comparator);function ha(...t){let e=EE;for(const n of t)e=e.insert(n.key,n);return e}function AE(t){let e=EE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ki(){return Ra()}function IE(){return Ra()}function Ra(){return new mo(t=>t.toString(),(t,e)=>t.isEqual(e))}const MO=new Xe(re.comparator),LO=new ft(re.comparator);function ye(...t){let e=LO;for(const n of t)e=e.add(n);return e}const FO=new ft(pe);function BO(){return FO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(e)?"-0":e}}function TE(t){return{integerValue:""+t}}function VO(t,e){return dO(e)?TE(e):tp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(){this._=void 0}}function UO(t,e,n){return t instanceof Tc?function(i,o){const s={fields:{[sE]:{stringValue:oE},[lE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Y1(o)&&(o=cf(o)),o&&(s.fields[aE]=o),{mapValue:s}}(n,e):t instanceof nl?CE(t,e):t instanceof rl?bE(t,e):function(i,o){const s=SE(i,o),a=jy(s)+jy(i.Re);return I0(s)&&I0(i.Re)?TE(a):tp(i.serializer,a)}(t,e)}function jO(t,e,n){return t instanceof nl?CE(t,e):t instanceof rl?bE(t,e):n}function SE(t,e){return t instanceof Sc?function(r){return I0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Tc extends df{}class nl extends df{constructor(e){super(),this.elements=e}}function CE(t,e){const n=RE(e);for(const r of t.elements)n.some(i=>dr(i,r))||n.push(r);return{arrayValue:{values:n}}}class rl extends df{constructor(e){super(),this.elements=e}}function bE(t,e){let n=RE(e);for(const r of t.elements)n=n.filter(i=>!dr(i,r));return{arrayValue:{values:n}}}class Sc extends df{constructor(e,n){super(),this.serializer=e,this.Re=n}}function jy(t){return Qe(t.integerValue||t.doubleValue)}function RE(t){return Q1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function $O(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof nl&&i instanceof nl||r instanceof rl&&i instanceof rl?fs(r.elements,i.elements,dr):r instanceof Sc&&i instanceof Sc?dr(r.Re,i.Re):r instanceof Tc&&i instanceof Tc}(t.transform,e.transform)}class zO{constructor(e,n){this.version=e,this.transformResults=n}}class lr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pf{}function NE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new PE(t.key,lr.none()):new gl(t.key,t.data,lr.none());{const n=t.data,r=an.empty();let i=new ft(St.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Oi(t.key,r,new mn(i.toArray()),lr.none())}}function HO(t,e,n){t instanceof gl?function(i,o,s){const a=i.value.clone(),l=zy(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Oi?function(i,o,s){if(!Fu(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=zy(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(OE(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Na(t,e,n,r){return t instanceof gl?function(o,s,a,l){if(!Fu(o.precondition,s))return a;const u=o.value.clone(),c=Hy(o.fieldTransforms,l,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Oi?function(o,s,a,l){if(!Fu(o.precondition,s))return a;const u=Hy(o.fieldTransforms,l,s),c=s.data;return c.setAll(OE(o)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(o,s,a){return Fu(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function WO(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=SE(r.transform,i||null);o!=null&&(n===null&&(n=an.empty()),n.set(r.field,o))}return n||null}function $y(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fs(r,i,(o,s)=>$O(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gl extends pf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oi extends pf{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function OE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zy(t,e,n){const r=new Map;Re(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,jO(s,a,n[i]))}return r}function Hy(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,UO(o,s,e))}return r}class PE extends pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GO extends pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&HO(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Na(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Na(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=IE();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=NE(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&fs(this.mutations,e.mutations,(n,r)=>$y(n,r))&&fs(this.baseMutations,e.baseMutations,(n,r)=>$y(n,r))}}class np{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Re(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return MO}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new np(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,_e;function YO(t){switch(t){case $.OK:return se(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return se(15467,{code:t})}}function DE(t){if(t===void 0)return Lr("GRPC error has no .code"),$.UNKNOWN;switch(t){case Je.OK:return $.OK;case Je.CANCELLED:return $.CANCELLED;case Je.UNKNOWN:return $.UNKNOWN;case Je.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Je.INTERNAL:return $.INTERNAL;case Je.UNAVAILABLE:return $.UNAVAILABLE;case Je.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Je.NOT_FOUND:return $.NOT_FOUND;case Je.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Je.ABORTED:return $.ABORTED;case Je.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Je.DATA_LOSS:return $.DATA_LOSS;default:return se(39323,{code:t})}}(_e=Je||(Je={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=new mi([4294967295,4294967295],0);function Wy(t){const e=eE().encode(t),n=new Gx;return n.update(e),new Uint8Array(n.digest())}function Gy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new mi([n,r],0),new mi([i,o],0)]}class rp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new da(`Invalid padding: ${n}`);if(r<0)throw new da(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new da(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new da(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=mi.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(mi.fromNumber(r)));return i.compare(QO)===1&&(i=new mi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Wy(e),[r,i]=Gy(n);for(let o=0;o<this.hashCount;o++){const s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new rp(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;const n=Wy(e),[r,i]=Gy(n);for(let o=0;o<this.hashCount;o++){const s=this.we(r,i,o);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class da extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ml.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gf(ce.min(),i,new Xe(pe),Fr(),ye())}}class ml{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ml(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}}class kE{constructor(e,n){this.targetId=e,this.Ce=n}}class ME{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Ky{constructor(){this.Fe=0,this.Me=Xy(),this.xe=Nt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ye(),n=ye(),r=ye();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:se(38017,{changeType:o})}}),new ml(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=Xy()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Re(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class ZO{constructor(e){this.ze=e,this.je=new Map,this.He=Fr(),this.Je=gu(),this.Ye=gu(),this.Ze=new Xe(pe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){const n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){const o=i.target;if(S0(o))if(r===0){const s=new re(o.path);this.tt(n,s,Ut.newNoDocument(s,ce.min()))}else Re(r===1,20013,{expectedCount:r});else{const s=this.ut(n);if(s!==r){const a=this.ct(e),l=a?this.lt(a,e,s):1;if(l!==0){this.st(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Ai(r).toUint8Array()}catch(l){if(l instanceof iE)return cs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new rp(s,i,o)}catch(l){return cs(l instanceof da?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,o,null),i++)}),i}It(e){const n=new Map;this.je.forEach((o,s)=>{const a=this._t(s);if(a){if(o.current&&S0(a.target)){const l=new re(a.target.path);this.Et(l).has(s)||this.dt(s,l)||this.tt(s,l,Ut.newNoDocument(l,e))}o.Le&&(n.set(s,o.qe()),o.Qe())}});let r=ye();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const u=this._t(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));const i=new gf(e,n,this.Ze,this.He,r);return this.He=Fr(),this.Je=gu(),this.Ye=gu(),this.Ze=new Xe(pe),i}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Ky,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new ft(pe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new ft(pe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Ky),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function gu(){return new Xe(re.comparator)}function Xy(){return new Xe(re.comparator)}const JO=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),eP=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),tP=(()=>({and:"AND",or:"OR"}))();class nP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function R0(t,e){return t.useProto3Json||uf(e)?e:{value:e}}function Cc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rP(t,e){return Cc(t,e.toTimestamp())}function ur(t){return Re(!!t,49232),ce.fromTimestamp(function(n){const r=Ei(n);return new ct(r.seconds,r.nanos)}(t))}function ip(t,e){return N0(t,e).canonicalString()}function N0(t,e){const n=function(i){return new je(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function FE(t){const e=je.fromString(t);return Re($E(e),10190,{key:e.toString()}),e}function O0(t,e){return ip(t.databaseId,e.path)}function Hh(t,e){const n=FE(e);if(n.get(1)!==t.databaseId.projectId)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(VE(n))}function BE(t,e){return ip(t.databaseId,e)}function iP(t){const e=FE(t);return e.length===4?je.emptyPath():VE(e)}function P0(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VE(t){return Re(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function qy(t,e,n){return{name:O0(t,e),fields:n.value.mapValue.fields}}function oP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:se(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,c){return u.useProto3Json?(Re(c===void 0||typeof c=="string",58123),Nt.fromBase64String(c||"")):(Re(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Nt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const c=u.code===void 0?$.UNKNOWN:DE(u.code);return new ee(c,u.message||"")}(s);n=new ME(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hh(t,r.document.name),o=ur(r.document.updateTime),s=r.document.createTime?ur(r.document.createTime):ce.min(),a=new an({mapValue:{fields:r.document.fields}}),l=Ut.newFoundDocument(i,o,s,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Bu(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Hh(t,r.document),o=r.readTime?ur(r.readTime):ce.min(),s=Ut.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Bu([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Hh(t,r.document),o=r.removedTargetIds||[];n=new Bu([],o,i,null)}else{if(!("filter"in e))return se(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new qO(i,o),a=r.targetId;n=new kE(a,s)}}return n}function sP(t,e){let n;if(e instanceof gl)n={update:qy(t,e.key,e.value)};else if(e instanceof PE)n={delete:O0(t,e.key)};else if(e instanceof Oi)n={update:qy(t,e.key,e.data),updateMask:gP(e.fieldMask)};else{if(!(e instanceof GO))return se(16599,{ft:e.type});n={verify:O0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Tc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof nl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof rl)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sc)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw se(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:rP(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:se(27497)}(t,e.precondition)),n}function aP(t,e){return t&&t.length>0?(Re(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?ur(i.updateTime):ur(o);return s.isEqual(ce.min())&&(s=ur(o)),new zO(s,i.transformResults||[])}(n,e))):[]}function lP(t,e){return{documents:[BE(t,e.path)]}}function uP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=BE(t,i);const o=function(u){if(u.length!==0)return jE(Yn.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(u.length!==0)return u.map(c=>function(d){return{field:No(d.field),direction:hP(d.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=R0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:n,parent:i}}function cP(t){let e=iP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Re(r===1,65062);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let o=[];n.where&&(o=function(h){const d=UE(h);return d instanceof Yn&&gE(d)?d.getFilters():[d]}(n.where));let s=[];n.orderBy&&(s=function(h){return h.map(d=>function(m){return new Ic(Oo(m.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,uf(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,p=h.values||[];return new Ac(p,d)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const d=!h.before,p=h.values||[];return new Ac(p,d)}(n.endAt)),NO(e,i,s,o,a,"F",l,u)}function fP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function UE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Oo(n.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Oo(n.unaryFilter.field);return tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Oo(n.unaryFilter.field);return tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Oo(n.unaryFilter.field);return tt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}}(t):t.fieldFilter!==void 0?function(n){return tt.create(Oo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(r=>UE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se(1026)}}(n.compositeFilter.op))}(t):se(30097,{filter:t})}function hP(t){return JO[t]}function dP(t){return eP[t]}function pP(t){return tP[t]}function No(t){return{fieldPath:t.canonicalString()}}function Oo(t){return St.fromServerFormat(t.fieldPath)}function jE(t){return t instanceof tt?function(n){if(n.op==="=="){if(Ly(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NAN"}};if(My(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ly(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NOT_NAN"}};if(My(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(n.field),op:dP(n.op),value:n.value}}}(t):t instanceof Yn?function(n){const r=n.getFilters().map(i=>jE(i));return r.length===1?r[0]:{compositeFilter:{op:pP(n.op),filters:r}}}(t):se(54877,{filter:t})}function gP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $E(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n,r,i,o=ce.min(),s=ce.min(),a=Nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.wt=e}}function vP(t){const e=cP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?b0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this.Cn=new _P}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(xi.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(xi.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class _P{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ft(je.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ft(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zE=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(zE,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new ps(0)}static lr(){return new ps(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="LruGarbageCollector",wP=1048576;function Zy([t,e],[n,r]){const i=pe(t,n);return i===0?pe(e,r):i}class xP{constructor(e){this.Er=e,this.buffer=new ft(Zy),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Zy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class EP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Q(Qy,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Cs(n)?Q(Qy,"Ignoring IndexedDB error during garbage collection: ",n):await Ss(n)}await this.mr(3e5)})}}class AP{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(lf.le);const r=new xP(n);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Yy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yy):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,i,o,s,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(o=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),bo()<=ve.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-c}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}}function IP(t,e){return new AP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this.changes=new mo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Na(r.mutation,i,mn.empty(),ct.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const i=Ki();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ha();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Ki();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Fr();const s=Ra(),a=function(){return Ra()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Oi)?o=o.insert(u.key,u):c!==void 0?(s.set(u.key,c.mutation.getFieldMask()),Na(c.mutation,u,c.mutation.getFieldMask(),ct.now())):s.set(u.key,mn.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,c)=>s.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new SP(c,(h=s.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ra();let i=new Xe((s,a)=>s-a),o=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||mn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||ye()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=IE();c.forEach(d=>{if(!o.has(d)){const p=NE(n.get(d),r.get(d));p!==null&&h.set(d,p),o=o.add(d)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return U.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return re.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_E(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):U.resolve(Ki());let a=Za,l=o;return s.next(u=>U.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(c)?U.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,ye())).next(c=>({batchId:a,changes:AE(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let i=ha();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=ha();return this.indexManager.getCollectionParents(e,o).next(a=>U.forEach(a,l=>{const u=function(h,d){return new pl(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((h,d)=>{s=s.insert(h,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,u)=>{const c=u.getKey();s.get(c)===null&&(s=s.insert(c,Ut.newInvalidDocument(c)))});let a=ha();return s.forEach((l,u)=>{const c=o.get(l);c!==void 0&&Na(c.mutation,u,mn.empty(),ct.now()),hf(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return U.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ur(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:vP(i.bundledQuery),readTime:ur(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.overlays=new Xe(re.comparator),this.Qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ki();return U.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Ki(),o=n.length+1,s=new re(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Xe((u,c)=>u-c);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=o.get(u.largestBatchId);c===null&&(c=Ki(),o=o.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Ki(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return U.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new XO(n,r));let o=this.Qr.get(n);o===void 0&&(o=ye(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(){this.$r=new ft(pt.Ur),this.Kr=new ft(pt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new pt(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new pt(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new re(new je([])),r=new pt(n,e),i=new pt(n,e+1),o=[];return this.Kr.forEachInRange([r,i],s=>{this.zr(s),o.push(s.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new re(new je([])),r=new pt(n,e),i=new pt(n,e+1);let o=ye();return this.Kr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new pt(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class pt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return re.comparator(e.key,n.key)||pe(e.Zr,n.Zr)}static Wr(e,n){return pe(e.Zr,n.Zr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new ft(pt.Ur)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new KO(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.Xr=this.Xr.add(new pt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(s)}lookupMutationBatch(e,n){return U.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ti(r),o=i<0?0:i;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?q1:this.nr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new pt(n,0),i=new pt(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],s=>{const a=this.ei(s.Zr);o.push(a)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(pe);return n.forEach(i=>{const o=new pt(i,0),s=new pt(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,s],a=>{r=r.add(a.Zr)})}),U.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;re.isDocumentKey(o)||(o=o.child(""));const s=new pt(new re(o),0);let a=new ft(pe);return this.Xr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Zr)),!0)},s),U.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Re(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return U.forEach(n.mutations,i=>{const o=new pt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new pt(n,0),i=this.Xr.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.ii=e,this.docs=function(){return new Xe(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=Fr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ut.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Fr();const s=n.path,a=new re(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||uO(lO(c),r)<=0||(i.has(c.key)||hf(n,c))&&(o=o.insert(c.key,c.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,n,r,i){se(9500)}si(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new DP(this)}getSize(e){return U.resolve(this.size)}}class DP extends TP{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.persistence=e,this.oi=new mo(n=>Z1(n),J1),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this._i=0,this.ai=new op,this.targetCount=0,this.ui=ps.cr()}forEachTarget(e,n){return this.oi.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),U.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new ps(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Tr(n),U.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.oi.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.oi.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(o).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),U.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n){this.ci={},this.overlays={},this.li=new lf(0),this.hi=!1,this.hi=!0,this.Pi=new NP,this.referenceDelegate=e(this),this.Ti=new kP(this),this.indexManager=new yP,this.remoteDocumentCache=function(i){return new PP(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new mP(n),this.Ei=new bP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new OP(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new MP(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,n){return U.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class MP extends fO{constructor(e){super(),this.currentSequenceNumber=e}}class sp{constructor(e){this.persistence=e,this.Vi=new op,this.mi=null}static fi(e){return new sp(e)}get gi(){if(this.mi)return this.mi;throw se(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.gi,r=>{const i=re.fromPath(r);return this.pi(e,i).next(o=>{o||n.removeEntry(i,ce.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return U.or([()=>U.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class bc{constructor(e,n){this.persistence=e,this.yi=new mo(r=>pO(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=IP(this,n)}static fi(e,n){return new bc(e,n)}di(){}Ai(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return U.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?U.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),U.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mu(e.data.value)),n}Dr(e,n,r){return U.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.yi.get(n);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ds=r,this.As=i}static Rs(e,n){let r=ye(),i=ye();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new ap(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return LR()?8:hO($t())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ws(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.bs(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new LP;return this.Ss(e,n,s).next(a=>{if(o.result=a,this.fs)return this.Ds(e,n,s,a.size)})}).next(()=>o.result)}Ds(e,n,r,i){return r.documentReadCount<this.gs?(bo()<=ve.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Ro(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),U.resolve()):(bo()<=ve.DEBUG&&Q("QueryEngine","Query:",Ro(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(bo()<=ve.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Ro(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ar(n))):U.resolve())}ws(e,n){if(Uy(n))return U.resolve(null);let r=ar(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=b0(n,null,"F"),r=ar(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ye(...o);return this.ys.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.vs(n,a);return this.Cs(n,u,s,l.readTime)?this.ws(e,b0(n,null,"F")):this.Fs(e,u,n,l)}))})))}bs(e,n,r,i){return Uy(n)||i.isEqual(ce.min())?U.resolve(null):this.ys.getDocuments(e,r).next(o=>{const s=this.vs(n,o);return this.Cs(n,s,r,i)?U.resolve(null):(bo()<=ve.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ro(n)),this.Fs(e,s,n,aO(i,Za)).next(a=>a))})}vs(e,n){let r=new ft(xE(e));return n.forEach((i,o)=>{hf(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return bo()<=ve.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Ro(n)),this.ys.getDocumentsMatchingQuery(e,n,xi.min(),r)}Fs(e,n,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="LocalStore",BP=3e8;class VP{constructor(e,n,r,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new Xe(pe),this.Os=new mo(o=>Z1(o),J1),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CP(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function UP(t,e,n,r){return new VP(t,e,n,r)}async function WE(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=ye();for(const u of i){s.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of o){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({ks:u,removedBatchIds:s,addedBatchIds:a}))})})}function jP(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const h=u.batch,d=h.keys();let p=U.resolve();return d.forEach(m=>{p=p.next(()=>c.getEntry(l,m)).next(w=>{const I=u.docVersions.get(m);Re(I!==null,48541),w.version.compareTo(I)<0&&(h.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),c.addEntry(w)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ye();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function GE(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function $P(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const a=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;a.push(n.Ti.removeMatchingKeys(o,c.removedDocuments,h).next(()=>n.Ti.addMatchingKeys(o,c.addedDocuments,h)));let p=d.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Nt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(h,p),function(w,I,y){return w.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=BP?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,p,c)&&a.push(n.Ti.updateTargetData(o,p))});let l=Fr(),u=ye();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,c))}),a.push(zP(o,s,e.documentUpdates).next(c=>{l=c.qs,u=c.Qs})),!r.isEqual(ce.min())){const c=n.Ti.getLastRemoteSnapshotVersion(o).next(h=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(c)}return U.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(n.xs=i,o))}function zP(t,e,n){let r=ye(),i=ye();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Fr();return n.forEach((a,l)=>{const u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):Q(lp,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{qs:s,Qs:i}})}function HP(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=q1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function WP(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ti.getTargetData(r,e).next(o=>o?(i=o,U.resolve(i)):n.Ti.allocateTargetId(r).next(s=>(i=new ii(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function D0(t,e,n){const r=fe(t),i=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Cs(s))throw s;Q(lp,`Failed to update sequence numbers for target ${e}: ${s}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function Jy(t,e,n){const r=fe(t);let i=ce.min(),o=ye();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,c){const h=fe(l),d=h.Os.get(c);return d!==void 0?U.resolve(h.xs.get(d)):h.Ti.getTargetData(u,c)}(r,s,ar(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.Ms.getDocumentsMatchingQuery(s,e,n?i:ce.min(),n?o:ye())).next(a=>(GP(r,PO(e),a),{documents:a,$s:o})))}function GP(t,e,n){let r=t.Ns.get(e)||ce.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}class e2{constructor(){this.activeTargetIds=BO()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KP{constructor(){this.xo=new e2,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new e2,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="ConnectivityMonitor";class n2{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Q(t2,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Q(t2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu=null;function k0(){return mu===null?mu=function(){return 268435456+Math.round(2147483648*Math.random())}():mu++,"0x"+mu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="RestConnection",qP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YP{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===xc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,n,r,i,o){const s=k0(),a=this.jo(e,n.toUriEncodedString());Q(Wh,`Sending RPC '${e}' ${s}:`,a,r);const l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,i,o);const{host:u}=new URL(a),c=Es(u);return this.Jo(e,a,l,r,c).then(h=>(Q(Wh,`Received RPC '${e}' ${s}: `,h),h),h=>{throw cs(Wh,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Yo(e,n,r,i,o,s){return this.zo(e,n,r,i,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ts}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,n){const r=qP[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class ZP extends YP{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const s=k0();return new Promise((a,l)=>{const u=new Kx;u.setWithCredentials(!0),u.listenOnce(Xx.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ku.NO_ERROR:const h=u.getResponseJson();Q(Lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case ku.TIMEOUT:Q(Lt,`RPC '${e}' ${s} timed out`),l(new ee($.DEADLINE_EXCEEDED,"Request time out"));break;case ku.HTTP_ERROR:const d=u.getStatus();if(Q(Lt,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const w=function(y){const v=y.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(v)>=0?v:$.UNKNOWN}(m.status);l(new ee(w,m.message))}else l(new ee($.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ee($.UNAVAILABLE,"Connection failed."));break;default:se(9055,{h_:e,streamId:s,P_:u.getLastErrorCode(),T_:u.getLastError()})}}finally{Q(Lt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Q(Lt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}I_(e,n,r){const i=k0(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Qx(),a=Yx(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=o.join("");Q(Lt,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=s.createWebChannel(c,l);this.E_(h);let d=!1,p=!1;const m=new QP({Zo:I=>{p?Q(Lt,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(d||(Q(Lt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),Q(Lt,`RPC '${e}' stream ${i} sending:`,I),h.send(I))},Xo:()=>h.close()}),w=(I,y,v)=>{I.listen(y,x=>{try{v(x)}catch(T){setTimeout(()=>{throw T},0)}})};return w(h,fa.EventType.OPEN,()=>{p||(Q(Lt,`RPC '${e}' stream ${i} transport opened.`),m.__())}),w(h,fa.EventType.CLOSE,()=>{p||(p=!0,Q(Lt,`RPC '${e}' stream ${i} transport closed`),m.u_(),this.d_(h))}),w(h,fa.EventType.ERROR,I=>{p||(p=!0,cs(Lt,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),m.u_(new ee($.UNAVAILABLE,"The operation could not be completed")))}),w(h,fa.EventType.MESSAGE,I=>{var y;if(!p){const v=I.data[0];Re(!!v,16349);const x=v,T=(x==null?void 0:x.error)||((y=x[0])===null||y===void 0?void 0:y.error);if(T){Q(Lt,`RPC '${e}' stream ${i} received error:`,T);const P=T.status;let k=function(S){const b=Je[S];if(b!==void 0)return DE(b)}(P),A=T.message;k===void 0&&(k=$.INTERNAL,A="Unknown error status: "+P+" with message "+T.message),p=!0,m.u_(new ee(k,A)),h.close()}else Q(Lt,`RPC '${e}' stream ${i} received:`,v),m.c_(v)}}),w(a,qx.STAT_EVENT,I=>{I.stat===x0.PROXY?Q(Lt,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===x0.NOPROXY&&Q(Lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.a_()},0),m}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t){return new nP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="PersistentStream";class XE{constructor(e,n,r,i,o,s,a,l){this.xi=e,this.S_=r,this.D_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new KE(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Lr(n.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===n&&this.z_(r,i)},r=>{e(()=>{const i=new ee($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Q(r2,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Q(r2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JP extends XE{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=oP(this.serializer,e),r=function(o){if(!("targetChange"in o))return ce.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ce.min():s.readTime?ur(s.readTime):ce.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=P0(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=S0(l)?{documents:lP(o,l)}:{query:uP(o,l).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=LE(o,s.resumeToken);const u=R0(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(ce.min())>0){a.readTime=Cc(o,s.snapshotVersion.toTimestamp());const u=R0(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=fP(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=P0(this.serializer),n.removeTarget=e,this.Q_(n)}}class eD extends XE{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=aP(e.writeResults,e.commitTime),r=ur(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=P0(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sP(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{}class nD extends tD{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.zo(e,N0(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee($.UNKNOWN,o.toString())})}Yo(e,n,r,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Yo(e,N0(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee($.UNKNOWN,s.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class rD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Lr(n),this.ua=!1):Q("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="RemoteStore";class iD{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(s=>{r.enqueueAndForget(async()=>{vo(this)&&(Q(ao,"Restarting streams for network reachability change."),await async function(l){const u=fe(l);u.da.add(4),await vl(u),u.Va.set("Unknown"),u.da.delete(4),await vf(u)}(this))})}),this.Va=new rD(r,i)}}async function vf(t){if(vo(t))for(const e of t.Aa)await e(!0)}async function vl(t){for(const e of t.Aa)await e(!1)}function qE(t,e){const n=fe(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),hp(n)?fp(n):bs(n).N_()&&cp(n,e))}function up(t,e){const n=fe(t),r=bs(n);n.Ea.delete(e),r.N_()&&YE(n,e),n.Ea.size===0&&(r.N_()?r.k_():vo(n)&&n.Va.set("Unknown"))}function cp(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bs(t).Z_(e)}function YE(t,e){t.ma.Ke(e),bs(t).X_(e)}function fp(t){t.ma=new ZO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),bs(t).start(),t.Va.ca()}function hp(t){return vo(t)&&!bs(t).O_()&&t.Ea.size>0}function vo(t){return fe(t).da.size===0}function QE(t){t.ma=void 0}async function oD(t){t.Va.set("Online")}async function sD(t){t.Ea.forEach((e,n)=>{cp(t,e)})}async function aD(t,e){QE(t),hp(t)?(t.Va.Pa(e),fp(t)):t.Va.set("Unknown")}async function lD(t,e,n){if(t.Va.set("Online"),e instanceof ME&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.Ea.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ea.delete(a),i.ma.removeTarget(a))}(t,e)}catch(r){Q(ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rc(t,r)}else if(e instanceof Bu?t.ma.Xe(e):e instanceof kE?t.ma.ot(e):t.ma.nt(e),!n.isEqual(ce.min()))try{const r=await GE(t.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.ma.It(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=o.Ea.get(u);c&&o.Ea.set(u,c.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{const c=o.Ea.get(l);if(!c)return;o.Ea.set(l,c.withResumeToken(Nt.EMPTY_BYTE_STRING,c.snapshotVersion)),YE(o,l);const h=new ii(c.target,l,u,c.sequenceNumber);cp(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q(ao,"Failed to raise snapshot:",r),await Rc(t,r)}}async function Rc(t,e,n){if(!Cs(e))throw e;t.da.add(1),await vl(t),t.Va.set("Offline"),n||(n=()=>GE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(ao,"Retrying IndexedDB access"),await n(),t.da.delete(1),await vf(t)})}function ZE(t,e){return e().catch(n=>Rc(t,n,e))}async function yf(t){const e=fe(t),n=Ti(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:q1;for(;uD(e);)try{const i=await HP(e.localStore,r);if(i===null){e.Ia.length===0&&n.k_();break}r=i.batchId,cD(e,i)}catch(i){await Rc(e,i)}JE(e)&&eA(e)}function uD(t){return vo(t)&&t.Ia.length<10}function cD(t,e){t.Ia.push(e);const n=Ti(t);n.N_()&&n.ea&&n.ta(e.mutations)}function JE(t){return vo(t)&&!Ti(t).O_()&&t.Ia.length>0}function eA(t){Ti(t).start()}async function fD(t){Ti(t).ia()}async function hD(t){const e=Ti(t);for(const n of t.Ia)e.ta(n.mutations)}async function dD(t,e,n){const r=t.Ia.shift(),i=np.from(r,e,n);await ZE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await yf(t)}async function pD(t,e){e&&Ti(t).ea&&await async function(r,i){if(function(s){return YO(s)&&s!==$.ABORTED}(i.code)){const o=r.Ia.shift();Ti(r).L_(),await ZE(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await yf(r)}}(t,e),JE(t)&&eA(t)}async function i2(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),Q(ao,"RemoteStore received new credentials");const r=vo(n);n.da.add(3),await vl(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await vf(n)}async function gD(t,e){const n=fe(t);e?(n.da.delete(2),await vf(n)):e||(n.da.add(2),await vl(n),n.Va.set("Unknown"))}function bs(t){return t.fa||(t.fa=function(n,r,i){const o=fe(n);return o.oa(),new JP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:oD.bind(null,t),n_:sD.bind(null,t),i_:aD.bind(null,t),Y_:lD.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),hp(t)?fp(t):t.Va.set("Unknown")):(await t.fa.stop(),QE(t))})),t.fa}function Ti(t){return t.ga||(t.ga=function(n,r,i){const o=fe(n);return o.oa(),new eD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:fD.bind(null,t),i_:pD.bind(null,t),na:hD.bind(null,t),ra:dD.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await yf(t)):(await t.ga.stop(),t.Ia.length>0&&(Q(ao,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new dp(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pp(t,e){if(Lr("AsyncQueue",`${e}: ${t}`),Cs(t))return new ee($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{static emptySet(e){return new Zo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=ha(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.pa=new Xe(re.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):se(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class gs{constructor(e,n,r,i,o,s,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new gs(e,n,Zo.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class vD{constructor(){this.queries=s2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=fe(n),o=i.queries;i.queries=s2(),o.forEach((s,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new ee($.ABORTED,"Firestore shutting down"))}}function s2(){return new mo(t=>wE(t),ff)}async function tA(t,e){const n=fe(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Da()&&e.va()&&(r=2):(o=new mD,r=e.va()?0:1);try{switch(r){case 0:o.ba=await n.onListen(i,!0);break;case 1:o.ba=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=pp(s,`Initialization of query '${Ro(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&gp(n)}async function nA(t,e){const n=fe(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function yD(t,e){const n=fe(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.Sa)a.Ma(i)&&(r=!0);s.ba=i}}r&&gp(n)}function _D(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function gp(t){t.Ca.forEach(e=>{e.next()})}var M0,a2;(a2=M0||(M0={})).xa="default",a2.Cache="cache";class rA{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new gs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=gs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==M0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.key=e}}class oA{constructor(e){this.key=e}}class wD{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ye(),this.mutatedKeys=ye(),this.Za=xE(e),this.Xa=new Zo(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new o2,i=n?n.Xa:this.Xa;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),p=hf(this.query,h)?h:null,m=!!d&&this.mutatedKeys.has(d.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let I=!1;d&&p?d.data.isEqual(p.data)?m!==w&&(r.track({type:3,doc:p}),I=!0):this.ru(d,p)||(r.track({type:2,doc:p}),I=!0,(l&&this.Za(p,l)>0||u&&this.Za(p,u)<0)&&(a=!0)):!d&&p?(r.track({type:0,doc:p}),I=!0):d&&!p&&(r.track({type:1,doc:d}),I=!0,(l||u)&&(a=!0)),I&&(p?(s=s.add(p),o=w?o.add(c):o.delete(c)):(s=s.delete(c),o=o.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{Xa:s,nu:r,Cs:a,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const s=e.nu.wa();s.sort((c,h)=>function(p,m){const w=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{Vt:I})}};return w(p)-w(m)}(c.type,h.type)||this.Za(c.doc,h.doc)),this.iu(r),i=i!=null&&i;const a=n&&!i?this.su():[],l=this.Ya.size===0&&this.current&&!i?1:0,u=l!==this.Ja;return this.Ja=l,s.length!==0||u?{snapshot:new gs(this.query,e.Xa,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new o2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=ye(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new oA(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new iA(r))}),n}au(e){this.Ha=e.$s,this.Ya=ye();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return gs.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const mp="SyncEngine";class xD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ED{constructor(e){this.key=e,this.cu=!1}}class AD{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.lu={},this.hu=new mo(a=>wE(a),ff),this.Pu=new Map,this.Tu=new Set,this.Iu=new Xe(re.comparator),this.Eu=new Map,this.du=new op,this.Au={},this.Ru=new Map,this.Vu=ps.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function ID(t,e,n=!0){const r=fA(t);let i;const o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=await sA(r,e,n,!0),i}async function TD(t,e){const n=fA(t);await sA(n,e,!0,!1)}async function sA(t,e,n,r){const i=await WP(t.localStore,ar(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await SD(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&qE(t.remoteStore,i),a}async function SD(t,e,n,r,i){t.fu=(h,d,p)=>async function(w,I,y,v){let x=I.view.tu(y);x.Cs&&(x=await Jy(w.localStore,I.query,!1).then(({documents:A})=>I.view.tu(A,x)));const T=v&&v.targetChanges.get(I.targetId),P=v&&v.targetMismatches.get(I.targetId)!=null,k=I.view.applyChanges(x,w.isPrimaryClient,T,P);return u2(w,I.targetId,k.ou),k.snapshot}(t,h,d,p);const o=await Jy(t.localStore,e,!0),s=new wD(e,o.$s),a=s.tu(o.documents),l=ml.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,l);u2(t,n,u.ou);const c=new xD(e,n,s);return t.hu.set(e,c),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),u.snapshot}async function CD(t,e,n){const r=fe(t),i=r.hu.get(e),o=r.Pu.get(i.targetId);if(o.length>1)return r.Pu.set(i.targetId,o.filter(s=>!ff(s,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await D0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&up(r.remoteStore,i.targetId),L0(r,i.targetId)}).catch(Ss)):(L0(r,i.targetId),await D0(r.localStore,i.targetId,!0))}async function bD(t,e){const n=fe(t),r=n.hu.get(e),i=n.Pu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),up(n.remoteStore,r.targetId))}async function RD(t,e,n){const r=LD(t);try{const i=await function(s,a){const l=fe(s),u=ct.now(),c=a.reduce((p,m)=>p.add(m.key),ye());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Fr(),w=ye();return l.Bs.getEntries(p,c).next(I=>{m=I,m.forEach((y,v)=>{v.isValidDocument()||(w=w.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(I=>{h=I;const y=[];for(const v of a){const x=WO(v,h.get(v.key).overlayedDocument);x!=null&&y.push(new Oi(v.key,x,hE(x.value.mapValue),lr.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,y,a)}).next(I=>{d=I;const y=I.applyToLocalDocumentSet(h,w);return l.documentOverlayCache.saveOverlays(p,I.batchId,y)})}).then(()=>({batchId:d.batchId,changes:AE(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.Au[s.currentUser.toKey()];u||(u=new Xe(pe)),u=u.insert(a,l),s.Au[s.currentUser.toKey()]=u}(r,i.batchId,n),await yl(r,i.changes),await yf(r.remoteStore)}catch(i){const o=pp(i,"Failed to persist write");n.reject(o)}}async function aA(t,e){const n=fe(t);try{const r=await $P(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Eu.get(o);s&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.cu=!0:i.modifiedDocuments.size>0?Re(s.cu,14607):i.removedDocuments.size>0&&(Re(s.cu,42227),s.cu=!1))}),await yl(n,r,e)}catch(r){await Ss(r)}}function l2(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.hu.forEach((o,s)=>{const a=s.view.Fa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=fe(s);l.onlineState=a;let u=!1;l.queries.forEach((c,h)=>{for(const d of h.Sa)d.Fa(a)&&(u=!0)}),u&&gp(l)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ND(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Xe(re.comparator);s=s.insert(o,Ut.newNoDocument(o,ce.min()));const a=ye().add(o),l=new gf(ce.min(),new Map,new Xe(pe),s,a);await aA(r,l),r.Iu=r.Iu.remove(o),r.Eu.delete(e),vp(r)}else await D0(r.localStore,e,!1).then(()=>L0(r,e,n)).catch(Ss)}async function OD(t,e){const n=fe(t),r=e.batch.batchId;try{const i=await jP(n.localStore,e);uA(n,r,null),lA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yl(n,i)}catch(i){await Ss(i)}}async function PD(t,e,n){const r=fe(t);try{const i=await function(s,a){const l=fe(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(Re(h!==null,37113),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);uA(r,e,n),lA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await yl(r,i)}catch(i){await Ss(i)}}function lA(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function uA(t,e,n){const r=fe(t);let i=r.Au[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function L0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||cA(t,r)})}function cA(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(up(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),vp(t))}function u2(t,e,n){for(const r of n)r instanceof iA?(t.du.addReference(r.key,e),DD(t,r)):r instanceof oA?(Q(mp,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||cA(t,r.key)):se(19791,{pu:r})}function DD(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(Q(mp,"New document in limbo: "+n),t.Tu.add(r),vp(t))}function vp(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new re(je.fromString(e)),r=t.Vu.next();t.Eu.set(r,new ED(n)),t.Iu=t.Iu.insert(n,r),qE(t.remoteStore,new ii(ar(ep(n.path)),r,"TargetPurposeLimboResolution",lf.le))}}async function yl(t,e,n){const r=fe(t),i=[],o=[],s=[];r.hu.isEmpty()||(r.hu.forEach((a,l)=>{s.push(r.fu(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=ap.Rs(l.targetId,u);o.push(h)}}))}),await Promise.all(s),r.lu.Y_(i),await async function(l,u){const c=fe(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>U.forEach(u,d=>U.forEach(d.ds,p=>c.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>U.forEach(d.As,p=>c.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!Cs(h))throw h;Q(lp,"Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const p=c.xs.get(d),m=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(m);c.xs=c.xs.insert(d,w)}}}(r.localStore,o))}async function kD(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){Q(mp,"User change. New user:",e.toKey());const r=await WE(n.localStore,e);n.currentUser=e,function(o,s){o.Ru.forEach(a=>{a.forEach(l=>{l.reject(new ee($.CANCELLED,s))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yl(n,r.ks)}}function MD(t,e){const n=fe(t),r=n.Eu.get(e);if(r&&r.cu)return ye().add(r.key);{let i=ye();const o=n.Pu.get(e);if(!o)return i;for(const s of o){const a=n.hu.get(s);i=i.unionWith(a.view.eu)}return i}}function fA(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ND.bind(null,e),e.lu.Y_=yD.bind(null,e.eventManager),e.lu.gu=_D.bind(null,e.eventManager),e}function LD(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PD.bind(null,e),e}class Nc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return UP(this.persistence,new FP,e.initialUser,this.serializer)}Su(e){return new HE(sp.fi,this.serializer)}bu(e){return new KP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nc.provider={build:()=>new Nc};class FD extends Nc{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){Re(this.persistence.referenceDelegate instanceof bc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new EP(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new HE(r=>bc.fi(r,n),this.serializer)}}class F0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>l2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kD.bind(null,this.syncEngine),await gD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vD}()}createDatastore(e){const n=mf(e.databaseInfo.databaseId),r=function(o){return new ZP(o)}(e.databaseInfo);return function(o,s,a,l){return new nD(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new iD(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>l2(this.syncEngine,n,0),function(){return n2.C()?new n2:new XP}())}createSyncEngine(e,n){return function(i,o,s,a,l,u,c){const h=new AD(i,o,s,a,l,u);return c&&(h.mu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=fe(i);Q(ao,"RemoteStore shutting down."),o.da.add(5),await vl(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}F0.provider={build:()=>new F0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="FirestoreClient";class BD{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Bt.UNAUTHENTICATED,this.clientId=tE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{Q(Si,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Q(Si,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Kh(t,e){t.asyncQueue.verifyOperationInProgress(),Q(Si,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await WE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function c2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await VD(t);Q(Si,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>i2(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>i2(e.remoteStore,i)),t._onlineComponents=e}async function VD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(Si,"Using user provided OfflineComponentProvider");try{await Kh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;cs("Error using user provided cache. Falling back to memory cache: "+n),await Kh(t,new Nc)}}else Q(Si,"Using default OfflineComponentProvider"),await Kh(t,new FD(void 0));return t._offlineComponents}async function dA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(Si,"Using user provided OnlineComponentProvider"),await c2(t,t._uninitializedComponentsProvider._online)):(Q(Si,"Using default OnlineComponentProvider"),await c2(t,new F0))),t._onlineComponents}function UD(t){return dA(t).then(e=>e.syncEngine)}async function pA(t){const e=await dA(t),n=e.eventManager;return n.onListen=ID.bind(null,e.syncEngine),n.onUnlisten=CD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bD.bind(null,e.syncEngine),n}function jD(t,e,n={}){const r=new Nr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,u){const c=new hA({next:d=>{c.xu(),s.enqueueAndForget(()=>nA(o,h));const p=d.docs.has(a);!p&&d.fromCache?u.reject(new ee($.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&l&&l.source==="server"?u.reject(new ee($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new rA(ep(a.path),c,{includeMetadataChanges:!0,Qa:!0});return tA(o,h)}(await pA(t),t.asyncQueue,e,n,r)),r.promise}function $D(t,e,n={}){const r=new Nr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,u){const c=new hA({next:d=>{c.xu(),s.enqueueAndForget(()=>nA(o,h)),d.fromCache&&l.source==="server"?u.reject(new ee($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new rA(a,c,{includeMetadataChanges:!0,Qa:!0});return tA(o,h)}(await pA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t,e,n){if(!n)throw new ee($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zD(t,e,n,r){if(e===!0&&r===!0)throw new ee($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function h2(t){if(!re.isDocumentKey(t))throw new ee($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function d2(t){if(re.isDocumentKey(t))throw new ee($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _f(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se(12329,{type:typeof t})}function Br(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_f(t);throw new ee($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="firestore.googleapis.com",p2=!0;class g2{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vA,this.ssl=p2}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:p2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wP)throw new ee($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ee($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ZN;switch(r.type){case"firstParty":return new nO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=f2.get(n);r&&(Q("ComponentProvider","Removing Datastore"),f2.delete(n),r.terminate())}(this),Promise.resolve()}}function HD(t,e,n,r={}){var i;t=Br(t,wf);const o=Es(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;o&&(Fx(`https://${l}`),Bx("Firestore",!0)),s.host!==vA&&s.host!==l&&cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:l,ssl:o,emulatorOptions:r});if(!oo(u,a)&&(t._setSettings(u),r.mockUserToken)){let c,h;if(typeof r.mockUserToken=="string")c=r.mockUserToken,h=Bt.MOCK_USER;else{c=CR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ee($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Bt(d)}t._authCredentials=new JN(new Jx(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class Zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}}class vi extends Rs{constructor(e,n,r){super(e,n,ep(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new re(e))}withConverter(e){return new vi(this.firestore,e,this._path)}}function yp(t,e,...n){if(t=_t(t),mA("collection","path",e),t instanceof wf){const r=je.fromString(e,...n);return d2(r),new vi(t,null,r)}{if(!(t instanceof Zt||t instanceof vi))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return d2(r),new vi(t.firestore,null,r)}}function Pi(t,e,...n){if(t=_t(t),arguments.length===1&&(e=tE.newId()),mA("doc","path",e),t instanceof wf){const r=je.fromString(e,...n);return h2(r),new Zt(t,null,new re(r))}{if(!(t instanceof Zt||t instanceof vi))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return h2(r),new Zt(t.firestore,t instanceof vi?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="AsyncQueue";class v2{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new KE(this,"async_queue_retry"),this.rc=()=>{const r=Gh();r&&Q(m2,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=Gh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Gh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Nr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Cs(e))throw e;Q(m2,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Lr("INTERNAL UNHANDLED ERROR: ",y2(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const i=dp.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&se(47125,{cc:y2(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function y2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class _l extends wf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new v2,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new v2(e),this._firestoreClient=void 0,await e}}}function WD(t,e){const n=typeof t=="object"?t:K1(),r=typeof t=="string"?t:e||xc,i=As(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=TR("firestore");o&&HD(i,...o)}return i}function _p(t){if(t._terminated)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GD(t),t._firestoreClient}function GD(t){var e,n,r;const i=t._freezeSettings(),o=function(a,l,u,c){return new vO(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,gA(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new BD(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ms(Nt.fromBase64String(e))}catch(n){throw new ee($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ms(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=/^__.*__$/;class XD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new gl(e,this.data,n,this.fieldTransforms)}}class yA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Oi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _A(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{Ic:t})}}class Ap{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Ap(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Oc(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(_A(this.Ic)&&KD.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class qD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mf(e)}bc(e,n,r,i=!1){return new Ap({Ic:e,methodName:n,wc:r,path:St.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ip(t){const e=t._freezeSettings(),n=mf(t._databaseId);return new qD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function YD(t,e,n,r,i,o={}){const s=t.bc(o.merge||o.mergeFields?2:0,e,n,i);Tp("Data must be an object, but it was:",s,r);const a=wA(r,s);let l,u;if(o.merge)l=new mn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const c=[];for(const h of o.mergeFields){const d=B0(e,h,n);if(!s.contains(d))throw new ee($.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);EA(c,d)||c.push(d)}l=new mn(c),u=s.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=s.fieldTransforms;return new XD(new an(a),l,u)}class Ef extends wp{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ef}}function QD(t,e,n,r){const i=t.bc(1,e,n);Tp("Data must be an object, but it was:",i,r);const o=[],s=an.empty();Ni(r,(l,u)=>{const c=Sp(e,l,n);u=_t(u);const h=i.mc(c);if(u instanceof Ef)o.push(c);else{const d=wl(u,h);d!=null&&(o.push(c),s.set(c,d))}});const a=new mn(o);return new yA(s,a,i.fieldTransforms)}function ZD(t,e,n,r,i,o){const s=t.bc(1,e,n),a=[B0(e,r,n)],l=[i];if(o.length%2!=0)throw new ee($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<o.length;d+=2)a.push(B0(e,o[d])),l.push(o[d+1]);const u=[],c=an.empty();for(let d=a.length-1;d>=0;--d)if(!EA(u,a[d])){const p=a[d];let m=l[d];m=_t(m);const w=s.mc(p);if(m instanceof Ef)u.push(p);else{const I=wl(m,w);I!=null&&(u.push(p),c.set(p,I))}}const h=new mn(u);return new yA(c,h,s.fieldTransforms)}function JD(t,e,n,r=!1){return wl(n,t.bc(r?4:3,e))}function wl(t,e){if(xA(t=_t(t)))return Tp("Unsupported field value:",e,t),wA(t,e);if(t instanceof wp)return function(r,i){if(!_A(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=wl(a,i.fc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=_t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ct.fromDate(r);return{timestampValue:Cc(i.serializer,o)}}if(r instanceof ct){const o=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cc(i.serializer,o)}}if(r instanceof xp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ms)return{bytesValue:LE(i.serializer,r._byteString)};if(r instanceof Zt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.gc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ip(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ep)return function(s,a){return{mapValue:{fields:{[uE]:{stringValue:fE},[Ec]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.gc("VectorValues must only contain numeric values.");return tp(a.serializer,u)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${_f(r)}`)}(t,e)}function wA(t,e){const n={};return rE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ni(t,(r,i)=>{const o=wl(i,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function xA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof xp||t instanceof ms||t instanceof Zt||t instanceof wp||t instanceof Ep)}function Tp(t,e,n){if(!xA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=_f(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function B0(t,e,n){if((e=_t(e))instanceof xf)return e._internalPath;if(typeof e=="string")return Sp(t,e);throw Oc("Field path arguments must be of type string or ",t,!1,void 0,n)}const e5=new RegExp("[~\\*/\\[\\]]");function Sp(t,e,n){if(e.search(e5)>=0)throw Oc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xf(...e.split("."))._internalPath}catch{throw Oc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Oc(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new ee($.INVALID_ARGUMENT,a+t+l)}function EA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class t5 extends AA{data(){return super.data()}}function Cp(t,e){return typeof e=="string"?Sp(t,e):e instanceof xf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bp{}class r5 extends bp{}function Rp(t,e,...n){let r=[];e instanceof bp&&r.push(e),r=r.concat(n),function(o){const s=o.filter(l=>l instanceof Op).length,a=o.filter(l=>l instanceof Af).length;if(s>1||s>0&&a>0)throw new ee($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Af extends r5{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Af(e,n,r)}_apply(e){const n=this._parse(e);return IA(e._query,n),new Rs(e.firestore,e.converter,C0(e._query,n))}_parse(e){const n=Ip(e.firestore);return function(o,s,a,l,u,c,h){let d;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new ee($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){w2(h,c);const m=[];for(const w of h)m.push(_2(l,o,w));d={arrayValue:{values:m}}}else d=_2(l,o,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||w2(h,c),d=JD(a,s,h,c==="in"||c==="not-in");return tt.create(u,c,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Np(t,e,n){const r=e,i=Cp("where",t);return Af._create(i,r,n)}class Op extends bp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Op(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const l of a)IA(s,l),s=C0(s,l)}(e._query,n),new Rs(e.firestore,e.converter,C0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function _2(t,e,n){if(typeof(n=_t(n))=="string"){if(n==="")throw new ee($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_E(e)&&n.indexOf("/")!==-1)throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!re.isDocumentKey(r))throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ky(t,new re(r))}if(n instanceof Zt)return ky(t,n._key);throw new ee($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_f(n)}.`)}function w2(t,e){if(!Array.isArray(t)||t.length===0)throw new ee($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IA(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class i5{convertValue(e,n="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ni(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Ec].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Qe(s.doubleValue));return new Ep(o)}convertGeoPoint(e){return new xp(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ja(e));default:return null}}convertTimestamp(e){const n=Ei(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);Re($E(r),9688,{name:e});const i=new el(r.get(1),r.get(3)),o=new re(r.popFirst(5));return i.isEqual(n)||Lr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class TA extends AA{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Vu extends TA{data(e={}){return super.data(e)}}class s5{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new pa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vu(this._firestore,this._userDataWriter,r.key,r,new pa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new Vu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new Vu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),c=s.indexOf(a.doc.key)),{type:a5(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function a5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){t=Br(t,Zt);const e=Br(t.firestore,_l);return jD(_p(e),t._key).then(n=>l5(e,t,n))}class SA extends i5{constructor(e){super(),this.firestore=e}convertBytes(e){return new ms(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,n)}}function Pp(t){t=Br(t,Rs);const e=Br(t.firestore,_l),n=_p(e),r=new SA(e);return n5(t._query),$D(n,t._query).then(i=>new s5(e,r,t,i))}function If(t,e,n){t=Br(t,Zt);const r=Br(t.firestore,_l),i=o5(t.converter,e,n);return bA(r,[YD(Ip(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,lr.none())])}function CA(t,e,n,...r){t=Br(t,Zt);const i=Br(t.firestore,_l),o=Ip(i);let s;return s=typeof(e=_t(e))=="string"||e instanceof xf?ZD(o,"updateDoc",t._key,e,n,r):QD(o,"updateDoc",t._key,e),bA(i,[s.toMutation(t._key,lr.exists(!0))])}function bA(t,e){return function(r,i){const o=new Nr;return r.asyncQueue.enqueueAndForget(async()=>RD(await UD(r),i,o)),o.promise}(_p(t),e)}function l5(t,e,n){const r=n.docs.get(e._key),i=new SA(t);return new TA(t,i,e._key,r,new pa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ts=i})(Is),hr(new qn("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new _l(new eO(r.getProvider("auth-internal")),new rO(s,r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ee($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new el(u.options.projectId,c)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),On(Ey,Ay,e),On(Ey,Ay,"esm2017")})();var u5="firebase",c5="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On(u5,c5,"app");function Dp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function RA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f5=RA,NA=new go("auth","Firebase",RA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new W1("@firebase/auth");function h5(t,...e){Pc.logLevel<=ve.WARN&&Pc.warn(`Auth (${Is}): ${t}`,...e)}function Uu(t,...e){Pc.logLevel<=ve.ERROR&&Pc.error(`Auth (${Is}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(t,...e){throw Mp(t,...e)}function Kn(t,...e){return Mp(t,...e)}function kp(t,e,n){const r=Object.assign(Object.assign({},f5()),{[e]:n});return new go("auth","Firebase",r).create(e,{appName:t.name})}function yi(t){return kp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OA(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&pr(t,"argument-error"),kp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return NA.create(t,...e)}function ae(t,e,...n){if(!t)throw Mp(e,...n)}function Sr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Uu(e),new Error(e)}function Vr(t,e){t||Sr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function d5(){return x2()==="http:"||x2()==="https:"}function x2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(d5()||DR()||"connection"in navigator)?navigator.onLine:!0}function g5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vr(n>e,"Short delay should be less than long delay!"),this.isMobile=NR()||kR()}get(){return p5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t,e){Vr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],y5=new El(3e4,6e4);function Fp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ns(t,e,n,r,i={}){return DA(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=dl(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},o);return PR()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Es(t.emulatorConfig.host)&&(u.credentials="include"),PA.fetch()(await kA(t,t.config.apiHost,n,a),u)})}async function DA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},m5),e);try{const i=new w5(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw vu(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw vu(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw vu(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw vu(t,"user-disabled",s);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw kp(t,c,u);pr(t,c)}}catch(i){if(i instanceof mr)throw i;pr(t,"network-request-failed",{message:String(i)})}}async function _5(t,e,n,r,i={}){const o=await Ns(t,e,n,r,i);return"mfaPendingCredential"in o&&pr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function kA(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Lp(t.config,i):`${t.config.apiScheme}://${i}`;return v5.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}class w5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Kn(this.auth,"network-request-failed")),y5.get())})}}function vu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Kn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x5(t,e){return Ns(t,"POST","/v1/accounts:delete",e)}async function Dc(t,e){return Ns(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function E5(t,e=!1){const n=_t(t),r=await n.getIdToken(e),i=Bp(r);ae(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Oa(Xh(i.auth_time)),issuedAtTime:Oa(Xh(i.iat)),expirationTime:Oa(Xh(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Xh(t){return Number(t)*1e3}function Bp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Uu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Dx(n);return i?JSON.parse(i):(Uu("Failed to decode base64 JWT payload"),null)}catch(i){return Uu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function E2(t){const e=Bp(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof mr&&A5(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function A5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oa(this.lastLoginAt),this.creationTime=Oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await il(t,Dc(n,{idToken:r}));ae(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?MA(o.providerUserInfo):[],a=S5(t.providerData,s),l=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new U0(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function T5(t){const e=_t(t);await kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function S5(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function MA(t){return t.map(e=>{var{providerId:n}=e,r=Dp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(t,e){const n=await DA(t,{},async()=>{const r=dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await kA(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Es(t.emulatorConfig.host)&&(l.credentials="include"),PA.fetch()(s,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function b5(t,e){return Ns(t,"POST","/v2/accounts:revokeToken",Fp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=E2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await C5(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Jo;return r&&(ae(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ae(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ae(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return Sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Dp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new I5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new U0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await il(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return E5(this,e)}reload(){return T5(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await kc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sn(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await il(this,x5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,p=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,m=(s=n.photoURL)!==null&&s!==void 0?s:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:x,emailVerified:T,isAnonymous:P,providerData:k,stsTokenManager:A}=n;ae(x&&A,e,"internal-error");const E=Jo.fromJSON(this.name,A);ae(typeof x=="string",e,"internal-error"),Kr(h,e.name),Kr(d,e.name),ae(typeof T=="boolean",e,"internal-error"),ae(typeof P=="boolean",e,"internal-error"),Kr(p,e.name),Kr(m,e.name),Kr(w,e.name),Kr(I,e.name),Kr(y,e.name),Kr(v,e.name);const S=new Hn({uid:x,auth:e,email:d,emailVerified:T,displayName:h,isAnonymous:P,photoURL:m,phoneNumber:p,tenantId:w,stsTokenManager:E,createdAt:y,lastLoginAt:v});return k&&Array.isArray(k)&&(S.providerData=k.map(b=>Object.assign({},b))),I&&(S._redirectEventId=I),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Jo;i.updateFromServerResponse(n);const o=new Hn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await kc(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ae(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?MA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new Jo;a.updateFromIdToken(r);const l=new Hn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new U0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=new Map;function Cr(t){Vr(t instanceof Function,"Expected a class definition");let e=A2.get(t);return e?(Vr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,A2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}LA.type="NONE";const I2=LA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t,e,n){return`firebase:${t}:${e}:${n}`}class es{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=ju(this.userKey,i.apiKey,o),this.fullPersistenceKey=ju("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Dc(this.auth,{idToken:e}).catch(()=>{});return n?Hn._fromGetAccountInfoResponse(this.auth,n,e):null}return Hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new es(Cr(I2),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=i[0]||Cr(I2);const s=ju(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(s);if(c){let h;if(typeof c=="string"){const d=await Dc(e,{idToken:c}).catch(()=>{});if(!d)break;h=await Hn._fromGetAccountInfoResponse(e,d,c)}else h=Hn._fromJSON(e,c);u!==o&&(a=h),o=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new es(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new es(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($A(e))return"Blackberry";if(zA(e))return"Webos";if(BA(e))return"Safari";if((e.includes("chrome/")||VA(e))&&!e.includes("edge/"))return"Chrome";if(jA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function FA(t=$t()){return/firefox\//i.test(t)}function BA(t=$t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VA(t=$t()){return/crios\//i.test(t)}function UA(t=$t()){return/iemobile/i.test(t)}function jA(t=$t()){return/android/i.test(t)}function $A(t=$t()){return/blackberry/i.test(t)}function zA(t=$t()){return/webos/i.test(t)}function Vp(t=$t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function R5(t=$t()){var e;return Vp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function N5(){return MR()&&document.documentMode===10}function HA(t=$t()){return Vp(t)||jA(t)||zA(t)||$A(t)||/windows phone/i.test(t)||UA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t,e=[]){let n;switch(t){case"Browser":n=T2($t());break;case"Worker":n=`${T2($t())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Is}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(t,e={}){return Ns(t,"GET","/v2/passwordPolicy",Fp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=6;class k5{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:D5,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S2(this),this.idTokenSubscription=new S2(this),this.beforeStateQueue=new O5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cr(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await es.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Dc(this,{idToken:e}),r=await Hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Sn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=g5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sn(this.app))return Promise.reject(yi(this));const n=e?_t(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sn(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sn(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await P5(this),n=new k5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new go("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await b5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cr(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await es.create(this,[Cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&h5(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Os(t){return _t(t)}class S2{constructor(e){this.auth=e,this.observer=null,this.addObserver=$R(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Up={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function L5(t){Up=t}function F5(t){return Up.loadJS(t)}function B5(){return Up.gapiScript}function V5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(t,e){const n=As(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(oo(o,e??{}))return i;pr(i,"already-initialized")}return n.initialize({options:e})}function j5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $5(t,e,n){const r=Os(t);ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),o=GA(e),{host:s,port:a}=z5(e),l=a===null?"":`:${a}`,u={url:`${o}//${s}${l}/`},c=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ae(oo(u,r.config.emulator)&&oo(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,Es(s)?(Fx(`${o}//${s}${l}`),Bx("Auth",!0)):i||H5()}function GA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function z5(t){const e=GA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:C2(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:C2(s)}}}function C2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function H5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sr("not implemented")}_getIdTokenResponse(e){return Sr("not implemented")}_linkToIdToken(e,n){return Sr("not implemented")}_getReauthenticationResolver(e){return Sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ts(t,e){return _5(t,"POST","/v1/accounts:signInWithIdp",Fp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5="http://localhost";class lo extends KA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Dp(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new lo(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return ts(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ts(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ts(e,n)}buildRequest(){const e={requestUri:W5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=dl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends Tf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Al{constructor(){super("facebook.com")}static credential(e){return lo._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Al{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return lo._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ar.credential(n,r)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends Al{constructor(){super("github.com")}static credential(e){return lo._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.GITHUB_SIGN_IN_METHOD="github.com";ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends Al{constructor(){super("twitter.com")}static credential(e,n){return lo._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ti.credential(n,r)}catch{return null}}}ti.TWITTER_SIGN_IN_METHOD="twitter.com";ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Hn._fromIdTokenResponse(e,r,i),s=b2(r);return new vs({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=b2(r);return new vs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function b2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends mr{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Mc.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Mc(e,n,r,i)}}function XA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Mc._fromErrorAndOperation(t,o,e,r):o})}async function G5(t,e,n=!1){const r=await il(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K5(t,e,n=!1){const{auth:r}=t;if(Sn(r.app))return Promise.reject(yi(r));const i="reauthenticate";try{const o=await il(t,XA(r,i,e,t),n);ae(o.idToken,r,"internal-error");const s=Bp(o.idToken);ae(s,r,"internal-error");const{sub:a}=s;return ae(t.uid===a,r,"user-mismatch"),vs._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&pr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X5(t,e,n=!1){if(Sn(t.app))return Promise.reject(yi(t));const r="signIn",i=await XA(t,r,e),o=await vs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function q5(t,e,n,r){return _t(t).onIdTokenChanged(e,n,r)}function Y5(t,e,n){return _t(t).beforeAuthStateChanged(e,n)}function Q5(t,e,n,r){return _t(t).onAuthStateChanged(e,n,r)}function Z5(t){return _t(t).signOut()}const Lc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lc,"1"),this.storage.removeItem(Lc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=1e3,ek=10;class YA extends qA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);N5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ek):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},J5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}YA.type="LOCAL";const tk=YA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA extends qA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}QA.type="SESSION";const ZA=QA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Sf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async u=>u(n.origin,o)),l=await nk(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const u=jp("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(d.data.response);break;default:clearTimeout(c),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return window}function ik(t){cr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}async function ok(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ak(){return JA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="firebaseLocalStorageDb",lk=1,Fc="firebaseLocalStorage",tI="fbase_key";class Il{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Cf(t,e){return t.transaction([Fc],e?"readwrite":"readonly").objectStore(Fc)}function uk(){const t=indexedDB.deleteDatabase(eI);return new Il(t).toPromise()}function j0(){const t=indexedDB.open(eI,lk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Fc,{keyPath:tI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Fc)?e(r):(r.close(),await uk(),e(await j0()))})})}async function R2(t,e,n){const r=Cf(t,!0).put({[tI]:e,value:n});return new Il(r).toPromise()}async function ck(t,e){const n=Cf(t,!1).get(e),r=await new Il(n).toPromise();return r===void 0?null:r.value}function N2(t,e){const n=Cf(t,!0).delete(e);return new Il(n).toPromise()}const fk=800,hk=3;class nI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await j0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sf._getInstance(ak()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ok(),!this.activeServiceWorker)return;this.sender=new rk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await j0();return await R2(e,Lc,"1"),await N2(e,Lc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>R2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ck(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>N2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Cf(i,!1).getAll();return new Il(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nI.type="LOCAL";const dk=nI;new El(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t,e){return e?Cr(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends KA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ts(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ts(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ts(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pk(t){return X5(t.auth,new zp(t),t.bypassAuthState)}function gk(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),K5(n,new zp(t),t.bypassAuthState)}async function mk(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),G5(n,new zp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pk;case"linkViaPopup":case"linkViaRedirect":return mk;case"reauthViaPopup":case"reauthViaRedirect":return gk;default:pr(this.auth,"internal-error")}}resolve(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=new El(2e3,1e4);async function yk(t,e,n){if(Sn(t.app))return Promise.reject(Kn(t,"operation-not-supported-in-this-environment"));const r=Os(t);OA(t,e,Tf);const i=$p(r,n);return new Xi(r,"signInViaPopup",e,i).executeNotNull()}class Xi extends rI{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Xi.currentPopupAction&&Xi.currentPopupAction.cancel(),Xi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){Vr(this.filter.length===1,"Popup operations only handle one event");const e=jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vk.get())};e()}}Xi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k="pendingRedirect",$u=new Map;class wk extends rI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=$u.get(this.auth._key());if(!e){try{const r=await xk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$u.set(this.auth._key(),e)}return this.bypassAuthState||$u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xk(t,e){const n=oI(e),r=iI(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Ek(t,e){return iI(t)._set(oI(e),"true")}function Ak(t,e){$u.set(t._key(),e)}function iI(t){return Cr(t._redirectPersistence)}function oI(t){return ju(_k,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t,e,n){return Tk(t,e,n)}async function Tk(t,e,n){if(Sn(t.app))return Promise.reject(yi(t));const r=Os(t);OA(t,e,Tf),await r._initializationPromise;const i=$p(r,n);return await Ek(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function O2(t,e){return await Os(t)._initializationPromise,sI(t,e,!1)}async function sI(t,e,n=!1){if(Sn(t.app))return Promise.reject(yi(t));const r=Os(t),i=$p(r,e),s=await new wk(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=10*60*1e3;class Ck{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!aI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Kn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Sk&&this.cachedEventUids.clear(),this.cachedEventUids.has(P2(e))}saveEventToCache(e){this.cachedEventUids.add(P2(e)),this.lastProcessedEventTime=Date.now()}}function P2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(t,e={}){return Ns(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ok=/^https?/;async function Pk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Rk(t);for(const n of e)try{if(Dk(n))return}catch{}pr(t,"unauthorized-domain")}function Dk(t){const e=V0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Ok.test(n))return!1;if(Nk.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new El(3e4,6e4);function D2(){const t=cr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Mk(t){return new Promise((e,n)=>{var r,i,o;function s(){D2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{D2(),n(Kn(t,"network-request-failed"))},timeout:kk.get()})}if(!((i=(r=cr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=cr().gapi)===null||o===void 0)&&o.load)s();else{const a=V5("iframefcb");return cr()[a]=()=>{gapi.load?s():n(Kn(t,"network-request-failed"))},F5(`${B5()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw zu=null,e})}let zu=null;function Lk(t){return zu=zu||Mk(t),zu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=new El(5e3,15e3),Bk="__/auth/iframe",Vk="emulator/auth/iframe",Uk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $k(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Lp(e,Vk):`https://${t.config.authDomain}/${Bk}`,r={apiKey:e.apiKey,appName:t.name,v:Is},i=jk.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${dl(r).slice(1)}`}async function zk(t){const e=await Lk(t),n=cr().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:$k(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uk,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=Kn(t,"network-request-failed"),a=cr().setTimeout(()=>{o(s)},Fk.get());function l(){cr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wk=500,Gk=600,Kk="_blank",Xk="http://localhost";class k2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qk(t,e,n,r=Wk,i=Gk){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Hk),{width:r.toString(),height:i.toString(),top:o,left:s}),u=$t().toLowerCase();n&&(a=VA(u)?Kk:n),FA(u)&&(e=e||Xk,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[p,m])=>`${d}${p}=${m},`,"");if(R5(u)&&a!=="_self")return Yk(e||"",a),new k2(null);const h=window.open(e||"",a,c);ae(h,t,"popup-blocked");try{h.focus()}catch{}return new k2(h)}function Yk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="__/auth/handler",Zk="emulator/auth/handler",Jk=encodeURIComponent("fac");async function M2(t,e,n,r,i,o){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Is,eventId:i};if(e instanceof Tf){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",jR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries(o||{}))s[c]=h}if(e instanceof Al){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(s.scopes=c.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${Jk}=${encodeURIComponent(l)}`:"";return`${e9(t)}?${dl(a).slice(1)}${u}`}function e9({config:t}){return t.emulator?Lp(t,Zk):`https://${t.authDomain}/${Qk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="webStorageSupport";class t9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZA,this._completeRedirectFn=sI,this._overrideRedirectResult=Ak}async _openPopup(e,n,r,i){var o;Vr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await M2(e,n,r,V0(),i);return qk(e,s,jp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await M2(e,n,r,V0(),i);return ik(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Vr(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await zk(e),r=new Ck(e);return n.register("authEvent",i=>(ae(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qh,{type:qh},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[qh];s!==void 0&&n(!!s),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Pk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return HA()||BA()||Vp()}}const ga=t9;var L2="@firebase/auth",F2="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function i9(t){hr(new qn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ae(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WA(t)},u=new M5(r,i,o,l);return j5(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hr(new qn("auth-internal",e=>{const n=Os(e.getProvider("auth").getImmediate());return(r=>new n9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),On(L2,F2,r9(t)),On(L2,F2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9=5*60,s9=Lx("authIdTokenMaxAge")||o9;let B2=null;const a9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>s9)return;const i=n==null?void 0:n.token;B2!==i&&(B2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function l9(t=K1()){const e=As(t,"auth");if(e.isInitialized())return e.getImmediate();const n=U5(t,{popupRedirectResolver:ga,persistence:[dk,tk,ZA]}),r=Lx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=a9(o.toString());Y5(n,s,()=>s(n.currentUser)),q5(n,a=>s(a))}}const i=kx("auth");return i&&$5(n,`http://${i}`),n}function u9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}L5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Kn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",u9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});i9("Browser");const lI="@firebase/installations",Hp="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=1e4,cI=`w:${Hp}`,fI="FIS_v2",c9="https://firebaseinstallations.googleapis.com/v1",f9=60*60*1e3,h9="installations",d9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},uo=new go(h9,d9,p9);function hI(t){return t instanceof mr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI({projectId:t}){return`${c9}/projects/${t}/installations`}function pI(t){return{token:t.token,requestStatus:2,expiresIn:m9(t.expiresIn),creationTime:Date.now()}}async function gI(t,e){const r=(await e.json()).error;return uo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function mI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function g9(t,{refreshToken:e}){const n=mI(t);return n.append("Authorization",v9(e)),n}async function vI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function m9(t){return Number(t.replace("s","000"))}function v9(t){return`${fI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y9({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=dI(t),i=mI(t),o=e.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const s={fid:n,authVersion:fI,appId:t.appId,sdkVersion:cI},a={method:"POST",headers:i,body:JSON.stringify(s)},l=await vI(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:pI(u.authToken)}}else throw await gI("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9=/^[cdef][\w-]{21}$/,$0="";function x9(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=E9(t);return w9.test(n)?n:$0}catch{return $0}}function E9(t){return _9(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new Map;function wI(t,e){const n=bf(t);xI(n,e),A9(n,e)}function xI(t,e){const n=_I.get(t);if(n)for(const r of n)r(e)}function A9(t,e){const n=I9();n&&n.postMessage({key:t,fid:e}),T9()}let qi=null;function I9(){return!qi&&"BroadcastChannel"in self&&(qi=new BroadcastChannel("[Firebase] FID Change"),qi.onmessage=t=>{xI(t.data.key,t.data.fid)}),qi}function T9(){_I.size===0&&qi&&(qi.close(),qi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9="firebase-installations-database",C9=1,co="firebase-installations-store";let Yh=null;function Wp(){return Yh||(Yh=af(S9,C9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(co)}}})),Yh}async function Bc(t,e){const n=bf(t),i=(await Wp()).transaction(co,"readwrite"),o=i.objectStore(co),s=await o.get(n);return await o.put(e,n),await i.done,(!s||s.fid!==e.fid)&&wI(t,e.fid),e}async function EI(t){const e=bf(t),r=(await Wp()).transaction(co,"readwrite");await r.objectStore(co).delete(e),await r.done}async function Rf(t,e){const n=bf(t),i=(await Wp()).transaction(co,"readwrite"),o=i.objectStore(co),s=await o.get(n),a=e(s);return a===void 0?await o.delete(n):await o.put(a,n),await i.done,a&&(!s||s.fid!==a.fid)&&wI(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gp(t){let e;const n=await Rf(t.appConfig,r=>{const i=b9(r),o=R9(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===$0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function b9(t){const e=t||{fid:x9(),registrationStatus:0};return AI(e)}function R9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(uo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=N9(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:O9(t)}:{installationEntry:e}}async function N9(t,e){try{const n=await y9(t,e);return Bc(t.appConfig,n)}catch(n){throw hI(n)&&n.customData.serverCode===409?await EI(t.appConfig):await Bc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function O9(t){let e=await V2(t.appConfig);for(;e.registrationStatus===1;)await yI(100),e=await V2(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Gp(t);return r||n}return e}function V2(t){return Rf(t,e=>{if(!e)throw uo.create("installation-not-found");return AI(e)})}function AI(t){return P9(t)?{fid:t.fid,registrationStatus:0}:t}function P9(t){return t.registrationStatus===1&&t.registrationTime+uI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D9({appConfig:t,heartbeatServiceProvider:e},n){const r=k9(t,n),i=g9(t,n),o=e.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const s={installation:{sdkVersion:cI,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(s)},l=await vI(()=>fetch(r,a));if(l.ok){const u=await l.json();return pI(u)}else throw await gI("Generate Auth Token",l)}function k9(t,{fid:e}){return`${dI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kp(t,e=!1){let n;const r=await Rf(t.appConfig,o=>{if(!II(o))throw uo.create("not-registered");const s=o.authToken;if(!e&&F9(s))return o;if(s.requestStatus===1)return n=M9(t,e),o;{if(!navigator.onLine)throw uo.create("app-offline");const a=V9(o);return n=L9(t,a),a}});return n?await n:r.authToken}async function M9(t,e){let n=await U2(t.appConfig);for(;n.authToken.requestStatus===1;)await yI(100),n=await U2(t.appConfig);const r=n.authToken;return r.requestStatus===0?Kp(t,e):r}function U2(t){return Rf(t,e=>{if(!II(e))throw uo.create("not-registered");const n=e.authToken;return U9(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function L9(t,e){try{const n=await D9(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Bc(t.appConfig,r),n}catch(n){if(hI(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await EI(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Bc(t.appConfig,r)}throw n}}function II(t){return t!==void 0&&t.registrationStatus===2}function F9(t){return t.requestStatus===2&&!B9(t)}function B9(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+f9}function V9(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function U9(t){return t.requestStatus===1&&t.requestTime+uI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j9(t){const e=t,{installationEntry:n,registrationPromise:r}=await Gp(e);return r?r.catch(console.error):Kp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $9(t,e=!1){const n=t;return await z9(n),(await Kp(n,e)).token}async function z9(t){const{registrationPromise:e}=await Gp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(t){if(!t||!t.options)throw Qh("App Configuration");if(!t.name)throw Qh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Qh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Qh(t){return uo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="installations",W9="installations-internal",G9=t=>{const e=t.getProvider("app").getImmediate(),n=H9(e),r=As(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},K9=t=>{const e=t.getProvider("app").getImmediate(),n=As(e,TI).getImmediate();return{getId:()=>j9(n),getToken:i=>$9(n,i)}};function X9(){hr(new qn(TI,G9,"PUBLIC")),hr(new qn(W9,K9,"PRIVATE"))}X9();On(lI,Hp);On(lI,Hp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9="/firebase-messaging-sw.js",Y9="/firebase-cloud-messaging-push-scope",SI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Q9="https://fcmregistrations.googleapis.com/v1",CI="google.c.a.c_id",Z9="google.c.a.c_l",J9="google.c.a.ts",e7="google.c.a.e",j2=1e4;var $2;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})($2||($2={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var ol;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(ol||(ol={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function t7(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="fcm_token_details_db",n7=5,z2="fcm_token_object_Store";async function r7(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(Zh))return null;let e=null;return(await af(Zh,n7,{upgrade:async(r,i,o,s)=>{var a;if(i<2||!r.objectStoreNames.contains(z2))return;const l=s.objectStore(z2),u=await l.index("fcmSenderId").get(t);if(await l.clear(),!!u){if(i===2){const c=u;if(!c.auth||!c.p256dh||!c.endpoint)return;e={token:c.fcmToken,createTime:(a=c.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:xr(c.vapidKey)}}}else if(i===3){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:xr(c.auth),p256dh:xr(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:xr(c.vapidKey)}}}else if(i===4){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:xr(c.auth),p256dh:xr(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:xr(c.vapidKey)}}}}}})).close(),await jh(Zh),await jh("fcm_vapid_details_db"),await jh("undefined"),i7(e)?e:null}function i7(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7="firebase-messaging-database",s7=1,sl="firebase-messaging-store";let Jh=null;function bI(){return Jh||(Jh=af(o7,s7,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(sl)}}})),Jh}async function a7(t){const e=RI(t),r=await(await bI()).transaction(sl).objectStore(sl).get(e);if(r)return r;{const i=await r7(t.appConfig.senderId);if(i)return await Xp(t,i),i}}async function Xp(t,e){const n=RI(t),i=(await bI()).transaction(sl,"readwrite");return await i.objectStore(sl).put(e,n),await i.done,e}function RI({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l7={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Jt=new go("messaging","Messaging",l7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u7(t,e){const n=await Yp(t),r=NI(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let o;try{o=await(await fetch(qp(t.appConfig),i)).json()}catch(s){throw Jt.create("token-subscribe-failed",{errorInfo:s==null?void 0:s.toString()})}if(o.error){const s=o.error.message;throw Jt.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw Jt.create("token-subscribe-no-token");return o.token}async function c7(t,e){const n=await Yp(t),r=NI(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let o;try{o=await(await fetch(`${qp(t.appConfig)}/${e.token}`,i)).json()}catch(s){throw Jt.create("token-update-failed",{errorInfo:s==null?void 0:s.toString()})}if(o.error){const s=o.error.message;throw Jt.create("token-update-failed",{errorInfo:s})}if(!o.token)throw Jt.create("token-update-no-token");return o.token}async function f7(t,e){const r={method:"DELETE",headers:await Yp(t)};try{const o=await(await fetch(`${qp(t.appConfig)}/${e}`,r)).json();if(o.error){const s=o.error.message;throw Jt.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw Jt.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function qp({projectId:t}){return`${Q9}/projects/${t}/registrations`}async function Yp({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function NI({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==SI&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7=7*24*60*60*1e3;async function d7(t){const e=await g7(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:xr(e.getKey("auth")),p256dh:xr(e.getKey("p256dh"))},r=await a7(t.firebaseDependencies);if(r){if(m7(r.subscriptionOptions,n))return Date.now()>=r.createTime+h7?p7(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await f7(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return H2(t.firebaseDependencies,n)}else return H2(t.firebaseDependencies,n)}async function p7(t,e){try{const n=await c7(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Xp(t.firebaseDependencies,r),n}catch(n){throw n}}async function H2(t,e){const r={token:await u7(t,e),createTime:Date.now(),subscriptionOptions:e};return await Xp(t,r),r.token}async function g7(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t7(e)})}function m7(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return v7(e,t),y7(e,t),_7(e,t),e}function v7(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const o=e.notification.icon;o&&(t.notification.icon=o)}function y7(t,e){e.data&&(t.data=e.data)}function _7(t,e){var n,r,i,o,s;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(t.fcmOptions.link=a);const l=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w7(t){return typeof t=="object"&&!!t&&CI in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */x7("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function x7(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E7(t){if(!t||!t.options)throw ed("App Configuration Object");if(!t.name)throw ed("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw ed(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function ed(t){return Jt.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=E7(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I7(t){try{t.swRegistration=await navigator.serviceWorker.register(q9,{scope:Y9}),t.swRegistration.update().catch(()=>{}),await T7(t.swRegistration)}catch(e){throw Jt.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function T7(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${j2} ms`)),j2),i=t.installing||t.waiting;t.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var s;((s=o.target)===null||s===void 0?void 0:s.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S7(t,e){if(!e&&!t.swRegistration&&await I7(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Jt.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C7(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=SI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b7(t,e){if(!navigator)throw Jt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Jt.create("permission-blocked");return await C7(t,e==null?void 0:e.vapidKey),await S7(t,e==null?void 0:e.serviceWorkerRegistration),d7(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R7(t,e,n){const r=N7(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[CI],message_name:n[Z9],message_time:n[J9],message_device_time:Math.floor(Date.now()/1e3)})}function N7(t){switch(t){case ol.NOTIFICATION_CLICKED:return"notification_open";case ol.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O7(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===ol.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(W2(n)):t.onMessageHandler.next(W2(n)));const r=n.data;w7(r)&&r[e7]==="1"&&await R7(t,n.messageType,r)}const G2="@firebase/messaging",K2="0.12.21";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7=t=>{const e=new A7(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>O7(e,n)),e},D7=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>b7(e,r)}};function k7(){hr(new qn("messaging",P7,"PUBLIC")),hr(new qn("messaging-internal",D7,"PRIVATE")),On(G2,K2),On(G2,K2,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M7(){try{await Ux()}catch{return!1}return typeof window<"u"&&Vx()&&FR()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L7(t=K1()){return M7().then(e=>{if(!e)throw Jt.create("unsupported-browser")},e=>{throw Jt.create("indexed-db-unsupported")}),As(_t(t),"messaging").getImmediate()}k7();const F7={apiKey:"AIzaSyB4W2cA7Ec8x4u3A9kvNfKKgBLfgquVnPg",authDomain:"inventoryapp-5fc4d.firebaseapp.com",projectId:"inventoryapp-5fc4d",storageBucket:"inventoryapp-5fc4d.firebasestorage.app",messagingSenderId:"777550688499",appId:"1:777550688499:web:46373408b19205a0ba4786",measurementId:"G-G08N6QEVZP"};console.log("firebase config loaded");const Qp=zx(F7),Qn=WD(Qp),Co=l9(Qp),OI=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes("192.168");console.log("Environment:",OI?"Development":"Production");console.log("Current hostname:",window.location.hostname);let B7=null;try{(!OI||{}.VITE_ENABLE_MESSAGING==="true")&&(B7=L7(Qp))}catch(t){console.warn("Firebase messaging not available:",t.message)}const Zp="families",Nf="users",Of="items",PI=()=>Math.random().toString(36).substr(2,9),td=async t=>{console.log("getUserByEmail",t);try{const e=Rp(yp(Qn,Nf),Np("email","==",t)),n=await Pp(e);if(!n.empty){const r=n.docs[0].data();return{username:r.username,email:r.email,familyID:r.familyID,userID:r.userID}}return null}catch(e){throw console.error("Error getting user by email:",e),e}},V7=async t=>{console.log("getUserByusername",t);try{const e=Rp(yp(Qn,Nf),Np("username","==",t)),n=await Pp(e);if(!n.empty){const r=n.docs[0].data();return{username:r.username,email:r.email,familyID:r.familyID,userID:r.userID}}return null}catch(e){throw console.error("Error getting user by username:",e),e}},U7=async t=>{try{const e=PI(),n={familyname:t,familyID:e,users:[]};return await If(Pi(Qn,Zp,e),{familyname:t,familyID:e}),console.log(`Family created with ID: ${e}`),n}catch(e){throw console.error("Error creating family:",e),e}},X2=async(t,e,n)=>{try{const r=PI(),i={username:t,email:e,familyID:n,userID:r};return await If(Pi(Qn,Nf,r),i),console.log(`User created with ID: ${r}`),i}catch(r){throw console.error("Error creating user:",r),r}},j7=async t=>{try{const e=Pi(Qn,Zp,t),n=await xl(e);if(n.exists()){const r=n.data(),i=await DI(t);return{familyname:r.familyname,familyID:r.familyID,users:i}}return null}catch(e){throw console.error("Error getting family by ID:",e),e}},DI=async t=>{try{const e=Rp(yp(Qn,Nf),Np("familyID","==",t)),n=await Pp(e),r=[];return n.forEach(i=>{const o=i.data();r.push({username:o.username,email:o.email,familyID:o.familyID,userID:o.userID})}),r}catch(e){throw console.error("Error getting users by family ID:",e),e}},$7=async t=>{try{const e=Pi(Qn,Zp,t),n=await xl(e);if(n.exists())return n.data().familyname;console.log(`No family found with id: ${t}`);return}catch(e){throw console.error("Error getting family name by familyId:",e),e}},z7=async(t,e)=>{try{const n=Pi(Qn,Of,t);(await xl(n)).exists()?await CA(n,{[e.id]:e}):await If(n,{[e.id]:e})}catch(n){throw console.error(`Error adding item to family ${t}:`,n),n}},yu=async(t,e)=>{try{const n=Pi(Qn,Of,t);await CA(n,{[e.id]:e})}catch(n){throw console.error(`Error updating item in family ${t}:`,n),n}},H7=async(t,e)=>{try{const n=Pi(Qn,Of,t),r=await xl(n);if(r.exists()){const i=r.data();delete i[e],await If(n,i)}}catch(n){throw console.error(`Error deleting item ${e} from family ${t}:`,n),n}},W7=async t=>{try{const e=Pi(Qn,Of,t),n=await xl(e);if(n.exists()){const r=n.data();return Object.values(r)}return[]}catch(e){throw console.error(`Error getting items for family ${t}:`,e),e}},xt=[];for(let t=0;t<256;++t)xt.push((t+256).toString(16).slice(1));function G7(t,e=0){return(xt[t[e+0]]+xt[t[e+1]]+xt[t[e+2]]+xt[t[e+3]]+"-"+xt[t[e+4]]+xt[t[e+5]]+"-"+xt[t[e+6]]+xt[t[e+7]]+"-"+xt[t[e+8]]+xt[t[e+9]]+"-"+xt[t[e+10]]+xt[t[e+11]]+xt[t[e+12]]+xt[t[e+13]]+xt[t[e+14]]+xt[t[e+15]]).toLowerCase()}let nd;const K7=new Uint8Array(16);function X7(){if(!nd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");nd=crypto.getRandomValues.bind(crypto)}return nd(K7)}const q7=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),q2={randomUUID:q7};function Y7(t,e,n){var i;if(q2.randomUUID&&!e&&!t)return q2.randomUUID();t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??X7();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(n=n||0,n<0||n+16>e.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let o=0;o<16;++o)e[n+o]=r[o];return e}return G7(r)}class kI{constructor(e){this.familyID=e}async fetchItems(){try{if(!this.familyID||typeof this.familyID!="string"||this.familyID.trim()==="")throw new Error(`Invalid familyID: ${this.familyID}. Cannot fetch items without a valid family ID.`);console.log(`Fetching items for family: ${this.familyID}`);const e=await W7(this.familyID);return Array.isArray(e)?(console.log(`Successfully fetched ${e.length} items for family ${this.familyID}`),e):(console.warn("getFamilyItems did not return an array, returning empty array"),[])}catch(e){if(console.error("Error fetching items for family:",this.familyID,e),e instanceof Error){if(e.message.includes("permission")||e.message.includes("unauthorized"))throw new Error("You do not have permission to access this family's items.");if(e.message.includes("network")||e.message.includes("offline"))throw new Error("Network error. Please check your connection and try again.");if(e.message.includes("Invalid familyID"))throw e}throw new Error("Failed to load family items. Please try again.")}}async fetchItemsWithRetry(e=3){let n;for(let r=1;r<=e;r++)try{return await this.fetchItems()}catch(i){if(n=i,console.warn(`Fetch attempt ${r} failed:`,i),i instanceof Error&&i.message.includes("Invalid familyID"))throw i;if(r<e){const o=Math.pow(2,r-1)*1e3;await new Promise(s=>setTimeout(s,o))}}throw n}async processBarcodeSubmit(e,n){try{const r=n.find(i=>i.barcode===e);if(r){const i={...r,amountInStock:Math.min(20,r.amountInStock+1)};return await yu(this.familyID,i),{type:"updated",updatedItem:i}}else return{type:"new_item_needed",barcode:e}}catch(r){throw console.error("Error processing barcode:",r),new Error("Failed to process barcode. Please try again.")}}async addNewItem(e,n,r,i,o){try{if(!this.familyID||typeof this.familyID!="string")throw new Error(`Invalid familyID: ${this.familyID} (type: ${typeof this.familyID})`);const s={id:Y7(),barcode:e,name:n,icon:r,category:i,brand:o,amountInStock:1};return console.log("About to call addItemToFamily with:",{familyID:this.familyID,newItem:s}),await z7(this.familyID,s),s}catch(s){throw console.error("Error adding item:",s),new Error("Failed to add item. Please try again.")}}async updateItem(e,n,r,i,o,s){try{const a={...e,barcode:n,name:r,icon:i,category:o,brand:s};return await yu(this.familyID,a),a}catch(a){throw console.error("Error editing item:",a),new Error("Failed to update item. Please try again.")}}async increaseItemStock(e){try{const n={...e,amountInStock:Math.min(20,e.amountInStock+1)};return console.log("increase",{item:e}),await yu(this.familyID,n),n}catch(n){throw console.error("Error increasing amount:",n),new Error("Failed to update item quantity. Please try again.")}}async decreaseItemStock(e){try{const n={...e,amountInStock:Math.max(0,e.amountInStock-1)};return console.log("decrease",{item:e}),await yu(this.familyID,n),n}catch(n){throw console.error("Error decreasing amount:",n),new Error("Failed to update item quantity. Please try again.")}}async removeItem(e){try{await H7(this.familyID,e)}catch(n){throw console.error("Error removing item:",n),new Error("Failed to remove item. Please try again.")}}updateFamilyID(e){this.familyID=e}}const MI=H.createContext(void 0),fo=()=>{const t=H.useContext(MI);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Q7=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.maxTouchPoints!==void 0&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),rd=()=>{const t=new URLSearchParams(window.location.search);console.log("is likely",{urlParams:t},"window:",window.location.search);const e=t.has("state")||t.has("code")||t.has("authuser")||t.has("prompt")||window.location.hash.includes("access_token")||window.location.search.includes("authuser")||window.location.search.includes("oauth_token"),n=localStorage.getItem("firebaseAuthRedirect")==="true",r=sessionStorage.getItem("firebase:redirectUser")!==null;return console.log("Redirect detection:",{hasFirebaseParams:e,hasStoredRedirectState:n,hasSessionRedirectState:r,url:window.location.href}),e||n||r},Z7=({children:t})=>{const[e,n]=H.useState(null),[r,i]=H.useState(null),[o,s]=H.useState(null),[a,l]=H.useState(null),[u,c]=H.useState(!0),[h,d]=H.useState(!1),[p,m]=H.useState(null),[w,I]=H.useState(!1),y=te=>{te!=null&&te.familyID?(console.log(`Setting family context for user ${te.username}, familyID: ${te.familyID}`),i(te.familyID),o?o.updateFamilyID(te.familyID):s(new kI(te.familyID))):(console.log("Clearing family context - no user or familyID"),i(null),s(null))},v=te=>{localStorage.setItem("lastLoggedInUser",te)},x=()=>localStorage.getItem("lastLoggedInUser"),T=()=>{localStorage.removeItem("lastLoggedInUser")},P=te=>{localStorage.setItem("pendingRedirectAuth",JSON.stringify(te))},k=()=>{const te=localStorage.getItem("pendingRedirectAuth");return te?JSON.parse(te):null},A=()=>{localStorage.removeItem("pendingRedirectAuth"),localStorage.removeItem("firebaseAuthRedirect"),localStorage.removeItem("firebaseAuthRedirectTime")},E=async te=>{const Y=te.email;if(!Y)throw new Error("No email found in Google account");const X=await td(Y);return X?(n(X),y(X),v(Y),{success:!0}):{success:!1,needsSetup:!0,email:Y}};H.useEffect(()=>{let te=!1,Y=!1;(async()=>{console.log("Initializing auth...");const W=rd();console.log("Is likely redirect scenario:",W);const Z=await O2(Co,ga);if(Z!=null&&Z.user){I(!0),await new Promise(q=>setTimeout(q,100));try{console.log("going to redeirect",{browserPopupRedirectResolver:ga});const q=await O2(Co,ga);if(console.log("Initial redirect result check:",q),q!=null&&q.user){console.log("Found redirect result with user:",q.user.email),te=!0,A(),l(q.user);const le=await E(q.user);le.success?(console.log("Redirect login successful"),m(null)):le.needsSetup&&(console.log("Redirect login needs setup"),m({needsSetup:!0,email:le.email}),P({needsSetup:!0,email:le.email}))}else console.log("No redirect result found despite redirect indicators")}catch(q){console.log("CATCH"),console.error("Error checking redirect result:",q)}finally{console.log("FINALLY"),I(!1)}}Y=!0})();const j=Q5(Co,async W=>{if(console.log("Auth state changed:",W==null?void 0:W.email),l(W),!Y){console.log("Waiting for initialization to complete...");return}if(te){console.log("Redirect already processed, skipping auth state change"),c(!1);return}if(W!=null&&W.email){console.log("Firebase user authenticated:",W.email);try{if(rd()&&!te){console.log("Processing missed redirect in auth state change"),te=!0,A();const q=await E(W);q.success?m(null):q.needsSetup&&(m({needsSetup:!0,email:q.email}),P({needsSetup:!0,email:q.email}))}else{console.log("Regular auth state change, checking database for user");const q=await td(W.email);if(q)console.log("Found existing user:",q.username),n(q),y(q),v(W.email),m(null),A();else{console.log("User not found in database, checking for pending redirect auth");const le=k();le&&le.email===W.email?(console.log("Found matching pending redirect auth state"),m(le)):(console.log("Firebase user exists but no database user"),m({needsSetup:!0,email:W.email}))}}}catch(Z){console.error("Error in auth state change handler:",Z)}}else if(console.log("No Firebase user, checking for last logged in user"),m(null),A(),!rd()){const Z=x();if(Z)try{const q=await td(Z);q?(console.log("Auto-logging in last user:",q.username),n(q),y(q)):T()}catch(q){console.error("Error loading last user:",q),T()}}c(!1)});return()=>j()},[]);const S=async te=>{try{c(!0);const Y=await V7(te);return Y!=null&&Y.familyID?(console.log(`User ${te} logged in successfully with familyID: ${Y.familyID}`),n(Y),y(Y),Y.email&&v(Y.email),!0):Y?(console.error(`User ${te} found but has no familyID`),!1):(console.log(`Login failed: User ${te} not found`),!1)}catch(Y){return console.error("Error during login:",Y),!1}finally{c(!1)}},b=async()=>{try{console.log("Starting Google login"),d(!0);const te=new Ar;te.setCustomParameters({prompt:"select_account"});const Y=Q7();if(console.log("Device type:",Y?"Mobile":"Desktop"),Y)return console.log("Using signInWithRedirect for mobile"),localStorage.setItem("firebaseAuthRedirect","true"),localStorage.setItem("firebaseAuthRedirectTime",Date.now().toString()),console.log("local storage",localStorage.getItem("firebaseAuthRedirect")),m(null),A(),await Ik(Co,te,ga),{success:!1,needsSetup:!1};{console.log("Using signInWithPopup for desktop");const X=await yk(Co,te);return console.log("Popup result:",X),await E(X.user)}}catch(te){return console.error("Error during Google login:",te),A(),{success:!1}}finally{d(!1)}},D=async(te,Y,X)=>{try{d(!0);const j=await U7(Y),W=await X2(X,te,j.familyID);return n(W),y(W),v(te),m(null),A(),!0}catch(j){return console.error("Error creating new family:",j),!1}finally{d(!1)}},M=async(te,Y,X)=>{try{if(d(!0),!await j7(Y))return{success:!1,error:"Family not found. Please check the Family ID."};const W=await X2(X,te,Y);return n(W),y(W),v(te),m(null),A(),{success:!0}}catch(j){return console.error("Error joining family:",j),{success:!1,error:"Failed to join family. Please try again."}}finally{d(!1)}},O=async()=>{try{await Z5(Co),n(null),l(null),y(null),T(),m(null),A(),console.log("User logged out successfully")}catch(te){console.error("Error during logout:",te)}};H.useEffect(()=>{p!=null&&p.needsSetup&&(p!=null&&p.email)&&!e&&console.log("Pending redirect auth setup needed for:",p.email)},[p,e]);const he={user:e,familyID:r,itemOperationsService:o,firebaseUser:a,login:S,loginWithGoogle:b,createNewFamily:D,joinExistingFamily:M,logout:O,isLoading:u,isAuthenticating:h,pendingRedirectAuth:p,isProcessingRedirect:w};return N.jsx(MI.Provider,{value:he,children:t})},LI=({isOpen:t,onClose:e,email:n})=>{const[r,i]=H.useState("choice"),[o,s]=H.useState(""),[a,l]=H.useState(""),[u,c]=H.useState(""),[h,d]=H.useState(""),[p,m]=H.useState(!1),{createNewFamily:w,joinExistingFamily:I}=fo(),{t:y}=kn(),v=async k=>{k.preventDefault(),d(""),m(!0);try{await w(n,o.trim(),u.trim())?T():d("Failed to create family. Please try again.")}catch{d("An error occurred. Please try again.")}finally{m(!1)}},x=async k=>{k.preventDefault(),d(""),m(!0);try{const A=await I(n,a.trim(),u.trim());A.success?T():d(A.error||"Failed to join family. Please try again.")}catch{d("An error occurred. Please try again.")}finally{m(!1)}},T=()=>{i("choice"),s(""),l(""),c(""),d(""),m(!1),e()},P=()=>{i("choice"),d("")};return t?N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:N.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 max-w-sm mx-4",children:[r==="choice"&&N.jsxs(N.Fragment,{children:[N.jsx("h2",{className:"text-xl font-bold mb-4",children:y("login.welcome")}),N.jsx("p",{className:"text-gray-600 mb-6",children:y("login.noAccount",{email:n})}),N.jsxs("div",{className:"space-y-3",children:[N.jsx("button",{onClick:()=>i("createFamily"),className:"w-full px-4 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium",children:y("login.createFamily")}),N.jsx("button",{onClick:()=>i("joinFamily"),className:"w-full px-4 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium",children:y("login.joinFamily")}),N.jsx("button",{onClick:T,className:"w-full px-4 py-3 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50",children:y("buttons.cancel")})]})]}),r==="createFamily"&&N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"flex items-center mb-4",children:[N.jsx("button",{onClick:P,className:"mr-3 text-gray-500 hover:text-gray-700",children:y("buttons.backIcon")}),N.jsx("h2",{className:"text-xl font-bold",children:y("login.createFamily")})]}),N.jsxs("form",{onSubmit:v,children:[N.jsxs("div",{className:"mb-4",children:[N.jsx("label",{htmlFor:"familyName",className:"block text-sm font-medium text-gray-700 mb-2",children:y("login.familyName")}),N.jsx("input",{id:"familyName",type:"text",value:o,onChange:k=>s(k.target.value),placeholder:y("login.familyNamePlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:p,required:!0})]}),N.jsxs("div",{className:"mb-4",children:[N.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:y("login.yourUsername")}),N.jsx("input",{id:"username",type:"text",value:u,onChange:k=>c(k.target.value),placeholder:y("header.enterUsername"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:p,required:!0})]}),h&&N.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:h}),N.jsxs("div",{className:"flex gap-3",children:[N.jsx("button",{type:"button",onClick:P,disabled:p,className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:y("buttons.back")}),N.jsx("button",{type:"submit",disabled:p||!o.trim()||!u.trim(),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:y(p?"login.creating":"buttons.create")})]})]})]}),r==="joinFamily"&&N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"flex items-center mb-4",children:[N.jsx("button",{onClick:P,className:"mr-3 text-gray-500 hover:text-gray-700",children:y("buttons.backIcon")}),N.jsx("h2",{className:"text-xl font-bold",children:y("login.joinFamily")})]}),N.jsxs("form",{onSubmit:x,children:[N.jsxs("div",{className:"mb-4",children:[N.jsx("label",{htmlFor:"familyID",className:"block text-sm font-medium text-gray-700 mb-2",children:y("login.familyID")}),N.jsx("input",{id:"familyID",type:"text",value:a,onChange:k=>l(k.target.value),placeholder:y("login.enterFamilyID"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",disabled:p,required:!0})]}),N.jsxs("div",{className:"mb-4",children:[N.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:y("login.yourUsername")}),N.jsx("input",{id:"username",type:"text",value:u,onChange:k=>c(k.target.value),placeholder:y("header.enterUsername"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",disabled:p,required:!0})]}),h&&N.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:h}),N.jsxs("div",{className:"flex gap-3",children:[N.jsx("button",{type:"button",onClick:P,disabled:p,className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:y("buttons.back")}),N.jsx("button",{type:"submit",disabled:p||!a.trim()||!u.trim(),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:y(p?"login.joining":"buttons.join")})]})]})]})]})}):null},J7=({isOpen:t,onClose:e})=>{const[n,r]=H.useState(""),[i,o]=H.useState(!1),[s,a]=H.useState(!1),[l,u]=H.useState(""),{loginWithGoogle:c,pendingRedirectAuth:h}=fo(),{t:d}=kn();H.useEffect(()=>{t&&(h!=null&&h.needsSetup)&&(h!=null&&h.email)&&(u(h.email),a(!0))},[h,t]);const p=async()=>{r(""),o(!0);try{const y=await c();y.success?e():y.needsSetup&&y.email?(u(y.email),a(!0)):r("Failed to sign in with Google. Please try again.")}catch{r("An error occurred during sign in. Please try again.")}finally{setTimeout(()=>o(!1),1e3)}},m=()=>{o(!1),a(!1),u(""),r(""),e()},w=()=>{a(!1),u(""),m()},I=()=>{a(!1),u(""),e()};return t?N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:N.jsxs("div",{className:"bg-white rounded-lg p-6 w-80 max-w-sm mx-4",children:[N.jsx("h2",{className:"text-xl font-bold mb-4",children:d("header.switchUser")}),N.jsxs("div",{className:"space-y-4",children:[N.jsx("p",{className:"text-gray-600 text-sm",children:d("login.googleSignIn")}),N.jsxs("button",{onClick:p,disabled:i,className:"w-full flex items-center justify-center gap-3 px-4 py-3 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[N.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[N.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),N.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),N.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),N.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),d(i?"login.signing":"login.continueWithGoogle")]}),n&&N.jsx("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded text-sm",children:n}),N.jsx("button",{onClick:m,disabled:i,className:"w-full px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:d("buttons.cancel")})]})]})}),N.jsx(LI,{isOpen:s,onClose:w,email:l,onSuccess:I})]}):null};const eM=({isOpen:t,onClose:e})=>{const{user:n}=fo(),{t:r}=kn(),[i,o]=H.useState(""),[s,a]=H.useState([]),[l,u]=H.useState(!1),[c,h]=H.useState("");H.useEffect(()=>{t&&(n!=null&&n.familyID)&&d()},[t,n==null?void 0:n.familyID]);const d=async()=>{if(n!=null&&n.familyID){u(!0),h("");try{const[p,m]=await Promise.all([$7(n.familyID),DI(n.familyID)]);o(p||"Unknown Family"),a(m||[])}catch(p){console.error("Error loading family data:",p),h("Failed to load family information")}finally{u(!1)}}};return t?N.jsx("div",{className:"modal-overlay",onClick:e,children:N.jsxs("div",{className:"settings-modal-content",onClick:p=>p.stopPropagation(),children:[N.jsxs("div",{className:"settings-header",children:[N.jsx("h2",{children:r("settings.title","")}),N.jsx("button",{className:"settings-close-button-x",onClick:e,"aria-label":r("buttons.close","Close"),children:""})]}),N.jsx("div",{className:"settings-content",children:l?N.jsxs("div",{className:"settings-loading",children:[N.jsx("div",{className:"loading-spinner"}),N.jsx("p",{children:r("settings.loading","Loading...")})]}):c?N.jsxs("div",{className:"settings-error",children:[N.jsx("p",{children:c}),N.jsx("button",{onClick:d,className:"retry-button",children:r("buttons.retry","Retry")})]}):N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"settings-section",children:[N.jsx("h3",{children:r("settings.userInfo","User Information")}),N.jsxs("div",{className:"settings-item",children:[N.jsxs("label",{children:[r("settings.username","Username"),":"]}),N.jsx("span",{children:(n==null?void 0:n.username)||"N/A"})]}),N.jsxs("div",{className:"settings-item",children:[N.jsxs("label",{children:[r("settings.email","Email"),":"]}),N.jsx("span",{children:(n==null?void 0:n.email)||"N/A"})]})]}),N.jsxs("div",{className:"settings-section",children:[N.jsx("h3",{children:r("settings.familyInfo","Family Information")}),N.jsxs("div",{className:"settings-item",children:[N.jsxs("label",{children:[r("settings.familyName","Family Name"),":"]}),N.jsx("span",{children:i})]}),N.jsxs("div",{className:"settings-item",children:[N.jsxs("label",{children:[r("settings.familyId","Family ID"),":"]}),N.jsx("span",{className:"family-id",children:(n==null?void 0:n.familyID)||"N/A"})]})]}),N.jsxs("div",{className:"settings-section",children:[N.jsx("h3",{children:r("settings.familyMembers","Family Members")}),s.length>0?N.jsx("div",{className:"family-members-list",children:s.map(p=>N.jsx("div",{className:"family-member-item",children:N.jsxs("div",{className:"member-info",children:[N.jsx("strong",{children:p.username}),p.userID===(n==null?void 0:n.userID)&&N.jsx("span",{className:"current-user-badge",children:r("settings.currentUser","(You)")}),N.jsx("div",{className:"member-email",children:p.email})]})},p.userID))}):N.jsx("p",{className:"no-members",children:r("settings.noMembers","No family members found")})]})]})}),N.jsx("div",{className:"settings-footer",children:N.jsx("button",{onClick:e,className:"settings-close-button",children:r("buttons.close","Close")})})]})}):null},tM=()=>{const[t,e]=H.useState(!1),[n,r]=H.useState(!1),[i,o]=H.useState(!1),[s,a]=H.useState(!1),l=H.useRef(null),{t:u}=kn(),{user:c}=fo(),h=()=>e(!t),d=w=>{l.current&&!l.current.contains(w.target)&&e(!1)};H.useEffect(()=>(document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)),[]);const p=()=>{o(!0),e(!1)},m=()=>{a(!0),e(!1)};return N.jsxs(N.Fragment,{children:[N.jsxs("header",{className:"header",children:[N.jsx("div",{className:"header-left",children:c&&N.jsxs("span",{className:"logged-in-user",children:["(",c.username,")"]})}),N.jsx("div",{className:"header-center",children:N.jsx("h1",{className:"header-title",children:u("header.appTitle")})}),N.jsxs("div",{className:"header-right",ref:l,children:[N.jsx("button",{className:"menu-button",onClick:h,"aria-label":"Menu",children:N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[N.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),N.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),N.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]})}),t&&N.jsxs("div",{className:"menu-dropdown",children:[N.jsx("div",{onClick:p,children:u("header.switchUser")}),N.jsx("div",{onClick:m,children:u("header.settings")}),N.jsx("div",{onClick:()=>{r(!0),e(!1)},children:u("header.about")})]})]}),n&&N.jsx("div",{className:"modal-overlay",onClick:()=>r(!1),children:N.jsxs("div",{className:"about-modal-content",onClick:w=>w.stopPropagation(),children:[N.jsx("h2",{children:u("header.appTitle")}),N.jsxs("p",{children:[u("about.version"),": ",mR.version]}),N.jsx("button",{onClick:()=>r(!1),className:"about-close-button",children:u("buttons.close")})]})})]}),N.jsx(J7,{isOpen:i,onClose:()=>o(!1)}),N.jsx(eM,{isOpen:s,onClose:()=>a(!1)})]})},nM=()=>{const[t,e]=H.useState(""),[n,r]=H.useState(!1),[i,o]=H.useState(!1),[s,a]=H.useState(""),{loginWithGoogle:l,pendingRedirectAuth:u}=fo(),{isProcessingRedirect:c,firebaseUser:h}=fo(),{t:d}=kn();H.useEffect(()=>{u!=null&&u.needsSetup&&(u!=null&&u.email)&&(a(u.email),o(!0))},[u]),H.useEffect(()=>{console.log("Auth debug:",{isProcessingRedirect:c,pendingRedirectAuth:u,firebaseUser:h==null?void 0:h.email,url:window.location.href})},[c,u,h]);const p=async()=>{e(""),r(!0);try{const w=await l();w.success?console.log("Login successful"):w.needsSetup&&w.email?(a(w.email),o(!0)):!w.success&&!w.needsSetup?console.log("Redirect flow initiated or other non-error case"):e("Failed to sign in with Google. Please try again.")}catch(w){console.error("Login error:",w),e("An error occurred during sign in. Please try again.")}finally{setTimeout(()=>r(!1),1e3)}},m=()=>{o(!1),a("")};return N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[N.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:N.jsxs("div",{className:"text-center",children:[N.jsxs("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:[d("login.welcomeTo"),d("header.appTitle")]}),N.jsx("p",{className:"mt-2 text-sm text-gray-600",children:d("login.signInText")})]})}),N.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:N.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:N.jsxs("div",{className:"space-y-6",children:[N.jsxs("button",{onClick:p,disabled:n,className:"w-full flex justify-center items-center gap-3 py-3 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[N.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[N.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),N.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),N.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),N.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),d(n?"login.signing":"login.continueWithGoogle")]}),t&&N.jsx("div",{className:"rounded-md bg-red-50 p-4",children:N.jsxs("div",{className:"flex",children:[N.jsx("div",{className:"flex-shrink-0",children:N.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:N.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),N.jsxs("div",{className:"ml-3",children:[N.jsx("h3",{className:"text-sm font-medium text-red-800",children:d("login.signInFail")}),N.jsx("div",{className:"mt-2 text-sm text-red-700",children:t})]})]})}),N.jsx("div",{className:"text-center",children:N.jsx("p",{className:"text-xs text-gray-500",children:d("login.signingAgreement")})})]})})})]}),N.jsx(LI,{isOpen:i,onClose:m,email:s})]})},rM=()=>{const[t,e]=H.useState([]),[n,r]=H.useState(!1),[i,o]=H.useState(""),[s,a]=H.useState(""),[l,u]=H.useState("all"),[c,h]=H.useState(null),[d,p]=H.useState(null),[m,w]=H.useState(!1),[I,y]=H.useState(null),{user:v,isLoading:x}=fo(),T=H.useRef(null),{t:P}=kn();H.useEffect(()=>{v!=null&&v.familyID&&(T.current=new kI(v.familyID))},[v==null?void 0:v.familyID]),H.useEffect(()=>{console.log("app - fetching items..."),(async()=>{if(v&&T.current)try{w(!0),y(null);const X=await T.current.fetchItems();e(X)}catch(X){y(X instanceof Error?X.message:"Failed to load items")}finally{w(!1)}})()},[v]);const k=async Y=>{if(!(!v||!T.current))try{y(null);const X=await T.current.processBarcodeSubmit(Y,t);X.type==="updated"&&X.updatedItem?e(j=>j.map(W=>W.id===X.updatedItem.id?X.updatedItem:W)):X.type==="new_item_needed"&&X.barcode&&(o(X.barcode),r(!0))}catch(X){y(X instanceof Error?X.message:"Failed to process barcode")}},A=async(Y,X,j,W)=>{if(!(!v||!T.current))try{y(null);const Z=await T.current.addNewItem(i,Y,X,j,W);e(q=>[...q,Z]),r(!1),o("")}catch(Z){y(Z instanceof Error?Z.message:"Failed to add item")}},E=()=>{r(!1),o(""),p(null),y(null)},S=Y=>{const X=t.find(j=>j.id===Y);X&&(p(X),o(X.barcode),r(!0))},b=async(Y,X,j,W,Z)=>{if(!(!v||!d||!T.current))try{y(null);const q=await T.current.updateItem(d,Y,X,j,W,Z);e(le=>le.map(Ce=>Ce.id===q.id?q:Ce)),r(!1),p(null)}catch(q){y(q instanceof Error?q.message:"Failed to update item")}},D=async Y=>{if(!(!v||!T.current))try{y(null);const X=t.find(j=>j.id===Y);if(X){console.log("app increase",{itemToUpdate:X});const j=await T.current.increaseItemStock(X);e(W=>W.map(Z=>Z.id===j.id?j:Z))}}catch(X){y(X instanceof Error?X.message:"Failed to update item quantity")}},M=async Y=>{if(!(!v||!T.current))try{y(null);const X=t.find(j=>j.id===Y);if(X){const j=await T.current.decreaseItemStock(X);e(W=>W.map(Z=>Z.id===j.id?j:Z))}}catch(X){y(X instanceof Error?X.message:"Failed to update item quantity")}},O=Y=>{h(Y)},he=async()=>{if(!(!v||!c||!T.current))try{y(null),await T.current.removeItem(c),e(Y=>Y.filter(X=>X.id!==c)),h(null)}catch(Y){y(Y instanceof Error?Y.message:"Failed to remove item")}},te=t.filter(Y=>{const X=Y.name.toLowerCase().includes(s.toLowerCase())||Y.barcode.includes(s),j=l==="all"||l==="inStock"&&Y.amountInStock>0||l==="outOfStock"&&Y.amountInStock===0;return X&&j});return x||m?(console.log("app loading",{authLoading:x,isLoading:m}),N.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:N.jsxs("div",{className:"text-center",children:[N.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),N.jsx("p",{className:"mt-4 text-gray-600",children:P("login.loading")})]})})):(console.log("app user",{user:v}),v?N.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 max-w-md mx-auto",children:[N.jsx(tM,{}),I&&N.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:[I,N.jsx("button",{onClick:()=>y(null),className:"ml-2 text-red-900 hover:text-red-700",children:""})]}),N.jsx(eb,{onBarcodeSubmit:k}),N.jsx(tb,{searchTerm:s,setSearchTerm:a,filter:l,setFilter:u,items:t}),N.jsx(ib,{items:te,totalItems:t.length,onIncrease:D,onDecrease:M,onEdit:S,onRemove:O}),N.jsx(lR,{isOpen:n,onClose:E,onAdd:A,onEdit:b,barcode:i,editItem:d}),N.jsx(uR,{isOpen:!!c,onClose:()=>h(null),onConfirm:he})]}):N.jsx(nM,{}))},iM=()=>N.jsx(Z7,{children:N.jsx(rM,{})});id.createRoot(document.getElementById("root")).render(N.jsx(RT.StrictMode,{children:N.jsx(iM,{})}));
